// Code generated by assets compiler. DO NOT EDIT.

package assets

var (
	Assets = map[string]string{
		"/css/index.css":           "html, body, #terminal {\n    background: black;\n    height: 100%;\n    width: 100%;\n    padding: 0%;\n    margin: 0%;\n}",
		"/css/xterm.css":           "/**\n * Copyright (c) 2014 The xterm.js authors. All rights reserved.\n * Copyright (c) 2012-2013, Christopher Jeffrey (MIT License)\n * https://github.com/chjj/term.js\n * @license MIT\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n * THE SOFTWARE.\n *\n * Originally forked from (with the author's permission):\n *   Fabrice Bellard's javascript vt100 for jslinux:\n *   http://bellard.org/jslinux/\n *   Copyright (c) 2011 Fabrice Bellard\n *   The original design remains. The terminal itself\n *   has been extended to include xterm CSI codes, among\n *   other features.\n */\n\n/**\n *  Default styles for xterm.js\n */\n\n.xterm {\n    font-feature-settings: \"liga\" 0;\n    position: relative;\n    user-select: none;\n    -ms-user-select: none;\n    -webkit-user-select: none;\n}\n\n.xterm.focus,\n.xterm:focus {\n    outline: none;\n}\n\n.xterm .xterm-helpers {\n    position: absolute;\n    top: 0;\n    /**\n     * The z-index of the helpers must be higher than the canvases in order for\n     * IMEs to appear on top.\n     */\n    z-index: 5;\n}\n\n.xterm .xterm-helper-textarea {\n    /*\n     * HACK: to fix IE's blinking cursor\n     * Move textarea out of the screen to the far left, so that the cursor is not visible.\n     */\n    position: absolute;\n    opacity: 0;\n    left: -9999em;\n    top: 0;\n    width: 0;\n    height: 0;\n    z-index: -5;\n    /** Prevent wrapping so the IME appears against the textarea at the correct position */\n    white-space: nowrap;\n    overflow: hidden;\n    resize: none;\n}\n\n.xterm .composition-view {\n    /* TODO: Composition position got messed up somewhere */\n    background: #000;\n    color: #FFF;\n    display: none;\n    position: absolute;\n    white-space: nowrap;\n    z-index: 1;\n}\n\n.xterm .composition-view.active {\n    display: block;\n}\n\n.xterm .xterm-viewport {\n    /* On OS X this is required in order for the scroll bar to appear fully opaque */\n    background-color: #000;\n    overflow-y: scroll;\n    cursor: default;\n    position: absolute;\n    right: 0;\n    left: 0;\n    top: 0;\n    bottom: 0;\n}\n\n.xterm .xterm-screen {\n    position: relative;\n}\n\n.xterm .xterm-screen canvas {\n    position: absolute;\n    left: 0;\n    top: 0;\n}\n\n.xterm .xterm-scroll-area {\n    visibility: hidden;\n}\n\n.xterm-char-measure-element {\n    display: inline-block;\n    visibility: hidden;\n    position: absolute;\n    top: 0;\n    left: -9999em;\n    line-height: normal;\n}\n\n.xterm {\n    cursor: text;\n}\n\n.xterm.enable-mouse-events {\n    /* When mouse events are enabled (eg. tmux), revert to the standard pointer cursor */\n    cursor: default;\n}\n\n.xterm.xterm-cursor-pointer {\n    cursor: pointer;\n}\n\n.xterm.column-select.focus {\n    /* Column selection mode */\n    cursor: crosshair;\n}\n\n.xterm .xterm-accessibility,\n.xterm .xterm-message {\n    position: absolute;\n    left: 0;\n    top: 0;\n    bottom: 0;\n    right: 0;\n    z-index: 10;\n    color: transparent;\n}\n\n.xterm .live-region {\n    position: absolute;\n    left: -9999px;\n    width: 1px;\n    height: 1px;\n    overflow: hidden;\n}\n\n.xterm-dim {\n    opacity: 0.5;\n}\n\n.xterm-underline {\n    text-decoration: underline;\n}\n",
		"/css/xterm_customize.css": ".terminal {\n    font-family: \"DejaVu Sans Mono\", \"Everson Mono\", FreeMono, Menlo, Terminal, monospace, \"Apple Symbols\";\n}\n\n.xterm-overlay {\n    font-family: \"DejaVu Sans Mono\", \"Everson Mono\", FreeMono, Menlo, Terminal, monospace, \"Apple Symbols\";\n    border-radius: 15px;\n    font-size: xx-large;\n    color: black;\n    background: white;\n    opacity: 0.75;\n    padding: 0.2em 0.5em 0.2em 0.5em;\n    position: absolute;\n    top: 50%;\n    left: 50%;\n    transform: translate(-50%, -50%);\n    user-select: none;\n    transition: opacity 180ms ease-in;\n}",
		"/favicon.ico":             "GIF89a\x10\x00\x10\x00\xf1\x00\x00\x00\x00\x00\x00\xe66\x00\x00\x00\x00\x00\x00!\xf9\x04\tF\x00\x02\x00!\xff\vNETSCAPE2.0\x03\x01\x00\x00\x00,\x00\x00\x00\x00\x10\x00\x10\x00\x00\x02\xe7\x04\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x10\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\b\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x04\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\b\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x10\x00\x00\x00\x81@ \x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\n\x00\x00!\xf9\x04\tF\x00\x02\x00,\x00\x00\x00\x00\x10\x00\x10\x00\x00\x02\xe7\x04\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x10\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\b\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x04\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\b\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x10\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\n\x00\x00;",
		"/index.html":              "<!doctype html>\n<html>\n  <head>\n    <title></title>\n    <link rel=\"icon\" type=\"image/x-icon\" href=\"favicon.ico\">\n    <link rel=\"stylesheet\" href=\"./css/index.css\" />\n    <link rel=\"stylesheet\" href=\"./css/xterm.css\" />\n    <link rel=\"stylesheet\" href=\"./css/xterm_customize.css\" />\n  </head>\n  <body>\n    <div id=\"terminal\"></div>\n    <script src=\"./js/gotty-bundle.js\"></script>\n  </body>\n</html>\n",
		"/js/gotty-bundle.js":      "!function(e){function t(i){if(r[i])return r[i].exports;var o=r[i]={i:i,l:!1,exports:{}};return e[i].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var r={};t.m=e,t.c=r,t.d=function(e,r,i){t.o(e,r)||Object.defineProperty(e,r,{enumerable:!0,get:i})},t.r=function(e){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(e,\"__esModule\",{value:!0})},t.t=function(e,r){if(1&r&&(e=t(e)),8&r)return e;if(4&r&&\"object\"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(t.r(i),Object.defineProperty(i,\"default\",{enumerable:!0,value:e}),2&r&&\"string\"!=typeof e)for(var o in e)t.d(i,o,function(t){return e[t]}.bind(null,o));return i},t.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,\"a\",r),r},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p=\"\",t(t.s=1)}([function(e,t,r){\"use strict\";var i=Math.abs,o=Math.max,n=Math.floor,s=Math.ceil,a=Math.round,l=Math.min,c=String.fromCharCode;(function(e,r){var h=String.prototype;\n/*!\n * libapps (https://npmjs.com/package/libapps)\n * @license BSD-3-Clause\n * @version 1.0.0\n * ==libapps/LICENSE==\n * Copyright (c) 2006-2009 The Chromium OS Authors. All rights reserved.\n * \n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n * \n * 1. Redistributions of source code must retain the above copyright notice,\n *    this list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright\n *    notice, this list of conditions and the following disclaimer in the\n *    documentation and/or other materials provided with the distribution.\n * 3. Neither the name of Google Inc. nor the names of its\n *    contributors may be used to endorse or promote products derived from\n *    this software without specific prior written permission.\n * \n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\"\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE\n * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE\n * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\n * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF\n * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS\n * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN\n * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\n * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\n * POSSIBILITY OF SUCH DAMAGE.\n */const u={initCallbacks_:[],registerInit:function(e,t){return u.initCallbacks_.push([e,t]),t},init:function(e,t){var r=u.initCallbacks_,i=function(){if(r.length){var o=r.shift();t&&t(\"init: \"+o[0]),o[1](i)}else e()};if(\"function\"!=typeof e)throw new Error(\"Missing or invalid argument: onInit\");setTimeout(i,0)}};if(h.padStart||(h.padStart=function(e,t){return 0>=(e-=this.length)?this+\"\":(void 0===t&&(t=\" \"),e>t.length&&(t=t.repeat(e/t.length+1)),t.slice(0,e)+(this+\"\"))}),h.padEnd||(h.padEnd=function(e,t){return 0>=(e-=this.length)?this+\"\":(void 0===t&&(t=\" \"),e>t.length&&(t=t.repeat(e/t.length+1)),this+\"\"+t.slice(0,e))}),!Object.values||!Object.entries){const e=Function.bind.call(Function.call,Array.prototype.reduce),t=Function.bind.call(Function.call,Object.prototype.propertyIsEnumerable),r=Function.bind.call(Function.call,Array.prototype.concat);Object.values||(Object.values=function(i){return e(Reflect.ownKeys(i),(e,o)=>r(e,\"string\"==typeof o&&t(i,o)?[i[o]]:[]),[])}),Object.entries||(Object.entries=function(i){return e(Reflect.ownKeys(i),(e,o)=>r(e,\"string\"==typeof o&&t(i,o)?[[o,i[o]]]:[]),[])})}if(\"function\"!=typeof Promise.prototype.finally){const e=function(e,t){if(!e||\"object\"!=typeof e&&\"function\"!=typeof e)throw new TypeError(\"Assertion failed: Type(O) is not Object\");const r=e.constructor;if(void 0===r)return t;if(!r||\"object\"!=typeof r&&\"function\"!=typeof r)throw new TypeError(\"O.constructor is not an Object\");const i=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.species?r[Symbol.species]:void 0;if(null==i)return t;if(\"function\"==typeof i&&i.prototype)return i;throw new TypeError(\"no constructor found\")},t={finally(t){const r=this;if(\"object\"!=typeof r||null===r)throw new TypeError('\"this\" value is not an Object');const i=e(r,Promise);return\"function\"==typeof t?Promise.prototype.then.call(r,e=>new i(e=>e(t())).then(()=>e),e=>new i(e=>e(t())).then(()=>{throw e})):Promise.prototype.then.call(r,t,t)}};Object.defineProperty(Promise.prototype,\"finally\",{configurable:!0,writable:!0,value:t.finally})}u.array={},u.array.concatTyped=function(...e){let t=0;for(const r of e)t+=r.length;const r=new e[0].constructor(t);let i=0;for(const t of e)r.set(t,i),i+=t.length;return r},u.array.compare=function(e,t){if(null===e||null===t)return null==e&&null==t;if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0},u.codec={},u.codec.codeUnitArrayToString=function(e){let t=\"\";for(let r=0;r<e.length;++r)t+=c(e[r]);return t},u.codec.stringToCodeUnitArray=function(e,t=Array){const r=new t(e.length);for(let t=0;t<e.length;++t)r[t]=e.charCodeAt(t);return r},u.colors={},u.colors.re_={hex16:/#([a-f0-9])([a-f0-9])([a-f0-9])/i,hex24:/#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})/i,rgb:new RegExp(\"^/s*rgb/s*/(/s*(/d{1,3})/s*,/s*(/d{1,3})/s*,/s*(/d{1,3})/s*/)/s*$\".replace(/\\//g,\"\\\\\"),\"i\"),rgba:new RegExp(\"^/s*rgba/s*/(/s*(/d{1,3})/s*,/s*(/d{1,3})/s*,/s*(/d{1,3})/s*(?:,/s*(/d+(?:/./d+)?)/s*)/)/s*$\".replace(/\\//g,\"\\\\\"),\"i\"),rgbx:new RegExp(\"^/s*rgba?/s*/(/s*(/d{1,3})/s*,/s*(/d{1,3})/s*,/s*(/d{1,3})/s*(?:,/s*(/d+(?:/./d+)?)/s*)?/)/s*$\".replace(/\\//g,\"\\\\\"),\"i\"),x11rgb:/^\\s*rgb:([a-f0-9]{1,4})\\/([a-f0-9]{1,4})\\/([a-f0-9]{1,4})\\s*$/i,name:/[a-z][a-z0-9\\s]+/},u.colors.rgbToX11=function(e){function t(e){return e=(257*l(e,255)).toString(16),u.f.zpad(e,4)}var r=e.match(u.colors.re_.rgbx);return r?\"rgb:\"+t(r[1])+\"/\"+t(r[2])+\"/\"+t(r[3]):null},u.colors.x11HexToCSS=function(e){if(!e.startsWith(\"#\"))return null;if(e=e.substr(1),-1==[3,6,9,12].indexOf(e.length))return null;if(e.match(/[^a-f0-9]/i))return null;var t=e.length/3,r=e.substr(0,t),i=e.substr(t,t),o=e.substr(t+t,t);return u.colors.arrayToRGBA([r,i,o].map((function(e){return e=parseInt(e,16),2==t?e:1==t?e<<4:e>>4*(t-2)})))},u.colors.x11ToCSS=function(e){var t=e.match(u.colors.re_.x11rgb);return t?(t.splice(0,1),u.colors.arrayToRGBA(t.map((function(e){return 1==e.length?parseInt(e+e,16):2==e.length?parseInt(e,16):(3==e.length&&(e+=e.substr(2)),a(parseInt(e,16)/257))})))):e.startsWith(\"#\")?u.colors.x11HexToCSS(e):u.colors.nameToRGB(e)},u.colors.hexToRGB=function(e){function t(e){4==e.length&&(e=e.replace(r,(function(e,t,r,i){return\"#\"+t+t+r+r+i+i})));var t=e.match(i);return t?\"rgb(\"+parseInt(t[1],16)+\", \"+parseInt(t[2],16)+\", \"+parseInt(t[3],16)+\")\":null}var r=u.colors.re_.hex16,i=u.colors.re_.hex24;if(e instanceof Array)for(var o=0;o<e.length;o++)e[o]=t(e[o]);else e=t(e);return e},u.colors.rgbToHex=function(e){function t(e){var t=u.colors.crackRGB(e);return t?\"#\"+u.f.zpad((parseInt(t[0])<<16|parseInt(t[1])<<8|parseInt(t[2])<<0).toString(16),6):null}if(e instanceof Array)for(var r=0;r<e.length;r++)e[r]=t(e[r]);else e=t(e);return e},u.colors.normalizeCSS=function(e){return e.startsWith(\"#\")?u.colors.hexToRGB(e):u.colors.re_.rgbx.test(e)?e:u.colors.nameToRGB(e)},u.colors.arrayToRGBA=function(e){var t=3<e.length?e[3]:1;return\"rgba(\"+e[0]+\", \"+e[1]+\", \"+e[2]+\", \"+t+\")\"},u.colors.setAlpha=function(e,t){var r=u.colors.crackRGB(e);return r[3]=t,u.colors.arrayToRGBA(r)},u.colors.mix=function(e,t,r){for(var i,o=u.colors.crackRGB(e),n=u.colors.crackRGB(t),s=0;4>s;++s)i=n[s]-o[s],o[s]=a(parseInt(o[s])+i*r);return u.colors.arrayToRGBA(o)},u.colors.crackRGB=function(e){var t;if(e.startsWith(\"rgba\")){if(t=e.match(u.colors.re_.rgba))return t.shift(),Array.from(t)}else if(t=e.match(u.colors.re_.rgb))return t.shift(),t.push(\"1\"),Array.from(t);return console.error(\"Couldn't crack: \"+e),null},u.colors.nameToRGB=function(e){return e in u.colors.colorNames?u.colors.colorNames[e]:(e=e.toLowerCase())in u.colors.colorNames?u.colors.colorNames[e]:(e=e.replace(/\\s+/g,\"\"))in u.colors.colorNames?u.colors.colorNames[e]:null},u.colors.stockColorPalette=u.colors.hexToRGB([\"#000000\",\"#CC0000\",\"#4E9A06\",\"#C4A000\",\"#3465A4\",\"#75507B\",\"#06989A\",\"#D3D7CF\",\"#555753\",\"#EF2929\",\"#00BA13\",\"#FCE94F\",\"#729FCF\",\"#F200CB\",\"#00B5BD\",\"#EEEEEC\",\"#000000\",\"#00005F\",\"#000087\",\"#0000AF\",\"#0000D7\",\"#0000FF\",\"#005F00\",\"#005F5F\",\"#005F87\",\"#005FAF\",\"#005FD7\",\"#005FFF\",\"#008700\",\"#00875F\",\"#008787\",\"#0087AF\",\"#0087D7\",\"#0087FF\",\"#00AF00\",\"#00AF5F\",\"#00AF87\",\"#00AFAF\",\"#00AFD7\",\"#00AFFF\",\"#00D700\",\"#00D75F\",\"#00D787\",\"#00D7AF\",\"#00D7D7\",\"#00D7FF\",\"#00FF00\",\"#00FF5F\",\"#00FF87\",\"#00FFAF\",\"#00FFD7\",\"#00FFFF\",\"#5F0000\",\"#5F005F\",\"#5F0087\",\"#5F00AF\",\"#5F00D7\",\"#5F00FF\",\"#5F5F00\",\"#5F5F5F\",\"#5F5F87\",\"#5F5FAF\",\"#5F5FD7\",\"#5F5FFF\",\"#5F8700\",\"#5F875F\",\"#5F8787\",\"#5F87AF\",\"#5F87D7\",\"#5F87FF\",\"#5FAF00\",\"#5FAF5F\",\"#5FAF87\",\"#5FAFAF\",\"#5FAFD7\",\"#5FAFFF\",\"#5FD700\",\"#5FD75F\",\"#5FD787\",\"#5FD7AF\",\"#5FD7D7\",\"#5FD7FF\",\"#5FFF00\",\"#5FFF5F\",\"#5FFF87\",\"#5FFFAF\",\"#5FFFD7\",\"#5FFFFF\",\"#870000\",\"#87005F\",\"#870087\",\"#8700AF\",\"#8700D7\",\"#8700FF\",\"#875F00\",\"#875F5F\",\"#875F87\",\"#875FAF\",\"#875FD7\",\"#875FFF\",\"#878700\",\"#87875F\",\"#878787\",\"#8787AF\",\"#8787D7\",\"#8787FF\",\"#87AF00\",\"#87AF5F\",\"#87AF87\",\"#87AFAF\",\"#87AFD7\",\"#87AFFF\",\"#87D700\",\"#87D75F\",\"#87D787\",\"#87D7AF\",\"#87D7D7\",\"#87D7FF\",\"#87FF00\",\"#87FF5F\",\"#87FF87\",\"#87FFAF\",\"#87FFD7\",\"#87FFFF\",\"#AF0000\",\"#AF005F\",\"#AF0087\",\"#AF00AF\",\"#AF00D7\",\"#AF00FF\",\"#AF5F00\",\"#AF5F5F\",\"#AF5F87\",\"#AF5FAF\",\"#AF5FD7\",\"#AF5FFF\",\"#AF8700\",\"#AF875F\",\"#AF8787\",\"#AF87AF\",\"#AF87D7\",\"#AF87FF\",\"#AFAF00\",\"#AFAF5F\",\"#AFAF87\",\"#AFAFAF\",\"#AFAFD7\",\"#AFAFFF\",\"#AFD700\",\"#AFD75F\",\"#AFD787\",\"#AFD7AF\",\"#AFD7D7\",\"#AFD7FF\",\"#AFFF00\",\"#AFFF5F\",\"#AFFF87\",\"#AFFFAF\",\"#AFFFD7\",\"#AFFFFF\",\"#D70000\",\"#D7005F\",\"#D70087\",\"#D700AF\",\"#D700D7\",\"#D700FF\",\"#D75F00\",\"#D75F5F\",\"#D75F87\",\"#D75FAF\",\"#D75FD7\",\"#D75FFF\",\"#D78700\",\"#D7875F\",\"#D78787\",\"#D787AF\",\"#D787D7\",\"#D787FF\",\"#D7AF00\",\"#D7AF5F\",\"#D7AF87\",\"#D7AFAF\",\"#D7AFD7\",\"#D7AFFF\",\"#D7D700\",\"#D7D75F\",\"#D7D787\",\"#D7D7AF\",\"#D7D7D7\",\"#D7D7FF\",\"#D7FF00\",\"#D7FF5F\",\"#D7FF87\",\"#D7FFAF\",\"#D7FFD7\",\"#D7FFFF\",\"#FF0000\",\"#FF005F\",\"#FF0087\",\"#FF00AF\",\"#FF00D7\",\"#FF00FF\",\"#FF5F00\",\"#FF5F5F\",\"#FF5F87\",\"#FF5FAF\",\"#FF5FD7\",\"#FF5FFF\",\"#FF8700\",\"#FF875F\",\"#FF8787\",\"#FF87AF\",\"#FF87D7\",\"#FF87FF\",\"#FFAF00\",\"#FFAF5F\",\"#FFAF87\",\"#FFAFAF\",\"#FFAFD7\",\"#FFAFFF\",\"#FFD700\",\"#FFD75F\",\"#FFD787\",\"#FFD7AF\",\"#FFD7D7\",\"#FFD7FF\",\"#FFFF00\",\"#FFFF5F\",\"#FFFF87\",\"#FFFFAF\",\"#FFFFD7\",\"#FFFFFF\",\"#080808\",\"#121212\",\"#1C1C1C\",\"#262626\",\"#303030\",\"#3A3A3A\",\"#444444\",\"#4E4E4E\",\"#585858\",\"#626262\",\"#6C6C6C\",\"#767676\",\"#808080\",\"#8A8A8A\",\"#949494\",\"#9E9E9E\",\"#A8A8A8\",\"#B2B2B2\",\"#BCBCBC\",\"#C6C6C6\",\"#D0D0D0\",\"#DADADA\",\"#E4E4E4\",\"#EEEEEE\"]),u.colors.colorPalette=u.colors.stockColorPalette,u.colors.colorNames={aliceblue:\"rgb(240, 248, 255)\",antiquewhite:\"rgb(250, 235, 215)\",antiquewhite1:\"rgb(255, 239, 219)\",antiquewhite2:\"rgb(238, 223, 204)\",antiquewhite3:\"rgb(205, 192, 176)\",antiquewhite4:\"rgb(139, 131, 120)\",aquamarine:\"rgb(127, 255, 212)\",aquamarine1:\"rgb(127, 255, 212)\",aquamarine2:\"rgb(118, 238, 198)\",aquamarine3:\"rgb(102, 205, 170)\",aquamarine4:\"rgb(69, 139, 116)\",azure:\"rgb(240, 255, 255)\",azure1:\"rgb(240, 255, 255)\",azure2:\"rgb(224, 238, 238)\",azure3:\"rgb(193, 205, 205)\",azure4:\"rgb(131, 139, 139)\",beige:\"rgb(245, 245, 220)\",bisque:\"rgb(255, 228, 196)\",bisque1:\"rgb(255, 228, 196)\",bisque2:\"rgb(238, 213, 183)\",bisque3:\"rgb(205, 183, 158)\",bisque4:\"rgb(139, 125, 107)\",black:\"rgb(0, 0, 0)\",blanchedalmond:\"rgb(255, 235, 205)\",blue:\"rgb(0, 0, 255)\",blue1:\"rgb(0, 0, 255)\",blue2:\"rgb(0, 0, 238)\",blue3:\"rgb(0, 0, 205)\",blue4:\"rgb(0, 0, 139)\",blueviolet:\"rgb(138, 43, 226)\",brown:\"rgb(165, 42, 42)\",brown1:\"rgb(255, 64, 64)\",brown2:\"rgb(238, 59, 59)\",brown3:\"rgb(205, 51, 51)\",brown4:\"rgb(139, 35, 35)\",burlywood:\"rgb(222, 184, 135)\",burlywood1:\"rgb(255, 211, 155)\",burlywood2:\"rgb(238, 197, 145)\",burlywood3:\"rgb(205, 170, 125)\",burlywood4:\"rgb(139, 115, 85)\",cadetblue:\"rgb(95, 158, 160)\",cadetblue1:\"rgb(152, 245, 255)\",cadetblue2:\"rgb(142, 229, 238)\",cadetblue3:\"rgb(122, 197, 205)\",cadetblue4:\"rgb(83, 134, 139)\",chartreuse:\"rgb(127, 255, 0)\",chartreuse1:\"rgb(127, 255, 0)\",chartreuse2:\"rgb(118, 238, 0)\",chartreuse3:\"rgb(102, 205, 0)\",chartreuse4:\"rgb(69, 139, 0)\",chocolate:\"rgb(210, 105, 30)\",chocolate1:\"rgb(255, 127, 36)\",chocolate2:\"rgb(238, 118, 33)\",chocolate3:\"rgb(205, 102, 29)\",chocolate4:\"rgb(139, 69, 19)\",coral:\"rgb(255, 127, 80)\",coral1:\"rgb(255, 114, 86)\",coral2:\"rgb(238, 106, 80)\",coral3:\"rgb(205, 91, 69)\",coral4:\"rgb(139, 62, 47)\",cornflowerblue:\"rgb(100, 149, 237)\",cornsilk:\"rgb(255, 248, 220)\",cornsilk1:\"rgb(255, 248, 220)\",cornsilk2:\"rgb(238, 232, 205)\",cornsilk3:\"rgb(205, 200, 177)\",cornsilk4:\"rgb(139, 136, 120)\",cyan:\"rgb(0, 255, 255)\",cyan1:\"rgb(0, 255, 255)\",cyan2:\"rgb(0, 238, 238)\",cyan3:\"rgb(0, 205, 205)\",cyan4:\"rgb(0, 139, 139)\",darkblue:\"rgb(0, 0, 139)\",darkcyan:\"rgb(0, 139, 139)\",darkgoldenrod:\"rgb(184, 134, 11)\",darkgoldenrod1:\"rgb(255, 185, 15)\",darkgoldenrod2:\"rgb(238, 173, 14)\",darkgoldenrod3:\"rgb(205, 149, 12)\",darkgoldenrod4:\"rgb(139, 101, 8)\",darkgray:\"rgb(169, 169, 169)\",darkgreen:\"rgb(0, 100, 0)\",darkgrey:\"rgb(169, 169, 169)\",darkkhaki:\"rgb(189, 183, 107)\",darkmagenta:\"rgb(139, 0, 139)\",darkolivegreen:\"rgb(85, 107, 47)\",darkolivegreen1:\"rgb(202, 255, 112)\",darkolivegreen2:\"rgb(188, 238, 104)\",darkolivegreen3:\"rgb(162, 205, 90)\",darkolivegreen4:\"rgb(110, 139, 61)\",darkorange:\"rgb(255, 140, 0)\",darkorange1:\"rgb(255, 127, 0)\",darkorange2:\"rgb(238, 118, 0)\",darkorange3:\"rgb(205, 102, 0)\",darkorange4:\"rgb(139, 69, 0)\",darkorchid:\"rgb(153, 50, 204)\",darkorchid1:\"rgb(191, 62, 255)\",darkorchid2:\"rgb(178, 58, 238)\",darkorchid3:\"rgb(154, 50, 205)\",darkorchid4:\"rgb(104, 34, 139)\",darkred:\"rgb(139, 0, 0)\",darksalmon:\"rgb(233, 150, 122)\",darkseagreen:\"rgb(143, 188, 143)\",darkseagreen1:\"rgb(193, 255, 193)\",darkseagreen2:\"rgb(180, 238, 180)\",darkseagreen3:\"rgb(155, 205, 155)\",darkseagreen4:\"rgb(105, 139, 105)\",darkslateblue:\"rgb(72, 61, 139)\",darkslategray:\"rgb(47, 79, 79)\",darkslategray1:\"rgb(151, 255, 255)\",darkslategray2:\"rgb(141, 238, 238)\",darkslategray3:\"rgb(121, 205, 205)\",darkslategray4:\"rgb(82, 139, 139)\",darkslategrey:\"rgb(47, 79, 79)\",darkturquoise:\"rgb(0, 206, 209)\",darkviolet:\"rgb(148, 0, 211)\",debianred:\"rgb(215, 7, 81)\",deeppink:\"rgb(255, 20, 147)\",deeppink1:\"rgb(255, 20, 147)\",deeppink2:\"rgb(238, 18, 137)\",deeppink3:\"rgb(205, 16, 118)\",deeppink4:\"rgb(139, 10, 80)\",deepskyblue:\"rgb(0, 191, 255)\",deepskyblue1:\"rgb(0, 191, 255)\",deepskyblue2:\"rgb(0, 178, 238)\",deepskyblue3:\"rgb(0, 154, 205)\",deepskyblue4:\"rgb(0, 104, 139)\",dimgray:\"rgb(105, 105, 105)\",dimgrey:\"rgb(105, 105, 105)\",dodgerblue:\"rgb(30, 144, 255)\",dodgerblue1:\"rgb(30, 144, 255)\",dodgerblue2:\"rgb(28, 134, 238)\",dodgerblue3:\"rgb(24, 116, 205)\",dodgerblue4:\"rgb(16, 78, 139)\",firebrick:\"rgb(178, 34, 34)\",firebrick1:\"rgb(255, 48, 48)\",firebrick2:\"rgb(238, 44, 44)\",firebrick3:\"rgb(205, 38, 38)\",firebrick4:\"rgb(139, 26, 26)\",floralwhite:\"rgb(255, 250, 240)\",forestgreen:\"rgb(34, 139, 34)\",gainsboro:\"rgb(220, 220, 220)\",ghostwhite:\"rgb(248, 248, 255)\",gold:\"rgb(255, 215, 0)\",gold1:\"rgb(255, 215, 0)\",gold2:\"rgb(238, 201, 0)\",gold3:\"rgb(205, 173, 0)\",gold4:\"rgb(139, 117, 0)\",goldenrod:\"rgb(218, 165, 32)\",goldenrod1:\"rgb(255, 193, 37)\",goldenrod2:\"rgb(238, 180, 34)\",goldenrod3:\"rgb(205, 155, 29)\",goldenrod4:\"rgb(139, 105, 20)\",gray:\"rgb(190, 190, 190)\",gray0:\"rgb(0, 0, 0)\",gray1:\"rgb(3, 3, 3)\",gray10:\"rgb(26, 26, 26)\",gray100:\"rgb(255, 255, 255)\",gray11:\"rgb(28, 28, 28)\",gray12:\"rgb(31, 31, 31)\",gray13:\"rgb(33, 33, 33)\",gray14:\"rgb(36, 36, 36)\",gray15:\"rgb(38, 38, 38)\",gray16:\"rgb(41, 41, 41)\",gray17:\"rgb(43, 43, 43)\",gray18:\"rgb(46, 46, 46)\",gray19:\"rgb(48, 48, 48)\",gray2:\"rgb(5, 5, 5)\",gray20:\"rgb(51, 51, 51)\",gray21:\"rgb(54, 54, 54)\",gray22:\"rgb(56, 56, 56)\",gray23:\"rgb(59, 59, 59)\",gray24:\"rgb(61, 61, 61)\",gray25:\"rgb(64, 64, 64)\",gray26:\"rgb(66, 66, 66)\",gray27:\"rgb(69, 69, 69)\",gray28:\"rgb(71, 71, 71)\",gray29:\"rgb(74, 74, 74)\",gray3:\"rgb(8, 8, 8)\",gray30:\"rgb(77, 77, 77)\",gray31:\"rgb(79, 79, 79)\",gray32:\"rgb(82, 82, 82)\",gray33:\"rgb(84, 84, 84)\",gray34:\"rgb(87, 87, 87)\",gray35:\"rgb(89, 89, 89)\",gray36:\"rgb(92, 92, 92)\",gray37:\"rgb(94, 94, 94)\",gray38:\"rgb(97, 97, 97)\",gray39:\"rgb(99, 99, 99)\",gray4:\"rgb(10, 10, 10)\",gray40:\"rgb(102, 102, 102)\",gray41:\"rgb(105, 105, 105)\",gray42:\"rgb(107, 107, 107)\",gray43:\"rgb(110, 110, 110)\",gray44:\"rgb(112, 112, 112)\",gray45:\"rgb(115, 115, 115)\",gray46:\"rgb(117, 117, 117)\",gray47:\"rgb(120, 120, 120)\",gray48:\"rgb(122, 122, 122)\",gray49:\"rgb(125, 125, 125)\",gray5:\"rgb(13, 13, 13)\",gray50:\"rgb(127, 127, 127)\",gray51:\"rgb(130, 130, 130)\",gray52:\"rgb(133, 133, 133)\",gray53:\"rgb(135, 135, 135)\",gray54:\"rgb(138, 138, 138)\",gray55:\"rgb(140, 140, 140)\",gray56:\"rgb(143, 143, 143)\",gray57:\"rgb(145, 145, 145)\",gray58:\"rgb(148, 148, 148)\",gray59:\"rgb(150, 150, 150)\",gray6:\"rgb(15, 15, 15)\",gray60:\"rgb(153, 153, 153)\",gray61:\"rgb(156, 156, 156)\",gray62:\"rgb(158, 158, 158)\",gray63:\"rgb(161, 161, 161)\",gray64:\"rgb(163, 163, 163)\",gray65:\"rgb(166, 166, 166)\",gray66:\"rgb(168, 168, 168)\",gray67:\"rgb(171, 171, 171)\",gray68:\"rgb(173, 173, 173)\",gray69:\"rgb(176, 176, 176)\",gray7:\"rgb(18, 18, 18)\",gray70:\"rgb(179, 179, 179)\",gray71:\"rgb(181, 181, 181)\",gray72:\"rgb(184, 184, 184)\",gray73:\"rgb(186, 186, 186)\",gray74:\"rgb(189, 189, 189)\",gray75:\"rgb(191, 191, 191)\",gray76:\"rgb(194, 194, 194)\",gray77:\"rgb(196, 196, 196)\",gray78:\"rgb(199, 199, 199)\",gray79:\"rgb(201, 201, 201)\",gray8:\"rgb(20, 20, 20)\",gray80:\"rgb(204, 204, 204)\",gray81:\"rgb(207, 207, 207)\",gray82:\"rgb(209, 209, 209)\",gray83:\"rgb(212, 212, 212)\",gray84:\"rgb(214, 214, 214)\",gray85:\"rgb(217, 217, 217)\",gray86:\"rgb(219, 219, 219)\",gray87:\"rgb(222, 222, 222)\",gray88:\"rgb(224, 224, 224)\",gray89:\"rgb(227, 227, 227)\",gray9:\"rgb(23, 23, 23)\",gray90:\"rgb(229, 229, 229)\",gray91:\"rgb(232, 232, 232)\",gray92:\"rgb(235, 235, 235)\",gray93:\"rgb(237, 237, 237)\",gray94:\"rgb(240, 240, 240)\",gray95:\"rgb(242, 242, 242)\",gray96:\"rgb(245, 245, 245)\",gray97:\"rgb(247, 247, 247)\",gray98:\"rgb(250, 250, 250)\",gray99:\"rgb(252, 252, 252)\",green:\"rgb(0, 255, 0)\",green1:\"rgb(0, 255, 0)\",green2:\"rgb(0, 238, 0)\",green3:\"rgb(0, 205, 0)\",green4:\"rgb(0, 139, 0)\",greenyellow:\"rgb(173, 255, 47)\",grey:\"rgb(190, 190, 190)\",grey0:\"rgb(0, 0, 0)\",grey1:\"rgb(3, 3, 3)\",grey10:\"rgb(26, 26, 26)\",grey100:\"rgb(255, 255, 255)\",grey11:\"rgb(28, 28, 28)\",grey12:\"rgb(31, 31, 31)\",grey13:\"rgb(33, 33, 33)\",grey14:\"rgb(36, 36, 36)\",grey15:\"rgb(38, 38, 38)\",grey16:\"rgb(41, 41, 41)\",grey17:\"rgb(43, 43, 43)\",grey18:\"rgb(46, 46, 46)\",grey19:\"rgb(48, 48, 48)\",grey2:\"rgb(5, 5, 5)\",grey20:\"rgb(51, 51, 51)\",grey21:\"rgb(54, 54, 54)\",grey22:\"rgb(56, 56, 56)\",grey23:\"rgb(59, 59, 59)\",grey24:\"rgb(61, 61, 61)\",grey25:\"rgb(64, 64, 64)\",grey26:\"rgb(66, 66, 66)\",grey27:\"rgb(69, 69, 69)\",grey28:\"rgb(71, 71, 71)\",grey29:\"rgb(74, 74, 74)\",grey3:\"rgb(8, 8, 8)\",grey30:\"rgb(77, 77, 77)\",grey31:\"rgb(79, 79, 79)\",grey32:\"rgb(82, 82, 82)\",grey33:\"rgb(84, 84, 84)\",grey34:\"rgb(87, 87, 87)\",grey35:\"rgb(89, 89, 89)\",grey36:\"rgb(92, 92, 92)\",grey37:\"rgb(94, 94, 94)\",grey38:\"rgb(97, 97, 97)\",grey39:\"rgb(99, 99, 99)\",grey4:\"rgb(10, 10, 10)\",grey40:\"rgb(102, 102, 102)\",grey41:\"rgb(105, 105, 105)\",grey42:\"rgb(107, 107, 107)\",grey43:\"rgb(110, 110, 110)\",grey44:\"rgb(112, 112, 112)\",grey45:\"rgb(115, 115, 115)\",grey46:\"rgb(117, 117, 117)\",grey47:\"rgb(120, 120, 120)\",grey48:\"rgb(122, 122, 122)\",grey49:\"rgb(125, 125, 125)\",grey5:\"rgb(13, 13, 13)\",grey50:\"rgb(127, 127, 127)\",grey51:\"rgb(130, 130, 130)\",grey52:\"rgb(133, 133, 133)\",grey53:\"rgb(135, 135, 135)\",grey54:\"rgb(138, 138, 138)\",grey55:\"rgb(140, 140, 140)\",grey56:\"rgb(143, 143, 143)\",grey57:\"rgb(145, 145, 145)\",grey58:\"rgb(148, 148, 148)\",grey59:\"rgb(150, 150, 150)\",grey6:\"rgb(15, 15, 15)\",grey60:\"rgb(153, 153, 153)\",grey61:\"rgb(156, 156, 156)\",grey62:\"rgb(158, 158, 158)\",grey63:\"rgb(161, 161, 161)\",grey64:\"rgb(163, 163, 163)\",grey65:\"rgb(166, 166, 166)\",grey66:\"rgb(168, 168, 168)\",grey67:\"rgb(171, 171, 171)\",grey68:\"rgb(173, 173, 173)\",grey69:\"rgb(176, 176, 176)\",grey7:\"rgb(18, 18, 18)\",grey70:\"rgb(179, 179, 179)\",grey71:\"rgb(181, 181, 181)\",grey72:\"rgb(184, 184, 184)\",grey73:\"rgb(186, 186, 186)\",grey74:\"rgb(189, 189, 189)\",grey75:\"rgb(191, 191, 191)\",grey76:\"rgb(194, 194, 194)\",grey77:\"rgb(196, 196, 196)\",grey78:\"rgb(199, 199, 199)\",grey79:\"rgb(201, 201, 201)\",grey8:\"rgb(20, 20, 20)\",grey80:\"rgb(204, 204, 204)\",grey81:\"rgb(207, 207, 207)\",grey82:\"rgb(209, 209, 209)\",grey83:\"rgb(212, 212, 212)\",grey84:\"rgb(214, 214, 214)\",grey85:\"rgb(217, 217, 217)\",grey86:\"rgb(219, 219, 219)\",grey87:\"rgb(222, 222, 222)\",grey88:\"rgb(224, 224, 224)\",grey89:\"rgb(227, 227, 227)\",grey9:\"rgb(23, 23, 23)\",grey90:\"rgb(229, 229, 229)\",grey91:\"rgb(232, 232, 232)\",grey92:\"rgb(235, 235, 235)\",grey93:\"rgb(237, 237, 237)\",grey94:\"rgb(240, 240, 240)\",grey95:\"rgb(242, 242, 242)\",grey96:\"rgb(245, 245, 245)\",grey97:\"rgb(247, 247, 247)\",grey98:\"rgb(250, 250, 250)\",grey99:\"rgb(252, 252, 252)\",honeydew:\"rgb(240, 255, 240)\",honeydew1:\"rgb(240, 255, 240)\",honeydew2:\"rgb(224, 238, 224)\",honeydew3:\"rgb(193, 205, 193)\",honeydew4:\"rgb(131, 139, 131)\",hotpink:\"rgb(255, 105, 180)\",hotpink1:\"rgb(255, 110, 180)\",hotpink2:\"rgb(238, 106, 167)\",hotpink3:\"rgb(205, 96, 144)\",hotpink4:\"rgb(139, 58, 98)\",indianred:\"rgb(205, 92, 92)\",indianred1:\"rgb(255, 106, 106)\",indianred2:\"rgb(238, 99, 99)\",indianred3:\"rgb(205, 85, 85)\",indianred4:\"rgb(139, 58, 58)\",ivory:\"rgb(255, 255, 240)\",ivory1:\"rgb(255, 255, 240)\",ivory2:\"rgb(238, 238, 224)\",ivory3:\"rgb(205, 205, 193)\",ivory4:\"rgb(139, 139, 131)\",khaki:\"rgb(240, 230, 140)\",khaki1:\"rgb(255, 246, 143)\",khaki2:\"rgb(238, 230, 133)\",khaki3:\"rgb(205, 198, 115)\",khaki4:\"rgb(139, 134, 78)\",lavender:\"rgb(230, 230, 250)\",lavenderblush:\"rgb(255, 240, 245)\",lavenderblush1:\"rgb(255, 240, 245)\",lavenderblush2:\"rgb(238, 224, 229)\",lavenderblush3:\"rgb(205, 193, 197)\",lavenderblush4:\"rgb(139, 131, 134)\",lawngreen:\"rgb(124, 252, 0)\",lemonchiffon:\"rgb(255, 250, 205)\",lemonchiffon1:\"rgb(255, 250, 205)\",lemonchiffon2:\"rgb(238, 233, 191)\",lemonchiffon3:\"rgb(205, 201, 165)\",lemonchiffon4:\"rgb(139, 137, 112)\",lightblue:\"rgb(173, 216, 230)\",lightblue1:\"rgb(191, 239, 255)\",lightblue2:\"rgb(178, 223, 238)\",lightblue3:\"rgb(154, 192, 205)\",lightblue4:\"rgb(104, 131, 139)\",lightcoral:\"rgb(240, 128, 128)\",lightcyan:\"rgb(224, 255, 255)\",lightcyan1:\"rgb(224, 255, 255)\",lightcyan2:\"rgb(209, 238, 238)\",lightcyan3:\"rgb(180, 205, 205)\",lightcyan4:\"rgb(122, 139, 139)\",lightgoldenrod:\"rgb(238, 221, 130)\",lightgoldenrod1:\"rgb(255, 236, 139)\",lightgoldenrod2:\"rgb(238, 220, 130)\",lightgoldenrod3:\"rgb(205, 190, 112)\",lightgoldenrod4:\"rgb(139, 129, 76)\",lightgoldenrodyellow:\"rgb(250, 250, 210)\",lightgray:\"rgb(211, 211, 211)\",lightgreen:\"rgb(144, 238, 144)\",lightgrey:\"rgb(211, 211, 211)\",lightpink:\"rgb(255, 182, 193)\",lightpink1:\"rgb(255, 174, 185)\",lightpink2:\"rgb(238, 162, 173)\",lightpink3:\"rgb(205, 140, 149)\",lightpink4:\"rgb(139, 95, 101)\",lightsalmon:\"rgb(255, 160, 122)\",lightsalmon1:\"rgb(255, 160, 122)\",lightsalmon2:\"rgb(238, 149, 114)\",lightsalmon3:\"rgb(205, 129, 98)\",lightsalmon4:\"rgb(139, 87, 66)\",lightseagreen:\"rgb(32, 178, 170)\",lightskyblue:\"rgb(135, 206, 250)\",lightskyblue1:\"rgb(176, 226, 255)\",lightskyblue2:\"rgb(164, 211, 238)\",lightskyblue3:\"rgb(141, 182, 205)\",lightskyblue4:\"rgb(96, 123, 139)\",lightslateblue:\"rgb(132, 112, 255)\",lightslategray:\"rgb(119, 136, 153)\",lightslategrey:\"rgb(119, 136, 153)\",lightsteelblue:\"rgb(176, 196, 222)\",lightsteelblue1:\"rgb(202, 225, 255)\",lightsteelblue2:\"rgb(188, 210, 238)\",lightsteelblue3:\"rgb(162, 181, 205)\",lightsteelblue4:\"rgb(110, 123, 139)\",lightyellow:\"rgb(255, 255, 224)\",lightyellow1:\"rgb(255, 255, 224)\",lightyellow2:\"rgb(238, 238, 209)\",lightyellow3:\"rgb(205, 205, 180)\",lightyellow4:\"rgb(139, 139, 122)\",limegreen:\"rgb(50, 205, 50)\",linen:\"rgb(250, 240, 230)\",magenta:\"rgb(255, 0, 255)\",magenta1:\"rgb(255, 0, 255)\",magenta2:\"rgb(238, 0, 238)\",magenta3:\"rgb(205, 0, 205)\",magenta4:\"rgb(139, 0, 139)\",maroon:\"rgb(176, 48, 96)\",maroon1:\"rgb(255, 52, 179)\",maroon2:\"rgb(238, 48, 167)\",maroon3:\"rgb(205, 41, 144)\",maroon4:\"rgb(139, 28, 98)\",mediumaquamarine:\"rgb(102, 205, 170)\",mediumblue:\"rgb(0, 0, 205)\",mediumorchid:\"rgb(186, 85, 211)\",mediumorchid1:\"rgb(224, 102, 255)\",mediumorchid2:\"rgb(209, 95, 238)\",mediumorchid3:\"rgb(180, 82, 205)\",mediumorchid4:\"rgb(122, 55, 139)\",mediumpurple:\"rgb(147, 112, 219)\",mediumpurple1:\"rgb(171, 130, 255)\",mediumpurple2:\"rgb(159, 121, 238)\",mediumpurple3:\"rgb(137, 104, 205)\",mediumpurple4:\"rgb(93, 71, 139)\",mediumseagreen:\"rgb(60, 179, 113)\",mediumslateblue:\"rgb(123, 104, 238)\",mediumspringgreen:\"rgb(0, 250, 154)\",mediumturquoise:\"rgb(72, 209, 204)\",mediumvioletred:\"rgb(199, 21, 133)\",midnightblue:\"rgb(25, 25, 112)\",mintcream:\"rgb(245, 255, 250)\",mistyrose:\"rgb(255, 228, 225)\",mistyrose1:\"rgb(255, 228, 225)\",mistyrose2:\"rgb(238, 213, 210)\",mistyrose3:\"rgb(205, 183, 181)\",mistyrose4:\"rgb(139, 125, 123)\",moccasin:\"rgb(255, 228, 181)\",navajowhite:\"rgb(255, 222, 173)\",navajowhite1:\"rgb(255, 222, 173)\",navajowhite2:\"rgb(238, 207, 161)\",navajowhite3:\"rgb(205, 179, 139)\",navajowhite4:\"rgb(139, 121, 94)\",navy:\"rgb(0, 0, 128)\",navyblue:\"rgb(0, 0, 128)\",oldlace:\"rgb(253, 245, 230)\",olivedrab:\"rgb(107, 142, 35)\",olivedrab1:\"rgb(192, 255, 62)\",olivedrab2:\"rgb(179, 238, 58)\",olivedrab3:\"rgb(154, 205, 50)\",olivedrab4:\"rgb(105, 139, 34)\",orange:\"rgb(255, 165, 0)\",orange1:\"rgb(255, 165, 0)\",orange2:\"rgb(238, 154, 0)\",orange3:\"rgb(205, 133, 0)\",orange4:\"rgb(139, 90, 0)\",orangered:\"rgb(255, 69, 0)\",orangered1:\"rgb(255, 69, 0)\",orangered2:\"rgb(238, 64, 0)\",orangered3:\"rgb(205, 55, 0)\",orangered4:\"rgb(139, 37, 0)\",orchid:\"rgb(218, 112, 214)\",orchid1:\"rgb(255, 131, 250)\",orchid2:\"rgb(238, 122, 233)\",orchid3:\"rgb(205, 105, 201)\",orchid4:\"rgb(139, 71, 137)\",palegoldenrod:\"rgb(238, 232, 170)\",palegreen:\"rgb(152, 251, 152)\",palegreen1:\"rgb(154, 255, 154)\",palegreen2:\"rgb(144, 238, 144)\",palegreen3:\"rgb(124, 205, 124)\",palegreen4:\"rgb(84, 139, 84)\",paleturquoise:\"rgb(175, 238, 238)\",paleturquoise1:\"rgb(187, 255, 255)\",paleturquoise2:\"rgb(174, 238, 238)\",paleturquoise3:\"rgb(150, 205, 205)\",paleturquoise4:\"rgb(102, 139, 139)\",palevioletred:\"rgb(219, 112, 147)\",palevioletred1:\"rgb(255, 130, 171)\",palevioletred2:\"rgb(238, 121, 159)\",palevioletred3:\"rgb(205, 104, 137)\",palevioletred4:\"rgb(139, 71, 93)\",papayawhip:\"rgb(255, 239, 213)\",peachpuff:\"rgb(255, 218, 185)\",peachpuff1:\"rgb(255, 218, 185)\",peachpuff2:\"rgb(238, 203, 173)\",peachpuff3:\"rgb(205, 175, 149)\",peachpuff4:\"rgb(139, 119, 101)\",peru:\"rgb(205, 133, 63)\",pink:\"rgb(255, 192, 203)\",pink1:\"rgb(255, 181, 197)\",pink2:\"rgb(238, 169, 184)\",pink3:\"rgb(205, 145, 158)\",pink4:\"rgb(139, 99, 108)\",plum:\"rgb(221, 160, 221)\",plum1:\"rgb(255, 187, 255)\",plum2:\"rgb(238, 174, 238)\",plum3:\"rgb(205, 150, 205)\",plum4:\"rgb(139, 102, 139)\",powderblue:\"rgb(176, 224, 230)\",purple:\"rgb(160, 32, 240)\",purple1:\"rgb(155, 48, 255)\",purple2:\"rgb(145, 44, 238)\",purple3:\"rgb(125, 38, 205)\",purple4:\"rgb(85, 26, 139)\",red:\"rgb(255, 0, 0)\",red1:\"rgb(255, 0, 0)\",red2:\"rgb(238, 0, 0)\",red3:\"rgb(205, 0, 0)\",red4:\"rgb(139, 0, 0)\",rosybrown:\"rgb(188, 143, 143)\",rosybrown1:\"rgb(255, 193, 193)\",rosybrown2:\"rgb(238, 180, 180)\",rosybrown3:\"rgb(205, 155, 155)\",rosybrown4:\"rgb(139, 105, 105)\",royalblue:\"rgb(65, 105, 225)\",royalblue1:\"rgb(72, 118, 255)\",royalblue2:\"rgb(67, 110, 238)\",royalblue3:\"rgb(58, 95, 205)\",royalblue4:\"rgb(39, 64, 139)\",saddlebrown:\"rgb(139, 69, 19)\",salmon:\"rgb(250, 128, 114)\",salmon1:\"rgb(255, 140, 105)\",salmon2:\"rgb(238, 130, 98)\",salmon3:\"rgb(205, 112, 84)\",salmon4:\"rgb(139, 76, 57)\",sandybrown:\"rgb(244, 164, 96)\",seagreen:\"rgb(46, 139, 87)\",seagreen1:\"rgb(84, 255, 159)\",seagreen2:\"rgb(78, 238, 148)\",seagreen3:\"rgb(67, 205, 128)\",seagreen4:\"rgb(46, 139, 87)\",seashell:\"rgb(255, 245, 238)\",seashell1:\"rgb(255, 245, 238)\",seashell2:\"rgb(238, 229, 222)\",seashell3:\"rgb(205, 197, 191)\",seashell4:\"rgb(139, 134, 130)\",sienna:\"rgb(160, 82, 45)\",sienna1:\"rgb(255, 130, 71)\",sienna2:\"rgb(238, 121, 66)\",sienna3:\"rgb(205, 104, 57)\",sienna4:\"rgb(139, 71, 38)\",skyblue:\"rgb(135, 206, 235)\",skyblue1:\"rgb(135, 206, 255)\",skyblue2:\"rgb(126, 192, 238)\",skyblue3:\"rgb(108, 166, 205)\",skyblue4:\"rgb(74, 112, 139)\",slateblue:\"rgb(106, 90, 205)\",slateblue1:\"rgb(131, 111, 255)\",slateblue2:\"rgb(122, 103, 238)\",slateblue3:\"rgb(105, 89, 205)\",slateblue4:\"rgb(71, 60, 139)\",slategray:\"rgb(112, 128, 144)\",slategray1:\"rgb(198, 226, 255)\",slategray2:\"rgb(185, 211, 238)\",slategray3:\"rgb(159, 182, 205)\",slategray4:\"rgb(108, 123, 139)\",slategrey:\"rgb(112, 128, 144)\",snow:\"rgb(255, 250, 250)\",snow1:\"rgb(255, 250, 250)\",snow2:\"rgb(238, 233, 233)\",snow3:\"rgb(205, 201, 201)\",snow4:\"rgb(139, 137, 137)\",springgreen:\"rgb(0, 255, 127)\",springgreen1:\"rgb(0, 255, 127)\",springgreen2:\"rgb(0, 238, 118)\",springgreen3:\"rgb(0, 205, 102)\",springgreen4:\"rgb(0, 139, 69)\",steelblue:\"rgb(70, 130, 180)\",steelblue1:\"rgb(99, 184, 255)\",steelblue2:\"rgb(92, 172, 238)\",steelblue3:\"rgb(79, 148, 205)\",steelblue4:\"rgb(54, 100, 139)\",tan:\"rgb(210, 180, 140)\",tan1:\"rgb(255, 165, 79)\",tan2:\"rgb(238, 154, 73)\",tan3:\"rgb(205, 133, 63)\",tan4:\"rgb(139, 90, 43)\",thistle:\"rgb(216, 191, 216)\",thistle1:\"rgb(255, 225, 255)\",thistle2:\"rgb(238, 210, 238)\",thistle3:\"rgb(205, 181, 205)\",thistle4:\"rgb(139, 123, 139)\",tomato:\"rgb(255, 99, 71)\",tomato1:\"rgb(255, 99, 71)\",tomato2:\"rgb(238, 92, 66)\",tomato3:\"rgb(205, 79, 57)\",tomato4:\"rgb(139, 54, 38)\",turquoise:\"rgb(64, 224, 208)\",turquoise1:\"rgb(0, 245, 255)\",turquoise2:\"rgb(0, 229, 238)\",turquoise3:\"rgb(0, 197, 205)\",turquoise4:\"rgb(0, 134, 139)\",violet:\"rgb(238, 130, 238)\",violetred:\"rgb(208, 32, 144)\",violetred1:\"rgb(255, 62, 150)\",violetred2:\"rgb(238, 58, 140)\",violetred3:\"rgb(205, 50, 120)\",violetred4:\"rgb(139, 34, 82)\",wheat:\"rgb(245, 222, 179)\",wheat1:\"rgb(255, 231, 186)\",wheat2:\"rgb(238, 216, 174)\",wheat3:\"rgb(205, 186, 150)\",wheat4:\"rgb(139, 126, 102)\",white:\"rgb(255, 255, 255)\",whitesmoke:\"rgb(245, 245, 245)\",yellow:\"rgb(255, 255, 0)\",yellow1:\"rgb(255, 255, 0)\",yellow2:\"rgb(238, 238, 0)\",yellow3:\"rgb(205, 205, 0)\",yellow4:\"rgb(139, 139, 0)\",yellowgreen:\"rgb(154, 205, 50)\"},u.f={},u.f.replaceVars=function(e,t){return e.replace(/%([a-z]*)\\(([^\\)]+)\\)/gi,(function(e,r,i){if(void 0===t[i])throw\"Unknown variable: \"+i;var o=t[i];if(r in u.f.replaceVars.functions)o=u.f.replaceVars.functions[r](o);else if(r)throw\"Unknown escape function: \"+r;return o}))},u.f.replaceVars.functions={encodeURI:encodeURI,encodeURIComponent:encodeURIComponent,escapeHTML:function(e){var t={\"<\":\"&lt;\",\">\":\"&gt;\",\"&\":\"&amp;\",'\"':\"&quot;\",\"'\":\"&#39;\"};return e.replace(/[<>&\\\"\\']/g,e=>t[e])}},u.f.getURL=function(e){return u.f.getURL.chromeSupported()?chrome.runtime.getURL(e):e},u.f.getURL.chromeSupported=function(){return window.chrome&&chrome.runtime&&chrome.runtime.getURL},u.f.clamp=function(e,t,r){return e<t?t:e>r?r:e},u.f.zpad=function(e,t){return(e+\"\").padStart(t,\"0\")},u.f.getStack=function(e=0,t){const r=(new Error).stack.split(\"\\n\");e+=2;const i=r.length-e;t=void 0===t?i:u.f.clamp(t,0,i);const o=[];for(let i=e;i<t+e;++i)o.push(r[i].replace(/^\\s*at\\s+/,\"\"));return o},u.f.smartFloorDivide=function(e,t){var r=e/t,i=s(r);return 1e-4>i-r?i:n(r)},u.f.randomInt=function(e,t){return n(Math.random()*(t-e+1))+e},u.f.getOs=function(){if(window.browser&&browser.runtime&&browser.runtime.getPlatformInfo)return browser.runtime.getPlatformInfo().then(e=>e.os);if(window.chrome&&chrome.runtime&&chrome.runtime.getPlatformInfo)return new Promise(e=>chrome.runtime.getPlatformInfo(t=>e(t.os)));if(window.navigator&&navigator.userAgent){const e=navigator.userAgent;if(e.includes(\"Mac OS X\"))return Promise.resolve(\"mac\");if(e.includes(\"CrOS\"))return Promise.resolve(\"cros\");if(e.includes(\"Linux\"))return Promise.resolve(\"linux\");if(e.includes(\"Android\"))return Promise.resolve(\"android\");if(e.includes(\"Windows\"))return Promise.resolve(\"windows\")}return void 0===e?Promise.reject(null):Promise.resolve(\"node\")},u.f.getChromeMilestone=function(){if(window.navigator&&navigator.userAgent){const e=navigator.userAgent.match(/\\sChrome\\/(\\d+)/);if(e)return parseInt(e[1])}return NaN},u.f.lastError=function(e=null){let t;return window.browser&&browser.runtime?t=browser.runtime.lastError:window.chrome&&chrome.runtime&&(t=chrome.runtime.lastError),t&&t.message?t.message:e},u.f.openWindow=function(e,t,r){const i=window.open(void 0,t,r);return null!==i&&(i.opener=null,e&&(i.location=e)),i},u.i18n={},u.i18n.browser_=window.browser&&browser.i18n?browser.i18n:window.chrome&&chrome.i18n?chrome.i18n:null,u.i18n.getAcceptLanguages=function(e){u.i18n.browser_?u.i18n.browser_.getAcceptLanguages(e):setTimeout((function(){e([navigator.language.replace(/-/g,\"_\")])}),0)},u.i18n.getMessage=function(e,t=[],r=\"\"){if(u.i18n.browser_){const r=u.i18n.browser_.getMessage(e,t);if(r)return r}return u.i18n.replaceReferences(r,t)},u.i18n.replaceReferences=function(e,t=[]){console.log(\"in replaceReferences:\",e,t),null===t&&(t=[]),t instanceof Array||(t=[t]),console.log(\"args:\",t);let r=e.replace(/\\$(\\d+)/g,(e,r)=>r<=t.length?t[r-1]:\"\");return console.log(r),r},u.MessageManager=function(e){this.languages_=e.map(e=>e.replace(/-/g,\"_\")),-1==this.languages_.indexOf(\"en\")&&this.languages_.unshift(\"en\"),this.messages={}},u.MessageManager.prototype.addMessages=function(e){for(var t in e){var r=e[t];this.messages[t]=r.placeholders?r.message.replace(/\\$([a-z][^\\s\\$]+)\\$/gi,(function(r,i){return e[t].placeholders[i.toLowerCase()].content})):r.message}},u.MessageManager.prototype.findAndLoadMessages=function(e,t){function r(e){e?o=i.shift():n=i.shift(),i.length?s():t(o,n)}var i=this.languages_.concat(),o=[],n=[],s=function(){this.loadMessages(this.replaceReferences(e,i),r.bind(this,!0),r.bind(this,!1))}.bind(this);s()},u.MessageManager.prototype.loadMessages=function(e,t,r){var i=new XMLHttpRequest;i.onload=()=>{this.addMessages(JSON.parse(i.responseText)),t()},r&&(i.onerror=()=>r(i)),i.open(\"GET\",e),i.send()},u.MessageManager.prototype.replaceReferences=u.i18n.replaceReferences,u.MessageManager.prototype.get=function(e,t,r){console.log(e,t);let i=u.i18n.getMessage(e,t);return i?(console.log(\"message found:\",i),i):(console.log(\"searching registered cache next:\",this.messages),(i=this.messages[e])||(console.warn(\"Unknown message: \"+e),i=void 0===r?e:r,this.messages[e]=i),console.log(\"final: message:\",i,t),this.replaceReferences(i,t))},u.MessageManager.prototype.processI18nAttributes=function(e){for(var t=e.querySelectorAll(\"[i18n]\"),r=0;r<t.length;r++)this.processI18nAttribute(t[r])},u.MessageManager.prototype.processI18nAttribute=function(e){const t=e=>e.replace(/-/g,\"_\").toUpperCase();var r=e.getAttribute(\"i18n\");if(r){try{r=JSON.parse(r)}catch(t){throw console.error(\"Can't parse \"+e.tagName+\"#\"+e.id+\": \"+r),t}for(var i in r){var o=i,n=r[i];n.startsWith(\"=\")&&(i=n.substr(1),n=r[i]),n.startsWith(\"$\")&&(n=t(e.getAttribute(n.substr(1))+\"_\"+i));var s=this.get(n);\"_\"==o?e.textContent=s:e.setAttribute(o,s)}}},u.PreferenceManager=function(e,t){this.storage=e,this.storageObserver_=this.onStorageChange_.bind(this),this.isActive_=!1,this.activate(),this.trace=!1;var r=t||\"/\";r.endsWith(\"/\")||(r+=\"/\"),this.prefix=r,this.isImportingJson_=!1,this.prefRecords_={},this.globalObservers_=[],this.childFactories_={},this.childLists_={}},u.PreferenceManager.prototype.DEFAULT_VALUE=Symbol(\"DEFAULT_VALUE\"),u.PreferenceManager.Record=function(e,t){this.name=e,this.defaultValue=t,this.currentValue=this.DEFAULT_VALUE,this.observers=[]},u.PreferenceManager.Record.prototype.DEFAULT_VALUE=u.PreferenceManager.prototype.DEFAULT_VALUE,u.PreferenceManager.Record.prototype.addObserver=function(e){this.observers.push(e)},u.PreferenceManager.Record.prototype.removeObserver=function(e){var t=this.observers.indexOf(e);0<=t&&this.observers.splice(t,1)},u.PreferenceManager.Record.prototype.get=function(){return this.currentValue===this.DEFAULT_VALUE?/^(string|number)$/.test(typeof this.defaultValue)?this.defaultValue:\"object\"==typeof this.defaultValue?JSON.parse(JSON.stringify(this.defaultValue)):this.defaultValue:this.currentValue},u.PreferenceManager.prototype.deactivate=function(){if(!this.isActive_)throw new Error(\"Not activated\");this.isActive_=!1,this.storage.removeObserver(this.storageObserver_)},u.PreferenceManager.prototype.activate=function(){if(this.isActive_)throw new Error(\"Already activated\");this.isActive_=!0,this.storage.addObserver(this.storageObserver_)},u.PreferenceManager.prototype.readStorage=function(e){function t(){0==--r&&e&&e()}var r=0,i=Object.keys(this.prefRecords_).map(e=>this.prefix+e);this.trace&&console.log(\"Preferences read: \"+this.prefix),this.storage.getItems(i,function(i){var o=this.prefix.length;for(var n in i){var s=i[n],a=n.substr(o),l=a in this.childLists_&&JSON.stringify(s)!=JSON.stringify(this.prefRecords_[a].currentValue);this.prefRecords_[a].currentValue=s,l&&(r++,this.syncChildList(a,t))}0==r&&e&&setTimeout(e)}.bind(this))},u.PreferenceManager.prototype.definePreference=function(e,t,r){var i=this.prefRecords_[e];i?this.changeDefault(e,t):i=this.prefRecords_[e]=new u.PreferenceManager.Record(e,t),r&&i.addObserver(r)},u.PreferenceManager.prototype.definePreferences=function(e){for(var t=0;t<e.length;t++)this.definePreference(e[t][0],e[t][1],e[t][2])},u.PreferenceManager.prototype.defineChildren=function(e,t){this.definePreference(e,[],this.onChildListChange_.bind(this,e)),this.childFactories_[e]=t,this.childLists_[e]={}},u.PreferenceManager.prototype.addObservers=function(e,t){if(e&&\"function\"!=typeof e)throw new Error(\"Invalid param: globals\");if(e&&this.globalObservers_.push(e),t)for(var r in t){if(!(r in this.prefRecords_))throw new Error(\"Unknown preference: \"+r);this.prefRecords_[r].addObserver(t[r])}},u.PreferenceManager.prototype.notifyAll=function(){for(var e in this.prefRecords_)this.notifyChange_(e)},u.PreferenceManager.prototype.notifyChange_=function(e){var t=this.prefRecords_[e];if(!t)throw new Error(\"Unknown preference: \"+e);for(var r=t.get(),i=0;i<this.globalObservers_.length;i++)this.globalObservers_[i](e,r);for(i=0;i<t.observers.length;i++)t.observers[i](r,e,this)},u.PreferenceManager.prototype.createChild=function(e,t,r){var i,o=this.get(e);if(r){if(i=r,-1!=o.indexOf(i))throw new Error(\"Duplicate child: \"+e+\": \"+i)}else for(;!i||-1!=o.indexOf(i);)i=u.f.randomInt(1,65535).toString(16),i=u.f.zpad(i,4),t&&(i=t+\":\"+i);var n=this.childFactories_[e](this,i);return n.trace=this.trace,n.resetAll(),this.childLists_[e][i]=n,o.push(i),this.set(e,o,void 0,!this.isImportingJson_),n},u.PreferenceManager.prototype.removeChild=function(e,t){this.getChild(e,t).resetAll();var r=this.get(e),i=r.indexOf(t);-1!=i&&(r.splice(i,1),this.set(e,r,void 0,!this.isImportingJson_)),delete this.childLists_[e][t]},u.PreferenceManager.prototype.getChild=function(e,t,r){if(!(e in this.childLists_))throw new Error(\"Unknown child list: \"+e);var i=this.childLists_[e];if(!(t in i)){if(void 0===r)throw new Error('Unknown \"'+e+'\" child: '+t);return r}return i[t]},u.PreferenceManager.diffChildLists=function(e,t){for(var r={added:{},removed:{},common:{}},i=0;i<e.length;i++)-1==t.indexOf(e[i])?r.added[e[i]]=!0:r.common[e[i]]=!0;for(i=0;i<t.length;i++)t[i]in r.added||t[i]in r.common||(r.removed[t[i]]=!0);return r},u.PreferenceManager.prototype.syncChildList=function(e,t){function r(){0==--i&&t&&t()}for(var i=0,o=this.get(e),n=Object.keys(this.childLists_[e]),s=(u.PreferenceManager.diffChildLists(o,n),0);s<o.length;s++){var a=o[s],l=n.indexOf(a);if(0<=l&&n.splice(l,1),!this.childLists_[e][a]){var c=this.childFactories_[e](this,a);if(!c){console.warn(\"Unable to restore child: \"+e+\": \"+a);continue}c.trace=this.trace,this.childLists_[e][a]=c,i++,c.readStorage(r)}}for(s=0;s<n.length;s++)delete this.childLists_[e][n[s]];!i&&t&&setTimeout(t)},u.PreferenceManager.prototype.reset=function(e){var t=this.prefRecords_[e];if(!t)throw new Error(\"Unknown preference: \"+e);this.storage.removeItem(this.prefix+e),t.currentValue!==this.DEFAULT_VALUE&&(t.currentValue=this.DEFAULT_VALUE,this.notifyChange_(e))},u.PreferenceManager.prototype.resetAll=function(){var e=[];for(var t in this.childLists_){var r=this.childLists_[t];for(var i in r)r[i].resetAll()}for(var o in this.prefRecords_)this.prefRecords_[o].currentValue!==this.DEFAULT_VALUE&&(this.prefRecords_[o].currentValue=this.DEFAULT_VALUE,e.push(o));var n=Object.keys(this.prefRecords_).map(function(e){return this.prefix+e}.bind(this));this.storage.removeItems(n),e.forEach(this.notifyChange_.bind(this))},u.PreferenceManager.prototype.diff=function(e,t){return typeof e!=typeof t||(/^(undefined|boolean|number|string)$/.test(typeof e)?e!==t:null!==e||null!==t)},u.PreferenceManager.prototype.changeDefault=function(e,t){var r=this.prefRecords_[e];if(!r)throw new Error(\"Unknown preference: \"+e);return this.diff(r.defaultValue,t)?r.currentValue===this.DEFAULT_VALUE?(r.defaultValue=t,void this.notifyChange_(e)):void(r.defaultValue=t):void 0},u.PreferenceManager.prototype.changeDefaults=function(e){for(var t in e)this.changeDefault(t,e[t])},u.PreferenceManager.prototype.set=function(e,t,r,i=!0){var o=this.prefRecords_[e];if(!o)throw new Error(\"Unknown preference: \"+e);var n=o.get();this.diff(n,t)&&(this.diff(o.defaultValue,t)?(o.currentValue=t,i&&this.storage.setItem(this.prefix+e,t,r)):(o.currentValue=this.DEFAULT_VALUE,i&&this.storage.removeItem(this.prefix+e,r)),setTimeout(this.notifyChange_.bind(this,e),0))},u.PreferenceManager.prototype.get=function(e){var t=this.prefRecords_[e];if(!t)throw new Error(\"Unknown preference: \"+e);return t.get()},u.PreferenceManager.prototype.exportAsJson=function(){var e={};for(var t in this.prefRecords_)if(t in this.childLists_){e[t]=[];for(var r,i=this.get(t),o=0;o<i.length;o++)r=i[o],e[t].push({id:r,json:this.getChild(t,r).exportAsJson()})}else{var n=this.prefRecords_[t];n.currentValue!=this.DEFAULT_VALUE&&(e[t]=n.currentValue)}return e},u.PreferenceManager.prototype.importFromJson=function(e,t){this.isImportingJson_=!0;let r=0;const i=()=>{if(1>--r){for(let r in t&&t(),e)r in this.childLists_&&this.set(r,this.get(r));this.isImportingJson_=!1}};for(var o in e)if(o in this.childLists_)for(var n=e[o],s=0;s<n.length;s++){var a=n[s].id,l=this.childLists_[o][a];l||(l=this.createChild(o,null,a)),l.importFromJson(n[s].json,i),r++}else this.set(o,e[o]);0==r&&t&&t()},u.PreferenceManager.prototype.onChildListChange_=function(e){this.syncChildList(e)},u.PreferenceManager.prototype.onStorageChange_=function(e){for(var t in e)if(!this.prefix||0==t.lastIndexOf(this.prefix,0)){var r=t.substr(this.prefix.length);if(r in this.prefRecords_){var i=this.prefRecords_[r],o=e[t].newValue,n=i.currentValue;n===i.DEFAULT_VALUE&&(n=void 0),this.diff(n,o)&&(i.currentValue=null==o?i.DEFAULT_VALUE:o,this.notifyChange_(r))}}},u.resource={resources_:{}},u.resource.add=function(e,t,r){u.resource.resources_[e]={type:t,name:e,data:r}},u.resource.get=function(e,t){if(!(e in u.resource.resources_)){if(void 0===t)throw\"Unknown resource: \"+e;return t}return u.resource.resources_[e]},u.resource.getData=function(e,t){if(!(e in u.resource.resources_)){if(void 0===t)throw\"Unknown resource: \"+e;return t}return u.resource.resources_[e].data},u.resource.getDataUrl=function(e,t){var r=u.resource.get(e,t);return\"data:\"+r.type+\",\"+r.data},u.Storage={},u.Storage.Chrome=function(e){this.storage_=e,this.observers_=[],chrome.storage.onChanged.addListener(this.onChanged_.bind(this))},u.Storage.Chrome.prototype.onChanged_=function(e,t){if(chrome.storage[t]==this.storage_)for(var r=0;r<this.observers_.length;r++)this.observers_[r](e)},u.Storage.Chrome.prototype.addObserver=function(e){this.observers_.push(e)},u.Storage.Chrome.prototype.removeObserver=function(e){var t=this.observers_.indexOf(e);-1!=t&&this.observers_.splice(t,1)},u.Storage.Chrome.prototype.clear=function(e){this.storage_.clear(),e&&setTimeout(e,0)},u.Storage.Chrome.prototype.getItem=function(e,t){this.storage_.get(e,t)},u.Storage.Chrome.prototype.getItems=function(e,t){this.storage_.get(e,t)},u.Storage.Chrome.prototype.setItem=function(e,t,r){const i=()=>{const o=u.f.lastError();if(o){if(o.indexOf(\"MAX_WRITE_OPERATIONS\"))return console.warn(`Will retry save of ${e} after exceeding quota: ${o}`),void setTimeout(()=>this.setItem(e,t,i),1e3);console.error(`Unknown runtime error: ${o}`)}r&&r()};var o={};o[e]=t,this.storage_.set(o,i)},u.Storage.Chrome.prototype.setItems=function(e,t){this.storage_.set(e,t)},u.Storage.Chrome.prototype.removeItem=function(e,t){this.storage_.remove(e,t)},u.Storage.Chrome.prototype.removeItems=function(e,t){this.storage_.remove(e,t)},u.Storage.Local=function(){this.observers_=[],this.storage_=window.localStorage,window.addEventListener(\"storage\",this.onStorage_.bind(this))},u.Storage.Local.prototype.onStorage_=function(e){if(e.storageArea==this.storage_){var t=e.oldValue?JSON.parse(e.oldValue):e.oldValue,r=e.newValue?JSON.parse(e.newValue):e.newValue,i={};i[e.key]={oldValue:t,newValue:r};for(var o=0;o<this.observers_.length;o++)this.observers_[o](i)}},u.Storage.Local.prototype.addObserver=function(e){this.observers_.push(e)},u.Storage.Local.prototype.removeObserver=function(e){var t=this.observers_.indexOf(e);-1!=t&&this.observers_.splice(t,1)},u.Storage.Local.prototype.clear=function(e){this.storage_.clear(),e&&setTimeout(e,0)},u.Storage.Local.prototype.getItem=function(e,t){var r=this.storage_.getItem(e);if(\"string\"==typeof r)try{r=JSON.parse(r)}catch(t){}setTimeout(t.bind(null,r),0)},u.Storage.Local.prototype.getItems=function(e,t){for(var r={},i=e.length-1;0<=i;i--){var o=e[i],n=this.storage_.getItem(o);if(\"string\"==typeof n)try{r[o]=JSON.parse(n)}catch(t){r[o]=n}else e.splice(i,1)}setTimeout(t.bind(null,r),0)},u.Storage.Local.prototype.setItem=function(e,t,r){this.storage_.setItem(e,JSON.stringify(t)),r&&setTimeout(r,0)},u.Storage.Local.prototype.setItems=function(e,t){for(var r in e)this.storage_.setItem(r,JSON.stringify(e[r]));t&&setTimeout(t,0)},u.Storage.Local.prototype.removeItem=function(e,t){this.storage_.removeItem(e),t&&setTimeout(t,0)},u.Storage.Local.prototype.removeItems=function(e,t){for(var r=0;r<e.length;r++)this.storage_.removeItem(e[r]);t&&setTimeout(t,0)},u.Storage.Memory=function(){this.observers_=[],this.storage_={}},u.Storage.Memory.prototype.addObserver=function(e){this.observers_.push(e)},u.Storage.Memory.prototype.removeObserver=function(e){var t=this.observers_.indexOf(e);-1!=t&&this.observers_.splice(t,1)},u.Storage.Memory.prototype.clear=function(e){var t={};for(var r in this.storage_)t[r]={oldValue:this.storage_[r],newValue:void 0};this.storage_={},setTimeout(function(){for(var e=0;e<this.observers_.length;e++)this.observers_[e](t)}.bind(this),0),e&&setTimeout(e,0)},u.Storage.Memory.prototype.getItem=function(e,t){var r=this.storage_[e];if(\"string\"==typeof r)try{r=JSON.parse(r)}catch(t){}setTimeout(t.bind(null,r),0)},u.Storage.Memory.prototype.getItems=function(e,t){for(var r={},i=e.length-1;0<=i;i--){var o=e[i],n=this.storage_[o];if(\"string\"==typeof n)try{r[o]=JSON.parse(n)}catch(t){r[o]=n}else e.splice(i,1)}setTimeout(t.bind(null,r),0)},u.Storage.Memory.prototype.setItem=function(e,t,r){var i=this.storage_[e];this.storage_[e]=JSON.stringify(t);var o={};o[e]={oldValue:i,newValue:t},setTimeout(function(){for(var e=0;e<this.observers_.length;e++)this.observers_[e](o)}.bind(this),0),r&&setTimeout(r,0)},u.Storage.Memory.prototype.setItems=function(e,t){var r={};for(var i in e)r[i]={oldValue:this.storage_[i],newValue:e[i]},this.storage_[i]=JSON.stringify(e[i]);setTimeout(function(){for(var e=0;e<this.observers_.length;e++)this.observers_[e](r)}.bind(this)),t&&setTimeout(t,0)},u.Storage.Memory.prototype.removeItem=function(e,t){delete this.storage_[e],t&&setTimeout(t,0)},u.Storage.Memory.prototype.removeItems=function(e,t){for(var r=0;r<e.length;r++)delete this.storage_[e[r]];t&&setTimeout(t,0)},function(e){function t(e=\"utf-8\"){if(\"utf-8\"!==e)throw new RangeError(`Failed to construct 'TextEncoder': The encoding label provided ('${e}') is invalid.`)}function r(e=\"utf-8\",t={fatal:!1}){if(\"utf-8\"!==e)throw new RangeError(`Failed to construct 'TextDecoder': The encoding label provided ('${e}') is invalid.`);if(t.fatal)throw new Error(\"Failed to construct 'TextDecoder': the 'fatal' option is unsupported.\")}!(e.TextEncoder&&e.TextDecoder)&&(Object.defineProperty(t.prototype,\"encoding\",{value:\"utf-8\"}),t.prototype.encode=function(e,t={stream:!1}){if(t.stream)throw new Error(\"Failed to encode: the 'stream' option is unsupported.\");let r=0;const i=e.length;let n=0,s=o(32,i+(i>>1)+7),a=new Uint8Array(s>>3<<3);for(;r<i;){let t=e.charCodeAt(r++);if(55296<=t&&56319>=t){if(r<i){const i=e.charCodeAt(r);56320==(64512&i)&&(++r,t=((1023&t)<<10)+(1023&i)+65536)}if(55296<=t&&56319>=t)continue}if(n+4>a.length){s+=8,s=(s*=1+r/e.length*2)>>3<<3;const t=new Uint8Array(s);t.set(a),a=t}if(0!=(4294967168&t)){if(0==(4294965248&t))a[n++]=192|31&t>>6;else if(0==(4294901760&t))a[n++]=224|15&t>>12,a[n++]=128|63&t>>6;else{if(0!=(4292870144&t))continue;a[n++]=240|7&t>>18,a[n++]=128|63&t>>12,a[n++]=128|63&t>>6}a[n++]=128|63&t}else a[n++]=t}return a.slice(0,n)},Object.defineProperty(r.prototype,\"encoding\",{value:\"utf-8\"}),Object.defineProperty(r.prototype,\"fatal\",{value:!1}),Object.defineProperty(r.prototype,\"ignoreBOM\",{value:!1}),r.prototype.decode=function(e,t={stream:!1}){if(t.stream)throw new Error(\"Failed to decode: the 'stream' option is unsupported.\");const r=new Uint8Array(e);let i=0;const o=r.length,n=[];for(;i<o;){const e=r[i++];if(0===e)break;if(0==(128&e))n.push(e);else if(192==(224&e)){const t=63&r[i++];n.push((31&e)<<6|t)}else if(224==(240&e)){const t=63&r[i++],o=63&r[i++];n.push((31&e)<<12|t<<6|o)}else if(240==(248&e)){let t=(7&e)<<18|(63&r[i++])<<12|(63&r[i++])<<6|63&r[i++];65535<t&&(t-=65536,n.push(55296|1023&t>>>10),t=56320|1023&t),n.push(t)}}return c.apply(null,n)},e.TextEncoder=t,e.TextDecoder=r)}(\"undefined\"==typeof window?void 0===r?this:r:window),function(e){function t(e,t){const r={none:0,number:100,letter:200,kana:300,ideo:400,unknown:-1}[e]||0;return\"character\"===t?void 0:\"word\"===t?e:\"sentence\"===t?{0:\"terminator\",100:\"separator\"}[r]||e:\"line\"===t&&{0:\"soft\",100:\"hard\"}[r]||e}function r(r,i,n){const s=[];if(\"v8BreakIterator\"in e.Intl){\"grapheme\"===i&&(i=\"character\");const o=new e.Intl.v8BreakIterator(r,{type:i});o.adoptText(n);for(let e=0,r=o.next();-1!==r;)s.push({pos:o.current(),segment:n.slice(e,r),breakType:t(o.breakType(),i)}),e=r,r=o.next()}else{const e=o[i];for(let t,r=0;r<n.length;){t=!1;for(let o of Object.keys(e)){const a=e[o],l=n.slice(r).match(a);if(l){r+=l[0].length,s.push({pos:r,segment:l[0],breakType:\"grapheme\"===i?void 0:o}),t=!0;break}}t||s.push({pos:r+1,segment:n.slice(r,++r),breakType:\"none\"})}}return s.initial=0,s}if(\"Intl\"in e&&\"Segmenter\"in e.Intl)return;e.Intl=e.Intl||{};const i=[\"grapheme\",\"word\",\"sentence\",\"line\"],o={grapheme:{grapheme:/^(.|\\n)/},word:{letter:/^[a-z](?:'?[a-z])*/i,number:/^\\d+([,.]\\d+)*/},sentence:{terminator:/^[^.?!\\r\\n]+[.?!]+[\\r\\n]?/,separator:/^[^.?!\\r\\n]+[\\r\\n]?/},line:{hard:/^\\S*[\\r\\n]/,soft:/^\\S*\\s*/}};class n{constructor(e,t){this._cur=-1,this._type=void 0,this._breaks=t}[Symbol.iterator](){return this}next(){return this._cur<this._breaks.length&&++this._cur,this._cur>=this._breaks.length?(this._type=void 0,{done:!0,value:void 0}):(this._type=this._breaks[this._cur].breakType,{done:!1,value:{segment:this._breaks[this._cur].segment,breakType:this._breaks[this._cur].breakType}})}following(e){if(!this._breaks.length)return!0;if(void 0===e)this._cur<this._breaks.length&&++this._cur;else for(this._cur=0;this._cur<this._breaks.length&&this._breaks[this._cur].pos<e;++this._cur);return this._type=this._cur<this._breaks.length?this._breaks[this._cur].breakType:void 0,this._cur+1>=this._breaks.length}preceding(e){if(!this._breaks.length)return!0;if(void 0===e)this._cur>=this._breaks.length&&--this._cur,0<=this._cur&&--this._cur;else for(this._cur=this._breaks.length-1;0<=this._cur&&this._breaks[this._cur].pos>=e;--this._cur);return this._type=this._cur+1>=this._breaks.length?void 0:this._breaks[this._cur+1].breakType,0>this._cur}get position(){return 0>this._cur||!this._breaks.length?this._breaks.initial:this._cur>=this._breaks.length?this._breaks[this._breaks.length-1].pos:this._breaks[this._cur].pos}get breakType(){return this._type}}e.Intl.Segmenter=class{constructor(e,t){this._locale=Array.isArray(e)?e.map(e=>e+\"\"):(e||navigator.language)+\"\",t=Object.assign({granularity:\"grapheme\"},t),this._granularity=i.includes(t.granularity)?t.granularity:\"grapheme\"}segment(e){return new n(e,r(this._locale,this._granularity,e))}}}(\"undefined\"==typeof window?void 0===r?this:r:window),u.wc={},u.wc.nulWidth=0,u.wc.controlWidth=0,u.wc.regardCjkAmbiguous=!1,u.wc.cjkAmbiguousWidth=2,u.wc.combining=[[173,173],[768,879],[1155,1161],[1425,1469],[1471,1471],[1473,1474],[1476,1477],[1479,1479],[1552,1562],[1564,1564],[1611,1631],[1648,1648],[1750,1756],[1759,1764],[1767,1768],[1770,1773],[1809,1809],[1840,1866],[1958,1968],[2027,2035],[2045,2045],[2070,2073],[2075,2083],[2085,2087],[2089,2093],[2137,2139],[2259,2273],[2275,2306],[2362,2362],[2364,2364],[2369,2376],[2381,2381],[2385,2391],[2402,2403],[2433,2433],[2492,2492],[2497,2500],[2509,2509],[2530,2531],[2558,2558],[2561,2562],[2620,2620],[2625,2626],[2631,2632],[2635,2637],[2641,2641],[2672,2673],[2677,2677],[2689,2690],[2748,2748],[2753,2757],[2759,2760],[2765,2765],[2786,2787],[2810,2815],[2817,2817],[2876,2876],[2879,2879],[2881,2884],[2893,2893],[2902,2902],[2914,2915],[2946,2946],[3008,3008],[3021,3021],[3072,3072],[3076,3076],[3134,3136],[3142,3144],[3146,3149],[3157,3158],[3170,3171],[3201,3201],[3260,3260],[3263,3263],[3270,3270],[3276,3277],[3298,3299],[3328,3329],[3387,3388],[3393,3396],[3405,3405],[3426,3427],[3530,3530],[3538,3540],[3542,3542],[3633,3633],[3636,3642],[3655,3662],[3761,3761],[3764,3772],[3784,3789],[3864,3865],[3893,3893],[3895,3895],[3897,3897],[3953,3966],[3968,3972],[3974,3975],[3981,3991],[3993,4028],[4038,4038],[4141,4144],[4146,4151],[4153,4154],[4157,4158],[4184,4185],[4190,4192],[4209,4212],[4226,4226],[4229,4230],[4237,4237],[4253,4253],[4448,4607],[4957,4959],[5906,5908],[5938,5940],[5970,5971],[6002,6003],[6068,6069],[6071,6077],[6086,6086],[6089,6099],[6109,6109],[6155,6158],[6277,6278],[6313,6313],[6432,6434],[6439,6440],[6450,6450],[6457,6459],[6679,6680],[6683,6683],[6742,6742],[6744,6750],[6752,6752],[6754,6754],[6757,6764],[6771,6780],[6783,6783],[6832,6846],[6912,6915],[6964,6964],[6966,6970],[6972,6972],[6978,6978],[7019,7027],[7040,7041],[7074,7077],[7080,7081],[7083,7085],[7142,7142],[7144,7145],[7149,7149],[7151,7153],[7212,7219],[7222,7223],[7376,7378],[7380,7392],[7394,7400],[7405,7405],[7412,7412],[7416,7417],[7616,7673],[7675,7679],[8203,8207],[8234,8238],[8288,8292],[8294,8303],[8400,8432],[11503,11505],[11647,11647],[11744,11775],[12330,12333],[12441,12442],[42607,42610],[42612,42621],[42654,42655],[42736,42737],[43010,43010],[43014,43014],[43019,43019],[43045,43046],[43204,43205],[43232,43249],[43263,43263],[43302,43309],[43335,43345],[43392,43394],[43443,43443],[43446,43449],[43452,43453],[43493,43493],[43561,43566],[43569,43570],[43573,43574],[43587,43587],[43596,43596],[43644,43644],[43696,43696],[43698,43700],[43703,43704],[43710,43711],[43713,43713],[43756,43757],[43766,43766],[44005,44005],[44008,44008],[44013,44013],[64286,64286],[65024,65039],[65056,65071],[65279,65279],[65529,65531],[66045,66045],[66272,66272],[66422,66426],[68097,68099],[68101,68102],[68108,68111],[68152,68154],[68159,68159],[68325,68326],[68900,68903],[69446,69456],[69633,69633],[69688,69702],[69759,69761],[69811,69814],[69817,69818],[69888,69890],[69927,69931],[69933,69940],[70003,70003],[70016,70017],[70070,70078],[70089,70092],[70191,70193],[70196,70196],[70198,70199],[70206,70206],[70367,70367],[70371,70378],[70400,70401],[70459,70460],[70464,70464],[70502,70508],[70512,70516],[70712,70719],[70722,70724],[70726,70726],[70750,70750],[70835,70840],[70842,70842],[70847,70848],[70850,70851],[71090,71093],[71100,71101],[71103,71104],[71132,71133],[71219,71226],[71229,71229],[71231,71232],[71339,71339],[71341,71341],[71344,71349],[71351,71351],[71453,71455],[71458,71461],[71463,71467],[71727,71735],[71737,71738],[72148,72151],[72154,72155],[72160,72160],[72193,72202],[72243,72248],[72251,72254],[72263,72263],[72273,72278],[72281,72283],[72330,72342],[72344,72345],[72752,72758],[72760,72765],[72767,72767],[72850,72871],[72874,72880],[72882,72883],[72885,72886],[73009,73014],[73018,73018],[73020,73021],[73023,73029],[73031,73031],[73104,73105],[73109,73109],[73111,73111],[73459,73460],[78896,78904],[92912,92916],[92976,92982],[94031,94031],[94095,94098],[113821,113822],[113824,113827],[119143,119145],[119155,119170],[119173,119179],[119210,119213],[119362,119364],[121344,121398],[121403,121452],[121461,121461],[121476,121476],[121499,121503],[121505,121519],[122880,122886],[122888,122904],[122907,122913],[122915,122916],[122918,122922],[123184,123190],[123628,123631],[125136,125142],[125252,125258],[917505,917505],[917536,917631],[917760,917999]],u.wc.ambiguous=[[161,161],[164,164],[167,168],[170,170],[173,174],[176,180],[182,186],[188,191],[198,198],[208,208],[215,216],[222,225],[230,230],[232,234],[236,237],[240,240],[242,243],[247,250],[252,252],[254,254],[257,257],[273,273],[275,275],[283,283],[294,295],[299,299],[305,307],[312,312],[319,322],[324,324],[328,331],[333,333],[338,339],[358,359],[363,363],[462,462],[464,464],[466,466],[468,468],[470,470],[472,472],[474,474],[476,476],[593,593],[609,609],[708,708],[711,711],[713,715],[717,717],[720,720],[728,731],[733,733],[735,735],[768,879],[913,929],[931,937],[945,961],[963,969],[1025,1025],[1040,1103],[1105,1105],[4352,4447],[8208,8208],[8211,8214],[8216,8217],[8220,8221],[8224,8226],[8228,8231],[8240,8240],[8242,8243],[8245,8245],[8251,8251],[8254,8254],[8308,8308],[8319,8319],[8321,8324],[8364,8364],[8451,8451],[8453,8453],[8457,8457],[8467,8467],[8470,8470],[8481,8482],[8486,8486],[8491,8491],[8531,8532],[8539,8542],[8544,8555],[8560,8569],[8585,8585],[8592,8601],[8632,8633],[8658,8658],[8660,8660],[8679,8679],[8704,8704],[8706,8707],[8711,8712],[8715,8715],[8719,8719],[8721,8721],[8725,8725],[8730,8730],[8733,8736],[8739,8739],[8741,8741],[8743,8748],[8750,8750],[8756,8759],[8764,8765],[8776,8776],[8780,8780],[8786,8786],[8800,8801],[8804,8807],[8810,8811],[8814,8815],[8834,8835],[8838,8839],[8853,8853],[8857,8857],[8869,8869],[8895,8895],[8978,8978],[8986,8987],[9001,9002],[9193,9196],[9200,9200],[9203,9203],[9312,9449],[9451,9547],[9552,9587],[9600,9615],[9618,9621],[9632,9633],[9635,9641],[9650,9651],[9654,9655],[9660,9661],[9664,9665],[9670,9672],[9675,9675],[9678,9681],[9698,9701],[9711,9711],[9725,9726],[9733,9734],[9737,9737],[9742,9743],[9748,9749],[9756,9756],[9758,9758],[9792,9792],[9794,9794],[9800,9811],[9824,9825],[9827,9829],[9831,9834],[9836,9837],[9839,9839],[9855,9855],[9875,9875],[9886,9887],[9889,9889],[9898,9899],[9917,9919],[9924,9953],[9955,9955],[9960,9983],[9989,9989],[9994,9995],[10024,10024],[10045,10045],[10060,10060],[10062,10062],[10067,10069],[10071,10071],[10102,10111],[10133,10135],[10160,10160],[10175,10175],[11035,11036],[11088,11088],[11093,11097],[11904,12255],[12272,12350],[12352,19903],[19968,42191],[43360,43391],[44032,55203],[57344,64255],[65024,65049],[65072,65135],[65281,65376],[65504,65510],[65533,65533],[94176,94179],[94208,101119],[110592,110895],[110928,110930],[110948,110951],[110960,111359],[126980,126980],[127183,127183],[127232,127242],[127248,127277],[127280,127337],[127344,127404],[127488,127490],[127504,127547],[127552,127560],[127568,127569],[127584,127589],[127744,127776],[127789,127797],[127799,127868],[127870,127891],[127904,127946],[127951,127955],[127968,127984],[127988,127988],[127992,128062],[128064,128064],[128066,128252],[128255,128317],[128331,128334],[128336,128359],[128378,128378],[128405,128406],[128420,128420],[128507,128591],[128640,128709],[128716,128716],[128720,128722],[128725,128725],[128747,128748],[128756,128762],[128992,129003],[129293,129393],[129395,129398],[129402,129442],[129445,129450],[129454,129482],[129485,129535],[129648,129651],[129656,129658],[129664,129666],[129680,129685],[131072,196605],[196608,262141],[917760,917999],[983040,1048573],[1048576,1114109]],u.wc.unambiguous=[[4352,4447],[8986,8987],[9001,9002],[9193,9196],[9200,9200],[9203,9203],[9725,9726],[9748,9749],[9800,9811],[9855,9855],[9875,9875],[9889,9889],[9898,9899],[9917,9918],[9924,9925],[9934,9934],[9940,9940],[9962,9962],[9970,9971],[9973,9973],[9978,9978],[9981,9981],[9989,9989],[9994,9995],[10024,10024],[10060,10060],[10062,10062],[10067,10069],[10071,10071],[10133,10135],[10160,10160],[10175,10175],[11035,11036],[11088,11088],[11093,11093],[11904,12255],[12272,12350],[12352,12871],[12880,19903],[19968,42191],[43360,43391],[44032,55203],[63744,64255],[65040,65049],[65072,65135],[65281,65376],[65504,65510],[94176,94179],[94208,101119],[110592,110895],[110928,110930],[110948,110951],[110960,111359],[126980,126980],[127183,127183],[127374,127374],[127377,127386],[127488,127490],[127504,127547],[127552,127560],[127568,127569],[127584,127589],[127744,127776],[127789,127797],[127799,127868],[127870,127891],[127904,127946],[127951,127955],[127968,127984],[127988,127988],[127992,128062],[128064,128064],[128066,128252],[128255,128317],[128331,128334],[128336,128359],[128378,128378],[128405,128406],[128420,128420],[128507,128591],[128640,128709],[128716,128716],[128720,128722],[128725,128725],[128747,128748],[128756,128762],[128992,129003],[129293,129393],[129395,129398],[129402,129442],[129445,129450],[129454,129482],[129485,129535],[129648,129651],[129656,129658],[129664,129666],[129680,129685],[131072,196605],[196608,262141]],u.wc.binaryTableSearch_=function(e,t){var r,i=0,o=t.length-1;if(e<t[i][0]||e>t[o][1])return!1;for(;o>=i;)if(e>t[r=n((i+o)/2)][1])i=r+1;else{if(!(e<t[r][0]))return!0;o=r-1}return!1},u.wc.isSpace=function(e){return u.wc.binaryTableSearch_(e,u.wc.combining)},u.wc.isCjkAmbiguous=function(e){return u.wc.binaryTableSearch_(e,u.wc.ambiguous)},u.wc.charWidth=function(e){return u.wc.regardCjkAmbiguous?u.wc.charWidthRegardAmbiguous(e):u.wc.charWidthDisregardAmbiguous(e)},u.wc.charWidthDisregardAmbiguous=function(e){return 127>e?32<=e?1:0==e?u.wc.nulWidth:u.wc.controlWidth:160>e?u.wc.controlWidth:u.wc.isSpace(e)?0:u.wc.binaryTableSearch_(e,u.wc.unambiguous)?2:1},u.wc.charWidthRegardAmbiguous=function(e){return u.wc.isCjkAmbiguous(e)?u.wc.cjkAmbiguousWidth:u.wc.charWidthDisregardAmbiguous(e)},u.wc.strWidth=function(e){for(var t,r,i=0,o=0;o<e.length;){if(r=e.codePointAt(o),0>(t=u.wc.charWidth(r)))return-1;i+=t,o+=65535>=r?1:2}return i},u.wc.substr=function(e,t,r){var i,o,n=0;if(t)for(o=0;n<e.length;){const r=e.codePointAt(n);if((o+=u.wc.charWidth(r))>t)break;n+=65535>=r?1:2}if(null!=r){for(i=n,o=0;i<e.length;){const t=e.codePointAt(i);if((o+=u.wc.charWidth(t))>r)break;i+=65535>=t?1:2}return e.substring(n,i)}return e.substr(n)},u.wc.substring=function(e,t,r){return u.wc.substr(e,t,r-t)},u.resource.add(\"libdot/changelog/version\",\"text/plain\",\"3.0.0\"),u.resource.add(\"libdot/changelog/date\",\"text/plain\",\"2019-08-06\");var f={windowType:null,os:null,zoomWarningMessage:\"ZOOM != 100%\",notifyCopyMessage:\"✂\",desktopNotificationTitle:\"♪ %(title) ♪\"};u.registerInit(\"hterm\",(function(e){function t(t){f.os=t,e()}function r(){u.i18n.getAcceptLanguages(e=>{f.messageManager||(f.messageManager=new u.MessageManager(e)),console.log(\"new hterm.messageManager\"),u.f.getOs().then(t).catch(t)})}function i(e){f.windowType=e.type,r()}console.log(\"lib.registerInit\"),f.defaultStorage||(window.chrome&&chrome.storage&&chrome.storage.sync?f.defaultStorage=new u.Storage.Chrome(chrome.storage.sync):f.defaultStorage=new u.Storage.Local);var o=!1;if(window.chrome&&chrome.runtime&&chrome.runtime.getManifest){var n=chrome.runtime.getManifest();o=n.app&&n.app.background}o?setTimeout(i.bind(null,{type:\"popup\"}),0):window.chrome&&chrome.tabs?chrome.tabs.getCurrent((function(e){e&&window.chrome?chrome.windows.get(e.windowId,null,i):(f.windowType=\"normal\",r())})):setTimeout(i.bind(null,{type:\"normal\"}),0)})),f.getClientSize=function(e){return e.getBoundingClientRect()},f.getClientWidth=function(e){return e.getBoundingClientRect().width},f.getClientHeight=function(e){return e.getBoundingClientRect().height},f.copySelectionToClipboard=function(e,t){const r=()=>{const r=e.createElement(\"pre\");r.id=\"hterm:copy-to-clipboard-source\",r.textContent=t,r.style.cssText=\"-webkit-user-select: text;-moz-user-select: text;position: absolute;top: -99px\",e.body.appendChild(r);const i=e.getSelection(),o=i.anchorNode,n=i.anchorOffset,s=i.focusNode,a=i.focusOffset;try{i.selectAllChildren(r)}catch(e){}try{e.execCommand(\"copy\")}catch(e){}return i.extend&&(o&&i.collapse(o,n),s&&i.extend(s,a)),r.parentNode.removeChild(r),Promise.resolve()};return(()=>navigator.permissions&&navigator.permissions.query?navigator.permissions.query({name:\"clipboard-write\"}).then(e=>{const t=(r,i)=>{switch(e.state){case\"granted\":return r();case\"denied\":return i();default:return new Promise((r,i)=>{e.onchange=()=>t(r,i)})}};return new Promise(t)}).catch(()=>Promise.resolve()):Promise.resolve())().then(()=>navigator.clipboard&&navigator.clipboard.writeText?navigator.clipboard.writeText(t).catch(r):r())},f.pasteFromClipboard=function(e){try{return e.execCommand(\"paste\")}catch(e){return!1}},f.msg=function(e,t=[],r){console.log(\"HTERM_\"+e,t,r),f.messageManager=new u.MessageManager(navigator.languages),f.messageManager.get(\"HTERM_\"+e,t,r)},f.notify=function(e){var t=(e,t)=>void 0===e?t:e;null==e&&(e={});var r={body:e.body,icon:t(e.icon,u.resource.getDataUrl(\"hterm/images/icon-96\"))},i=t(e.title,window.document.title);i||(i=\"hterm\"),i=u.f.replaceVars(f.desktopNotificationTitle,{title:i});var o=new Notification(i,r);return o.onclick=function(){window.focus(),this.close()},o},f.openUrl=function(e){if(window.chrome&&chrome.browser&&chrome.browser.openTab)chrome.browser.openTab({url:e});else{u.f.openWindow(e,\"_blank\").focus()}},f.Size=function(e,t){this.width=e,this.height=t},f.Size.prototype.resize=function(e,t){this.width=e,this.height=t},f.Size.prototype.clone=function(){return new f.Size(this.width,this.height)},f.Size.prototype.setTo=function(e){this.width=e.width,this.height=e.height},f.Size.prototype.equals=function(e){return this.width==e.width&&this.height==e.height},f.Size.prototype.toString=function(){return\"[hterm.Size: \"+this.width+\", \"+this.height+\"]\"},f.RowCol=function(e,t,r){this.row=e,this.column=t,this.overflow=!!r},f.RowCol.prototype.move=function(e,t,r){this.row=e,this.column=t,this.overflow=!!r},f.RowCol.prototype.clone=function(){return new f.RowCol(this.row,this.column,this.overflow)},f.RowCol.prototype.setTo=function(e){this.row=e.row,this.column=e.column,this.overflow=e.overflow},f.RowCol.prototype.equals=function(e){return this.row==e.row&&this.column==e.column&&this.overflow==e.overflow},f.RowCol.prototype.toString=function(){return\"[hterm.RowCol: \"+this.row+\", \"+this.column+\", \"+this.overflow+\"]\"},f.AccessibilityReader=function(e){this.document_=e.ownerDocument;const t=this.document_.createElement(\"div\");t.id=\"hterm:accessibility-live-region\",t.style.cssText=\"position: absolute;\\n                              width: 0; height: 0;\\n                              overflow: hidden;\\n                              left: 0; top: 0;\",e.appendChild(t),this.accessibilityEnabled=!1,this.liveElement_=this.document_.createElement(\"p\"),this.liveElement_.setAttribute(\"aria-live\",\"polite\"),this.liveElement_.setAttribute(\"aria-label\",\"\"),t.appendChild(this.liveElement_),this.assertiveLiveElement_=this.document_.createElement(\"p\"),this.assertiveLiveElement_.setAttribute(\"aria-live\",\"assertive\"),this.assertiveLiveElement_.setAttribute(\"aria-label\",\"\"),t.appendChild(this.assertiveLiveElement_),this.queue_=[],this.nextReadTimer_=null,this.cursorIsChanging_=!1,this.cursorChangeQueue_=[],this.lastCursorRowString_=null,this.lastCursorRow_=null,this.lastCursorColumn_=null,this.hasUserGesture=!1},f.AccessibilityReader.DELAY=50,f.AccessibilityReader.prototype.setAccessibilityEnabled=function(e){e||this.clear(),this.accessibilityEnabled=e},f.AccessibilityReader.prototype.decorate=function(e){[\"keydown\",\"keypress\",\"keyup\",\"textInput\"].forEach(t=>{e.addEventListener(t,()=>{this.hasUserGesture=!0})})},f.AccessibilityReader.prototype.beforeCursorChange=function(e,t,r){this.accessibilityEnabled&&this.hasUserGesture&&!this.cursorIsChanging_&&(this.cursorIsChanging_=!0,this.lastCursorRowString_=e,this.lastCursorRow_=t,this.lastCursorColumn_=r)},f.AccessibilityReader.prototype.afterCursorChange=function(e,t,r){if(this.cursorIsChanging_){if(this.cursorIsChanging_=!1,!this.announceAction_(e,t,r))for(let e=0;e<this.cursorChangeQueue_.length;++e)this.announce(this.cursorChangeQueue_[e]);this.cursorChangeQueue_=[],this.lastCursorRowString_=null,this.lastCursorRow_=null,this.lastCursorColumn_=null,this.hasUserGesture=!1}},f.AccessibilityReader.prototype.announce=function(e){if(this.accessibilityEnabled){if(this.cursorIsChanging_)return void this.cursorChangeQueue_.push(e);if(\"\\n\"==e&&0<this.queue_.length)return void this.queue_.push(\"\");if(0==this.queue_.length)this.queue_.push(e);else{let t=\"\";0!=this.queue_[this.queue_.length-1].length&&(t=\" \"),this.queue_[this.queue_.length-1]+=t+e}if(!this.nextReadTimer_){if(1!=this.queue_.length)throw new Error(\"Expected only one item in queue_ or nextReadTimer_ to be running.\");this.nextReadTimer_=setTimeout(this.addToLiveRegion_.bind(this),f.AccessibilityReader.DELAY)}}},f.AccessibilityReader.prototype.assertiveAnnounce=function(e){this.hasUserGesture&&\" \"==e&&(e=f.msg(\"SPACE_CHARACTER\",[],\"Space\")),(e=e.trim())==this.assertiveLiveElement_.getAttribute(\"aria-label\")&&(e=\"\\n\"+e),this.clear(),this.assertiveLiveElement_.setAttribute(\"aria-label\",e)},f.AccessibilityReader.prototype.newLine=function(){this.announce(\"\\n\")},f.AccessibilityReader.prototype.clear=function(){this.liveElement_.setAttribute(\"aria-label\",\"\"),this.assertiveLiveElement_.setAttribute(\"aria-label\",\"\"),clearTimeout(this.nextReadTimer_),this.nextReadTimer_=null,this.queue_=[],this.cursorIsChanging_=!1,this.cursorChangeQueue_=[],this.lastCursorRowString_=null,this.lastCursorRow_=null,this.lastCursorColumn_=null,this.hasUserGesture=!1},f.AccessibilityReader.prototype.announceAction_=function(e,t,r){if(this.lastCursorRow_!=t)return!1;if(this.lastCursorRowString_==e){if(this.lastCursorColumn_!=r&&\"\"==this.cursorChangeQueue_.join(\"\").trim()){const e=l(this.lastCursorColumn_,r),t=i(r-this.lastCursorColumn_);return this.assertiveAnnounce(u.wc.substr(this.lastCursorRowString_,e,t)),!0}return!1}if(this.lastCursorRowString_!=e){if(this.lastCursorColumn_+1==r&&\" \"==u.wc.substr(e,r-1,1)&&0<this.cursorChangeQueue_.length&&\" \"==this.cursorChangeQueue_[0])return this.assertiveAnnounce(\" \"),!0;const t=r;if(u.wc.strWidth(e)<=u.wc.strWidth(this.lastCursorRowString_)&&u.wc.substr(this.lastCursorRowString_,0,t)==u.wc.substr(e,0,t)){let r=u.wc.strWidth(e);for(;0<r&&r!=t&&\" \"==u.wc.substr(e,r-1,1);--r);const i=u.wc.strWidth(this.lastCursorRowString_)-r,o=r-t;if(u.wc.substr(this.lastCursorRowString_,t+i,o)==u.wc.substr(e,t,o)){const e=u.wc.substr(this.lastCursorRowString_,t,i);if(\"\"!=e)return this.assertiveAnnounce(e),!0}}return!1}return!1},f.AccessibilityReader.prototype.addToLiveRegion_=function(){this.nextReadTimer_=null;let e=this.queue_.join(\"\\n\").trim();e==this.liveElement_.getAttribute(\"aria-label\")&&(e=\"\\n\"+e),this.liveElement_.setAttribute(\"aria-label\",e),this.queue_=[]},f.ContextMenu=function(){this.document_=null,this.element_=null,this.menu_=[]},f.ContextMenu.SEPARATOR={},f.ContextMenu.prototype.setDocument=function(e){this.element_&&(this.element_.remove(),this.element_=null),this.document_=e,this.regenerate_(),this.document_.body.appendChild(this.element_)},f.ContextMenu.prototype.regenerate_=function(){for(this.element_?this.hide():(this.element_=this.document_.createElement(\"menu\"),this.element_.id=\"hterm:context-menu\",this.element_.style.cssText=\"\\n        display: none;\\n        border: solid 1px;\\n        position: absolute;\\n    \");this.element_.firstChild;)this.element_.removeChild(this.element_.firstChild);this.menu_.forEach(([e,t])=>{const r=this.document_.createElement(\"menuitem\");e===f.ContextMenu.SEPARATOR?(r.innerHTML=\"<hr>\",r.className=\"separator\"):(r.innerText=e,r.addEventListener(\"mousedown\",(function(e){e.preventDefault(),t(e)}))),this.element_.appendChild(r)})},f.ContextMenu.prototype.setItems=function(e){this.menu_=e,this.regenerate_()},f.ContextMenu.prototype.show=function(e,t){if(0!=this.menu_.length){t&&(this.element_.style.backgroundColor=t.getBackgroundColor(),this.element_.style.color=t.getForegroundColor(),this.element_.style.fontSize=t.getFontSize(),this.element_.style.fontFamily=t.getFontFamily()),this.element_.style.top=`${e.clientY}px`,this.element_.style.left=`${e.clientX}px`;const r=f.getClientSize(this.document_.body);this.element_.style.display=\"block\";const i=f.getClientSize(this.element_),n=o(0,r.height-i.height),s=o(0,r.width-i.width);n<e.clientY&&(this.element_.style.top=`${n}px`),s<e.clientX&&(this.element_.style.left=`${s}px`)}},f.ContextMenu.prototype.hide=function(){this.element_&&(this.element_.style.display=\"none\")},f.Frame=function(e,t,r){this.terminal_=e,this.div_=e.div_,this.url=t,this.options=r||{},this.iframe_=null,this.container_=null,this.messageChannel_=null},f.Frame.prototype.onMessage_=function(e){switch(e.data.name){case\"ipc-init-ok\":return void this.sendTerminalInfo_();case\"terminal-info-ok\":return this.container_.style.display=\"flex\",this.postMessage(\"visible\"),this.messageChannel_.port1.onmessage=this.onMessage.bind(this),void this.onLoad();default:return void console.log(\"Unknown message from frame:\",e.data)}},f.Frame.prototype.onMessage=function(){},f.Frame.prototype.onLoad_=function(){this.messageChannel_=new MessageChannel,this.messageChannel_.port1.onmessage=this.onMessage_.bind(this),this.messageChannel_.port1.start(),this.iframe_.contentWindow.postMessage({name:\"ipc-init\",argv:[{messagePort:this.messageChannel_.port2}]},this.url,[this.messageChannel_.port2])},f.Frame.prototype.onLoad=function(){},f.Frame.prototype.sendTerminalInfo_=function(){u.i18n.getAcceptLanguages(function(e){this.postMessage(\"terminal-info\",[{acceptLanguages:e,foregroundColor:this.terminal_.getForegroundColor(),backgroundColor:this.terminal_.getBackgroundColor(),cursorColor:this.terminal_.getCursorColor(),fontSize:this.terminal_.getFontSize(),fontFamily:this.terminal_.getFontFamily(),baseURL:u.f.getURL(\"/\")}])}.bind(this))},f.Frame.prototype.onCloseClicked_=function(){this.close()},f.Frame.prototype.close=function(){this.container_&&this.container_.parentNode&&(this.container_.parentNode.removeChild(this.container_),this.onClose())},f.Frame.prototype.onClose=function(){},f.Frame.prototype.postMessage=function(e,t){if(!this.messageChannel_)throw new Error(\"Message channel is not set up.\");this.messageChannel_.port1.postMessage({name:e,argv:t})},f.Frame.prototype.show=function(){function e(e,r){return e in t.options?t.options[e]:r}var t=this;t=this;if(this.container_&&this.container_.parentNode)console.error(\"Frame already visible\");else{var r=f.getClientSize(this.div_),i=e(\"width\",640),o=e(\"height\",480),n=(r.width,r.height,this.terminal_.document_),s=this.container_=n.createElement(\"div\");s.style.cssText=\"position: absolute;display: none;flex-direction: column;top: 10%;left: 4%;width: 90%;height: 80%;min-height: 20%;max-height: 80%;box-shadow: 0 0 2px \"+this.terminal_.getForegroundColor()+\";border: 2px \"+this.terminal_.getForegroundColor()+\" solid;\";var a=this.iframe_=n.createElement(\"iframe\");a.onload=this.onLoad_.bind(this),a.style.cssText=\"display: flex;flex: 1;width: 100%\",a.setAttribute(\"src\",this.url),a.setAttribute(\"seamless\",!0),s.appendChild(a),this.div_.appendChild(s)}},f.Keyboard=function(e){this.terminal=e,this.keyboardElement_=null,this.handlers_=[[\"focusout\",this.onFocusOut_.bind(this)],[\"keydown\",this.onKeyDown_.bind(this)],[\"keypress\",this.onKeyPress_.bind(this)],[\"keyup\",this.onKeyUp_.bind(this)],[\"textInput\",this.onTextInput_.bind(this)]],this.keyMap=new f.Keyboard.KeyMap(this),this.bindings=new f.Keyboard.Bindings(this),this.altGrMode=\"none\",this.shiftInsertPaste=!0,this.homeKeysScroll=!1,this.pageKeysScroll=!1,this.ctrlPlusMinusZeroZoom=!0,this.ctrlCCopy=!1,this.ctrlVPaste=!1,this.applicationKeypad=!1,this.applicationCursor=!1,this.backspaceSendsBackspace=!1,this.metaSendsEscape=!0,this.passMetaV=!0,this.altSendsWhat=\"escape\",this.altIsMeta=!1,this.altBackspaceIsMetaBackspace=!1,this.altKeyPressed=0,this.mediaKeysAreFKeys=!1,this.previousAltSendsWhat_=null},f.Keyboard.KeyActions={CANCEL:Symbol(\"CANCEL\"),DEFAULT:Symbol(\"DEFAULT\"),PASS:Symbol(\"PASS\"),STRIP:Symbol(\"STRIP\")},f.Keyboard.prototype.installKeyboard=function(e){if(e!=this.keyboardElement_){e&&this.keyboardElement_&&this.installKeyboard(null);for(var t,r=0;r<this.handlers_.length;r++)t=this.handlers_[r],e?e.addEventListener(t[0],t[1]):this.keyboardElement_.removeEventListener(t[0],t[1]);this.keyboardElement_=e}},f.Keyboard.prototype.uninstallKeyboard=function(){this.installKeyboard(null)},f.Keyboard.prototype.onTextInput_=function(e){e.data&&this.terminal.onVTKeystroke(e.data)},f.Keyboard.prototype.onKeyPress_=function(e){const t=c(e.which).toLowerCase();if((!e.ctrlKey&&!e.metaKey||\"c\"!=t&&\"v\"!=t)&&9!=e.keyCode){if(e.altKey&&\"browser-key\"==this.altSendsWhat&&0==e.charCode){var r=c(e.keyCode);e.shiftKey||(r=r.toLowerCase())}else 32<=e.charCode&&(r=e.charCode);r&&this.terminal.onVTKeystroke(c(r)),e.preventDefault(),e.stopPropagation()}},f.Keyboard.prototype.preventChromeAppNonCtrlShiftDefault_=function(e){window.chrome&&window.chrome.app&&window.chrome.app.window&&(e.ctrlKey&&e.shiftKey||e.preventDefault())},f.Keyboard.prototype.onFocusOut_=function(){this.altKeyPressed=0},f.Keyboard.prototype.onKeyUp_=function(e){18==e.keyCode&&(this.altKeyPressed&=~(1<<e.location-1)),27==e.keyCode&&this.preventChromeAppNonCtrlShiftDefault_(e)},f.Keyboard.prototype.onKeyDown_=function(e){function t(n){i=n;var a=r[n];return\"function\"==typeof a&&(a=a.apply(o.keyMap,[e,r])),a===s&&\"normal\"!=n&&(a=t(\"normal\")),a}18==e.keyCode&&(this.altKeyPressed|=1<<e.location-1),27==e.keyCode&&this.preventChromeAppNonCtrlShiftDefault_(e);var r=this.keyMap.keyDefs[e.keyCode];r||(console.warn(`No definition for key ${e.key} (keyCode ${e.keyCode})`),r=this.keyMap.keyDefs[0],this.keyMap.addKeyDef(e.keyCode,r));var i=null,o=this,n=f.Keyboard.KeyActions.CANCEL,s=f.Keyboard.KeyActions.DEFAULT,a=f.Keyboard.KeyActions.PASS,l=f.Keyboard.KeyActions.STRIP,h=e.ctrlKey,u=!this.altIsMeta&&e.altKey,d=this.altIsMeta&&e.altKey||e.metaKey,p=!/^\\[\\w+\\]$/.test(r.keyCap);switch(this.altGrMode){case\"ctrl-alt\":p&&h&&u&&(h=!1,u=!1);break;case\"right-alt\":p&&2&this.terminal.keyboard.altKeyPressed&&(h=!1,u=!1);break;case\"left-alt\":p&&1&this.terminal.keyboard.altKeyPressed&&(h=!1,u=!1)}var _=t(h?\"control\":u?\"alt\":d?\"meta\":\"normal\"),g=!e.maskShiftKey&&e.shiftKey,b={keyCode:e.keyCode,shift:e.shiftKey,ctrl:h,alt:u,meta:d},y=this.bindings.getBinding(b);if(y&&(g=h=u=d=!1,i=\"normal\",\"function\"==typeof(_=y.action)&&(_=_.call(this,this.terminal,b))),u&&\"browser-key\"==this.altSendsWhat&&_==s&&(_=a),_!==a&&(_!==s||h||u||d)&&(_===l&&(u=h=!1,\"function\"==typeof(_=r.normal)&&(_=_.apply(this.keyMap,[e,r])),_==s&&2==r.keyCap.length&&(_=r.keyCap.substr(g?1:0,1))),e.preventDefault(),e.stopPropagation(),_!==n)){if(_!==s&&\"string\"!=typeof _)return void console.warn(\"Invalid action: \"+JSON.stringify(_));if(\"control\"==i?h=!1:\"alt\"==i?u=!1:\"meta\"==i&&(d=!1),\"string\"==typeof _&&\"\x1b[\"==_.substr(0,2)&&(u||h||g||d)){let e=1;g&&(e+=1),u&&(e+=2),h&&(e+=4),d&&(e+=8);let t=\";\"+e;_=3==_.length?\"\x1b[1\"+t+_.substr(2,1):_.substr(0,_.length-1)+t+_.substr(_.length-1)}else{if(_===s&&(_=r.keyCap.substr(g?1:0,1),h))64<=(m=r.keyCap.substr(0,1).charCodeAt(0))&&95>=m&&(_=c(m-64));if(u&&\"8-bit\"==this.altSendsWhat&&1==_.length){var m=_.charCodeAt(0)+128;_=c(m)}(u&&\"escape\"==this.altSendsWhat||d&&this.metaSendsEscape)&&(_=\"\x1b\"+_)}this.terminal.onVTKeystroke(_)}},f.Keyboard.Bindings=function(){this.bindings_={}},f.Keyboard.Bindings.prototype.clear=function(){this.bindings_={}},f.Keyboard.Bindings.prototype.addBinding_=function(e,t){var r=null,i=this.bindings_[e.keyCode];if(i)for(var o=0;o<i.length;o++)if(i[o].keyPattern.matchKeyPattern(e)){r=i[o];break}r?r.action=t:(r={keyPattern:e,action:t},i?(this.bindings_[e.keyCode].push(r),i.sort((function(e,t){return f.Keyboard.KeyPattern.sortCompare(e.keyPattern,t.keyPattern)}))):this.bindings_[e.keyCode]=[r])},f.Keyboard.Bindings.prototype.addBinding=function(e,t){if(\"string\"==typeof e){var r,i=new f.Parser;i.reset(e);try{r=i.parseKeySequence()}catch(e){return void console.error(e)}if(i.isComplete()){if(\"string\"==typeof t){i.reset(t);try{t=i.parseKeyAction()}catch(e){return void console.error(e)}}return i.isComplete()?void this.addBinding_(new f.Keyboard.KeyPattern(r),t):void console.error(i.error(\"Expected end of sequence: \"+r))}console.error(i.error(\"Expected end of sequence: \"+r))}else this.addBinding_(e,t)},f.Keyboard.Bindings.prototype.addBindings=function(e){for(var t in e)this.addBinding(t,e[t])},f.Keyboard.Bindings.prototype.getBinding=function(e){var t=this.bindings_[e.keyCode];if(!t)return null;for(var r,i=0;i<t.length;i++)if((r=t[i]).keyPattern.matchKeyDown(e))return r;return null},f.Keyboard.KeyMap=function(e){this.keyboard=e,this.keyDefs={},this.reset()},f.Keyboard.KeyMap.prototype.addKeyDef=function(e,t){e in this.keyDefs&&console.warn(\"Duplicate keyCode: \"+e),this.keyDefs[e]=t},f.Keyboard.KeyMap.prototype.addKeyDefs=function(){for(var e=0;e<arguments.length;e++)this.addKeyDef(arguments[e][0],{keyCap:arguments[e][1],normal:arguments[e][2],control:arguments[e][3],alt:arguments[e][4],meta:arguments[e][5]})},f.Keyboard.KeyMap.prototype.reset=function(){function e(e,t,r){return\"function\"==typeof e?e.apply(h,[t,r]):e}function t(t,r){return function(i,o){return e(i.shiftKey||i.ctrlKey||i.altKey||i.metaKey||!h.keyboard.applicationCursor?t:r,i,o)}}function r(t,r){return function(i,o){return e(h.keyboard.backspaceSendsBackspace?r:t,i,o)}}function i(t,r){return function(i,o){var n=i.shiftKey?r:t;return i.maskShiftKey=!0,e(n,i,o)}}function o(t,r){return function(i,o){return e(i.altKey?r:t,i,o)}}function n(t,r){return function(i,o){return e(i.shiftKey||i.ctrlKey||i.altKey||i.metaKey?r:t,i,o)}}function s(e){return c(e.charCodeAt(0)-64)}function a(e){return function(t,r){return this[e](t,r)}}function l(t){return function(r,i){return h.keyboard.mediaKeysAreFKeys?e(t,r,i):166==r.keyCode||167==r.keyCode||168==r.keyCode?f.Keyboard.KeyActions.CANCEL:f.Keyboard.KeyActions.PASS}}this.keyDefs={};var h=this;if(window.navigator&&navigator.userAgent)if(navigator.userAgent.includes(\"Firefox\")){var u=59,d=61,p=173;this.addKeyDefs([171,\"+*\",_,a(\"onPlusMinusZero_\"),_,a(\"onPlusMinusZero_\")])}else u=186,d=187,p=189;f.Keyboard.KeyActions.CANCEL;var _=f.Keyboard.KeyActions.DEFAULT,g=f.Keyboard.KeyActions.PASS,b=f.Keyboard.KeyActions.STRIP;this.addKeyDefs([0,\"[UNKNOWN]\",g,g,g,g],[27,\"[ESC]\",\"\x1b\",_,_,_],[112,\"[F1]\",n(\"\x1bOP\",\"\x1b[P\"),_,\"\x1b[23~\",_],[113,\"[F2]\",n(\"\x1bOQ\",\"\x1b[Q\"),_,\"\x1b[24~\",_],[114,\"[F3]\",n(\"\x1bOR\",\"\x1b[R\"),_,\"\x1b[25~\",_],[115,\"[F4]\",n(\"\x1bOS\",\"\x1b[S\"),_,\"\x1b[26~\",_],[116,\"[F5]\",\"\x1b[15~\",_,\"\x1b[28~\",_],[117,\"[F6]\",\"\x1b[17~\",_,\"\x1b[29~\",_],[118,\"[F7]\",\"\x1b[18~\",_,\"\x1b[31~\",_],[119,\"[F8]\",\"\x1b[19~\",_,\"\x1b[32~\",_],[120,\"[F9]\",\"\x1b[20~\",_,\"\x1b[33~\",_],[121,\"[F10]\",\"\x1b[21~\",_,\"\x1b[34~\",_],[122,\"[F11]\",a(\"onF11_\"),_,\"\x1b[42~\",_],[123,\"[F12]\",\"\x1b[24~\",_,\"\x1b[43~\",_],[192,\"`~\",_,i(s(\"@\"),s(\"^\")),_,g],[49,\"1!\",_,a(\"onCtrlNum_\"),a(\"onAltNum_\"),a(\"onMetaNum_\")],[50,\"2@\",_,a(\"onCtrlNum_\"),a(\"onAltNum_\"),a(\"onMetaNum_\")],[51,\"3#\",_,a(\"onCtrlNum_\"),a(\"onAltNum_\"),a(\"onMetaNum_\")],[52,\"4$\",_,a(\"onCtrlNum_\"),a(\"onAltNum_\"),a(\"onMetaNum_\")],[53,\"5%\",_,a(\"onCtrlNum_\"),a(\"onAltNum_\"),a(\"onMetaNum_\")],[54,\"6^\",_,a(\"onCtrlNum_\"),a(\"onAltNum_\"),a(\"onMetaNum_\")],[55,\"7&\",_,a(\"onCtrlNum_\"),a(\"onAltNum_\"),a(\"onMetaNum_\")],[56,\"8*\",_,a(\"onCtrlNum_\"),a(\"onAltNum_\"),a(\"onMetaNum_\")],[57,\"9(\",_,a(\"onCtrlNum_\"),a(\"onAltNum_\"),a(\"onMetaNum_\")],[48,\"0)\",_,a(\"onPlusMinusZero_\"),a(\"onAltNum_\"),a(\"onPlusMinusZero_\")],[p,\"-_\",_,a(\"onPlusMinusZero_\"),_,a(\"onPlusMinusZero_\")],[d,\"=+\",_,a(\"onPlusMinusZero_\"),_,a(\"onPlusMinusZero_\")],[8,\"[BKSP]\",r(\"\u007f\",\"\\b\"),r(\"\\b\",\"\u007f\"),_,_],[9,\"[TAB]\",i(\"\\t\",\"\x1b[Z\"),b,g,_],[81,\"qQ\",_,s(\"Q\"),_,_],[87,\"wW\",_,s(\"W\"),_,_],[69,\"eE\",_,s(\"E\"),_,_],[82,\"rR\",_,s(\"R\"),_,_],[84,\"tT\",_,s(\"T\"),_,_],[89,\"yY\",_,s(\"Y\"),_,_],[85,\"uU\",_,s(\"U\"),_,_],[73,\"iI\",_,s(\"I\"),_,_],[79,\"oO\",_,s(\"O\"),_,_],[80,\"pP\",_,s(\"P\"),_,_],[219,\"[{\",_,s(\"[\"),_,_],[221,\"]}\",_,s(\"]\"),_,_],[220,\"\\\\|\",_,s(\"\\\\\"),_,_],[20,\"[CAPS]\",g,g,g,_],[65,\"aA\",_,s(\"A\"),_,_],[83,\"sS\",_,s(\"S\"),_,_],[68,\"dD\",_,s(\"D\"),_,_],[70,\"fF\",_,s(\"F\"),_,_],[71,\"gG\",_,s(\"G\"),_,_],[72,\"hH\",_,s(\"H\"),_,_],[74,\"jJ\",_,i(s(\"J\"),g),_,_],[75,\"kK\",_,i(s(\"K\"),a(\"onClear_\")),_,_],[76,\"lL\",_,i(s(\"L\"),g),_,_],[u,\";:\",_,b,_,_],[222,\"'\\\"\",_,b,_,_],[13,\"[ENTER]\",\"\\r\",_,_,_],[16,\"[SHIFT]\",g,g,g,_],[90,\"zZ\",_,s(\"Z\"),_,_],[88,\"xX\",_,s(\"X\"),_,_],[67,\"cC\",_,a(\"onCtrlC_\"),_,a(\"onMetaC_\")],[86,\"vV\",_,a(\"onCtrlV_\"),_,a(\"onMetaV_\")],[66,\"bB\",_,i(s(\"B\"),g),_,i(_,g)],[78,\"nN\",_,a(\"onCtrlN_\"),_,a(\"onMetaN_\")],[77,\"mM\",_,s(\"M\"),_,_],[188,\",<\",_,o(b,g),_,_],[190,\".>\",_,o(b,g),_,_],[191,\"/?\",_,i(s(\"_\"),s(\"?\")),_,_],[17,\"[CTRL]\",g,g,g,g],[18,\"[ALT]\",g,g,g,g],[91,\"[LAPL]\",g,g,g,g],[32,\" \",_,s(\"@\"),_,_],[92,\"[RAPL]\",g,g,g,g],[93,\"[RMENU]\",g,g,g,g],[42,\"[PRTSCR]\",g,g,g,g],[145,\"[SCRLK]\",g,g,g,g],[19,\"[BREAK]\",g,g,g,g],[45,\"[INSERT]\",a(\"onKeyInsert_\"),_,_,_],[36,\"[HOME]\",a(\"onKeyHome_\"),_,_,_],[33,\"[PGUP]\",a(\"onKeyPageUp_\"),_,_,_],[46,\"[DEL]\",a(\"onKeyDel_\"),_,_,_],[35,\"[END]\",a(\"onKeyEnd_\"),_,_,_],[34,\"[PGDOWN]\",a(\"onKeyPageDown_\"),_,_,_],[38,\"[UP]\",a(\"onKeyArrowUp_\"),_,_,_],[40,\"[DOWN]\",a(\"onKeyArrowDown_\"),_,_,_],[39,\"[RIGHT]\",t(\"\x1b[C\",\"\x1bOC\"),_,_,_],[37,\"[LEFT]\",t(\"\x1b[D\",\"\x1bOD\"),_,_,_],[144,\"[NUMLOCK]\",g,g,g,g],[12,\"[CLEAR]\",g,g,g,g],[96,\"[KP0]\",_,_,_,_],[97,\"[KP1]\",_,_,_,_],[98,\"[KP2]\",_,_,_,_],[99,\"[KP3]\",_,_,_,_],[100,\"[KP4]\",_,_,_,_],[101,\"[KP5]\",_,_,_,_],[102,\"[KP6]\",_,_,_,_],[103,\"[KP7]\",_,_,_,_],[104,\"[KP8]\",_,_,_,_],[105,\"[KP9]\",_,_,_,_],[107,\"[KP+]\",_,a(\"onPlusMinusZero_\"),_,a(\"onPlusMinusZero_\")],[109,\"[KP-]\",_,a(\"onPlusMinusZero_\"),_,a(\"onPlusMinusZero_\")],[106,\"[KP*]\",_,_,_,_],[111,\"[KP/]\",_,_,_,_],[110,\"[KP.]\",_,_,_,_]),\"cros\"==f.os&&this.addKeyDefs([166,\"[BACK]\",l(n(\"\x1bOP\",\"\x1b[P\")),_,\"\x1b[23~\",_],[167,\"[FWD]\",l(n(\"\x1bOQ\",\"\x1b[Q\")),_,\"\x1b[24~\",_],[168,\"[RELOAD]\",l(n(\"\x1bOR\",\"\x1b[R\")),_,\"\x1b[25~\",_],[183,\"[FSCR]\",l(n(\"\x1bOS\",\"\x1b[S\")),_,\"\x1b[26~\",_],[182,\"[WINS]\",l(\"\x1b[15~\"),_,\"\x1b[28~\",_],[216,\"[BRIT-]\",l(\"\x1b[17~\"),_,\"\x1b[29~\",_],[217,\"[BRIT+]\",l(\"\x1b[18~\"),_,\"\x1b[31~\",_],[173,\"[MUTE]\",l(\"\x1b[19~\"),_,\"\x1b[32~\",_],[174,\"[VOL-]\",l(\"\x1b[20~\"),_,\"\x1b[33~\",_],[175,\"[VOL+]\",l(\"\x1b[21~\"),_,\"\x1b[34~\",_],[152,\"[POWER]\",_,_,_,_],[179,\"[PLAY]\",l(\"\x1b[18~\"),_,\"\x1b[31~\",_],[154,\"[DOGS]\",l(\"\x1b[23~\"),_,\"\x1b[42~\",_],[153,\"[ASSIST]\",_,_,_,_])},f.Keyboard.KeyMap.prototype.onKeyInsert_=function(e){return this.keyboard.shiftInsertPaste&&e.shiftKey?f.Keyboard.KeyActions.PASS:\"\x1b[2~\"},f.Keyboard.KeyMap.prototype.onKeyHome_=function(e){return!this.keyboard.homeKeysScroll^e.shiftKey?e.altey||e.ctrlKey||e.shiftKey||!this.keyboard.applicationCursor?\"\x1b[H\":\"\x1bOH\":(this.keyboard.terminal.scrollHome(),f.Keyboard.KeyActions.CANCEL)},f.Keyboard.KeyMap.prototype.onKeyEnd_=function(e){return!this.keyboard.homeKeysScroll^e.shiftKey?e.altKey||e.ctrlKey||e.shiftKey||!this.keyboard.applicationCursor?\"\x1b[F\":\"\x1bOF\":(this.keyboard.terminal.scrollEnd(),f.Keyboard.KeyActions.CANCEL)},f.Keyboard.KeyMap.prototype.onKeyPageUp_=function(e){return!this.keyboard.pageKeysScroll^e.shiftKey?\"\x1b[5~\":(this.keyboard.terminal.scrollPageUp(),f.Keyboard.KeyActions.CANCEL)},f.Keyboard.KeyMap.prototype.onKeyDel_=function(e){return this.keyboard.altBackspaceIsMetaBackspace&&this.keyboard.altKeyPressed&&!e.altKey?\"\x1b\u007f\":\"\x1b[3~\"},f.Keyboard.KeyMap.prototype.onKeyPageDown_=function(e){return!this.keyboard.pageKeysScroll^e.shiftKey?\"\x1b[6~\":(this.keyboard.terminal.scrollPageDown(),f.Keyboard.KeyActions.CANCEL)},f.Keyboard.KeyMap.prototype.onKeyArrowUp_=function(e){return!this.keyboard.applicationCursor&&e.shiftKey?(this.keyboard.terminal.scrollLineUp(),f.Keyboard.KeyActions.CANCEL):e.shiftKey||e.ctrlKey||e.altKey||e.metaKey||!this.keyboard.applicationCursor?\"\x1b[A\":\"\x1bOA\"},f.Keyboard.KeyMap.prototype.onKeyArrowDown_=function(e){return!this.keyboard.applicationCursor&&e.shiftKey?(this.keyboard.terminal.scrollLineDown(),f.Keyboard.KeyActions.CANCEL):e.shiftKey||e.ctrlKey||e.altKey||e.metaKey||!this.keyboard.applicationCursor?\"\x1b[B\":\"\x1bOB\"},f.Keyboard.KeyMap.prototype.onClear_=function(){return this.keyboard.terminal.wipeContents(),f.Keyboard.KeyActions.CANCEL},f.Keyboard.KeyMap.prototype.onF11_=function(){return\"popup\"==f.windowType?\"\x1b[23~\":f.Keyboard.KeyActions.PASS},f.Keyboard.KeyMap.prototype.onCtrlNum_=function(e,t){function r(e){return c(e.charCodeAt(0)-64)}if(this.keyboard.terminal.passCtrlNumber&&!e.shiftKey)return f.Keyboard.KeyActions.PASS;switch(t.keyCap.substr(0,1)){case\"1\":return\"1\";case\"2\":return r(\"@\");case\"3\":return r(\"[\");case\"4\":return r(\"\\\\\");case\"5\":return r(\"]\");case\"6\":return r(\"^\");case\"7\":return r(\"_\");case\"8\":return\"\u007f\";case\"9\":return\"9\"}},f.Keyboard.KeyMap.prototype.onAltNum_=function(e){return this.keyboard.terminal.passAltNumber&&!e.shiftKey?f.Keyboard.KeyActions.PASS:f.Keyboard.KeyActions.DEFAULT},f.Keyboard.KeyMap.prototype.onMetaNum_=function(e){return this.keyboard.terminal.passMetaNumber&&!e.shiftKey?f.Keyboard.KeyActions.PASS:f.Keyboard.KeyActions.DEFAULT},f.Keyboard.KeyMap.prototype.onCtrlC_=function(e){var t=this.keyboard.terminal.getDocument().getSelection();if(!t.isCollapsed){if(this.keyboard.ctrlCCopy&&!e.shiftKey)return this.keyboard.terminal.clearSelectionAfterCopy&&setTimeout(t.collapseToEnd.bind(t),50),f.Keyboard.KeyActions.PASS;if(!this.keyboard.ctrlCCopy&&e.shiftKey)return this.keyboard.terminal.clearSelectionAfterCopy&&setTimeout(t.collapseToEnd.bind(t),50),this.keyboard.terminal.copySelectionToClipboard(),f.Keyboard.KeyActions.CANCEL}return\"\x03\"},f.Keyboard.KeyMap.prototype.onCtrlN_=function(e){return e.shiftKey?(u.f.openWindow(document.location.href,\"\",\"chrome=no,close=yes,resize=yes,scrollbars=yes,minimizable=yes,width=\"+window.innerWidth+\",height=\"+window.innerHeight),f.Keyboard.KeyActions.CANCEL):\"\x0e\"},f.Keyboard.KeyMap.prototype.onCtrlV_=function(e){return!e.shiftKey&&this.keyboard.ctrlVPaste||e.shiftKey&&!this.keyboard.ctrlVPaste?this.keyboard.terminal.paste()?f.Keyboard.KeyActions.CANCEL:f.Keyboard.KeyActions.PASS:\"\x16\"},f.Keyboard.KeyMap.prototype.onMetaN_=function(e){return e.shiftKey?(u.f.openWindow(document.location.href,\"\",\"chrome=no,close=yes,resize=yes,scrollbars=yes,minimizable=yes,width=\"+window.outerWidth+\",height=\"+window.outerHeight),f.Keyboard.KeyActions.CANCEL):f.Keyboard.KeyActions.DEFAULT},f.Keyboard.KeyMap.prototype.onMetaC_=function(e,t){var r=this.keyboard.terminal.getDocument();return e.shiftKey||r.getSelection().isCollapsed?t.keyCap.substr(e.shiftKey?1:0,1):(this.keyboard.terminal.clearSelectionAfterCopy&&setTimeout((function(){r.getSelection().collapseToEnd()}),50),f.Keyboard.KeyActions.PASS)},f.Keyboard.KeyMap.prototype.onMetaV_=function(e){return e.shiftKey?f.Keyboard.KeyActions.PASS:this.keyboard.passMetaV?f.Keyboard.KeyActions.PASS:f.Keyboard.KeyActions.DEFAULT},f.Keyboard.KeyMap.prototype.onPlusMinusZero_=function(e,t){if(!(this.keyboard.ctrlPlusMinusZeroZoom^e.shiftKey))return\"-_\"==t.keyCap?\"\x1f\":f.Keyboard.KeyActions.CANCEL;if(1!=this.keyboard.terminal.getZoomFactor())return f.Keyboard.KeyActions.PASS;var r=t.keyCap.substr(0,1);if(\"0\"==r)this.keyboard.terminal.setFontSize(0);else{var i=this.keyboard.terminal.getFontSize();\"-\"==r||\"[KP-]\"==t.keyCap?i-=1:i+=1,this.keyboard.terminal.setFontSize(i)}return f.Keyboard.KeyActions.CANCEL},f.Keyboard.KeyPattern=function(e){this.wildcardCount=0,this.keyCode=e.keyCode,f.Keyboard.KeyPattern.modifiers.forEach(function(t){this[t]=e[t]||!1,\"*\"==this[t]&&this.wildcardCount++}.bind(this))},f.Keyboard.KeyPattern.modifiers=[\"shift\",\"ctrl\",\"alt\",\"meta\"],f.Keyboard.KeyPattern.sortCompare=function(e,t){return e.wildcardCount<t.wildcardCount?-1:e.wildcardCount>t.wildcardCount?1:0},f.Keyboard.KeyPattern.prototype.match_=function(e,t){if(this.keyCode!=e.keyCode)return!1;var r=!0;return f.Keyboard.KeyPattern.modifiers.forEach(function(i){var o=!!(i in e)&&e[i];r&&(t||\"*\"!=this[i])&&this[i]!=o&&(r=!1)}.bind(this)),r},f.Keyboard.KeyPattern.prototype.matchKeyDown=function(e){return this.match_(e,!1)},f.Keyboard.KeyPattern.prototype.matchKeyPattern=function(e){return this.match_(e,!0)},f.Options=function(e){this.wraparound=!e||e.wraparound,this.reverseWraparound=!!e&&e.reverseWraparound,this.originMode=!!e&&e.originMode,this.autoCarriageReturn=!!e&&e.autoCarriageReturn,this.cursorVisible=!!e&&e.cursorVisible,this.cursorBlink=!!e&&e.cursorBlink,this.insertMode=!!e&&e.insertMode,this.reverseVideo=!!e&&e.reverseVideo,this.bracketedPaste=!!e&&e.bracketedPaste},f.Parser=function(){this.source=\"\",this.pos=0,this.ch=null},f.Parser.prototype.error=function(e){return new Error(\"Parse error at \"+this.pos+\": \"+e)},f.Parser.prototype.isComplete=function(){return this.pos==this.source.length},f.Parser.prototype.reset=function(e,t){this.source=e,this.pos=t||0,this.ch=e.substr(0,1)},f.Parser.prototype.parseKeySequence=function(){var e={keyCode:null};for(var t in f.Parser.identifiers.modifierKeys)e[f.Parser.identifiers.modifierKeys[t]]=!1;for(;this.pos<this.source.length;){this.skipSpace();var r=this.parseToken();if(\"integer\"==r.type)e.keyCode=r.value;else if(\"identifier\"==r.type){var i=r.value.toUpperCase();if(i in f.Parser.identifiers.modifierKeys&&f.Parser.identifiers.modifierKeys.hasOwnProperty(i)){var o=f.Parser.identifiers.modifierKeys[i];if(e[o]&&\"*\"!=e[o])throw this.error(\"Duplicate modifier: \"+r.value);e[o]=!0}else{if(!(i in f.Parser.identifiers.keyCodes&&f.Parser.identifiers.keyCodes.hasOwnProperty(i)))throw this.error(\"Unknown key: \"+r.value);e.keyCode=f.Parser.identifiers.keyCodes[i]}}else{if(\"symbol\"!=r.type)throw this.error(\"Expected integer or identifier\");if(\"*\"!=r.value)throw this.error(\"Unexpected symbol: \"+r.value);for(var n in f.Parser.identifiers.modifierKeys){var s=f.Parser.identifiers.modifierKeys[n];e[s]||(e[s]=\"*\")}}if(this.skipSpace(),\"-\"!=this.ch)break;if(null!=e.keyCode)throw this.error(\"Extra definition after target key\");this.advance(1)}if(null==e.keyCode)throw this.error(\"Missing target key\");return e},f.Parser.prototype.parseKeyAction=function(){this.skipSpace();var e=this.parseToken();if(\"string\"==e.type)return e.value;if(\"identifier\"==e.type){if(e.value in f.Parser.identifiers.actions&&f.Parser.identifiers.actions.hasOwnProperty(e.value))return f.Parser.identifiers.actions[e.value];throw this.error(\"Unknown key action: \"+e.value)}throw this.error(\"Expected string or identifier\")},f.Parser.prototype.peekString=function(){return\"'\"==this.ch||'\"'==this.ch},f.Parser.prototype.peekIdentifier=function(){return this.ch.match(/[a-z_]/i)},f.Parser.prototype.peekInteger=function(){return this.ch.match(/[0-9]/)},f.Parser.prototype.parseToken=function(){if(\"*\"==this.ch){var e={type:\"symbol\",value:this.ch};return this.advance(1),e}if(this.peekIdentifier())return{type:\"identifier\",value:this.parseIdentifier()};if(this.peekString())return{type:\"string\",value:this.parseString()};if(this.peekInteger())return{type:\"integer\",value:this.parseInteger()};throw this.error(\"Unexpected token\")},f.Parser.prototype.parseIdentifier=function(){if(!this.peekIdentifier())throw this.error(\"Expected identifier\");return this.parsePattern(/[a-z0-9_]+/gi)},f.Parser.prototype.parseInteger=function(){return\"0\"==this.ch&&this.pos<this.source.length-1&&\"x\"==this.source.substr(this.pos+1,1)?parseInt(this.parsePattern(/0x[0-9a-f]+/gi)):parseInt(this.parsePattern(/\\d+/g))},f.Parser.prototype.parseString=function(){var e=\"\",t=this.ch;if('\"'!=t&&\"'\"!=t)throw this.error(\"String expected\");this.advance(1);for(var r=new RegExp(\"[\\\\\\\\\"+t+\"]\",\"g\");this.pos<this.source.length;){if(r.lastIndex=this.pos,!r.exec(this.source))throw this.error(\"Unterminated string literal\");if(e+=this.source.substring(this.pos,r.lastIndex-1),this.advance(r.lastIndex-this.pos-1),'\"'!=t||\"\\\\\"!=this.ch)if(\"'\"!=t||\"\\\\\"!=this.ch){if(this.ch==t)return this.advance(1),e}else e+=this.ch,this.advance(1);else this.advance(1),e+=this.parseEscape()}throw this.error(\"Unterminated string literal\")},f.Parser.prototype.parseEscape=function(){var e={'\"':'\"',\"'\":\"'\",\"\\\\\":\"\\\\\",a:\"\a\",b:\"\\b\",e:\"\x1b\",f:\"\\f\",n:\"\\n\",r:\"\\r\",t:\"\\t\",v:\"\\v\",x:function(){var e=this.parsePattern(/[a-z0-9]{2}/gi);return c(parseInt(e,16))},u:function(){var e=this.parsePattern(/[a-z0-9]{4}/gi);return c(parseInt(e,16))}};if(!(this.ch in e&&e.hasOwnProperty(this.ch)))throw this.error(\"Unknown escape: \"+this.ch);var t=e[this.ch];return this.advance(1),\"function\"==typeof t&&(t=t.call(this)),t},f.Parser.prototype.parsePattern=function(e){if(!e.global)throw this.error(\"Internal error: Span patterns must be global\");e.lastIndex=this.pos;var t=e.exec(this.source);if(!t||e.lastIndex-t[0].length!=this.pos)throw this.error(\"Expected match for: \"+e);return this.pos=e.lastIndex-1,this.advance(1),t[0]},f.Parser.prototype.advance=function(e){this.pos+=e,this.ch=this.source.substr(this.pos,1)},f.Parser.prototype.skipSpace=function(e){if(/\\s/.test(this.ch)){var t=/\\s+/gm;t.lastIndex=this.pos;var r=this.source;if(t.exec(r)&&(this.pos=t.lastIndex),this.ch=this.source.substr(this.pos,1),e&&-1==this.ch.indexOf(e))throw this.error(\"Expected one of \"+e+\", found: \"+this.ch)}},f.Parser.identifiers={},f.Parser.identifiers.modifierKeys={SHIFT:\"shift\",CTRL:\"ctrl\",CONTROL:\"ctrl\",ALT:\"alt\",META:\"meta\"},f.Parser.identifiers.keyCodes={ESCAPE:27,ESC:27,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,ZERO:48,BACKSPACE:8,BKSP:8,BS:8,TAB:9,Q:81,W:87,E:69,R:82,T:84,Y:89,U:85,I:73,O:79,P:80,CAPS_LOCK:20,CAPSLOCK:20,CAPS:20,A:65,S:83,D:68,F:70,G:71,H:72,J:74,K:75,L:76,ENTER:13,ENT:13,RETURN:13,RET:13,Z:90,X:88,C:67,V:86,B:66,N:78,M:77,SPACE:32,SP:32,PRINT_SCREEN:42,PRTSC:42,SCROLL_LOCK:145,SCRLK:145,BREAK:19,BRK:19,INSERT:45,INS:45,HOME:36,PAGE_UP:33,PGUP:33,DELETE:46,DEL:46,END:35,PAGE_DOWN:34,PGDOWN:34,PGDN:34,UP:38,DOWN:40,RIGHT:39,LEFT:37,NUMLOCK:144,KP0:96,KP1:97,KP2:98,KP3:99,KP4:100,KP5:101,KP6:102,KP7:103,KP8:104,KP9:105,KP_PLUS:107,KP_ADD:107,KP_MINUS:109,KP_SUBTRACT:109,KP_STAR:106,KP_MULTIPLY:106,KP_DIVIDE:111,KP_DECIMAL:110,KP_PERIOD:110,NAVIGATE_BACK:166,NAVIGATE_FORWARD:167,RELOAD:168,FULL_SCREEN:183,WINDOW_OVERVIEW:182,BRIGHTNESS_UP:216,BRIGHTNESS_DOWN:217},f.Parser.identifiers.actions={CANCEL:f.Keyboard.KeyActions.CANCEL,DEFAULT:f.Keyboard.KeyActions.DEFAULT,PASS:f.Keyboard.KeyActions.PASS,scrollLineUp:function(e){return e.scrollLineUp(),f.Keyboard.KeyActions.CANCEL},scrollLineDown:function(e){return e.scrollLineDown(),f.Keyboard.KeyActions.CANCEL},scrollPageUp:function(e){return e.scrollPageUp(),f.Keyboard.KeyActions.CANCEL},scrollPageDown:function(e){return e.scrollPageDown(),f.Keyboard.KeyActions.CANCEL},scrollToTop:function(e){return e.scrollHome(),f.Keyboard.KeyActions.CANCEL},scrollToBottom:function(e){return e.scrollEnd(),f.Keyboard.KeyActions.CANCEL},clearScreen:function(e){return e.clearHome(),f.Keyboard.KeyActions.CANCEL},clearScrollback:function(e){return e.clearScrollback(),f.Keyboard.KeyActions.CANCEL},clearTerminal:function(e){return e.wipeContents(),f.Keyboard.KeyActions.CANCEL},fullReset:function(e){return e.reset(),f.Keyboard.KeyActions.CANCEL},softReset:function(e){return e.softReset(),f.Keyboard.KeyActions.CANCEL}},f.PreferenceManager=function(e){u.PreferenceManager.call(this,f.defaultStorage,f.PreferenceManager.prefix_+e),Object.entries(f.PreferenceManager.defaultPreferences).forEach(([e,t])=>{this.definePreference(e,t.default)})},f.PreferenceManager.prefix_=\"/hterm/profiles/\",f.PreferenceManager.listProfiles=function(e){f.defaultStorage.getItems(null,t=>{const r={};for(let e of Object.keys(t))if(e.startsWith(f.PreferenceManager.prefix_)){r[e.slice(f.PreferenceManager.prefix_.length).split(\"/\",1)[0]]=!0}e(Object.keys(r))})},f.PreferenceManager.categories={},f.PreferenceManager.categories.Keyboard=\"Keyboard\",f.PreferenceManager.categories.Appearance=\"Appearance\",f.PreferenceManager.categories.CopyPaste=\"CopyPaste\",f.PreferenceManager.categories.Sounds=\"Sounds\",f.PreferenceManager.categories.Scrolling=\"Scrolling\",f.PreferenceManager.categories.Encoding=\"Encoding\",f.PreferenceManager.categories.Extensions=\"Extensions\",f.PreferenceManager.categories.Miscellaneous=\"Miscellaneous\",f.PreferenceManager.categoryDefinitions=[{id:f.PreferenceManager.categories.Appearance,text:\"Appearance (fonts, colors, images)\"},{id:f.PreferenceManager.categories.CopyPaste,text:\"Copy & Paste\"},{id:f.PreferenceManager.categories.Encoding,text:\"Encoding\"},{id:f.PreferenceManager.categories.Keyboard,text:\"Keyboard\"},{id:f.PreferenceManager.categories.Scrolling,text:\"Scrolling\"},{id:f.PreferenceManager.categories.Sounds,text:\"Sounds\"},{id:f.PreferenceManager.categories.Extensions,text:\"Extensions\"},{id:f.PreferenceManager.categories.Miscellaneous,text:\"Miscellaneous\"}],f.PreferenceManager.definePref_=function(e,t,r,i,o){return{name:e,category:t,default:r,type:i,help:o}},f.PreferenceManager.defaultPreferences={\"alt-gr-mode\":f.PreferenceManager.definePref_(\"AltGr key mode\",f.PreferenceManager.categories.Keyboard,null,[null,\"none\",\"ctrl-alt\",\"left-alt\",\"right-alt\"],\"Select an AltGr detection heuristic.\\n\\n'null': Autodetect based on navigator.language:\\n      'en-us' => 'none', else => 'right-alt'\\n'none': Disable any AltGr related munging.\\n'ctrl-alt': Assume Ctrl+Alt means AltGr.\\n'left-alt': Assume left Alt means AltGr.\\n'right-alt': Assume right Alt means AltGr.\"),\"alt-backspace-is-meta-backspace\":f.PreferenceManager.definePref_(\"Alt-Backspace is Meta-Backspace\",f.PreferenceManager.categories.Keyboard,!1,\"bool\",\"If set, undoes the Chrome OS Alt-Backspace->DEL remap, so that Alt-Backspace indeed is Alt-Backspace.\"),\"alt-is-meta\":f.PreferenceManager.definePref_(\"Treat Alt key as Meta key\",f.PreferenceManager.categories.Keyboard,!1,\"bool\",\"Whether the Alt key acts as a Meta key or as a distinct Alt key.\"),\"alt-sends-what\":f.PreferenceManager.definePref_(\"Alt key modifier handling\",f.PreferenceManager.categories.Keyboard,\"escape\",[\"escape\",\"8-bit\",\"browser-key\"],\"Controls how the Alt key is handled.\\n\\n  escape: Send an ESC prefix.\\n  8-bit: Add 128 to the typed character as in xterm.\\n  browser-key: Wait for the keypress event and see what the browser\\n    says. (This won't work well on platforms where the browser\\n    performs a default action for some Alt sequences.)\"),\"audible-bell-sound\":f.PreferenceManager.definePref_(\"Alert bell sound (URI)\",f.PreferenceManager.categories.Sounds,\"lib-resource:hterm/audio/bell\",\"url\",\"URL of the terminal bell sound. Empty string for no audible bell.\"),\"desktop-notification-bell\":f.PreferenceManager.definePref_(\"Create desktop notifications for alert bells\",f.PreferenceManager.categories.Sounds,!1,\"bool\",'If true, terminal bells in the background will create a Web Notification. https://www.w3.org/TR/notifications/\\n\\nDisplaying notifications requires permission from the user. When this option is set to true, hterm will attempt to ask the user for permission if necessary. Browsers may not show this permission request if it was not triggered by a user action.\\n\\nChrome extensions with the \"notifications\" permission have permission to display notifications.'),\"background-color\":f.PreferenceManager.definePref_(\"Background color\",f.PreferenceManager.categories.Appearance,\"rgb(16, 16, 16)\",\"color\",\"The background color for text with no other color attributes.\"),\"background-image\":f.PreferenceManager.definePref_(\"Background image\",f.PreferenceManager.categories.Appearance,\"\",\"string\",\"CSS value of the background image. Empty string for no image.\\n\\nFor example:\\n  url(https://goo.gl/anedTK)\\n  linear-gradient(top bottom, blue, red)\"),\"background-size\":f.PreferenceManager.definePref_(\"Background image size\",f.PreferenceManager.categories.Appearance,\"\",\"string\",\"CSS value of the background image size.\"),\"background-position\":f.PreferenceManager.definePref_(\"Background image position\",f.PreferenceManager.categories.Appearance,\"\",\"string\",\"CSS value of the background image position.\\n\\nFor example:\\n  10% 10%\\n  center\"),\"backspace-sends-backspace\":f.PreferenceManager.definePref_(\"Backspace key behavior\",f.PreferenceManager.categories.Keyboard,!1,\"bool\",\"If true, the backspace should send BS ('\\\\x08', aka ^H). Otherwise the backspace key should send '\\\\x7f'.\"),\"character-map-overrides\":f.PreferenceManager.definePref_(\"Character map overrides\",f.PreferenceManager.categories.Appearance,null,\"value\",'This is specified as an object. It is a sparse array, where each property is the character set code and the value is an object that is a sparse array itself. In that sparse array, each property is the received character and the value is the displayed character.\\n\\nFor example:\\n  {\"0\":{\"+\":\"\\\\u2192\",\",\":\"\\\\u2190\",\"-\":\"\\\\u2191\",\".\":\"\\\\u2193\", \"0\":\"\\\\u2588\"}}'),\"close-on-exit\":f.PreferenceManager.definePref_(\"Close window on exit\",f.PreferenceManager.categories.Miscellaneous,!0,\"bool\",\"Whether to close the window when the command finishes executing.\"),\"cursor-blink\":f.PreferenceManager.definePref_(\"Cursor blink\",f.PreferenceManager.categories.Appearance,!1,\"bool\",\"Whether the text cursor blinks by default. This can be toggled at runtime via terminal escape sequences.\"),\"cursor-blink-cycle\":f.PreferenceManager.definePref_(\"Cursor blink rate\",f.PreferenceManager.categories.Appearance,[1e3,500],\"value\",\"The text cursor blink rate in milliseconds.\\n\\nA two element array, the first of which is how long the text cursor should be on, second is how long it should be off.\"),\"cursor-shape\":f.PreferenceManager.definePref_(\"Text cursor shape\",f.PreferenceManager.categories.Appearance,\"BLOCK\",[\"BLOCK\",\"BEAM\",\"UNDERLINE\"],\"The shape of the visible text cursor. This can be toggled at runtime via terminal escape sequences.\"),\"cursor-color\":f.PreferenceManager.definePref_(\"Text cursor color\",f.PreferenceManager.categories.Appearance,\"rgba(255, 0, 0, 0.5)\",\"color\",\"The color of the visible text cursor.\"),\"color-palette-overrides\":f.PreferenceManager.definePref_(\"Initial color palette\",f.PreferenceManager.categories.Appearance,null,\"value\",'Override colors in the default palette.\\n\\nThis can be specified as an array or an object. If specified as an object it is assumed to be a sparse array, where each property is a numeric index into the color palette.\\n\\nValues can be specified as almost any CSS color value. This includes #RGB, #RRGGBB, rgb(...), rgba(...), and any color names that are also part of the standard X11 rgb.txt file.\\n\\nYou can use \\'null\\' to specify that the default value should be not be changed. This is useful for skipping a small number of indices when the value is specified as an array.\\n\\nFor example, these both set color index 1 to blue:\\n  {1: \"#0000ff\"}\\n  [null, \"#0000ff\"]'),\"copy-on-select\":f.PreferenceManager.definePref_(\"Automatically copy selected content\",f.PreferenceManager.categories.CopyPaste,!0,\"bool\",\"Automatically copy mouse selection to the clipboard.\"),\"use-default-window-copy\":f.PreferenceManager.definePref_(\"Let the browser handle text copying\",f.PreferenceManager.categories.CopyPaste,!1,\"bool\",\"Whether to use the default browser/OS's copy behavior.\\n\\nAllow the browser/OS to handle the copy event directly which might improve compatibility with some systems (where copying doesn't work at all), but makes the text selection less robust.\\n\\nFor example, long lines that were automatically line wrapped will be copied with the newlines still in them.\"),\"clear-selection-after-copy\":f.PreferenceManager.definePref_(\"Automatically clear text selection\",f.PreferenceManager.categories.CopyPaste,!0,\"bool\",\"Whether to clear the selection after copying.\"),\"ctrl-plus-minus-zero-zoom\":f.PreferenceManager.definePref_(\"Ctrl-+/-/0 zoom behavior\",f.PreferenceManager.categories.Keyboard,!0,\"bool\",\"If true, Ctrl-Plus/Minus/Zero controls zoom.\\nIf false, Ctrl-Shift-Plus/Minus/Zero controls zoom, Ctrl-Minus sends ^_, Ctrl-Plus/Zero do nothing.\"),\"ctrl-c-copy\":f.PreferenceManager.definePref_(\"Ctrl-C copy behavior\",f.PreferenceManager.categories.Keyboard,!1,\"bool\",\"Ctrl-C copies if true, send ^C to host if false.\\nCtrl-Shift-C sends ^C to host if true, copies if false.\"),\"ctrl-v-paste\":f.PreferenceManager.definePref_(\"Ctrl-V paste behavior\",f.PreferenceManager.categories.Keyboard,!1,\"bool\",\"Ctrl-V pastes if true, send ^V to host if false.\\nCtrl-Shift-V sends ^V to host if true, pastes if false.\"),\"east-asian-ambiguous-as-two-column\":f.PreferenceManager.definePref_(\"East Asian Ambiguous use two columns\",f.PreferenceManager.categories.Keyboard,!1,\"bool\",\"Whether East Asian Ambiguous characters have two column width.\"),\"enable-8-bit-control\":f.PreferenceManager.definePref_(\"Support non-UTF-8 C1 control characters\",f.PreferenceManager.categories.Keyboard,!1,\"bool\",\"True to enable 8-bit control characters, false to ignore them.\\n\\nWe'll respect the two-byte versions of these control characters regardless of this setting.\"),\"enable-bold\":f.PreferenceManager.definePref_(\"Bold text behavior\",f.PreferenceManager.categories.Appearance,null,\"tristate\",\"If true, use bold weight font for text with the bold/bright attribute. False to use the normal weight font. Null to autodetect.\"),\"enable-bold-as-bright\":f.PreferenceManager.definePref_(\"Use bright colors with bold text\",f.PreferenceManager.categories.Appearance,!0,\"bool\",\"If true, use bright colors (8-15 on a 16 color palette) for any text with the bold attribute. False otherwise.\"),\"enable-blink\":f.PreferenceManager.definePref_(\"Enable blinking text\",f.PreferenceManager.categories.Appearance,!0,\"bool\",\"If true, respect the blink attribute. False to ignore it.\"),\"enable-clipboard-notice\":f.PreferenceManager.definePref_(\"Show notification when copying content\",f.PreferenceManager.categories.CopyPaste,!0,\"bool\",\"Whether to show a message in the terminal when the host writes to the clipboard.\"),\"enable-clipboard-write\":f.PreferenceManager.definePref_(\"Allow remote clipboard writes\",f.PreferenceManager.categories.CopyPaste,!0,\"bool\",\"Allow the remote host to write directly to the local system clipboard.\\nRead access is never granted regardless of this setting.\\n\\nThis is used to control access to features like OSC-52.\"),\"enable-dec12\":f.PreferenceManager.definePref_(\"Allow changing of text cursor blinking\",f.PreferenceManager.categories.Miscellaneous,!1,\"bool\",\"Respect the host's attempt to change the text cursor blink status using DEC Private Mode 12.\"),\"enable-csi-j-3\":f.PreferenceManager.definePref_(\"Allow clearing of scrollback buffer (CSI-J-3)\",f.PreferenceManager.categories.Miscellaneous,!0,\"bool\",\"Whether CSI-J (Erase Display) mode 3 may clear the terminal scrollback buffer.\\n\\nEnabling this by default is safe.\"),environment:f.PreferenceManager.definePref_(\"Environment variables\",f.PreferenceManager.categories.Miscellaneous,{NCURSES_NO_UTF8_ACS:\"1\",TERM:\"xterm-256color\",COLORTERM:\"truecolor\"},\"value\",\"The initial set of environment variables, as an object.\"),\"font-family\":f.PreferenceManager.definePref_(\"Text font family\",f.PreferenceManager.categories.Appearance,'\"DejaVu Sans Mono\", \"Noto Sans Mono\", \"Everson Mono\", FreeMono, Menlo, Terminal, monospace',\"string\",\"Default font family for the terminal text.\"),\"font-size\":f.PreferenceManager.definePref_(\"Text font size\",f.PreferenceManager.categories.Appearance,15,\"int\",\"The default font size in pixels.\"),\"font-smoothing\":f.PreferenceManager.definePref_(\"Text font smoothing\",f.PreferenceManager.categories.Appearance,\"antialiased\",\"string\",\"CSS font-smoothing property.\"),\"foreground-color\":f.PreferenceManager.definePref_(\"Text color\",f.PreferenceManager.categories.Appearance,\"rgb(240, 240, 240)\",\"color\",\"The foreground color for text with no other color attributes.\"),\"hide-mouse-while-typing\":f.PreferenceManager.definePref_(\"Hide mouse cursor while typing\",f.PreferenceManager.categories.Keyboard,null,\"tristate\",\"Whether to automatically hide the mouse cursor when typing. By default, autodetect whether the platform/OS handles this.\\n\\nNote: Some operating systems may override this setting and thus you might not be able to always disable it.\"),\"home-keys-scroll\":f.PreferenceManager.definePref_(\"Home/End key scroll behavior\",f.PreferenceManager.categories.Keyboard,!1,\"bool\",\"If true, Home/End controls the terminal scrollbar and Shift-Home/Shift-End are sent to the remote host. If false, then Home/End are sent to the remote host and Shift-Home/Shift-End scrolls.\"),keybindings:f.PreferenceManager.definePref_(\"Keyboard bindings/shortcuts\",f.PreferenceManager.categories.Keyboard,null,\"value\",'A map of key sequence to key actions. Key sequences include zero or more modifier keys followed by a key code. Key codes can be decimal or hexadecimal numbers, or a key identifier. Key actions can be specified as a string to send to the host, or an action identifier. For a full explanation of the format, see https://goo.gl/LWRndr.\\n\\nSample keybindings:\\n{\\n  \"Ctrl-Alt-K\": \"clearTerminal\",\\n  \"Ctrl-Shift-L\": \"PASS\",\\n  \"Ctrl-H\": \"\\'Hello World\\'\"\\n}'),\"media-keys-are-fkeys\":f.PreferenceManager.definePref_(\"Media keys are Fkeys\",f.PreferenceManager.categories.Keyboard,!1,\"bool\",\"If true, convert media keys to their Fkey equivalent. If false, let the browser handle the keys.\"),\"meta-sends-escape\":f.PreferenceManager.definePref_(\"Meta key modifier handling\",f.PreferenceManager.categories.Keyboard,!0,\"bool\",\"Send an ESC prefix when pressing a key while holding the Meta key.\\n\\nFor example, when enabled, pressing Meta-K will send ^[k as if you typed Escape then k. When disabled, only k will be sent.\"),\"mouse-right-click-paste\":f.PreferenceManager.definePref_(\"Mouse right clicks paste content\",f.PreferenceManager.categories.CopyPaste,!0,\"bool\",'Paste on right mouse button clicks.\\n\\nThis option is independent of the \"mouse-paste-button\" setting.\\n\\nNote: This will handle left & right handed mice correctly.'),\"mouse-paste-button\":f.PreferenceManager.definePref_(\"Mouse button paste\",f.PreferenceManager.categories.CopyPaste,null,[null,0,1,2,3,4,5,6],\"Mouse paste button, or null to autodetect.\\n\\nFor autodetect, we'll use the middle mouse button for non-X11 platforms (including Chrome OS). On X11, we'll use the right mouse button (since the native window manager should paste via the middle mouse button).\\n\\n0 == left (primary) button.\\n1 == middle (auxiliary) button.\\n2 == right (secondary) button.\\n\\nThis option is independent of the setting for right-click paste.\\n\\nNote: This will handle left & right handed mice correctly.\"),\"word-break-match-left\":f.PreferenceManager.definePref_(\"Automatic selection halting (to the left)\",f.PreferenceManager.categories.CopyPaste,\"[^\\\\s\\\\[\\\\](){}<>\\\"'\\\\^!@#$%&*,;:`]\",\"string\",'Regular expression to halt matching to the left (start) of a selection.\\n\\nNormally this is a character class to reject specific characters.\\nWe allow \"~\" and \".\" by default as paths frequently start with those.'),\"word-break-match-right\":f.PreferenceManager.definePref_(\"Automatic selection halting (to the right)\",f.PreferenceManager.categories.CopyPaste,\"[^\\\\s\\\\[\\\\](){}<>\\\"'\\\\^!@#$%&*,;:~.`]\",\"string\",\"Regular expression to halt matching to the right (end) of a selection.\\n\\nNormally this is a character class to reject specific characters.\"),\"word-break-match-middle\":f.PreferenceManager.definePref_(\"Word break characters\",f.PreferenceManager.categories.CopyPaste,\"[^\\\\s\\\\[\\\\](){}<>\\\"'\\\\^]*\",\"string\",\"Regular expression to match all the characters in the middle.\\n\\nNormally this is a character class to reject specific characters.\\n\\nUsed to expand the selection surrounding the starting point.\"),\"page-keys-scroll\":f.PreferenceManager.definePref_(\"Page Up/Down key scroll behavior\",f.PreferenceManager.categories.Keyboard,!1,\"bool\",\"If true, Page Up/Page Down controls the terminal scrollbar and Shift-Page Up/Shift-Page Down are sent to the remote host. If false, then Page Up/Page Down are sent to the remote host and Shift-Page Up/Shift-Page Down scrolls.\"),\"pass-alt-number\":f.PreferenceManager.definePref_(\"Pass Alt-1..9 key behavior\",f.PreferenceManager.categories.Keyboard,null,\"tristate\",\"Whether Alt-1..9 is passed to the browser.\\n\\nThis is handy when running hterm in a browser tab, so that you don't lose Chrome's \\\"switch to tab\\\" keyboard accelerators. When not running in a tab it's better to send these keys to the host so they can be used in vim or emacs.\\n\\nIf true, Alt-1..9 will be handled by the browser. If false, Alt-1..9 will be sent to the host. If null, autodetect based on browser platform and window type.\"),\"pass-ctrl-number\":f.PreferenceManager.definePref_(\"Pass Ctrl-1..9 key behavior\",f.PreferenceManager.categories.Keyboard,null,\"tristate\",\"Whether Ctrl-1..9 is passed to the browser.\\n\\nThis is handy when running hterm in a browser tab, so that you don't lose Chrome's \\\"switch to tab\\\" keyboard accelerators. When not running in a tab it's better to send these keys to the host so they can be used in vim or emacs.\\n\\nIf true, Ctrl-1..9 will be handled by the browser. If false, Ctrl-1..9 will be sent to the host. If null, autodetect based on browser platform and window type.\"),\"pass-meta-number\":f.PreferenceManager.definePref_(\"Pass Meta-1..9 key behavior\",f.PreferenceManager.categories.Keyboard,null,\"tristate\",\"Whether Meta-1..9 is passed to the browser.\\n\\nThis is handy when running hterm in a browser tab, so that you don't lose Chrome's \\\"switch to tab\\\" keyboard accelerators. When not running in a tab it's better to send these keys to the host so they can be used in vim or emacs.\\n\\nIf true, Meta-1..9 will be handled by the browser. If false, Meta-1..9 will be sent to the host. If null, autodetect based on browser platform and window type.\"),\"pass-meta-v\":f.PreferenceManager.definePref_(\"Pass Meta-V key behavior\",f.PreferenceManager.categories.Keyboard,!0,\"bool\",\"Whether Meta-V gets passed to host.\"),\"paste-on-drop\":f.PreferenceManager.definePref_(\"Allow drag & drop to paste\",f.PreferenceManager.categories.CopyPaste,!0,\"bool\",\"If true, Drag and dropped text will paste into terminal.\\nIf false, dropped text will be ignored.\"),\"receive-encoding\":f.PreferenceManager.definePref_(\"Receive encoding\",f.PreferenceManager.categories.Encoding,\"utf-8\",[\"utf-8\",\"raw\"],\"Set the expected encoding for data received from the host.\\nIf the encodings do not match, visual bugs are likely to be observed.\\n\\nValid values are 'utf-8' and 'raw'.\"),\"scroll-on-keystroke\":f.PreferenceManager.definePref_(\"Scroll to bottom after keystroke\",f.PreferenceManager.categories.Scrolling,!0,\"bool\",\"Whether to scroll to the bottom on any keystroke.\"),\"scroll-on-output\":f.PreferenceManager.definePref_(\"Scroll to bottom after new output\",f.PreferenceManager.categories.Scrolling,!1,\"bool\",\"Whether to scroll to the bottom on terminal output.\"),\"scrollbar-visible\":f.PreferenceManager.definePref_(\"Scrollbar visibility\",f.PreferenceManager.categories.Scrolling,!0,\"bool\",\"The vertical scrollbar mode.\"),\"scroll-wheel-may-send-arrow-keys\":f.PreferenceManager.definePref_(\"Emulate arrow keys with scroll wheel\",f.PreferenceManager.categories.Scrolling,!1,\"bool\",\"When using the alternative screen buffer, and DECCKM (Application Cursor Keys) is active, mouse wheel scroll events will emulate arrow keys.\\n\\nIt can be temporarily disabled by holding the Shift key.\\n\\nThis frequently comes up when using pagers (less) or reading man pages or text editors (vi/nano) or using screen/tmux.\"),\"scroll-wheel-move-multiplier\":f.PreferenceManager.definePref_(\"Mouse scroll wheel multiplier\",f.PreferenceManager.categories.Scrolling,1,\"int\",\"The multiplier for scroll wheel events when measured in pixels.\\n\\nAlters how fast the page scrolls.\"),\"terminal-encoding\":f.PreferenceManager.definePref_(\"Terminal encoding\",f.PreferenceManager.categories.Encoding,\"utf-8\",[\"iso-2022\",\"utf-8\",\"utf-8-locked\"],\"The default terminal encoding (DOCS).\\n\\nISO-2022 enables character map translations (like graphics maps).\\nUTF-8 disables support for those.\\n\\nThe locked variant means the encoding cannot be changed at runtime via terminal escape sequences.\\n\\nYou should stick with UTF-8 unless you notice broken rendering with legacy applications.\"),\"shift-insert-paste\":f.PreferenceManager.definePref_(\"Shift-Insert paste\",f.PreferenceManager.categories.Keyboard,!0,\"bool\",\"Whether Shift-Insert is used for pasting or is sent to the remote host.\"),\"user-css\":f.PreferenceManager.definePref_(\"Custom CSS (URI)\",f.PreferenceManager.categories.Appearance,\"\",\"url\",\"URL of user stylesheet to include in the terminal document.\"),\"user-css-text\":f.PreferenceManager.definePref_(\"Custom CSS (inline text)\",f.PreferenceManager.categories.Appearance,\"\",\"multiline-string\",\"Custom CSS text for styling the terminal.\"),\"allow-images-inline\":f.PreferenceManager.definePref_(\"Allow inline image display\",f.PreferenceManager.categories.Extensions,null,\"tristate\",\"Whether to allow the remote host to display images in the terminal.\\n\\nBy default, we prompt until a choice is made.\")},f.PreferenceManager.prototype=Object.create(u.PreferenceManager.prototype),f.PreferenceManager.constructor=f.PreferenceManager,f.PubSub=function(){this.observers_={}},f.PubSub.addBehavior=function(e){var t=new f.PubSub;for(var r in f.PubSub.prototype)e[r]=f.PubSub.prototype[r].bind(t)},f.PubSub.prototype.subscribe=function(e,t){e in this.observers_||(this.observers_[e]=[]),this.observers_[e].push(t)},f.PubSub.prototype.unsubscribe=function(e,t){var r=this.observers_[e];if(!r)throw\"Invalid subject: \"+e;var i=r.indexOf(t);if(0>i)throw\"Not subscribed: \"+e;r.splice(i,1)},f.PubSub.prototype.publish=function(e,t,r){var i=this.observers_[e];i&&(i=[].concat(i)),r&&(i?i.push(r):i=[r]),i&&setTimeout((function e(r){r<i.length-1&&setTimeout(e,0,r+1),i[r](t)}),0,0)},f.Screen=function(e=0){this.rowsArray=[],this.columnCount_=e,this.textAttributes=new f.TextAttributes(window.document),this.cursorPosition=new f.RowCol(0,0),this.cursorState_=new f.Screen.CursorState(this),this.cursorRowNode_=null,this.cursorNode_=null,this.cursorOffset_=null,this.wordBreakMatchLeft=null,this.wordBreakMatchRight=null,this.wordBreakMatchMiddle=null},f.Screen.prototype.getSize=function(){return new f.Size(this.columnCount_,this.rowsArray.length)},f.Screen.prototype.getHeight=function(){return this.rowsArray.length},f.Screen.prototype.getWidth=function(){return this.columnCount_},f.Screen.prototype.setColumnCount=function(e){this.columnCount_=e,this.cursorPosition.column>=e&&this.setCursorPosition(this.cursorPosition.row,e-1)},f.Screen.prototype.shiftRow=function(){return this.shiftRows(1)[0]},f.Screen.prototype.shiftRows=function(e){return this.rowsArray.splice(0,e)},f.Screen.prototype.unshiftRow=function(e){this.rowsArray.splice(0,0,e)},f.Screen.prototype.unshiftRows=function(e){this.rowsArray.unshift.apply(this.rowsArray,e)},f.Screen.prototype.popRow=function(){return this.popRows(1)[0]},f.Screen.prototype.popRows=function(e){return this.rowsArray.splice(this.rowsArray.length-e,e)},f.Screen.prototype.pushRow=function(e){this.rowsArray.push(e)},f.Screen.prototype.pushRows=function(e){e.push.apply(this.rowsArray,e)},f.Screen.prototype.insertRow=function(e,t){this.rowsArray.splice(e,0,t)},f.Screen.prototype.insertRows=function(e,t){for(var r=0;r<t.length;r++)this.rowsArray.splice(e+r,0,t[r])},f.Screen.prototype.removeRow=function(e){return this.rowsArray.splice(e,1)[0]},f.Screen.prototype.removeRows=function(e,t){return this.rowsArray.splice(e,t)},f.Screen.prototype.invalidateCursorPosition=function(){this.cursorPosition.move(0,0),this.cursorRowNode_=null,this.cursorNode_=null,this.cursorOffset_=null},f.Screen.prototype.clearCursorRow=function(){this.cursorRowNode_.innerHTML=\"\",this.cursorRowNode_.removeAttribute(\"line-overflow\"),this.cursorOffset_=0,this.cursorPosition.column=0,this.cursorPosition.overflow=!1;var e=this.textAttributes.isDefault()?\"\":\" \".repeat(this.columnCount_),t=this.textAttributes.inverse;this.textAttributes.inverse=!1,this.textAttributes.syncColors();var r=this.textAttributes.createContainer(e);this.cursorRowNode_.appendChild(r),this.cursorNode_=r,this.textAttributes.inverse=t,this.textAttributes.syncColors()},f.Screen.prototype.commitLineOverflow=function(){this.cursorRowNode_.setAttribute(\"line-overflow\",!0)},f.Screen.prototype.setCursorPosition=function(e,t){if(this.rowsArray.length){e>=this.rowsArray.length?(console.error(\"Row out of bounds: \"+e),e=this.rowsArray.length-1):0>e&&(console.error(\"Row out of bounds: \"+e),e=0),t>=this.columnCount_?(console.error(\"Column out of bounds: \"+t),t=this.columnCount_-1):0>t&&(console.error(\"Column out of bounds: \"+t),t=0),this.cursorPosition.overflow=!1;var r=this.rowsArray[e],i=r.firstChild;i||(i=r.ownerDocument.createTextNode(\"\"),r.appendChild(i));var o=0;for(r==this.cursorRowNode_?t>=this.cursorPosition.column-this.cursorOffset_&&(i=this.cursorNode_,o=this.cursorPosition.column-this.cursorOffset_):this.cursorRowNode_=r,this.cursorPosition.move(e,t);i;){var n=t-o,s=f.TextAttributes.nodeWidth(i);if(!i.nextSibling||s>n)return this.cursorNode_=i,void(this.cursorOffset_=n);o+=s,i=i.nextSibling}}else console.warn(\"Attempt to set cursor position on empty screen.\")},f.Screen.prototype.syncSelectionCaret=function(e){try{e.collapse(this.cursorNode_,this.cursorOffset_)}catch(e){}},f.Screen.prototype.splitNode_=function(e,t){var r=e.cloneNode(!1),i=e.textContent;e.textContent=f.TextAttributes.nodeSubstr(e,0,t),r.textContent=u.wc.substr(i,t),r.textContent&&e.parentNode.insertBefore(r,e.nextSibling),e.textContent||e.parentNode.removeChild(e)},f.Screen.prototype.maybeClipCurrentRow=function(){var e=f.TextAttributes.nodeWidth(this.cursorRowNode_);if(e<=this.columnCount_)this.cursorPosition.column>=this.columnCount_&&(this.setCursorPosition(this.cursorPosition.row,this.columnCount_-1),this.cursorPosition.overflow=!0);else{var t=this.cursorPosition.column;this.setCursorPosition(this.cursorPosition.row,this.columnCount_-1),e=f.TextAttributes.nodeWidth(this.cursorNode_),this.cursorOffset_<e-1&&(this.cursorNode_.textContent=f.TextAttributes.nodeSubstr(this.cursorNode_,0,this.cursorOffset_+1));for(var r=this.cursorRowNode_,i=this.cursorNode_.nextSibling;i;)r.removeChild(i),i=this.cursorNode_.nextSibling;t<this.columnCount_?this.setCursorPosition(this.cursorPosition.row,t):this.cursorPosition.overflow=!0}},f.Screen.prototype.insertString=function(e,t){var r=this.cursorNode_,i=r.textContent;this.cursorRowNode_.removeAttribute(\"line-overflow\"),void 0===t&&(t=u.wc.strWidth(e)),this.cursorPosition.column+=t;var o=this.cursorOffset_,n=f.TextAttributes.nodeWidth(r)-o;if(0>n){const t=\" \".repeat(-n);if(this.textAttributes.underline||this.textAttributes.strikethrough||this.textAttributes.background||this.textAttributes.wcNode||!this.textAttributes.asciiNode||null!=this.textAttributes.tileData)if(r.nodeType!=Node.TEXT_NODE&&(r.wcNode||!r.asciiNode||r.tileNode||r.style.textDecoration||r.style.textDecorationStyle||r.style.textDecorationLine||r.style.backgroundColor)){var s=r.ownerDocument.createTextNode(t);this.cursorRowNode_.insertBefore(s,r.nextSibling),this.cursorNode_=r=s,this.cursorOffset_=o=-n,i=t}else r.textContent=i+=t;else e=t+e;n=0}if(this.textAttributes.matchesContainer(r))return r.textContent=0==n?i+e:0==o?e+i:f.TextAttributes.nodeSubstr(r,0,o)+e+f.TextAttributes.nodeSubstr(r,o),void(this.cursorOffset_+=t);if(0==o){var a=r.previousSibling;if(a&&this.textAttributes.matchesContainer(a))return a.textContent+=e,this.cursorNode_=a,void(this.cursorOffset_=u.wc.strWidth(a.textContent));var l=this.textAttributes.createContainer(e);return this.cursorRowNode_.insertBefore(l,r),this.cursorNode_=l,void(this.cursorOffset_=t)}if(0==n){var c=r.nextSibling;if(c&&this.textAttributes.matchesContainer(c))return c.textContent=e+c.textContent,this.cursorNode_=c,void(this.cursorOffset_=u.wc.strWidth(e));l=this.textAttributes.createContainer(e);return this.cursorRowNode_.insertBefore(l,c),this.cursorNode_=l,void(this.cursorOffset_=f.TextAttributes.nodeWidth(l))}this.splitNode_(r,o);l=this.textAttributes.createContainer(e);this.cursorRowNode_.insertBefore(l,r.nextSibling),this.cursorNode_=l,this.cursorOffset_=t},f.Screen.prototype.overwriteString=function(e,t){var r=this.columnCount_-this.cursorPosition.column;if(r)return void 0===t&&(t=u.wc.strWidth(e)),this.textAttributes.matchesContainer(this.cursorNode_)&&this.cursorNode_.textContent.substr(this.cursorOffset_)==e?(this.cursorOffset_+=t,void(this.cursorPosition.column+=t)):(this.deleteChars(l(t,r)),void this.insertString(e,t))},f.Screen.prototype.deleteChars=function(e){var t=this.cursorNode_,r=this.cursorOffset_,i=this.cursorPosition.column;if(!(e=l(e,this.columnCount_-i)))return 0;for(var o,n,s=e;t&&e;){if(0>e){console.error(`Deleting ${s} chars went negative: ${e}`);break}if(o=f.TextAttributes.nodeWidth(t),t.textContent=f.TextAttributes.nodeSubstr(t,0,r)+f.TextAttributes.nodeSubstr(t,r+e),n=f.TextAttributes.nodeWidth(t),t.wcNode&&r<o&&(n&&o==n||!n&&1==r)){var a=this.textAttributes.createContainer(\" \");t.parentNode.insertBefore(a,r?t:t.nextSibling),t.textContent=\"\",n=0,e-=1}else e-=o-n;var c=t.nextSibling;0==n&&t!=this.cursorNode_&&t.parentNode.removeChild(t),t=c,r=0}if(this.cursorNode_.nodeType!=Node.TEXT_NODE&&!this.cursorNode_.textContent){var h=this.cursorNode_;if(h.previousSibling)this.cursorNode_=h.previousSibling,this.cursorOffset_=f.TextAttributes.nodeWidth(h.previousSibling);else if(h.nextSibling)this.cursorNode_=h.nextSibling,this.cursorOffset_=0;else{var u=this.cursorRowNode_.ownerDocument.createTextNode(\"\");this.cursorRowNode_.appendChild(u),this.cursorNode_=u,this.cursorOffset_=0}this.cursorRowNode_.removeChild(h)}return s},f.Screen.prototype.getLineStartRow_=function(e){for(;e.previousSibling&&e.previousSibling.hasAttribute(\"line-overflow\");)e=e.previousSibling;return e},f.Screen.prototype.getLineText_=function(e){for(var t=\"\";e&&(t+=e.textContent,e.hasAttribute(\"line-overflow\"));)e=e.nextSibling;return t},f.Screen.prototype.getXRowAncestor_=function(e){for(;e&&\"X-ROW\"!==e.nodeName;)e=e.parentNode;return e},f.Screen.prototype.getPositionWithOverflow_=function(e,t,r){if(!t)return-1;var i=this.getXRowAncestor_(t);if(!i)return-1;for(var o=0;i!=e;){if(o+=f.TextAttributes.nodeWidth(e),!e.hasAttribute(\"line-overflow\")||!e.nextSibling)return-1;e=e.nextSibling}return o+this.getPositionWithinRow_(e,t,r)},f.Screen.prototype.getPositionWithinRow_=function(e,t,r){if(t.parentNode!=e)return null==t.parentNode?-1:this.getPositionWithinRow_(t.parentNode,t,r)+this.getPositionWithinRow_(e,t.parentNode,0);for(var i,o=0,n=0;n<e.childNodes.length;n++){if((i=e.childNodes[n])==t)return o+r;o+=f.TextAttributes.nodeWidth(i)}return-1},f.Screen.prototype.getNodeAndOffsetWithOverflow_=function(e,t){for(;e&&t>f.TextAttributes.nodeWidth(e);){if(!e.hasAttribute(\"line-overflow\")||!e.nextSibling)return-1;t-=f.TextAttributes.nodeWidth(e),e=e.nextSibling}return this.getNodeAndOffsetWithinRow_(e,t)},f.Screen.prototype.getNodeAndOffsetWithinRow_=function(e,t){for(var r=0;r<e.childNodes.length;r++){var i=e.childNodes[r],o=f.TextAttributes.nodeWidth(i);if(t<=o)return\"SPAN\"===i.nodeName?this.getNodeAndOffsetWithinRow_(i,t):[i,t];t-=o}return null},f.Screen.prototype.setRange_=function(e,t,r,i){var o=this.getNodeAndOffsetWithOverflow_(e,t);if(null!=o){var n=this.getNodeAndOffsetWithOverflow_(e,r);null==n||(i.setStart(o[0],o[1]),i.setEnd(n[0],n[1]))}},f.Screen.prototype.expandSelectionWithWordBreakMatches_=function(e,t,r,i){if(e){var o=e.getRangeAt(0);if(o&&!o.toString().match(/\\s/)){const g=this.getXRowAncestor_(o.startContainer);if(g){const b=this.getLineStartRow_(g);if(b){var n=this.getPositionWithOverflow_(b,o.startContainer,o.startOffset);if(-1!=n){var s=this.getPositionWithOverflow_(b,o.endContainer,o.endOffset);if(-1!=s){var a=this.getLineText_(b),l=u.wc.substring(a,0,s),c=new RegExp(t+i+\"$\"),h=l.search(c);if(!(-1==h||h>n)){var f=u.wc.substring(a,n,u.wc.strWidth(a)),d=new RegExp(\"^\"+i+r),p=f.match(d);if(p){var _=n+u.wc.strWidth(p[0]);-1==_||_<s||(this.setRange_(b,h,_,o),e.addRange(o))}}}}}}}}},f.Screen.prototype.expandSelection=function(e){this.expandSelectionWithWordBreakMatches_(e,this.wordBreakMatchLeft,this.wordBreakMatchRight,this.wordBreakMatchMiddle)},f.Screen.prototype.expandSelectionForUrl=function(e){this.expandSelectionWithWordBreakMatches_(e,\"[^\\\\s\\\\[\\\\](){}<>\\\"'\\\\^!@#$%&*,;:`]\",\"[^\\\\s\\\\[\\\\](){}<>\\\"'\\\\^!@#$%&*,;:~.`]\",\"[^\\\\s\\\\[\\\\](){}<>\\\"'\\\\^]*\")},f.Screen.prototype.saveCursorAndState=function(e){this.cursorState_.save(e)},f.Screen.prototype.restoreCursorAndState=function(e){this.cursorState_.restore(e)},f.Screen.CursorState=function(e){this.screen_=e,this.cursor=null,this.textAttributes=null,this.GL=this.GR=this.G0=this.G1=this.G2=this.G3=null},f.Screen.CursorState.prototype.save=function(e){this.cursor=e.terminal.saveCursor(),this.textAttributes=this.screen_.textAttributes.clone(),this.GL=e.GL,this.GR=e.GR,this.G0=e.G0,this.G1=e.G1,this.G2=e.G2,this.G3=e.G3},f.Screen.CursorState.prototype.restore=function(e){e.terminal.restoreCursor(this.cursor);const t=this.textAttributes.clone();t.colorPalette=this.screen_.textAttributes.colorPalette,t.syncColors(),this.screen_.textAttributes=t,e.GL=this.GL,e.GR=this.GR,e.G0=this.G0,e.G1=this.G1,e.G2=this.G2,e.G3=this.G3},f.ScrollPort=function(e){f.PubSub.addBehavior(this),this.rowProvider_=e,this.characterSize=new f.Size(10,10),this.ruler_=null,this.selection=new f.ScrollPort.Selection(this),this.currentRowNodeCache_=null,this.previousRowNodeCache_={},this.lastScreenWidth_=null,this.lastScreenHeight_=null,this.selectionEnabled_=!0,this.lastRowCount_=0,this.scrollWheelMultiplier_=1,this.lastTouch_={},this.isScrolledEnd=!0,this.currentScrollbarWidthPx=16,this.ctrlVPaste=!1,this.pasteOnDrop=!0,this.div_=null,this.document_=null,this.timeouts_={},this.observers_={},this.ariaHiddenSelectionRows_=[],this.DEBUG_=!1},f.ScrollPort.Selection=function(e){this.scrollPort_=e,this.startRow=null,this.endRow=null,this.isMultiline=null,this.isCollapsed=null},f.ScrollPort.Selection.prototype.findFirstChild=function(e,t){for(var r=e.firstChild;r;){if(-1!=t.indexOf(r))return r;if(r.childNodes.length){var i=this.findFirstChild(r,t);if(i)return i}r=r.nextSibling}return null},f.ScrollPort.Selection.prototype.sync=function(){function e(){r.startRow=o,r.startNode=i.anchorNode,r.startOffset=i.anchorOffset,r.endRow=n,r.endNode=i.focusNode,r.endOffset=i.focusOffset}function t(){r.startRow=n,r.startNode=i.focusNode,r.startOffset=i.focusOffset,r.endRow=o,r.endNode=i.anchorNode,r.endOffset=i.anchorOffset}var r=this,i=this.scrollPort_.getDocument().getSelection();if(this.startRow=null,this.endRow=null,this.isMultiline=null,this.isCollapsed=!i||i.isCollapsed,i){const r=this.scrollPort_.accessibilityReader_&&this.scrollPort_.accessibilityReader_.accessibilityEnabled;if(!this.isCollapsed||r){for(var o=i.anchorNode;o&&\"X-ROW\"!=o.nodeName;)o=o.parentNode;if(o){for(var n=i.focusNode;n&&\"X-ROW\"!=n.nodeName;)n=n.parentNode;if(n){if(o.rowIndex<n.rowIndex)e();else if(o.rowIndex>n.rowIndex)t();else if(i.focusNode==i.anchorNode)i.anchorOffset<i.focusOffset?e():t();else{var s=this.findFirstChild(o,[i.anchorNode,i.focusNode]);if(!s)throw new Error(\"Unexpected error syncing selection.\");s==i.anchorNode?e():t()}this.isMultiline=o.rowIndex!=n.rowIndex}}}}},f.ScrollPort.prototype.decorate=function(e,t){this.div_=e,this.iframe_=e.ownerDocument.createElement(\"iframe\"),this.iframe_.style.cssText=\"border: 0;height: 100%;position: absolute;width: 100%\",e.appendChild(this.iframe_);const r=()=>{this.paintIframeContents_(),t&&t()};\"mozInnerScreenX\"in window?this.iframe_.addEventListener(\"load\",()=>r()):r()},f.ScrollPort.prototype.paintIframeContents_=function(){this.iframe_.contentWindow.addEventListener(\"resize\",this.onResize_.bind(this));var e=this.document_=this.iframe_.contentDocument;e.body.style.cssText=\"margin: 0px;padding: 0px;height: 100%;width: 100%;overflow: hidden;cursor: var(--hterm-mouse-cursor-style);-webkit-user-select: none;-moz-user-select: none;\";const t=e.createElement(\"meta\");t.setAttribute(\"charset\",\"utf-8\"),e.head.appendChild(t),this.DEBUG_&&(this.document_.body.style.paddingTop=this.document_.body.style.paddingBottom=\"calc(var(--hterm-charsize-height) * 3)\");var r=e.createElement(\"style\");r.textContent=\"x-row {  display: block;  height: var(--hterm-charsize-height);  line-height: var(--hterm-charsize-height);}\",e.head.appendChild(r),this.userCssLink_=e.createElement(\"link\"),this.userCssLink_.setAttribute(\"rel\",\"stylesheet\"),this.userCssText_=e.createElement(\"style\"),e.head.appendChild(this.userCssText_),this.screen_=e.createElement(\"x-screen\"),this.screen_.setAttribute(\"contenteditable\",\"true\"),this.screen_.setAttribute(\"spellcheck\",\"false\"),this.screen_.setAttribute(\"autocomplete\",\"off\"),this.screen_.setAttribute(\"autocorrect\",\"off\"),this.screen_.setAttribute(\"autocapitalize\",\"none\"),this.screen_.setAttribute(\"role\",\"log\"),this.screen_.setAttribute(\"aria-live\",\"off\"),this.screen_.setAttribute(\"aria-roledescription\",\"Terminal\"),this.screen_.setAttribute(\"aria-readonly\",\"true\"),this.screen_.setAttribute(\"tabindex\",\"-1\"),this.screen_.style.cssText=\"caret-color: transparent;display: block;font-family: monospace;font-size: 15px;font-variant-ligatures: none;height: 100%;overflow-y: scroll; overflow-x: hidden;white-space: pre;width: 100%;outline: none !important\",e.body.appendChild(this.screen_),this.screen_.addEventListener(\"scroll\",this.onScroll_.bind(this)),this.screen_.addEventListener(\"wheel\",this.onScrollWheel_.bind(this)),this.screen_.addEventListener(\"touchstart\",this.onTouch_.bind(this)),this.screen_.addEventListener(\"touchmove\",this.onTouch_.bind(this)),this.screen_.addEventListener(\"touchend\",this.onTouch_.bind(this)),this.screen_.addEventListener(\"touchcancel\",this.onTouch_.bind(this)),this.screen_.addEventListener(\"copy\",this.onCopy_.bind(this)),this.screen_.addEventListener(\"paste\",this.onPaste_.bind(this)),this.screen_.addEventListener(\"drop\",this.onDragAndDrop_.bind(this)),e.body.addEventListener(\"keydown\",this.onBodyKeyDown_.bind(this));const i=\"right: 0px;\\n                             position:fixed;\\n                             z-index: 1;\\n                             text-align: center;\\n                             cursor: pointer;\\n                             height: 30px;\\n                             width: 110px;\\n                             line-height: 30px;\\n                             border-width: 1px;\\n                             border-style: solid;\\n                             font-weight: bold;\";this.scrollUpButton_=this.document_.createElement(\"div\"),this.scrollUpButton_.id=\"hterm:a11y:page-up\",this.scrollUpButton_.innerText=f.msg(\"BUTTON_PAGE_UP\",[],\"Page up\"),this.scrollUpButton_.setAttribute(\"role\",\"button\"),this.scrollUpButton_.style.cssText=i,this.scrollUpButton_.style.top=\"-32px\",this.scrollUpButton_.addEventListener(\"click\",this.scrollPageUp.bind(this)),this.scrollDownButton_=this.document_.createElement(\"div\"),this.scrollDownButton_.id=\"hterm:a11y:page-down\",this.scrollDownButton_.innerText=f.msg(\"BUTTON_PAGE_DOWN\",[],\"Page down\"),this.scrollDownButton_.setAttribute(\"role\",\"button\"),this.scrollDownButton_.style.cssText=i,this.scrollDownButton_.style.bottom=\"-32px\",this.scrollDownButton_.addEventListener(\"click\",this.scrollPageDown.bind(this)),this.allowScrollButtonsToDisplay_=!1,setTimeout(()=>{this.allowScrollButtonsToDisplay_=!0},500),this.document_.addEventListener(\"selectionchange\",()=>{if(this.selection.sync(),this.allowScrollButtonsToDisplay_){const e=this.accessibilityReader_&&this.accessibilityReader_.accessibilityEnabled,t=this.document_.getSelection().anchorNode;this.scrollUpButton_.style.top=e&&t==this.scrollUpButton_?\"0px\":\"-32px\",this.scrollDownButton_.style.bottom=e&&t==this.scrollDownButton_?\"0px\":\"-32px\"}}),this.screen_.appendChild(this.scrollUpButton_),this.rowNodes_=e.createElement(\"div\"),this.rowNodes_.id=\"hterm:row-nodes\",this.rowNodes_.style.cssText=\"display: block;position: fixed;overflow: hidden;-webkit-user-select: text;-moz-user-select: text;\",this.screen_.appendChild(this.rowNodes_),this.screen_.appendChild(this.scrollDownButton_),this.topSelectBag_=e.createElement(\"x-select-bag\"),this.topSelectBag_.style.cssText=\"display: block;overflow: hidden;height: var(--hterm-charsize-height);white-space: pre;\",this.bottomSelectBag_=this.topSelectBag_.cloneNode(),this.topFold_=e.createElement(\"x-fold\"),this.topFold_.id=\"hterm:top-fold-for-row-selection\",this.topFold_.style.cssText=\"display: block;\",this.rowNodes_.appendChild(this.topFold_),this.bottomFold_=this.topFold_.cloneNode(),this.bottomFold_.id=\"hterm:bottom-fold-for-row-selection\",this.rowNodes_.appendChild(this.bottomFold_),this.scrollArea_=e.createElement(\"div\"),this.scrollArea_.id=\"hterm:scrollarea\",this.scrollArea_.style.cssText=\"visibility: hidden\",this.screen_.appendChild(this.scrollArea_);var o=\"http://www.w3.org/2000/svg\";this.svg_=this.div_.ownerDocument.createElementNS(o,\"svg\"),this.svg_.id=\"hterm:zoom-detector\",this.svg_.setAttribute(\"xmlns\",o),this.svg_.setAttribute(\"version\",\"1.1\"),this.svg_.style.cssText=\"position: absolute;top: 0;left: 0;visibility: hidden\",this.pasteTarget_=e.createElement(\"textarea\"),this.pasteTarget_.id=\"hterm:ctrl-v-paste-target\",this.pasteTarget_.setAttribute(\"tabindex\",\"-1\"),this.pasteTarget_.setAttribute(\"aria-hidden\",\"true\"),this.pasteTarget_.style.cssText=\"position: absolute;height: 1px;width: 1px;left: 0px; bottom: 0px;opacity: 0\",this.pasteTarget_.contentEditable=!0,this.screen_.appendChild(this.pasteTarget_),this.pasteTarget_.addEventListener(\"textInput\",this.handlePasteTargetTextInput_.bind(this)),this.resize()},f.ScrollPort.prototype.setAccessibilityReader=function(e){this.accessibilityReader_=e},f.ScrollPort.prototype.scrollPageUp=function(){if(0!=this.getTopRowIndex()){const e=this.getTopRowIndex();this.scrollRowToTop(e-this.visibleRowCount+1),this.assertiveAnnounce_()}},f.ScrollPort.prototype.scrollPageDown=function(){if(!this.isScrolledEnd){const e=this.getTopRowIndex();this.scrollRowToTop(e+this.visibleRowCount-1),this.assertiveAnnounce_()}},f.ScrollPort.prototype.setFontFamily=function(e,t){this.screen_.style.fontFamily=e,this.screen_.style.webkitFontSmoothing=t||\"\",this.syncCharacterSize()},f.ScrollPort.prototype.getFontFamily=function(){return this.screen_.style.fontFamily},f.ScrollPort.prototype.setUserCssUrl=function(e){e?(this.userCssLink_.setAttribute(\"href\",e),!this.userCssLink_.parentNode&&this.document_.head.appendChild(this.userCssLink_)):this.userCssLink_.parentNode&&this.document_.head.removeChild(this.userCssLink_)},f.ScrollPort.prototype.setUserCssText=function(e){this.userCssText_.textContent=e},f.ScrollPort.prototype.focus=function(){this.iframe_.focus(),this.screen_.focus(),this.publish(\"focus\")},f.ScrollPort.prototype.getForegroundColor=function(){return this.screen_.style.color},f.ScrollPort.prototype.setForegroundColor=function(e){this.screen_.style.color=e,this.scrollUpButton_.style.backgroundColor=e,this.scrollDownButton_.style.backgroundColor=e},f.ScrollPort.prototype.getBackgroundColor=function(){return this.screen_.style.backgroundColor},f.ScrollPort.prototype.setBackgroundColor=function(e){this.screen_.style.backgroundColor=e,this.scrollUpButton_.style.color=e,this.scrollDownButton_.style.color=e},f.ScrollPort.prototype.setBackgroundImage=function(e){this.screen_.style.backgroundImage=e},f.ScrollPort.prototype.setBackgroundSize=function(e){this.screen_.style.backgroundSize=e},f.ScrollPort.prototype.setBackgroundPosition=function(e){this.screen_.style.backgroundPosition=e},f.ScrollPort.prototype.setCtrlVPaste=function(e){this.ctrlVPaste=e},f.ScrollPort.prototype.setPasteOnDrop=function(e){this.pasteOnDrop=e},f.ScrollPort.prototype.getScreenSize=function(){var e=f.getClientSize(this.screen_);return{height:e.height,width:e.width-this.currentScrollbarWidthPx}},f.ScrollPort.prototype.getScreenWidth=function(){return this.getScreenSize().width},f.ScrollPort.prototype.getScreenHeight=function(){return this.getScreenSize().height},f.ScrollPort.prototype.getDocument=function(){return this.document_},f.ScrollPort.prototype.getScreenNode=function(){return this.screen_},f.ScrollPort.prototype.resetCache=function(){this.currentRowNodeCache_=null,this.previousRowNodeCache_={}},f.ScrollPort.prototype.setRowProvider=function(e){this.resetCache(),this.rowProvider_=e,this.scheduleRedraw()},f.ScrollPort.prototype.invalidate=function(){for(var e,t=this.topFold_.nextSibling;t!=this.bottomFold_;)e=t.nextSibling,t.parentElement.removeChild(t),t=e;this.previousRowNodeCache_=null;var r=this.getTopRowIndex(),i=this.getBottomRowIndex(r);this.drawVisibleRows_(r,i)},f.ScrollPort.prototype.scheduleInvalidate=function(){if(!this.timeouts_.invalidate){var e=this;this.timeouts_.invalidate=setTimeout((function(){delete e.timeouts_.invalidate,e.invalidate()}),0)}},f.ScrollPort.prototype.setFontSize=function(e){this.screen_.style.fontSize=e+\"px\",this.syncCharacterSize()},f.ScrollPort.prototype.getFontSize=function(){return parseInt(this.screen_.style.fontSize)},f.ScrollPort.prototype.measureCharacterSize=function(e){this.ruler_||(this.ruler_=this.document_.createElement(\"div\"),this.ruler_.id=\"hterm:ruler-character-size\",this.ruler_.style.cssText=\"position: absolute;top: 0;left: 0;visibility: hidden;height: auto !important;width: auto !important;\",this.rulerSpan_=this.document_.createElement(\"span\"),this.rulerSpan_.id=\"hterm:ruler-span-workaround\",this.rulerSpan_.innerHTML=(\"X\".repeat(100)+\"\\r\").repeat(100),this.ruler_.appendChild(this.rulerSpan_),this.rulerBaseline_=this.document_.createElement(\"span\"),this.rulerSpan_.id=\"hterm:ruler-baseline\",this.rulerBaseline_.style.fontSize=\"0px\",this.rulerBaseline_.textContent=\"X\"),this.rulerSpan_.style.fontWeight=e||\"\",this.rowNodes_.appendChild(this.ruler_);var t=f.getClientSize(this.rulerSpan_),r=new f.Size(t.width/100,t.height/100);return this.ruler_.appendChild(this.rulerBaseline_),this.ruler_.removeChild(this.rulerBaseline_),this.rowNodes_.removeChild(this.ruler_),this.div_.ownerDocument.body.appendChild(this.svg_),r.zoomFactor=this.svg_.currentScale,this.div_.ownerDocument.body.removeChild(this.svg_),r},f.ScrollPort.prototype.syncCharacterSize=function(){this.characterSize=this.measureCharacterSize(),this.resize()},f.ScrollPort.prototype.resize=function(){this.currentScrollbarWidthPx=f.getClientWidth(this.screen_)-this.screen_.clientWidth,this.syncScrollHeight(),this.syncRowNodesDimensions_();var e=this;this.publish(\"resize\",{scrollPort:this},(function(){e.scrollRowToBottom(e.rowProvider_.getRowCount()),e.scheduleRedraw()}))},f.ScrollPort.prototype.assertiveAnnounce_=function(){if(!this.accessibilityReader_)return;const e=this.getTopRowIndex(),t=this.getBottomRowIndex(e);let r=100*e/o(1,this.rowProvider_.getRowCount()-this.visibleRowCount);r=l(100,a(r));let i=f.msg(\"ANNOUNCE_CURRENT_SCREEN_HEADER\",[r],\"$1% scrolled,\");i+=\"\\n\";for(let r=e;r<=t;++r){i+=this.fetchRowNode_(r).textContent+\"\\n\"}this.accessibilityReader_.assertiveAnnounce(i)},f.ScrollPort.prototype.syncRowNodesDimensions_=function(){var e=this.getScreenSize();this.lastScreenWidth_=e.width,this.lastScreenHeight_=e.height,this.visibleRowCount=u.f.smartFloorDivide(e.height,this.characterSize.height);var t=this.visibleRowCount*this.characterSize.height;this.visibleRowTopMargin=0,this.visibleRowBottomMargin=e.height-t,this.topFold_.style.marginBottom=this.visibleRowTopMargin+\"px\";for(var r=0,i=this.topFold_.previousSibling;i;)r+=f.getClientHeight(i),i=i.previousSibling;this.rowNodes_.style.width=e.width+\"px\",this.rowNodes_.style.height=t+r+\"px\",this.rowNodes_.style.left=this.screen_.offsetLeft+\"px\",this.rowNodes_.style.top=this.screen_.offsetTop-r+\"px\"},f.ScrollPort.prototype.syncScrollHeight=function(){this.lastRowCount_=this.rowProvider_.getRowCount(),this.scrollArea_.style.height=this.characterSize.height*this.lastRowCount_+this.visibleRowTopMargin+this.visibleRowBottomMargin+\"px\"},f.ScrollPort.prototype.scheduleRedraw=function(){if(!this.timeouts_.redraw){var e=this;this.timeouts_.redraw=setTimeout((function(){delete e.timeouts_.redraw,e.redraw_()}),0)}},f.ScrollPort.prototype.updateScrollButtonState_=function(){const e=(e,t)=>{e.setAttribute(\"aria-disabled\",t?\"true\":\"false\"),e.style.opacity=t?.5:1};e(this.scrollUpButton_,0==this.getTopRowIndex()),e(this.scrollDownButton_,this.isScrolledEnd)},f.ScrollPort.prototype.redraw_=function(){this.resetSelectBags_(),this.selection.sync(),this.syncScrollHeight(),this.currentRowNodeCache_={};var e=this.getTopRowIndex(),t=this.getBottomRowIndex(e);this.drawTopFold_(e),this.drawBottomFold_(t),this.drawVisibleRows_(e,t),this.ariaHideOffscreenSelectionRows_(e,t),this.syncRowNodesDimensions_(),this.previousRowNodeCache_=this.currentRowNodeCache_,this.currentRowNodeCache_=null,this.isScrolledEnd=this.getTopRowIndex()+this.visibleRowCount>=this.lastRowCount_,this.updateScrollButtonState_()},f.ScrollPort.prototype.drawTopFold_=function(e){if(!this.selection.startRow||this.selection.startRow.rowIndex>=e)this.rowNodes_.firstChild!=this.topFold_&&this.rowNodes_.insertBefore(this.topFold_,this.rowNodes_.firstChild);else{if(!this.selection.isMultiline||this.selection.endRow.rowIndex>=e)this.selection.startRow.nextSibling!=this.topFold_&&this.rowNodes_.insertBefore(this.topFold_,this.selection.startRow.nextSibling);else for(this.selection.endRow.nextSibling!=this.topFold_&&this.rowNodes_.insertBefore(this.topFold_,this.selection.endRow.nextSibling);this.selection.startRow.nextSibling!=this.selection.endRow;)this.rowNodes_.removeChild(this.selection.startRow.nextSibling);for(;this.rowNodes_.firstChild!=this.selection.startRow;)this.rowNodes_.removeChild(this.rowNodes_.firstChild)}},f.ScrollPort.prototype.drawBottomFold_=function(e){if(!this.selection.endRow||this.selection.endRow.rowIndex<=e)this.rowNodes_.lastChild!=this.bottomFold_&&this.rowNodes_.appendChild(this.bottomFold_);else{if(!this.selection.isMultiline||this.selection.startRow.rowIndex<=e)this.bottomFold_.nextSibling!=this.selection.endRow&&this.rowNodes_.insertBefore(this.bottomFold_,this.selection.endRow);else for(this.bottomFold_.nextSibling!=this.selection.startRow&&this.rowNodes_.insertBefore(this.bottomFold_,this.selection.startRow);this.selection.startRow.nextSibling!=this.selection.endRow;)this.rowNodes_.removeChild(this.selection.startRow.nextSibling);for(;this.rowNodes_.lastChild!=this.selection.endRow;)this.rowNodes_.removeChild(this.rowNodes_.lastChild)}},f.ScrollPort.prototype.drawVisibleRows_=function(e){function t(e,t){for(;e!=t;){if(!e)throw\"Did not encounter target node\";if(e==i.bottomFold_)throw\"Encountered bottom fold before target node\";var r=e;e=e.nextSibling,r.parentNode.removeChild(r)}}for(var r,i=this,o=this.selection.startRow,n=this.selection.endRow,s=this.bottomFold_,a=this.topFold_.nextSibling,c=l(this.visibleRowCount,this.rowProvider_.getRowCount()),h=0;h<c;h++)if(r=e+h,a!=s)if(a.rowIndex!=r)if(o&&o.rowIndex==r)t(a,o),a=o.nextSibling;else if(n&&n.rowIndex==r)t(a,n),a=n.nextSibling;else if(a!=o&&a!=n){if(!(u=this.fetchRowNode_(r))){console.log(\"Couldn't fetch row index: \"+r);break}a!=u?(this.rowNodes_.insertBefore(u,a),u.nextSibling,this.rowNodes_.removeChild(a),a=u.nextSibling):a=a.nextSibling}else{if(!(u=this.fetchRowNode_(r))){console.log(\"Couldn't fetch row index: \"+r);break}this.rowNodes_.insertBefore(u,a)}else a=a.nextSibling;else{var u;if(!(u=this.fetchRowNode_(r))){console.log(\"Couldn't fetch row index: \"+r);break}this.rowNodes_.insertBefore(u,a)}a!=this.bottomFold_&&t(a,s)},f.ScrollPort.prototype.ariaHideOffscreenSelectionRows_=function(e,t){function r(r){r&&(r.rowIndex<e||r.rowIndex>t)&&(r.setAttribute(\"aria-hidden\",\"true\"),i.push(r))}const i=this.ariaHiddenSelectionRows_;for(let e;e=i.pop();)e.removeAttribute(\"aria-hidden\");r(this.selection.startRow),r(this.selection.endRow)},f.ScrollPort.prototype.resetSelectBags_=function(){this.topSelectBag_.parentNode&&(this.topSelectBag_.textContent=\"\",this.topSelectBag_.parentNode.removeChild(this.topSelectBag_)),this.bottomSelectBag_.parentNode&&(this.bottomSelectBag_.textContent=\"\",this.bottomSelectBag_.parentNode.removeChild(this.bottomSelectBag_))},f.ScrollPort.prototype.cacheRowNode_=function(e){this.currentRowNodeCache_[e.rowIndex]=e},f.ScrollPort.prototype.fetchRowNode_=function(e){var t;return t=this.previousRowNodeCache_&&e in this.previousRowNodeCache_?this.previousRowNodeCache_[e]:this.rowProvider_.getRowNode(e),this.currentRowNodeCache_&&this.cacheRowNode_(t),t},f.ScrollPort.prototype.selectAll=function(){var e;if(0!=this.topFold_.nextSibling.rowIndex){for(;this.topFold_.previousSibling;)this.rowNodes_.removeChild(this.topFold_.previousSibling);e=this.fetchRowNode_(0),this.rowNodes_.insertBefore(e,this.topFold_),this.syncRowNodesDimensions_()}else e=this.topFold_.nextSibling;var t,r=this.rowProvider_.getRowCount()-1;if(this.bottomFold_.previousSibling.rowIndex!=r){for(;this.bottomFold_.nextSibling;)this.rowNodes_.removeChild(this.bottomFold_.nextSibling);t=this.fetchRowNode_(r),this.rowNodes_.appendChild(t)}else t=this.bottomFold_.previousSibling.rowIndex;var i=this.document_.getSelection();i.collapse(e,0),i.extend(t,t.childNodes.length),this.selection.sync()},f.ScrollPort.prototype.getScrollMax_=function(){return f.getClientHeight(this.scrollArea_)+this.visibleRowTopMargin+this.visibleRowBottomMargin-f.getClientHeight(this.screen_)},f.ScrollPort.prototype.scrollRowToTop=function(e){this.syncScrollHeight(),this.isScrolledEnd=e+this.visibleRowCount>=this.lastRowCount_;var t=e*this.characterSize.height+this.visibleRowTopMargin,r=this.getScrollMax_();t>r&&(t=r),this.screen_.scrollTop==t||(this.screen_.scrollTop=t,this.scheduleRedraw())},f.ScrollPort.prototype.scrollRowToBottom=function(e){this.syncScrollHeight(),this.isScrolledEnd=e+this.visibleRowCount>=this.lastRowCount_;var t=e*this.characterSize.height+this.visibleRowTopMargin+this.visibleRowBottomMargin;0>(t-=this.visibleRowCount*this.characterSize.height)&&(t=0),this.screen_.scrollTop==t||(this.screen_.scrollTop=t)},f.ScrollPort.prototype.getTopRowIndex=function(){return a(this.screen_.scrollTop/this.characterSize.height)},f.ScrollPort.prototype.getBottomRowIndex=function(e){return e+this.visibleRowCount-1},f.ScrollPort.prototype.onScroll_=function(){var e=this.getScreenSize();return e.width!=this.lastScreenWidth_||e.height!=this.lastScreenHeight_?void this.resize():(this.redraw_(),void this.publish(\"scroll\",{scrollPort:this}))},f.ScrollPort.prototype.onScrollWheel=function(){},f.ScrollPort.prototype.onScrollWheel_=function(e){if(this.onScrollWheel(e),e.defaultPrevented||!e.cancelable)return;const t=this.scrollWheelDelta(e);let r=this.screen_.scrollTop-t.y;0>r&&(r=0);var i=this.getScrollMax_();r>i&&(r=i),r!=this.screen_.scrollTop&&(this.screen_.scrollTop=r,e.preventDefault())},f.ScrollPort.prototype.scrollWheelDelta=function(e){const t={x:0,y:0};switch(e.deltaMode){case WheelEvent.DOM_DELTA_PIXEL:t.x=e.deltaX*this.scrollWheelMultiplier_,t.y=e.deltaY*this.scrollWheelMultiplier_;break;case WheelEvent.DOM_DELTA_LINE:t.x=e.deltaX*this.characterSize.width,t.y=e.deltaY*this.characterSize.height;break;case WheelEvent.DOM_DELTA_PAGE:t.x=e.deltaX*this.characterSize.width*this.screen_.getWidth(),t.y=e.deltaY*this.characterSize.height*this.screen_.getHeight()}return t.y*=-1,t},f.ScrollPort.prototype.onTouch=function(){},f.ScrollPort.prototype.onTouch_=function(e){if(this.onTouch(e),!e.defaultPrevented){var t,r,i=function(e){return{id:e.identifier,y:e.clientY,x:e.clientX}};switch(e.type){case\"touchstart\":for(\"cros\"==f.os&&window.chrome&&chrome.windows&&chrome.windows.getCurrent(e=>{e.focused||chrome.windows.update(e.id,{focused:!0})}),t=0;t<e.changedTouches.length;++t)r=i(e.changedTouches[t]),this.lastTouch_[r.id]=r;break;case\"touchcancel\":case\"touchend\":for(t=0;t<e.changedTouches.length;++t)delete this.lastTouch_[e.changedTouches[t].identifier];break;case\"touchmove\":var o=0;for(t=0;t<e.changedTouches.length;++t)r=i(e.changedTouches[t]),o+=this.lastTouch_[r.id].y-r.y,this.lastTouch_[r.id]=r;o*=-1;var n=this.screen_.scrollTop-o;0>n&&(n=0);var s=this.getScrollMax_();n>s&&(n=s),n!=this.screen_.scrollTop&&(this.screen_.scrollTop=n)}e.preventDefault()}},f.ScrollPort.prototype.onResize_=function(){this.syncCharacterSize()},f.ScrollPort.prototype.onCopy=function(){},f.ScrollPort.prototype.onCopy_=function(e){if(!(this.onCopy(e),e.defaultPrevented||(this.resetSelectBags_(),this.selection.sync(),this.selection.isCollapsed||2>this.selection.endRow.rowIndex-this.selection.startRow.rowIndex))){var t,r,i=this.getTopRowIndex(),o=this.getBottomRowIndex(i);if(this.selection.startRow.rowIndex<i)t=this.selection.endRow.rowIndex<i?this.selection.endRow.rowIndex:this.topFold_.nextSibling.rowIndex,this.topSelectBag_.textContent=this.rowProvider_.getRowsText(this.selection.startRow.rowIndex+1,t),this.rowNodes_.insertBefore(this.topSelectBag_,this.selection.startRow.nextSibling),this.syncRowNodesDimensions_();if(this.selection.endRow.rowIndex>o)r=this.selection.startRow.rowIndex>o?this.selection.startRow.rowIndex+1:this.bottomFold_.previousSibling.rowIndex+1,this.bottomSelectBag_.textContent=this.rowProvider_.getRowsText(r,this.selection.endRow.rowIndex),this.rowNodes_.insertBefore(this.bottomSelectBag_,this.selection.endRow)}},f.ScrollPort.prototype.onBodyKeyDown_=function(e){!this.ctrlVPaste||(e.ctrlKey||e.metaKey)&&86==e.keyCode&&this.pasteTarget_.focus()},f.ScrollPort.prototype.onPaste_=function(){this.pasteTarget_.focus();var e=this;setTimeout((function(){e.publish(\"paste\",{text:e.pasteTarget_.value}),e.pasteTarget_.value=\"\",e.focus()}),0)},f.ScrollPort.prototype.handlePasteTargetTextInput_=function(e){e.stopPropagation()},f.ScrollPort.prototype.onDragAndDrop_=function(e){if(!this.pasteOnDrop)return;let t,r;e.preventDefault(),e.shiftKey&&(e.dataTransfer.types.forEach(e=>{!r&&\"text/plain\"!=e&&e.startsWith(\"text/\")&&(r=e)}),r&&(t=e.dataTransfer.getData(r))),t||(t=e.dataTransfer.getData(\"text/plain\")),t&&this.publish(\"paste\",{text:t})},f.ScrollPort.prototype.setScrollbarVisible=function(e){this.screen_.style.overflowY=e?\"scroll\":\"hidden\"},f.ScrollPort.prototype.setScrollWheelMoveMultipler=function(e){this.scrollWheelMultiplier_=e},f.Terminal=function(e){this.profileId_=null,this.primaryScreen_=new f.Screen,this.alternateScreen_=new f.Screen,this.screen_=this.primaryScreen_,this.screenSize=new f.Size(0,0),this.scrollPort_=new f.ScrollPort(this),this.scrollPort_.subscribe(\"resize\",this.onResize_.bind(this)),this.scrollPort_.subscribe(\"scroll\",this.onScroll_.bind(this)),this.scrollPort_.subscribe(\"paste\",this.onPaste_.bind(this)),this.scrollPort_.subscribe(\"focus\",this.onScrollportFocus_.bind(this)),this.scrollPort_.onCopy=this.onCopy_.bind(this),this.div_=null,this.document_=window.document,this.scrollbackRows_=[],this.tabStops_=[],this.defaultTabStops=!0,this.vtScrollTop_=null,this.vtScrollBottom_=null,this.cursorNode_=null,this.cursorShape_=f.Terminal.cursorShape.BLOCK,this.cursorBlinkCycle_=[100,100],this.myOnCursorBlink_=this.onCursorBlink_.bind(this),this.backgroundColor_=null,this.foregroundColor_=null,this.scrollOnOutput_=null,this.scrollOnKeystroke_=null,this.scrollWheelArrowKeys_=null,this.defeatMouseReports_=!1,this.setAutomaticMouseHiding(),this.mouseHideDelay_=null,this.bellAudio_=this.document_.createElement(\"audio\"),this.bellAudio_.id=\"hterm:bell-audio\",this.bellAudio_.setAttribute(\"preload\",\"auto\"),this.accessibilityReader_=null,this.contextMenu=new f.ContextMenu,this.bellNotificationList_=[],this.desktopNotificationBell_=!1,this.savedOptions_={},this.options_=new f.Options,this.timeouts_={},this.vt=new f.VT(this),this.saveCursorAndState(!0),this.keyboard=new f.Keyboard(this),this.io=new f.Terminal.IO(this),this.enableMouseDragScroll=!0,this.copyOnSelect=null,this.mouseRightClickPaste=null,this.mousePasteButton=null,this.useDefaultWindowCopy=!1,this.clearSelectionAfterCopy=!0,this.realizeSize_(80,24),this.setDefaultTabStops(),this.allowImagesInline=null,this.reportFocus=!1,this.setProfile(e||\"default\",function(){this.onTerminalReady()}.bind(this))},f.Terminal.cursorShape={BLOCK:\"BLOCK\",BEAM:\"BEAM\",UNDERLINE:\"UNDERLINE\"},f.Terminal.prototype.onTerminalReady=function(){},f.Terminal.prototype.tabWidth=8,f.Terminal.prototype.setProfile=function(e,t){this.profileId_=e.replace(/\\//g,\"\");var r=this;this.prefs_&&this.prefs_.deactivate(),this.prefs_=new f.PreferenceManager(this.profileId_),this.prefs_.addObservers(null,{\"alt-gr-mode\":function(e){e=null==e?\"en-us\"==navigator.language.toLowerCase()?\"none\":\"right-alt\":\"string\"==typeof e?e.toLowerCase():\"none\",/^(none|ctrl-alt|left-alt|right-alt)$/.test(e)||(e=\"none\"),r.keyboard.altGrMode=e},\"alt-backspace-is-meta-backspace\":function(e){r.keyboard.altBackspaceIsMetaBackspace=e},\"alt-is-meta\":function(e){r.keyboard.altIsMeta=e},\"alt-sends-what\":function(e){/^(escape|8-bit|browser-key)$/.test(e)||(e=\"escape\"),r.keyboard.altSendsWhat=e},\"audible-bell-sound\":function(e){var t=e.match(/^lib-resource:(\\S+)/);t?r.bellAudio_.setAttribute(\"src\",u.resource.getDataUrl(t[1])):r.bellAudio_.setAttribute(\"src\",e)},\"desktop-notification-bell\":function(e){e&&Notification?(r.desktopNotificationBell_=\"granted\"===Notification.permission,!r.desktopNotificationBell_&&console.warn(\"desktop-notification-bell is true but we do not have permission to display notifications.\")):r.desktopNotificationBell_=!1},\"background-color\":function(e){r.setBackgroundColor(e)},\"background-image\":function(e){r.scrollPort_.setBackgroundImage(e)},\"background-size\":function(e){r.scrollPort_.setBackgroundSize(e)},\"background-position\":function(e){r.scrollPort_.setBackgroundPosition(e)},\"backspace-sends-backspace\":function(e){r.keyboard.backspaceSendsBackspace=e},\"character-map-overrides\":function(e){return null==e||e instanceof Object?(r.vt.characterMaps.reset(),void r.vt.characterMaps.setOverrides(e)):void console.warn(\"Preference character-map-modifications is not an object: \"+e)},\"cursor-blink\":function(e){r.setCursorBlink(!!e)},\"cursor-shape\":function(e){r.setCursorShape(e)},\"cursor-blink-cycle\":function(e){r.cursorBlinkCycle_=e instanceof Array&&\"number\"==typeof e[0]&&\"number\"==typeof e[1]?e:\"number\"==typeof e?[e,e]:[100,100]},\"cursor-color\":function(e){r.setCursorColor(e)},\"color-palette-overrides\":function(e){if(null==e||e instanceof Object||e instanceof Array){if(u.colors.colorPalette=u.colors.stockColorPalette.concat(),e)for(var t in e){var i=parseInt(t);if(isNaN(i)||0>i||255<i)console.log(\"Invalid value in palette: \"+t+\": \"+e[t]);else if(e[i]){var o=u.colors.normalizeCSS(e[i]);o&&(u.colors.colorPalette[i]=o)}}r.primaryScreen_.textAttributes.resetColorPalette(),r.alternateScreen_.textAttributes.resetColorPalette()}else console.warn(\"Preference color-palette-overrides is not an array or object: \"+e)},\"copy-on-select\":function(e){r.copyOnSelect=!!e},\"use-default-window-copy\":function(e){r.useDefaultWindowCopy=!!e},\"clear-selection-after-copy\":function(e){r.clearSelectionAfterCopy=!!e},\"ctrl-plus-minus-zero-zoom\":function(e){r.keyboard.ctrlPlusMinusZeroZoom=e},\"ctrl-c-copy\":function(e){r.keyboard.ctrlCCopy=e},\"ctrl-v-paste\":function(e){r.keyboard.ctrlVPaste=e,r.scrollPort_.setCtrlVPaste(e)},\"paste-on-drop\":function(e){r.scrollPort_.setPasteOnDrop(e)},\"east-asian-ambiguous-as-two-column\":function(e){u.wc.regardCjkAmbiguous=e},\"enable-8-bit-control\":function(e){r.vt.enable8BitControl=!!e},\"enable-bold\":function(){r.syncBoldSafeState()},\"enable-bold-as-bright\":function(e){r.primaryScreen_.textAttributes.enableBoldAsBright=!!e,r.alternateScreen_.textAttributes.enableBoldAsBright=!!e},\"enable-blink\":function(e){r.setTextBlink(!!e)},\"enable-clipboard-write\":function(e){r.vt.enableClipboardWrite=!!e},\"enable-dec12\":function(e){r.vt.enableDec12=!!e},\"enable-csi-j-3\":function(e){r.vt.enableCsiJ3=!!e},\"font-family\":function(){r.syncFontFamily()},\"font-size\":function(e){return 0>=(e=parseInt(e))?void console.error(`Invalid font size: ${e}`):void r.setFontSize(e)},\"font-smoothing\":function(){r.syncFontFamily()},\"foreground-color\":function(e){r.setForegroundColor(e)},\"hide-mouse-while-typing\":function(e){r.setAutomaticMouseHiding(e)},\"home-keys-scroll\":function(e){r.keyboard.homeKeysScroll=e},keybindings:function(e){if(r.keyboard.bindings.clear(),e){if(!(e instanceof Object))return void console.error(\"Error in keybindings preference: Expected object\");try{r.keyboard.bindings.addBindings(e)}catch(e){console.error(\"Error in keybindings preference: \"+e)}}},\"media-keys-are-fkeys\":function(e){r.keyboard.mediaKeysAreFKeys=e},\"meta-sends-escape\":function(e){r.keyboard.metaSendsEscape=e},\"mouse-right-click-paste\":function(e){r.mouseRightClickPaste=e},\"mouse-paste-button\":function(){r.syncMousePasteButton()},\"page-keys-scroll\":function(e){r.keyboard.pageKeysScroll=e},\"pass-alt-number\":function(e){null==e&&(e=\"mac\"!=f.os&&\"popup\"!=f.windowType),r.passAltNumber=e},\"pass-ctrl-number\":function(e){null==e&&(e=\"mac\"!=f.os&&\"popup\"!=f.windowType),r.passCtrlNumber=e},\"pass-meta-number\":function(e){null==e&&(e=\"mac\"==f.os&&\"popup\"!=f.windowType),r.passMetaNumber=e},\"pass-meta-v\":function(e){r.keyboard.passMetaV=e},\"receive-encoding\":function(e){/^(utf-8|raw)$/.test(e)||(console.warn('Invalid value for \"receive-encoding\": '+e),e=\"utf-8\"),r.vt.characterEncoding=e},\"scroll-on-keystroke\":function(e){r.scrollOnKeystroke_=e},\"scroll-on-output\":function(e){r.scrollOnOutput_=e},\"scrollbar-visible\":function(e){r.setScrollbarVisible(e)},\"scroll-wheel-may-send-arrow-keys\":function(e){r.scrollWheelArrowKeys_=e},\"scroll-wheel-move-multiplier\":function(e){r.setScrollWheelMoveMultipler(e)},\"shift-insert-paste\":function(e){r.keyboard.shiftInsertPaste=e},\"terminal-encoding\":function(e){r.vt.setEncoding(e)},\"user-css\":function(e){r.scrollPort_.setUserCssUrl(e)},\"user-css-text\":function(e){r.scrollPort_.setUserCssText(e)},\"word-break-match-left\":function(e){r.primaryScreen_.wordBreakMatchLeft=e,r.alternateScreen_.wordBreakMatchLeft=e},\"word-break-match-right\":function(e){r.primaryScreen_.wordBreakMatchRight=e,r.alternateScreen_.wordBreakMatchRight=e},\"word-break-match-middle\":function(e){r.primaryScreen_.wordBreakMatchMiddle=e,r.alternateScreen_.wordBreakMatchMiddle=e},\"allow-images-inline\":function(e){r.allowImagesInline=e}}),this.prefs_.readStorage(function(){this.prefs_.notifyAll(),t&&t()}.bind(this))},f.Terminal.prototype.getPrefs=function(){return this.prefs_},f.Terminal.prototype.setBracketedPaste=function(e){this.options_.bracketedPaste=e},f.Terminal.prototype.setCursorColor=function(e){void 0===e&&(e=this.prefs_.get(\"cursor-color\")),this.setCssVar(\"cursor-color\",e)},f.Terminal.prototype.getCursorColor=function(){return this.getCssVar(\"cursor-color\")},f.Terminal.prototype.setSelectionEnabled=function(e){this.enableMouseDragScroll=e},f.Terminal.prototype.setBackgroundColor=function(e){void 0===e&&(e=this.prefs_.get(\"background-color\")),this.backgroundColor_=u.colors.normalizeCSS(e),this.primaryScreen_.textAttributes.setDefaults(this.foregroundColor_,this.backgroundColor_),this.alternateScreen_.textAttributes.setDefaults(this.foregroundColor_,this.backgroundColor_),this.scrollPort_.setBackgroundColor(e)},f.Terminal.prototype.getBackgroundColor=function(){return this.backgroundColor_},f.Terminal.prototype.setForegroundColor=function(e){void 0===e&&(e=this.prefs_.get(\"foreground-color\")),this.foregroundColor_=u.colors.normalizeCSS(e),this.primaryScreen_.textAttributes.setDefaults(this.foregroundColor_,this.backgroundColor_),this.alternateScreen_.textAttributes.setDefaults(this.foregroundColor_,this.backgroundColor_),this.scrollPort_.setForegroundColor(e)},f.Terminal.prototype.getForegroundColor=function(){return this.foregroundColor_},f.Terminal.prototype.runCommandClass=function(e,t){var r=this.prefs_.get(\"environment\");(\"object\"!=typeof r||null==r)&&(r={});var i=this;this.command=new e({argString:t||\"\",io:this.io.push(),environment:r,onExit:function(){i.io.pop(),i.uninstallKeyboard(),i.prefs_.get(\"close-on-exit\")&&window.close()}}),this.installKeyboard(),this.command.run()},f.Terminal.prototype.isPrimaryScreen=function(){return this.screen_==this.primaryScreen_},f.Terminal.prototype.installKeyboard=function(){this.keyboard.installKeyboard(this.scrollPort_.getDocument().body)},f.Terminal.prototype.uninstallKeyboard=function(){this.keyboard.installKeyboard(null)},f.Terminal.prototype.setCssVar=function(e,t,r=\"--hterm-\"){this.document_.documentElement.style.setProperty(`${r}${e}`,t)},f.Terminal.prototype.getCssVar=function(e,t=\"--hterm-\"){return this.document_.documentElement.style.getPropertyValue(`${t}${e}`)},f.Terminal.prototype.setFontSize=function(e){0>=e&&(e=this.prefs_.get(\"font-size\")),this.scrollPort_.setFontSize(e),this.setCssVar(\"charsize-width\",this.scrollPort_.characterSize.width+\"px\"),this.setCssVar(\"charsize-height\",this.scrollPort_.characterSize.height+\"px\")},f.Terminal.prototype.getFontSize=function(){return this.scrollPort_.getFontSize()},f.Terminal.prototype.getFontFamily=function(){return this.scrollPort_.getFontFamily()},f.Terminal.prototype.syncFontFamily=function(){this.scrollPort_.setFontFamily(this.prefs_.get(\"font-family\"),this.prefs_.get(\"font-smoothing\")),this.syncBoldSafeState()},f.Terminal.prototype.syncMousePasteButton=function(){var e=this.prefs_.get(\"mouse-paste-button\");return\"number\"==typeof e?void(this.mousePasteButton=e):void(\"linux\"==f.os?this.mousePasteButton=2:this.mousePasteButton=1)},f.Terminal.prototype.syncBoldSafeState=function(){var e=this.prefs_.get(\"enable-bold\");if(null!==e)return this.primaryScreen_.textAttributes.enableBold=e,void(this.alternateScreen_.textAttributes.enableBold=e);var t=this.scrollPort_.measureCharacterSize(),r=this.scrollPort_.measureCharacterSize(\"bold\"),i=t.equals(r);i||console.warn(\"Bold characters disabled: Size of bold weight differs from normal.  Font family is: \"+this.scrollPort_.getFontFamily()),this.primaryScreen_.textAttributes.enableBold=i,this.alternateScreen_.textAttributes.enableBold=i},f.Terminal.prototype.setTextBlink=function(e){void 0===e&&(e=this.prefs_.get(\"enable-blink\")),this.setCssVar(\"blink-node-duration\",e?\"0.7s\":\"0\")},f.Terminal.prototype.syncMouseStyle=function(){this.setCssVar(\"mouse-cursor-style\",this.vt.mouseReport==this.vt.MOUSE_REPORT_DISABLED?\"var(--hterm-mouse-cursor-text)\":\"var(--hterm-mouse-cursor-default)\")},f.Terminal.prototype.saveCursor=function(){return this.screen_.cursorPosition.clone()},f.Terminal.prototype.getTextAttributes=function(){return this.screen_.textAttributes},f.Terminal.prototype.setTextAttributes=function(e){this.screen_.textAttributes=e},f.Terminal.prototype.getZoomFactor=function(){return this.scrollPort_.characterSize.zoomFactor},f.Terminal.prototype.setWindowTitle=function(e){window.document.title=e},f.Terminal.prototype.restoreCursor=function(e){var t=u.f.clamp(e.row,0,this.screenSize.height-1),r=u.f.clamp(e.column,0,this.screenSize.width-1);this.screen_.setCursorPosition(t,r),(e.column>r||e.column==r&&e.overflow)&&(this.screen_.cursorPosition.overflow=!0)},f.Terminal.prototype.clearCursorOverflow=function(){this.screen_.cursorPosition.overflow=!1},f.Terminal.prototype.saveCursorAndState=function(e){e?(this.primaryScreen_.saveCursorAndState(this.vt),this.alternateScreen_.saveCursorAndState(this.vt)):this.screen_.saveCursorAndState(this.vt)},f.Terminal.prototype.restoreCursorAndState=function(e){e?(this.primaryScreen_.restoreCursorAndState(this.vt),this.alternateScreen_.restoreCursorAndState(this.vt)):this.screen_.restoreCursorAndState(this.vt)},f.Terminal.prototype.setCursorShape=function(e){this.cursorShape_=e,this.restyleCursor_()},f.Terminal.prototype.getCursorShape=function(){return this.cursorShape_},f.Terminal.prototype.setWidth=function(e){return null==e?void(this.div_.style.width=\"100%\"):(this.div_.style.width=s(this.scrollPort_.characterSize.width*e+this.scrollPort_.currentScrollbarWidthPx)+\"px\",this.realizeSize_(e,this.screenSize.height),void this.scheduleSyncCursorPosition_())},f.Terminal.prototype.setHeight=function(e){return null==e?void(this.div_.style.height=\"100%\"):(this.div_.style.height=this.scrollPort_.characterSize.height*e+\"px\",this.realizeSize_(this.screenSize.width,e),void this.scheduleSyncCursorPosition_())},f.Terminal.prototype.realizeSize_=function(e,t){let r=!1;e!=this.screenSize.width&&(r=!0,this.realizeWidth_(e)),t!=this.screenSize.height&&(r=!0,this.realizeHeight_(t)),r&&this.io.onTerminalResize_(e,t)},f.Terminal.prototype.realizeWidth_=function(e){if(0>=e)throw new Error(\"Attempt to realize bad width: \"+e);var t=e-this.screen_.getWidth();if(0!=t){if(this.screenSize.width=e,this.screen_.setColumnCount(e),0<t)this.defaultTabStops&&this.setDefaultTabStops(this.screenSize.width-t);else for(var r=this.tabStops_.length-1;0<=r&&!(this.tabStops_[r]<e);r--)this.tabStops_.pop();this.screen_.setColumnCount(this.screenSize.width)}},f.Terminal.prototype.realizeHeight_=function(e){if(0>=e)throw new Error(\"Attempt to realize bad height: \"+e);var t=e-this.screen_.getHeight();if(0!=t){this.screenSize.height=e;var r=this.saveCursor();if(0>t){for(t*=-1;t;){var i=this.getRowCount()-1;if(i-this.scrollbackRows_.length==r.row)break;if(this.getRowText(i))break;this.screen_.popRow(),t--}var n=this.screen_.shiftRows(t);this.scrollbackRows_.push.apply(this.scrollbackRows_,n),r.row=o(r.row-t,0)}else if(0<t){if(t<=this.scrollbackRows_.length){var s=l(t,this.scrollbackRows_.length),a=this.scrollbackRows_.splice(this.scrollbackRows_.length-s,s);this.screen_.unshiftRows(a),t-=s,r.row+=s}t&&this.appendRows_(t)}this.setVTScrollRegion(null,null),this.restoreCursor(r)}},f.Terminal.prototype.scrollHome=function(){this.scrollPort_.scrollRowToTop(0)},f.Terminal.prototype.scrollEnd=function(){this.scrollPort_.scrollRowToBottom(this.getRowCount())},f.Terminal.prototype.scrollPageUp=function(){this.scrollPort_.scrollPageUp()},f.Terminal.prototype.scrollPageDown=function(){this.scrollPort_.scrollPageDown()},f.Terminal.prototype.scrollLineUp=function(){var e=this.scrollPort_.getTopRowIndex();this.scrollPort_.scrollRowToTop(e-1)},f.Terminal.prototype.scrollLineDown=function(){var e=this.scrollPort_.getTopRowIndex();this.scrollPort_.scrollRowToTop(e+1)},f.Terminal.prototype.wipeContents=function(){this.clearHome(this.primaryScreen_),this.clearHome(this.alternateScreen_),this.clearScrollback()},f.Terminal.prototype.clearScrollback=function(){this.scrollEnd(),this.scrollbackRows_.length=0,this.scrollPort_.resetCache(),[this.primaryScreen_,this.alternateScreen_].forEach(e=>{const t=e.getHeight();this.renumberRows_(0,t,e)}),this.syncCursorPosition_(),this.scrollPort_.invalidate()},f.Terminal.prototype.reset=function(){this.vt.reset(),this.clearAllTabStops(),this.setDefaultTabStops();const e=e=>{e.textAttributes.reset(),e.textAttributes.resetColorPalette(),this.clearHome(e),e.saveCursorAndState(this.vt)};e(this.primaryScreen_),e(this.alternateScreen_),this.options_=new f.Options,this.setCursorBlink(!!this.prefs_.get(\"cursor-blink\")),this.setVTScrollRegion(null,null),this.setCursorVisible(!0)},f.Terminal.prototype.softReset=function(){this.vt.reset(),this.options_=new f.Options,this.options_.cursorBlink=!!this.timeouts_.cursorBlink;const e=e=>{e.textAttributes.reset(),e.textAttributes.resetColorPalette(),e.saveCursorAndState(this.vt)};e(this.primaryScreen_),e(this.alternateScreen_),this.setVTScrollRegion(null,null),this.setCursorVisible(!0)},f.Terminal.prototype.forwardTabStop=function(){for(var e=this.screen_.cursorPosition.column,t=0;t<this.tabStops_.length;t++)if(this.tabStops_[t]>e)return void this.setCursorColumn(this.tabStops_[t]);var r=this.screen_.cursorPosition.overflow;this.setCursorColumn(this.screenSize.width-1),this.screen_.cursorPosition.overflow=r},f.Terminal.prototype.backwardTabStop=function(){for(var e=this.screen_.cursorPosition.column,t=this.tabStops_.length-1;0<=t;t--)if(this.tabStops_[t]<e)return void this.setCursorColumn(this.tabStops_[t]);this.setCursorColumn(1)},f.Terminal.prototype.setTabStop=function(e){for(var t=this.tabStops_.length-1;0<=t;t--){if(this.tabStops_[t]==e)return;if(this.tabStops_[t]<e)return void this.tabStops_.splice(t+1,0,e)}this.tabStops_.splice(0,0,e)},f.Terminal.prototype.clearTabStopAtCursor=function(){var e=this.screen_.cursorPosition.column,t=this.tabStops_.indexOf(e);-1==t||this.tabStops_.splice(t,1)},f.Terminal.prototype.clearAllTabStops=function(){this.tabStops_.length=0,this.defaultTabStops=!1},f.Terminal.prototype.setDefaultTabStops=function(e){for(var t=e||0,r=this.tabWidth,i=t=t-1-(t-1)%r+r;i<this.screenSize.width;i+=r)this.setTabStop(i);this.defaultTabStops=!0},f.Terminal.prototype.interpret=function(e){this.scheduleSyncCursorPosition_(),this.vt.interpret(e)},f.Terminal.prototype.decorate=function(e){const t=e.ownerDocument.characterSet.toLowerCase();\"utf-8\"!=t&&console.warn(`Document encoding should be set to utf-8, not \"${t}\";`+\" Add <meta charset='utf-8'/> to your HTML <head> to fix.\"),this.div_=e,this.accessibilityReader_=new f.AccessibilityReader(e),this.scrollPort_.decorate(e,()=>this.setupScrollPort_())},f.Terminal.prototype.setupScrollPort_=function(){this.scrollPort_.setBackgroundImage(this.prefs_.get(\"background-image\")),this.scrollPort_.setBackgroundSize(this.prefs_.get(\"background-size\")),this.scrollPort_.setBackgroundPosition(this.prefs_.get(\"background-position\")),this.scrollPort_.setUserCssUrl(this.prefs_.get(\"user-css\")),this.scrollPort_.setUserCssText(this.prefs_.get(\"user-css-text\")),this.scrollPort_.setAccessibilityReader(this.accessibilityReader_),this.div_.focus=this.focus.bind(this),this.setFontSize(this.prefs_.get(\"font-size\")),this.syncFontFamily(),this.setScrollbarVisible(this.prefs_.get(\"scrollbar-visible\")),this.setScrollWheelMoveMultipler(this.prefs_.get(\"scroll-wheel-move-multiplier\")),this.document_=this.scrollPort_.getDocument(),this.accessibilityReader_.decorate(this.document_),this.document_.body.oncontextmenu=function(){return!1},this.contextMenu.setDocument(this.document_);var e=this.onMouse_.bind(this),t=this.scrollPort_.getScreenNode();t.addEventListener(\"mousedown\",e),t.addEventListener(\"mouseup\",e),t.addEventListener(\"mousemove\",e),this.scrollPort_.onScrollWheel=e,t.addEventListener(\"keydown\",this.onKeyboardActivity_.bind(this)),t.addEventListener(\"focus\",this.onFocusChange_.bind(this,!0)),t.addEventListener(\"mousedown\",function(){setTimeout(this.onFocusChange_.bind(this,!0))}.bind(this)),t.addEventListener(\"blur\",this.onFocusChange_.bind(this,!1));var r=this.document_.createElement(\"style\");r.textContent='.cursor-node[focus=\"false\"] {  box-sizing: border-box;  background-color: transparent !important;  border-width: 2px;  border-style: solid;}menu {  margin: 0;  padding: 0;  cursor: var(--hterm-mouse-cursor-pointer);}menuitem {  white-space: nowrap;  border-bottom: 1px dashed;  display: block;  padding: 0.3em 0.3em 0 0.3em;}menuitem.separator {  border-bottom: none;  height: 0.5em;  padding: 0;}menuitem:hover {  color: var(--hterm-cursor-color);}.wc-node {  display: inline-block;  text-align: center;  width: calc(var(--hterm-charsize-width) * 2);  line-height: var(--hterm-charsize-height);}:root {  --hterm-charsize-width: '+this.scrollPort_.characterSize.width+\"px;  --hterm-charsize-height: \"+this.scrollPort_.characterSize.height+\"px;  --hterm-cursor-offset-col: -1;  --hterm-cursor-offset-row: -1;  --hterm-blink-node-duration: 0.7s;  --hterm-mouse-cursor-default: default;  --hterm-mouse-cursor-text: text;  --hterm-mouse-cursor-pointer: pointer;  --hterm-mouse-cursor-style: var(--hterm-mouse-cursor-text);}.uri-node:hover {  text-decoration: underline;  cursor: var(--hterm-mouse-cursor-pointer);}@keyframes blink {  from { opacity: 1.0; }  to { opacity: 0.0; }}.blink-node {  animation-name: blink;  animation-duration: var(--hterm-blink-node-duration);  animation-iteration-count: infinite;  animation-timing-function: ease-in-out;  animation-direction: alternate;}\",this.document_.head.insertBefore(r,this.document_.head.firstChild),this.cursorNode_=this.document_.createElement(\"div\"),this.cursorNode_.id=\"hterm:terminal-cursor\",this.cursorNode_.className=\"cursor-node\",this.cursorNode_.style.cssText=\"position: absolute;left: calc(var(--hterm-charsize-width) * var(--hterm-cursor-offset-col));top: calc(var(--hterm-charsize-height) * var(--hterm-cursor-offset-row));display: \"+(this.options_.cursorVisible?\"\":\"none\")+\";width: var(--hterm-charsize-width);height: var(--hterm-charsize-height);background-color: var(--hterm-cursor-color);border-color: var(--hterm-cursor-color);-webkit-transition: opacity, background-color 100ms linear;-moz-transition: opacity, background-color 100ms linear;\",this.setCursorColor(),this.setCursorBlink(!!this.prefs_.get(\"cursor-blink\")),this.restyleCursor_(),this.document_.body.appendChild(this.cursorNode_),this.scrollBlockerNode_=this.document_.createElement(\"div\"),this.scrollBlockerNode_.id=\"hterm:mouse-drag-scroll-blocker\",this.scrollBlockerNode_.setAttribute(\"aria-hidden\",\"true\"),this.scrollBlockerNode_.style.cssText=\"position: absolute;top: -99px;display: block;width: 10px;height: 10px;\",this.document_.body.appendChild(this.scrollBlockerNode_),this.scrollPort_.onScrollWheel=e,[\"mousedown\",\"mouseup\",\"mousemove\",\"click\",\"dblclick\"].forEach(function(t){this.scrollBlockerNode_.addEventListener(t,e),this.cursorNode_.addEventListener(t,e),this.document_.addEventListener(t,e)}.bind(this)),this.cursorNode_.addEventListener(\"mousedown\",function(){setTimeout(this.focus.bind(this))}.bind(this)),this.setReverseVideo(!1),this.scrollPort_.focus(),this.scrollPort_.scheduleRedraw()},f.Terminal.prototype.getDocument=function(){return this.document_},f.Terminal.prototype.focus=function(){this.scrollPort_.focus()},f.Terminal.prototype.getRowNode=function(e){if(e<this.scrollbackRows_.length)return this.scrollbackRows_[e];var t=e-this.scrollbackRows_.length;return this.screen_.rowsArray[t]},f.Terminal.prototype.getRowsText=function(e,t){for(var r,i=[],o=e;o<t;o++)r=this.getRowNode(o),i.push(r.textContent),o<t-1&&!r.getAttribute(\"line-overflow\")&&i.push(\"\\n\");return i.join(\"\")},f.Terminal.prototype.getRowText=function(e){return this.getRowNode(e).textContent},f.Terminal.prototype.getRowCount=function(){return this.scrollbackRows_.length+this.screen_.rowsArray.length},f.Terminal.prototype.appendRows_=function(e){for(var t,r=this.screen_.rowsArray.length,i=this.scrollbackRows_.length+r,o=0;o<e;o++)(t=this.document_.createElement(\"x-row\")).appendChild(this.document_.createTextNode(\"\")),t.rowIndex=i+o,this.screen_.pushRow(t);var n=this.screen_.rowsArray.length-this.screenSize.height;if(0<n){var s=this.screen_.shiftRows(n);Array.prototype.push.apply(this.scrollbackRows_,s),this.scrollPort_.isScrolledEnd&&this.scheduleScrollDown_()}r>=this.screen_.rowsArray.length&&(r=this.screen_.rowsArray.length-1),this.setAbsoluteCursorPosition(r,0)},f.Terminal.prototype.moveRows_=function(e,t,r){var i,o,n=this.screen_.removeRows(e,t);this.screen_.insertRows(r,n),e<r?(i=e,o=r+t):(i=r,o=e+t),this.renumberRows_(i,o),this.scrollPort_.scheduleInvalidate()},f.Terminal.prototype.renumberRows_=function(e,t,r){for(var i=r||this.screen_,o=this.scrollbackRows_.length,n=e;n<t;n++)i.rowsArray[n].rowIndex=o+n},f.Terminal.prototype.print=function(e){this.scheduleSyncCursorPosition_(),this.accessibilityReader_.announce(e);var t=0,r=u.wc.strWidth(e);for(0==r&&e&&(r=1);t<r;){this.options_.wraparound&&this.screen_.cursorPosition.overflow&&(this.screen_.commitLineOverflow(),this.newLine(!0));var i,o=r-t,n=!1;this.screen_.cursorPosition.column+o>=this.screenSize.width&&(n=!0,o=this.screenSize.width-this.screen_.cursorPosition.column),n&&!this.options_.wraparound?(i=u.wc.substr(e,t,o-1)+u.wc.substr(e,r-1),o=r):i=u.wc.substr(e,t,o);for(var s=f.TextAttributes.splitWidecharString(i),a=0;a<s.length;a++)this.screen_.textAttributes.wcNode=s[a].wcNode,this.screen_.textAttributes.asciiNode=s[a].asciiNode,this.options_.insertMode?this.screen_.insertString(s[a].str,s[a].wcStrWidth):this.screen_.overwriteString(s[a].str,s[a].wcStrWidth),this.screen_.textAttributes.wcNode=!1,this.screen_.textAttributes.asciiNode=!0;this.screen_.maybeClipCurrentRow(),t+=o}this.scrollOnOutput_&&this.scrollPort_.scrollRowToBottom(this.getRowCount())},f.Terminal.prototype.setVTScrollRegion=function(e,t){0==e&&t==this.screenSize.height-1?(this.vtScrollTop_=null,this.vtScrollBottom_=null):(this.vtScrollTop_=e,this.vtScrollBottom_=t)},f.Terminal.prototype.getVTScrollTop=function(){return null==this.vtScrollTop_?0:this.vtScrollTop_},f.Terminal.prototype.getVTScrollBottom=function(){return null==this.vtScrollBottom_?this.screenSize.height-1:this.vtScrollBottom_},f.Terminal.prototype.newLine=function(e=!1){e||this.accessibilityReader_.newLine();var t=this.screen_.cursorPosition.row==this.screen_.rowsArray.length-1;null==this.vtScrollBottom_?t?this.appendRows_(1):this.setAbsoluteCursorPosition(this.screen_.cursorPosition.row+1,0):this.screen_.cursorPosition.row==this.vtScrollBottom_?(this.vtScrollUp(1),this.setAbsoluteCursorPosition(this.screen_.cursorPosition.row,0)):t?this.setAbsoluteCursorPosition(this.screen_.cursorPosition.row,0):this.setAbsoluteCursorPosition(this.screen_.cursorPosition.row+1,0)},f.Terminal.prototype.lineFeed=function(){var e=this.screen_.cursorPosition.column;this.newLine(),this.setCursorColumn(e)},f.Terminal.prototype.formFeed=function(){this.options_.autoCarriageReturn?this.newLine():this.lineFeed()},f.Terminal.prototype.reverseLineFeed=function(){var e=this.getVTScrollTop(),t=this.screen_.cursorPosition.row;t==e?this.insertLines(1):this.setAbsoluteCursorRow(t-1)},f.Terminal.prototype.eraseToLeft=function(){var e=this.saveCursor();this.setCursorColumn(0);const t=e.column+1;this.screen_.overwriteString(\" \".repeat(t),t),this.restoreCursor(e)},f.Terminal.prototype.eraseToRight=function(e){if(!this.screen_.cursorPosition.overflow){var t=this.screenSize.width-this.screen_.cursorPosition.column,r=e?l(e,t):t;if(this.screen_.textAttributes.background===this.screen_.textAttributes.DEFAULT_COLOR){var i=this.screen_.rowsArray[this.screen_.cursorPosition.row];if(f.TextAttributes.nodeWidth(i)<=this.screen_.cursorPosition.column+r)return this.screen_.deleteChars(r),void this.clearCursorOverflow()}var o=this.saveCursor();this.screen_.overwriteString(\" \".repeat(r),r),this.restoreCursor(o),this.clearCursorOverflow()}},f.Terminal.prototype.eraseLine=function(){var e=this.saveCursor();this.screen_.clearCursorRow(),this.restoreCursor(e),this.clearCursorOverflow()},f.Terminal.prototype.eraseAbove=function(){var e=this.saveCursor();this.eraseToLeft();for(var t=0;t<e.row;t++)this.setAbsoluteCursorPosition(t,0),this.screen_.clearCursorRow();this.restoreCursor(e),this.clearCursorOverflow()},f.Terminal.prototype.eraseBelow=function(){var e=this.saveCursor();this.eraseToRight();for(var t=this.screenSize.height-1,r=e.row+1;r<=t;r++)this.setAbsoluteCursorPosition(r,0),this.screen_.clearCursorRow();this.restoreCursor(e),this.clearCursorOverflow()},f.Terminal.prototype.fill=function(e){var t=this.saveCursor();this.setAbsoluteCursorPosition(0,0);for(var r=0;r<this.screenSize.height;r++)for(var i=0;i<this.screenSize.width;i++)this.setAbsoluteCursorPosition(r,i),this.screen_.overwriteString(e,1);this.restoreCursor(t)},f.Terminal.prototype.clearHome=function(e){var t=e||this.screen_,r=t.getHeight();if(this.accessibilityReader_.clear(),0!=r){for(var i=0;i<r;i++)t.setCursorPosition(i,0),t.clearCursorRow();t.setCursorPosition(0,0)}},f.Terminal.prototype.clear=function(e){var t=e||this.screen_,r=t.cursorPosition.clone();this.clearHome(t),t.setCursorPosition(r.row,r.column)},f.Terminal.prototype.insertLines=function(e){var t=this.screen_.cursorPosition.row,r=this.getVTScrollBottom(),i=r-t-(e=l(e,r-t))+1;i&&this.moveRows_(t,i,t+e);for(var o=e-1;0<=o;o--)this.setAbsoluteCursorPosition(t+o,0),this.screen_.clearCursorRow()},f.Terminal.prototype.deleteLines=function(e){var t=this.saveCursor(),r=t.row,i=this.getVTScrollBottom(),o=i-r+1,n=i-(e=l(e,o))+1;e!=o&&this.moveRows_(r,e,n);for(var s=0;s<e;s++)this.setAbsoluteCursorPosition(n+s,0),this.screen_.clearCursorRow();this.restoreCursor(t),this.clearCursorOverflow()},f.Terminal.prototype.insertSpace=function(e){var t=this.saveCursor();const r=\" \".repeat(e||1);this.screen_.insertString(r,r.length),this.screen_.maybeClipCurrentRow(),this.restoreCursor(t),this.clearCursorOverflow()},f.Terminal.prototype.deleteChars=function(e){var t=this.screen_.deleteChars(e);if(t&&!this.screen_.textAttributes.isDefault()){var r=this.saveCursor();this.setCursorColumn(this.screenSize.width-t),this.screen_.insertString(\" \".repeat(t)),this.restoreCursor(r)}this.clearCursorOverflow()},f.Terminal.prototype.vtScrollUp=function(e){var t=this.saveCursor();this.setAbsoluteCursorRow(this.getVTScrollTop()),this.deleteLines(e),this.restoreCursor(t)},f.Terminal.prototype.vtScrollDown=function(e){var t=this.saveCursor();this.setAbsoluteCursorPosition(this.getVTScrollTop(),0),this.insertLines(e),this.restoreCursor(t)},f.Terminal.prototype.setAccessibilityEnabled=function(e){this.accessibilityReader_.setAccessibilityEnabled(e)},f.Terminal.prototype.setCursorPosition=function(e,t){this.options_.originMode?this.setRelativeCursorPosition(e,t):this.setAbsoluteCursorPosition(e,t)},f.Terminal.prototype.setRelativeCursorPosition=function(e,t){var r=this.getVTScrollTop();e=u.f.clamp(e+r,r,this.getVTScrollBottom()),t=u.f.clamp(t,0,this.screenSize.width-1),this.screen_.setCursorPosition(e,t)},f.Terminal.prototype.setAbsoluteCursorPosition=function(e,t){e=u.f.clamp(e,0,this.screenSize.height-1),t=u.f.clamp(t,0,this.screenSize.width-1),this.screen_.setCursorPosition(e,t)},f.Terminal.prototype.setCursorColumn=function(e){this.setAbsoluteCursorPosition(this.screen_.cursorPosition.row,e)},f.Terminal.prototype.getCursorColumn=function(){return this.screen_.cursorPosition.column},f.Terminal.prototype.setAbsoluteCursorRow=function(e){this.setAbsoluteCursorPosition(e,this.screen_.cursorPosition.column)},f.Terminal.prototype.getCursorRow=function(){return this.screen_.cursorPosition.row},f.Terminal.prototype.scheduleRedraw_=function(){if(!this.timeouts_.redraw){var e=this;this.timeouts_.redraw=setTimeout((function(){delete e.timeouts_.redraw,e.scrollPort_.redraw_()}),0)}},f.Terminal.prototype.scheduleScrollDown_=function(){if(!this.timeouts_.scrollDown){var e=this;this.timeouts_.scrollDown=setTimeout((function(){delete e.timeouts_.scrollDown,e.scrollPort_.scrollRowToBottom(e.getRowCount())}),10)}},f.Terminal.prototype.cursorUp=function(e){return this.cursorDown(-(e||1))},f.Terminal.prototype.cursorDown=function(e){e=e||1;var t=this.options_.originMode?this.getVTScrollTop():0,r=this.options_.originMode?this.getVTScrollBottom():this.screenSize.height-1,i=u.f.clamp(this.screen_.cursorPosition.row+e,t,r);this.setAbsoluteCursorRow(i)},f.Terminal.prototype.cursorLeft=function(e){if(!(1>(e=e||1))){var t=this.screen_.cursorPosition.column;if(this.options_.reverseWraparound){if(this.screen_.cursorPosition.overflow&&(e--,this.clearCursorOverflow(),!e))return;var r=this.screen_.cursorPosition.row;0>(i=t-e)&&(0>(r=r-n(e/this.screenSize.width)-1)&&(r=this.screenSize.height+r%this.screenSize.height),i=this.screenSize.width+i%this.screenSize.width),this.setCursorPosition(o(r,0),i)}else{var i=o(t-e,0);this.setCursorColumn(i)}}},f.Terminal.prototype.cursorRight=function(e){if(!(1>(e=e||1))){var t=u.f.clamp(this.screen_.cursorPosition.column+e,0,this.screenSize.width-1);this.setCursorColumn(t)}},f.Terminal.prototype.setReverseVideo=function(e){this.options_.reverseVideo=e,e?(this.scrollPort_.setForegroundColor(this.backgroundColor_),this.scrollPort_.setBackgroundColor(this.foregroundColor_)):(this.scrollPort_.setForegroundColor(this.foregroundColor_),this.scrollPort_.setBackgroundColor(this.backgroundColor_))},f.Terminal.prototype.ringBell=function(){this.cursorNode_.style.backgroundColor=this.scrollPort_.getForegroundColor();var e=this;if(setTimeout((function(){e.restyleCursor_()}),200),!this.bellSquelchTimeout_&&(this.bellAudio_.getAttribute(\"src\")?(this.bellAudio_.play(),this.bellSequelchTimeout_=setTimeout(function(){delete this.bellSquelchTimeout_}.bind(this),500)):delete this.bellSquelchTimeout_,this.desktopNotificationBell_&&!this.document_.hasFocus())){var t=f.notify();this.bellNotificationList_.push(t),t.onclick=function(){e.closeBellNotifications_()}}},f.Terminal.prototype.setOriginMode=function(e){this.options_.originMode=e,this.setCursorPosition(0,0)},f.Terminal.prototype.setInsertMode=function(e){this.options_.insertMode=e},f.Terminal.prototype.setAutoCarriageReturn=function(e){this.options_.autoCarriageReturn=e},f.Terminal.prototype.setWraparound=function(e){this.options_.wraparound=e},f.Terminal.prototype.setReverseWraparound=function(e){this.options_.reverseWraparound=e},f.Terminal.prototype.setAlternateMode=function(e){var t=this.saveCursor();if(this.screen_=e?this.alternateScreen_:this.primaryScreen_,this.screen_.rowsArray.length&&this.screen_.rowsArray[0].rowIndex!=this.scrollbackRows_.length)for(var r=this.scrollbackRows_.length,i=this.screen_.rowsArray,o=0;o<i.length;o++)i[o].rowIndex=r+o;this.realizeWidth_(this.screenSize.width),this.realizeHeight_(this.screenSize.height),this.scrollPort_.syncScrollHeight(),this.scrollPort_.invalidate(),this.restoreCursor(t),this.scrollPort_.resize()},f.Terminal.prototype.setCursorBlink=function(e){this.options_.cursorBlink=e,!e&&this.timeouts_.cursorBlink&&(clearTimeout(this.timeouts_.cursorBlink),delete this.timeouts_.cursorBlink),this.options_.cursorVisible&&this.setCursorVisible(!0)},f.Terminal.prototype.setCursorVisible=function(e){if(this.options_.cursorVisible=e,!e)return this.timeouts_.cursorBlink&&(clearTimeout(this.timeouts_.cursorBlink),delete this.timeouts_.cursorBlink),void(this.cursorNode_.style.opacity=\"0\");if(this.syncCursorPosition_(),this.cursorNode_.style.opacity=\"1\",this.options_.cursorBlink){if(this.timeouts_.cursorBlink)return;this.onCursorBlink_()}else this.timeouts_.cursorBlink&&(clearTimeout(this.timeouts_.cursorBlink),delete this.timeouts_.cursorBlink)},f.Terminal.prototype.syncCursorPosition_=function(){var e=this.scrollPort_.getTopRowIndex(),t=this.scrollPort_.getBottomRowIndex(e),r=this.scrollbackRows_.length+this.screen_.cursorPosition.row;let i=!1;if(this.accessibilityReader_.accessibilityEnabled){const e=this.screen_.cursorPosition.column,t=this.screen_.rowsArray[this.screen_.cursorPosition.row].innerText;i=this.accessibilityReader_.hasUserGesture,this.accessibilityReader_.afterCursorChange(t,r,e)}if(r>t)return this.setCssVar(\"cursor-offset-row\",\"-1\"),!1;this.options_.cursorVisible&&\"none\"==this.cursorNode_.style.display&&(this.cursorNode_.style.display=\"\"),this.setCssVar(\"cursor-offset-row\",`${r-e} + `+`${this.scrollPort_.visibleRowTopMargin}px`),this.setCssVar(\"cursor-offset-col\",this.screen_.cursorPosition.column),this.cursorNode_.setAttribute(\"title\",\"(\"+this.screen_.cursorPosition.column+\", \"+this.screen_.cursorPosition.row+\")\");var o=this.document_.getSelection();return o&&(o.isCollapsed||i)&&this.screen_.syncSelectionCaret(o),!0},f.Terminal.prototype.restyleCursor_=function(){var e=this.cursorShape_;\"false\"==this.cursorNode_.getAttribute(\"focus\")&&(e=f.Terminal.cursorShape.BLOCK);var t=this.cursorNode_.style;e===f.Terminal.cursorShape.BEAM?(t.backgroundColor=\"transparent\",t.borderBottomStyle=null,t.borderLeftStyle=\"solid\"):e===f.Terminal.cursorShape.UNDERLINE?(t.backgroundColor=\"transparent\",t.borderBottomStyle=\"solid\",t.borderLeftStyle=null):(t.backgroundColor=\"var(--hterm-cursor-color)\",t.borderBottomStyle=null,t.borderLeftStyle=null)},f.Terminal.prototype.scheduleSyncCursorPosition_=function(){if(!this.timeouts_.syncCursor){if(this.accessibilityReader_.accessibilityEnabled){const e=this.scrollbackRows_.length+this.screen_.cursorPosition.row,t=this.screen_.cursorPosition.column,r=this.screen_.rowsArray[this.screen_.cursorPosition.row].innerText;this.accessibilityReader_.beforeCursorChange(r,e,t)}var e=this;this.timeouts_.syncCursor=setTimeout((function(){e.syncCursorPosition_(),delete e.timeouts_.syncCursor}),0)}},f.Terminal.prototype.showZoomWarning_=function(e){if(!this.zoomWarningNode_){if(!e)return;this.zoomWarningNode_=this.document_.createElement(\"div\"),this.zoomWarningNode_.id=\"hterm:zoom-warning\",this.zoomWarningNode_.style.cssText=\"color: black;background-color: #ff2222;font-size: large;border-radius: 8px;opacity: 0.75;padding: 0.2em 0.5em 0.2em 0.5em;top: 0.5em;right: 1.2em;position: absolute;-webkit-text-size-adjust: none;-webkit-user-select: none;-moz-text-size-adjust: none;-moz-user-select: none;\",this.zoomWarningNode_.addEventListener(\"click\",(function(){this.parentNode.removeChild(this)}))}this.zoomWarningNode_.textContent=u.i18n.replaceReferences(f.zoomWarningMessage,[parseInt(100*this.scrollPort_.characterSize.zoomFactor)]),this.zoomWarningNode_.style.fontFamily=this.prefs_.get(\"font-family\"),e?!this.zoomWarningNode_.parentNode&&this.div_.parentNode.appendChild(this.zoomWarningNode_):this.zoomWarningNode_.parentNode&&this.zoomWarningNode_.parentNode.removeChild(this.zoomWarningNode_)},f.Terminal.prototype.showOverlay=function(e,t){if(!this.overlayNode_){if(!this.div_)return;this.overlayNode_=this.document_.createElement(\"div\"),this.overlayNode_.style.cssText=\"border-radius: 15px;font-size: xx-large;opacity: 0.75;padding: 0.2em 0.5em 0.2em 0.5em;position: absolute;-webkit-user-select: none;-webkit-transition: opacity 180ms ease-in;-moz-user-select: none;-moz-transition: opacity 180ms ease-in;\",this.overlayNode_.addEventListener(\"mousedown\",(function(e){e.preventDefault(),e.stopPropagation()}),!0)}this.overlayNode_.style.color=this.prefs_.get(\"background-color\"),this.overlayNode_.style.backgroundColor=this.prefs_.get(\"foreground-color\"),this.overlayNode_.style.fontFamily=this.prefs_.get(\"font-family\"),this.overlayNode_.textContent=e,this.overlayNode_.style.opacity=\"0.75\",this.overlayNode_.parentNode||this.div_.appendChild(this.overlayNode_);var r=f.getClientSize(this.div_),i=f.getClientSize(this.overlayNode_);this.overlayNode_.style.top=(r.height-i.height)/2+\"px\",this.overlayNode_.style.left=(r.width-i.width-this.scrollPort_.currentScrollbarWidthPx)/2+\"px\",this.overlayTimeout_&&clearTimeout(this.overlayTimeout_),this.accessibilityReader_.assertiveAnnounce(e),null===t||(this.overlayTimeout_=setTimeout(()=>{this.overlayNode_.style.opacity=\"0\",this.overlayTimeout_=setTimeout(()=>this.hideOverlay(),200)},t||1500))},f.Terminal.prototype.hideOverlay=function(){this.overlayTimeout_&&clearTimeout(this.overlayTimeout_),this.overlayTimeout_=null,this.overlayNode_.parentNode&&this.overlayNode_.parentNode.removeChild(this.overlayNode_),this.overlayNode_.style.opacity=\"0.75\"},f.Terminal.prototype.paste=function(){return f.pasteFromClipboard(this.document_)},f.Terminal.prototype.copyStringToClipboard=function(e){this.prefs_.get(\"enable-clipboard-notice\")&&setTimeout(this.showOverlay.bind(this,f.notifyCopyMessage,500),200),f.copySelectionToClipboard(this.document_,e)},f.Terminal.prototype.displayImage=function(e,t,r){if(void 0!==e.uri||void 0!==e.buffer||void 0!==e.blob){if(e.name||(e.name=\"\"),!e.type){const t=e.name.split(\".\"),r=t[t.length-1].trim();(\"svg\"===r||\"svgz\"===r)&&(e.type=\"image/svg+xml\")}if(!0!==this.allowImagesInline){this.newLine();const e=this.getRowNode(this.scrollbackRows_.length+this.getCursorRow()-1);if(!1===this.allowImagesInline)return void(e.textContent=f.msg(\"POPUP_INLINE_IMAGE_DISABLED\",[],\"Inline Images Disabled\"));let t;const r=this.document_.createElement(\"span\");return r.innerText=f.msg(\"POPUP_INLINE_IMAGE\",[],\"Inline Images\"),r.style.fontWeight=\"bold\",r.style.borderWidth=\"1px\",r.style.borderStyle=\"dashed\",(t=this.document_.createElement(\"span\")).innerText=f.msg(\"BUTTON_BLOCK\",[],\"block\"),t.style.marginLeft=\"1em\",t.style.borderWidth=\"1px\",t.style.borderStyle=\"solid\",t.addEventListener(\"click\",()=>{this.prefs_.set(\"allow-images-inline\",!1)}),r.appendChild(t),(t=this.document_.createElement(\"span\")).innerText=f.msg(\"BUTTON_ALLOW_SESSION\",[],\"allow this session\"),t.style.marginLeft=\"1em\",t.style.borderWidth=\"1px\",t.style.borderStyle=\"solid\",t.addEventListener(\"click\",()=>{this.allowImagesInline=!0}),r.appendChild(t),(t=this.document_.createElement(\"span\")).innerText=f.msg(\"BUTTON_ALLOW_ALWAYS\",[],\"always allow\"),t.style.marginLeft=\"1em\",t.style.borderWidth=\"1px\",t.style.borderStyle=\"solid\",t.addEventListener(\"click\",()=>{this.prefs_.set(\"allow-images-inline\",!0)}),r.appendChild(t),void e.appendChild(r)}if(e.inline){const i=this.io.push();i.showOverlay(f.msg(\"LOADING_RESOURCE_START\",[e.name],\"Loading $1 ...\"),null),i.onVTKeystroke=i.sendString=()=>{};const o=this.document_.createElement(\"img\");if(void 0!==e.uri)o.src=e.uri;else if(void 0!==e.buffer){const t=new Blob([e.buffer],{type:e.type});o.src=URL.createObjectURL(t)}else new Blob([e.blob],{type:e.type}),o.src=URL.createObjectURL(e.blob);o.title=o.alt=e.name,this.document_.body.appendChild(o),o.onload=()=>{o.style.objectFit=e.preserveAspectRatio?\"scale-down\":\"fill\",o.style.maxWidth=`${this.document_.body.clientWidth}px`,o.style.maxHeight=`${this.document_.body.clientHeight}px`;const r=(e,t,r)=>{if(!e||\"auto\"==e)return\"\";const i=e.match(/^([0-9]+)(px|%)?$/);return i?\"%\"==i[2]?t*parseInt(i[1])/100+\"px\":\"px\"==i[2]?e:`calc(${e} * var(${r}))`:\"\"};o.style.width=r(e.width,this.document_.body.clientWidth,\"--hterm-charsize-width\"),o.style.height=r(e.height,this.document_.body.clientHeight,\"--hterm-charsize-height\");const n=s(o.clientHeight/this.scrollPort_.characterSize.height);for(let e=0;e<n;++e)this.newLine();o.style.maxHeight=`calc(${n} * var(--hterm-charsize-height))`,this.document_.body.removeChild(o);const a=this.document_.createElement(\"div\");a.style.position=\"relative\",a.style.textAlign=e.align,o.style.position=\"absolute\",o.style.bottom=\"calc(0px - var(--hterm-charsize-height))\",a.appendChild(o),this.getRowNode(this.scrollbackRows_.length+this.getCursorRow()-1).appendChild(a),void 0===e.uri&&URL.revokeObjectURL(o.src),i.hideOverlay(),i.pop(),t&&t()},o.onerror=t=>{this.document_.body.removeChild(o),i.showOverlay(f.msg(\"LOADING_RESOURCE_FAILED\",[e.name],\"Loading $1 failed\")),i.pop(),r&&r(t)}}else{const t=this.document_.createElement(\"a\");if(void 0!==e.uri)t.href=e.uri;else if(void 0!==e.buffer){const r=new Blob([e.buffer]);t.href=URL.createObjectURL(r)}else t.href=URL.createObjectURL(e.blob);t.download=e.name,this.document_.body.appendChild(t),t.click(),t.remove(),void 0===e.uri&&URL.revokeObjectURL(t.href)}}},f.Terminal.prototype.getSelectionText=function(){var e=this.scrollPort_.selection;if(e.sync(),e.isCollapsed)return null;var t=e.startOffset,r=e.startNode;if(!r)return null;if(\"X-ROW\"!=r.nodeName)for(\"#text\"==r.nodeName&&\"SPAN\"==r.parentNode.nodeName&&(r=r.parentNode);r.previousSibling;)r=r.previousSibling,t+=f.TextAttributes.nodeWidth(r);var i=f.TextAttributes.nodeWidth(e.endNode)-e.endOffset;if(\"X-ROW\"!=(r=e.endNode).nodeName)for(\"#text\"==r.nodeName&&\"SPAN\"==r.parentNode.nodeName&&(r=r.parentNode);r.nextSibling;)r=r.nextSibling,i+=f.TextAttributes.nodeWidth(r);var o=this.getRowsText(e.startRow.rowIndex,e.endRow.rowIndex+1);return u.wc.substring(o,t,u.wc.strWidth(o)-i)},f.Terminal.prototype.copySelectionToClipboard=function(){var e=this.getSelectionText();null!=e&&this.copyStringToClipboard(e)},f.Terminal.prototype.overlaySize=function(){this.showOverlay(this.screenSize.width+\"x\"+this.screenSize.height)},f.Terminal.prototype.onVTKeystroke=function(e){this.scrollOnKeystroke_&&this.scrollPort_.scrollRowToBottom(this.getRowCount()),this.io.onVTKeystroke(e)},f.Terminal.prototype.openSelectedUrl_=function(){var e=this.getSelectionText();if((null!=e||(this.screen_.expandSelectionForUrl(this.document_.getSelection()),null!=(e=this.getSelectionText())))&&!(2048<e.length||0<=e.search(/[\\s\\[\\](){}<>\"'\\\\^`]/))){if(0>e.search(\"^[a-zA-Z][a-zA-Z0-9+.-]*://\"))switch(e.split(\":\",1)[0]){case\"mailto\":break;default:e=\"http://\"+e}f.openUrl(e)}},f.Terminal.prototype.setAutomaticMouseHiding=function(e=null){null===e&&(e=\"cros\"!=f.os&&\"mac\"!=f.os),this.mouseHideWhileTyping_=!!e},f.Terminal.prototype.onKeyboardActivity_=function(){this.mouseHideWhileTyping_&&!this.mouseHideDelay_&&this.setCssVar(\"mouse-cursor-style\",\"none\")},f.Terminal.prototype.onMouse_=function(e){if(!e.processedByTerminalHandler_){2<e.button&&e.preventDefault();var t=!this.defeatMouseReports_&&this.vt.mouseReport!=this.vt.MOUSE_REPORT_DISABLED;if(e.processedByTerminalHandler_=!0,this.mouseHideWhileTyping_&&!this.mouseHideDelay_&&(this.syncMouseStyle(),this.mouseHideDelay_=setTimeout(()=>this.mouseHideDelay_=null,1e3)),e.terminalRow=parseInt((e.clientY-this.scrollPort_.visibleRowTopMargin)/this.scrollPort_.characterSize.height)+1,e.terminalColumn=parseInt(e.clientX/this.scrollPort_.characterSize.width)+1,!(\"mousedown\"==e.type&&e.terminalColumn>this.screenSize.width)){if(this.options_.cursorVisible&&!t&&(e.terminalRow-1==this.screen_.cursorPosition.row&&e.terminalColumn-1==this.screen_.cursorPosition.column?this.cursorNode_.style.display=\"none\":\"none\"==this.cursorNode_.style.display&&(this.cursorNode_.style.display=\"\")),\"mousedown\"==e.type&&(this.contextMenu.hide(e),e.altKey||!t?(this.defeatMouseReports_=!0,this.setSelectionEnabled(!0)):(this.defeatMouseReports_=!1,this.document_.getSelection().collapseToEnd(),this.setSelectionEnabled(!1),e.preventDefault())),t)this.scrollBlockerNode_.engaged||(\"mousedown\"==e.type?(this.scrollBlockerNode_.engaged=!0,this.scrollBlockerNode_.style.top=e.clientY-5+\"px\",this.scrollBlockerNode_.style.left=e.clientX-5+\"px\"):\"mousemove\"==e.type&&(this.document_.getSelection().collapseToEnd(),e.preventDefault())),this.onMouse(e);else{if(\"dblclick\"==e.type&&(this.screen_.expandSelection(this.document_.getSelection()),this.copyOnSelect&&this.copySelectionToClipboard()),\"click\"==e.type&&!e.shiftKey&&(e.ctrlKey||e.metaKey))return clearTimeout(this.timeouts_.openUrl),void(this.timeouts_.openUrl=setTimeout(this.openSelectedUrl_.bind(this),500));if(\"mousedown\"==e.type&&(e.ctrlKey&&2==e.button?(e.preventDefault(),this.contextMenu.show(e,this)):(e.button==this.mousePasteButton||this.mouseRightClickPaste&&2==e.button)&&!this.paste()&&console.warn(\"Could not paste manually due to web restrictions\")),\"mouseup\"==e.type&&0==e.button&&this.copyOnSelect&&!this.document_.getSelection().isCollapsed&&this.copySelectionToClipboard(),(\"mousemove\"==e.type||\"mouseup\"==e.type)&&this.scrollBlockerNode_.engaged&&(this.scrollBlockerNode_.engaged=!1,this.scrollBlockerNode_.style.top=\"-99px\"),this.scrollWheelArrowKeys_&&!e.shiftKey&&this.keyboard.applicationCursor&&!this.isPrimaryScreen()&&\"wheel\"==e.type){const t=this.scrollPort_.scrollWheelDelta(e),r=(e,t,r,o)=>{if(0==e)return\"\";const n=u.f.smartFloorDivide(i(e),t);return(\"\x1bO\"+(0>e?o:r)).repeat(n)};this.io.sendString(r(t.y,this.scrollPort_.characterSize.height,\"A\",\"B\")+r(t.x,this.scrollPort_.characterSize.width,\"C\",\"D\")),e.preventDefault()}}\"mouseup\"==e.type&&this.document_.getSelection().isCollapsed&&(this.defeatMouseReports_=!1)}}},f.Terminal.prototype.onMouse=function(){},f.Terminal.prototype.onFocusChange_=function(e){this.cursorNode_.setAttribute(\"focus\",e),this.restyleCursor_(),this.reportFocus&&this.io.sendString(!0===e?\"\x1b[I\":\"\x1b[O\"),!0===e&&this.closeBellNotifications_()},f.Terminal.prototype.onScroll_=function(){this.scheduleSyncCursorPosition_()},f.Terminal.prototype.onPaste_=function(e){var t=e.text.replace(/\\n/gm,\"\\r\");if(this.options_.bracketedPaste){const e=e=>e.replace(/[\\x00-\\x07\\x0b-\\x0c\\x0e-\\x1f]/g,\"\");t=\"\x1b[200~\"+e(t)+\"\x1b[201~\"}this.io.sendString(t)},f.Terminal.prototype.onCopy_=function(e){this.useDefaultWindowCopy||(e.preventDefault(),setTimeout(this.copySelectionToClipboard.bind(this),0))},f.Terminal.prototype.onResize_=function(){var e=n(this.scrollPort_.getScreenWidth()/this.scrollPort_.characterSize.width)||0,t=u.f.smartFloorDivide(this.scrollPort_.getScreenHeight(),this.scrollPort_.characterSize.height)||0;if(!(0>=e||0>=t)){var r=e!=this.screenSize.width||t!=this.screenSize.height;this.realizeSize_(e,t),this.showZoomWarning_(1!=this.scrollPort_.characterSize.zoomFactor),r&&this.overlaySize(),this.restyleCursor_(),this.scheduleSyncCursorPosition_()}},f.Terminal.prototype.onCursorBlink_=function(){return this.options_.cursorBlink?void(\"false\"==this.cursorNode_.getAttribute(\"focus\")||\"0\"==this.cursorNode_.style.opacity?(this.cursorNode_.style.opacity=\"1\",this.timeouts_.cursorBlink=setTimeout(this.myOnCursorBlink_,this.cursorBlinkCycle_[0])):(this.cursorNode_.style.opacity=\"0\",this.timeouts_.cursorBlink=setTimeout(this.myOnCursorBlink_,this.cursorBlinkCycle_[1]))):void delete this.timeouts_.cursorBlink},f.Terminal.prototype.setScrollbarVisible=function(e){this.scrollPort_.setScrollbarVisible(e)},f.Terminal.prototype.setScrollWheelMoveMultipler=function(e){this.scrollPort_.setScrollWheelMoveMultipler(e)},f.Terminal.prototype.closeBellNotifications_=function(){this.bellNotificationList_.forEach((function(e){e.close()})),this.bellNotificationList_.length=0},f.Terminal.prototype.onScrollportFocus_=function(){const e=this.scrollPort_.getTopRowIndex(),t=this.scrollPort_.getBottomRowIndex(e),r=this.document_.getSelection();!this.syncCursorPosition_()&&r&&r.collapse(this.getRowNode(t))},f.Terminal.IO=function(e){this.terminal_=e,this.previousIO_=null,this.buffered_=\"\",this.textDecoder_=new TextDecoder},f.Terminal.IO.prototype.showOverlay=function(e,t){this.terminal_.showOverlay(e,t)},f.Terminal.IO.prototype.hideOverlay=function(){this.terminal_.hideOverlay()},f.Terminal.IO.prototype.createFrame=function(e,t){return new f.Frame(this.terminal_,e,t)},f.Terminal.IO.prototype.setTerminalProfile=function(e){this.terminal_.setProfile(e)},f.Terminal.IO.prototype.push=function(){var e=new f.Terminal.IO(this.terminal_);return e.keyboardCaptured_=this.keyboardCaptured_,e.columnCount=this.columnCount,e.rowCount=this.rowCount,e.previousIO_=this.terminal_.io,this.terminal_.io=e,e},f.Terminal.IO.prototype.pop=function(){this.terminal_.io=this.previousIO_,this.previousIO_.flush()},f.Terminal.IO.prototype.flush=function(){this.buffered_&&(this.terminal_.interpret(this.buffered_),this.buffered_=\"\")},f.Terminal.IO.prototype.sendString=function(e){console.log(\"Unhandled sendString: \"+e)},f.Terminal.IO.prototype.onVTKeystroke=function(e){console.log(\"Unobserverd VT keystroke: \"+JSON.stringify(e))},f.Terminal.IO.prototype.onTerminalResize_=function(e,t){for(var r=this;r;)r.columnCount=e,r.rowCount=t,r=r.previousIO_;this.onTerminalResize(e,t)},f.Terminal.IO.prototype.onTerminalResize=function(){},f.Terminal.IO.prototype.writeUTF8=function(e){if(\"string\"!=typeof e){const t=new Uint8Array(e);e=\"raw\"==this.terminal_.characterEncoding?u.codec.codeUnitArrayToString(t):this.textDecoder_.decode(t,{stream:!0})}else if(\"raw\"!=this.terminal_.characterEncoding){const t=u.codec.stringToCodeUnitArray(e,Uint8Array);e=this.textDecoder_.decode(t,{stream:!0})}this.print(e)},f.Terminal.IO.prototype.writelnUTF8=function(e){this.writeUTF8(e),this.writeUTF8(\"\\r\\n\")},f.Terminal.IO.prototype.print=f.Terminal.IO.prototype.writeUTF16=function(e){return this.terminal_.io==this?void this.terminal_.interpret(e):void(this.buffered_+=e)},f.Terminal.IO.prototype.println=f.Terminal.IO.prototype.writelnUTF16=function(e){this.print(e+\"\\r\\n\")},f.TextAttributes=function(e){this.document_=e,this.foregroundSource=this.SRC_DEFAULT,this.backgroundSource=this.SRC_DEFAULT,this.underlineSource=this.SRC_DEFAULT,this.foreground=this.DEFAULT_COLOR,this.background=this.DEFAULT_COLOR,this.underlineColor=this.DEFAULT_COLOR,this.defaultForeground=\"rgb(255, 255, 255)\",this.defaultBackground=\"rgb(0, 0, 0)\",this.bold=!1,this.faint=!1,this.italic=!1,this.blink=!1,this.underline=!1,this.strikethrough=!1,this.inverse=!1,this.invisible=!1,this.wcNode=!1,this.asciiNode=!0,this.tileData=null,this.uri=null,this.uriId=null,this.colorPalette=null,this.resetColorPalette()},f.TextAttributes.prototype.enableBold=!0,f.TextAttributes.prototype.enableBoldAsBright=!0,f.TextAttributes.prototype.DEFAULT_COLOR=Symbol(\"DEFAULT_COLOR\"),f.TextAttributes.prototype.SRC_DEFAULT=Symbol(\"SRC_DEFAULT\"),f.TextAttributes.prototype.setDocument=function(e){this.document_=e},f.TextAttributes.prototype.clone=function(){var e=new f.TextAttributes(null);for(var t in this)e[t]=this[t];return e.colorPalette=this.colorPalette.concat(),e},f.TextAttributes.prototype.reset=function(){this.foregroundSource=this.SRC_DEFAULT,this.backgroundSource=this.SRC_DEFAULT,this.underlineSource=this.SRC_DEFAULT,this.foreground=this.DEFAULT_COLOR,this.background=this.DEFAULT_COLOR,this.underlineColor=this.DEFAULT_COLOR,this.bold=!1,this.faint=!1,this.italic=!1,this.blink=!1,this.underline=!1,this.strikethrough=!1,this.inverse=!1,this.invisible=!1,this.wcNode=!1,this.asciiNode=!0,this.uri=null,this.uriId=null},f.TextAttributes.prototype.resetColorPalette=function(){this.colorPalette=u.colors.colorPalette.concat(),this.syncColors()},f.TextAttributes.prototype.resetColor=function(e){e=parseInt(e,10),isNaN(e)||e>=this.colorPalette.length||(this.colorPalette[e]=u.colors.stockColorPalette[e],this.syncColors())},f.TextAttributes.prototype.isDefault=function(){return this.foregroundSource==this.SRC_DEFAULT&&this.backgroundSource==this.SRC_DEFAULT&&!this.bold&&!this.faint&&!this.italic&&!this.blink&&!this.underline&&!this.strikethrough&&!this.inverse&&!this.invisible&&!this.wcNode&&this.asciiNode&&null==this.tileData&&null==this.uri},f.TextAttributes.prototype.createContainer=function(e){if(this.isDefault()){const t=this.document_.createTextNode(e);return t.asciiNode=!0,t}var t=this.document_.createElement(\"span\"),r=t.style,i=[];this.foreground!=this.DEFAULT_COLOR&&(r.color=this.foreground),this.background!=this.DEFAULT_COLOR&&(r.backgroundColor=this.background),this.enableBold&&this.bold&&(r.fontWeight=\"bold\"),this.faint&&(t.faint=!0),this.italic&&(r.fontStyle=\"italic\"),this.blink&&(i.push(\"blink-node\"),t.blinkNode=!0);let o=\"\";return t.underline=this.underline,this.underline&&(o+=\" underline\",r.textDecorationStyle=this.underline),this.underlineColor!=this.DEFAULT_COLOR&&(r.textDecorationColor=this.underlineColor),this.strikethrough&&(o+=\" line-through\",t.strikethrough=!0),o&&(r.textDecorationLine=o),this.wcNode&&(i.push(\"wc-node\"),t.wcNode=!0),t.asciiNode=this.asciiNode,null!=this.tileData&&(i.push(\"tile\"),i.push(\"tile_\"+this.tileData),t.tileNode=!0),e&&(t.textContent=e),this.uri&&(i.push(\"uri-node\"),t.uriId=this.uriId,t.title=this.uri,t.addEventListener(\"click\",f.openUrl.bind(this,this.uri))),i.length&&(t.className=i.join(\" \")),t},f.TextAttributes.prototype.matchesContainer=function(e){if(\"string\"==typeof e||e.nodeType==Node.TEXT_NODE)return this.isDefault();var t=e.style;return!(this.wcNode||e.wcNode||this.asciiNode!=e.asciiNode||null!=this.tileData||e.tileNode||this.uriId!=e.uriId||this.foreground!=this.DEFAULT_COLOR||\"\"!=t.color||this.background!=this.DEFAULT_COLOR||\"\"!=t.backgroundColor||this.underlineColor!=this.DEFAULT_COLOR||\"\"!=t.textDecorationColor||(this.enableBold&&this.bold)!=!!t.fontWeight||this.blink!=!!e.blinkNode||this.italic!=!!t.fontStyle||this.underline!=e.underline||!!this.strikethrough!=!!e.strikethrough)},f.TextAttributes.prototype.setDefaults=function(e,t){this.defaultForeground=e,this.defaultBackground=t,this.syncColors()},f.TextAttributes.prototype.syncColors=function(){var e=Number.isInteger;const t=(e,t)=>e==this.DEFAULT_COLOR?t:e;var r=this.foregroundSource,i=this.backgroundSource;if(this.enableBoldAsBright&&this.bold&&e(r)&&(r=function(e){return 8>e?e+8:e}(r)),this.foreground=r==this.SRC_DEFAULT?this.DEFAULT_COLOR:e(r)?this.colorPalette[r]:r,this.faint){const e=t(this.foreground,this.defaultForeground);this.foreground=u.colors.mix(e,\"rgb(0, 0, 0)\",.3333)}if(this.background=i==this.SRC_DEFAULT?this.DEFAULT_COLOR:e(i)?this.colorPalette[i]:i,this.inverse){const e=t(this.foreground,this.defaultForeground);this.foreground=t(this.background,this.defaultBackground),this.background=e}this.invisible&&(this.foreground=this.background),this.underlineColor=this.underlineSource==this.SRC_DEFAULT?this.DEFAULT_COLOR:e(this.underlineSource)?this.colorPalette[this.underlineSource]:this.underlineSource},f.TextAttributes.containersMatch=function(e,t){if(\"string\"==typeof e)return f.TextAttributes.containerIsDefault(t);if(e.nodeType!=t.nodeType)return!1;if(e.nodeType==Node.TEXT_NODE)return!0;var r=e.style,i=t.style;return r.color==i.color&&r.backgroundColor==i.backgroundColor&&r.backgroundColor==i.backgroundColor&&r.fontWeight==i.fontWeight&&r.fontStyle==i.fontStyle&&r.textDecoration==i.textDecoration&&r.textDecorationColor==i.textDecorationColor&&r.textDecorationStyle==i.textDecorationStyle&&r.textDecorationLine==i.textDecorationLine},f.TextAttributes.containerIsDefault=function(e){return\"string\"==typeof e||e.nodeType==Node.TEXT_NODE},f.TextAttributes.nodeWidth=function(e){return e.asciiNode?e.textContent.length:u.wc.strWidth(e.textContent)},f.TextAttributes.nodeSubstr=function(e,t,r){return e.asciiNode?e.textContent.substr(t,r):u.wc.substr(e.textContent,t,r)},f.TextAttributes.nodeSubstring=function(e,t,r){return e.asciiNode?e.textContent.substring(t,r):u.wc.substring(e.textContent,t,r)},f.TextAttributes.splitWidecharString=function(e){const t=/^[ -\u007f]*$/;if(t.test(e))return[{str:e,wcNode:!1,asciiNode:!0,wcStrWidth:e.length}];const r=new Intl.Segmenter(void 0,{type:\"grapheme\"}).segment(e),i=[];for(let e=r.next();!e.done;){const o=e.value.segment,n=t.test(o),s=n?1:u.wc.strWidth(o),a=!n&&2==u.wc.charWidth(o.codePointAt(0)),l=i[i.length-1];!l||a||l.wcNode?i.push({str:o,wcNode:a,asciiNode:n,wcStrWidth:s}):(l.str+=o,l.wcStrWidth+=s,l.asciiNode=l.asciiNode&&n),e=r.next()}return i},f.VT=function(e){this.terminal=e,e.onMouse=this.onTerminalMouse_.bind(this),this.mouseReport=this.MOUSE_REPORT_DISABLED,this.mouseCoordinates=this.MOUSE_COORDINATES_X10,this.lastMouseDragResponse_=null,this.parseState_=new f.VT.ParseState(this.parseUnknown_),this.leadingModifier_=\"\",this.trailingModifier_=\"\",this.allowColumnWidthChanges_=!1,this.oscTimeLimit_=2e4,this.enable8BitControl=!1,this.enableClipboardWrite=!0,this.enableDec12=!1,this.enableCsiJ3=!0,this.characterEncoding=\"utf-8\",this.warnUnimplemented=!1,this.characterMaps=new f.VT.CharacterMaps,this.G0=this.G1=this.G2=this.G3=this.characterMaps.getMap(\"B\"),this.GL=\"G0\",this.GR=\"G0\",this.codingSystemUtf8_=!1,this.codingSystemLocked_=!1,this.cc1Pattern_=null,this.updateEncodingState_()},f.VT.prototype.MOUSE_REPORT_DISABLED=0,f.VT.prototype.MOUSE_REPORT_PRESS=1,f.VT.prototype.MOUSE_REPORT_CLICK=2,f.VT.prototype.MOUSE_REPORT_DRAG=3,f.VT.prototype.MOUSE_COORDINATES_X10=0,f.VT.prototype.MOUSE_COORDINATES_UTF8=1,f.VT.prototype.MOUSE_COORDINATES_SGR=2,f.VT.ParseState=function(e,t){this.defaultFunction=e,this.buf=t||null,this.pos=0,this.func=e,this.args=[],this.subargs=null},f.VT.ParseState.prototype.reset=function(e){this.resetParseFunction(),this.resetBuf(e||\"\"),this.resetArguments()},f.VT.ParseState.prototype.resetParseFunction=function(){this.func=this.defaultFunction},f.VT.ParseState.prototype.resetBuf=function(e){this.buf=\"string\"==typeof e?e:null,this.pos=0},f.VT.ParseState.prototype.resetArguments=function(e){this.args.length=0,void 0!==e&&(this.args[0]=e)},f.VT.ParseState.prototype.parseInt=function(e,t){if(void 0===t&&(t=0),e){const r=parseInt(e,10);return 0==r?t:r}return t},f.VT.ParseState.prototype.iarg=function(e,t){return this.parseInt(this.args[e],t)},f.VT.ParseState.prototype.argHasSubargs=function(e){return this.subargs&&this.subargs[e]},f.VT.ParseState.prototype.argSetSubargs=function(e){null===this.subargs&&(this.subargs={}),this.subargs[e]=!0},f.VT.ParseState.prototype.advance=function(e){this.pos+=e},f.VT.ParseState.prototype.peekRemainingBuf=function(){return this.buf.substr(this.pos)},f.VT.ParseState.prototype.peekChar=function(){return this.buf.substr(this.pos,1)},f.VT.ParseState.prototype.consumeChar=function(){return this.buf.substr(this.pos++,1)},f.VT.ParseState.prototype.isComplete=function(){return null==this.buf||this.buf.length<=this.pos},f.VT.prototype.reset=function(){this.G0=this.G1=this.G2=this.G3=this.characterMaps.getMap(\"B\"),this.GL=\"G0\",this.GR=\"G0\",this.mouseReport=this.MOUSE_REPORT_DISABLED,this.mouseCoordinates=this.MOUSE_COORDINATES_X10,this.lastMouseDragResponse_=null},f.VT.prototype.onTerminalMouse_=function(e){if(this.mouseReport==this.MOUSE_REPORT_DISABLED)return;if(this.mouseReport!=this.MOUSE_REPORT_DRAG&&\"mousemove\"==e.type)return;var t,r=0;this.mouseReport!=this.MOUSE_REPORT_PRESS&&(e.shiftKey&&(r|=4),(e.metaKey||this.terminal.keyboard.altIsMeta&&e.altKey)&&(r|=8),e.ctrlKey&&(r|=16));let i,o,n=127;switch(this.mouseCoordinates){case this.MOUSE_COORDINATES_UTF8:n=2047;case this.MOUSE_COORDINATES_X10:i=c(u.f.clamp(e.terminalColumn+32,32,n)),o=c(u.f.clamp(e.terminalRow+32,32,n));break;case this.MOUSE_COORDINATES_SGR:i=e.terminalColumn,o=e.terminalRow}switch(e.type){case\"wheel\":s=64+(0<-1*e.deltaY?0:1),s|=r,t=this.mouseCoordinates==this.MOUSE_COORDINATES_SGR?`\x1b[<${s};${i};${o}M`:\"\x1b[M\"+c(s+32)+i+o,e.preventDefault();break;case\"mousedown\":var s=l(e.button,2);this.mouseCoordinates!=this.MOUSE_COORDINATES_SGR&&(s+=32),s|=r,t=this.mouseCoordinates==this.MOUSE_COORDINATES_SGR?`\x1b[<${s};${i};${o}M`:\"\x1b[M\"+c(s)+i+o;break;case\"mouseup\":this.mouseReport!=this.MOUSE_REPORT_PRESS&&(t=this.mouseCoordinates==this.MOUSE_COORDINATES_SGR?`\x1b[<${e.button};${i};${o}m`:\"\x1b[M#\"+i+o);break;case\"mousemove\":this.mouseReport==this.MOUSE_REPORT_DRAG&&e.buttons&&(s=this.mouseCoordinates==this.MOUSE_COORDINATES_SGR?0:32,s+=1&e.buttons?0:4&e.buttons?1:2&e.buttons?2:3,s+=32,s|=r,t=this.mouseCoordinates==this.MOUSE_COORDINATES_SGR?`\x1b[<${s};${i};${o}M`:\"\x1b[M\"+c(s)+i+o,this.lastMouseDragResponse_==t?t=\"\":this.lastMouseDragResponse_=t);break;case\"click\":case\"dblclick\":break;default:console.error(\"Unknown mouse event: \"+e.type,e)}t&&this.terminal.io.sendString(t)},f.VT.prototype.interpret=function(e){for(this.parseState_.resetBuf(e);!this.parseState_.isComplete();){var t=this.parseState_.func,r=this.parseState_.pos;e=this.parseState_.buf;if(this.parseState_.func.call(this,this.parseState_),this.parseState_.func==t&&this.parseState_.pos==r&&this.parseState_.buf==e)throw\"Parser did not alter the state!\"}},f.VT.prototype.setEncoding=function(e){\"iso-2022\"===e?(this.codingSystemUtf8_=!1,this.codingSystemLocked_=!1):\"utf-8-locked\"===e?(this.codingSystemUtf8_=!0,this.codingSystemLocked_=!0):\"utf-8\"===e?(this.codingSystemUtf8_=!0,this.codingSystemLocked_=!1):console.warn('Invalid value for \"terminal-encoding\": '+e),this.updateEncodingState_()},f.VT.prototype.updateEncodingState_=function(){var e=Object.keys(f.VT.CC1).filter(e=>!this.codingSystemUtf8_||128>e.charCodeAt()).map(e=>\"\\\\x\"+u.f.zpad(e.charCodeAt().toString(16),2)).join(\"\");this.cc1Pattern_=new RegExp(`[${e}]`)},f.VT.prototype.parseUnknown_=function(e){function t(e){!r.codingSystemUtf8_&&r[r.GL].GL&&(e=r[r.GL].GL(e)),r.terminal.print(e)}var r=this,i=e.peekRemainingBuf(),o=i.search(this.cc1Pattern_);return 0==o?(this.dispatch(\"CC1\",i.substr(0,1),e),void e.advance(1)):-1==o?(t(i),void e.reset()):(t(i.substr(0,o)),this.dispatch(\"CC1\",i.substr(o,1),e),void e.advance(o+1))},f.VT.prototype.parseCSI_=function(e){var t=e.peekChar(),r=e.args;const i=()=>{e.resetArguments(),e.subargs=null,e.resetParseFunction()};\"@\"<=t&&\"~\">=t?(this.dispatch(\"CSI\",this.leadingModifier_+this.trailingModifier_+t,e),i()):\";\"==t?this.trailingModifier_?i():(!r.length&&r.push(\"\"),r.push(\"\")):\"0\"<=t&&\"9\">=t||\":\"==t?this.trailingModifier_?i():(r.length?r[r.length-1]+=t:r[0]=t,\":\"==t&&e.argSetSubargs(r.length-1)):\" \"<=t&&\"?\">=t?r.length?this.trailingModifier_+=t:this.leadingModifier_+=t:this.cc1Pattern_.test(t)?this.dispatch(\"CC1\",t,e):i(),e.advance(1)},f.VT.prototype.parseUntilStringTerminator_=function(e){var t=e.peekRemainingBuf(),r=e.args;let i=0;r.length?\"\x1b\"==r[0].slice(-1)&&(r[0]=r[0].slice(0,-1),t=\"\x1b\"+t,i=1):(r[0]=\"\",r[1]=new Date);const o=t.search(/[\\x1b\\x07]/),n=t[o];let s;var a;return(s=(\"\x1b\"!=n||\"\\\\\"==t[o+1])&&-1!=o)?(r[0]+=t.substr(0,o),e.resetParseFunction(),e.advance(o+(\"\x1b\"==n?2:1)-i),!0):(r[0]+=t,\"\x1b\"==n&&o!=t.length-1&&(a=\"embedded escape: \"+o),new Date-r[1]>this.oscTimeLimit_&&(a=\"timeout expired: \"+(new Date-r[1])),a?(this.warnUnimplemented&&console.log(\"parseUntilStringTerminator_: aborting: \"+a,r[0]),e.reset(r[0]),!1):(e.advance(t.length-i),!0))},f.VT.prototype.dispatch=function(e,t,r){var i=f.VT[e][t];return i?i==f.VT.ignore?void(this.warnUnimplemented&&console.warn(\"Ignored \"+e+\" code: \"+JSON.stringify(t))):r.subargs&&!i.supportsSubargs?void(this.warnUnimplemented&&console.warn(\"Ignored \"+e+\" code w/subargs: \"+JSON.stringify(t))):\"CC1\"==e&&\"\u007f\"<t&&!this.enable8BitControl?void console.warn(\"Ignoring 8-bit control code: 0x\"+t.charCodeAt(0).toString(16)):void i.apply(this,[r,t]):void(this.warnUnimplemented&&console.warn(\"Unknown \"+e+\" code: \"+JSON.stringify(t)))},f.VT.prototype.setANSIMode=function(e,t){4==e?this.terminal.setInsertMode(t):20==e?this.terminal.setAutoCarriageReturn(t):this.warnUnimplemented&&console.warn(\"Unimplemented ANSI Mode: \"+e)},f.VT.prototype.setDECMode=function(e,t){switch(parseInt(e,10)){case 1:this.terminal.keyboard.applicationCursor=t;break;case 3:this.allowColumnWidthChanges_&&(this.terminal.setWidth(t?132:80),this.terminal.clearHome(),this.terminal.setVTScrollRegion(null,null));break;case 5:this.terminal.setReverseVideo(t);break;case 6:this.terminal.setOriginMode(t);break;case 7:this.terminal.setWraparound(t);break;case 9:this.mouseReport=t?this.MOUSE_REPORT_PRESS:this.MOUSE_REPORT_DISABLED,this.terminal.syncMouseStyle();break;case 12:this.enableDec12&&this.terminal.setCursorBlink(t);break;case 25:this.terminal.setCursorVisible(t);break;case 30:this.terminal.setScrollbarVisible(t);break;case 40:this.terminal.allowColumnWidthChanges_=t;break;case 45:this.terminal.setReverseWraparound(t);break;case 67:this.terminal.keyboard.backspaceSendsBackspace=t;break;case 1e3:this.mouseReport=t?this.MOUSE_REPORT_CLICK:this.MOUSE_REPORT_DISABLED,this.terminal.syncMouseStyle();break;case 1002:this.mouseReport=t?this.MOUSE_REPORT_DRAG:this.MOUSE_REPORT_DISABLED,this.terminal.syncMouseStyle();break;case 1004:this.terminal.reportFocus=t;break;case 1005:this.mouseCoordinates=t?this.MOUSE_COORDINATES_UTF8:this.MOUSE_COORDINATES_X10;break;case 1006:this.mouseCoordinates=t?this.MOUSE_COORDINATES_SGR:this.MOUSE_COORDINATES_X10;break;case 1007:this.terminal.scrollWheelArrowKeys_=t;break;case 1010:this.terminal.scrollOnOutput=t;break;case 1011:this.terminal.scrollOnKeystroke=t;break;case 1036:this.terminal.keyboard.metaSendsEscape=t;break;case 1039:t?!this.terminal.keyboard.previousAltSendsWhat_&&(this.terminal.keyboard.previousAltSendsWhat_=this.terminal.keyboard.altSendsWhat,this.terminal.keyboard.altSendsWhat=\"escape\"):this.terminal.keyboard.previousAltSendsWhat_&&(this.terminal.keyboard.altSendsWhat=this.terminal.keyboard.previousAltSendsWhat_,this.terminal.keyboard.previousAltSendsWhat_=null);break;case 47:case 1047:this.terminal.setAlternateMode(t);break;case 1048:t?this.terminal.saveCursorAndState():this.terminal.restoreCursorAndState();break;case 1049:t?(this.terminal.saveCursorAndState(),this.terminal.setAlternateMode(t),this.terminal.clear()):(this.terminal.setAlternateMode(t),this.terminal.restoreCursorAndState());break;case 2004:this.terminal.setBracketedPaste(t);break;default:this.warnUnimplemented&&console.warn(\"Unimplemented DEC Private Mode: \"+e)}},f.VT.ignore=function(){},f.VT.CC1={},f.VT.ESC={},f.VT.CSI={},f.VT.OSC={},f.VT.VT52={},f.VT.CC1[\"\\0\"]=f.VT.ignore,f.VT.CC1[\"\x05\"]=f.VT.ignore,f.VT.CC1[\"\a\"]=function(){this.terminal.ringBell()},f.VT.CC1[\"\\b\"]=function(){this.terminal.cursorLeft(1)},f.VT.CC1[\"\\t\"]=function(){this.terminal.forwardTabStop()},f.VT.CC1[\"\\n\"]=function(){this.terminal.formFeed()},f.VT.CC1[\"\\v\"]=f.VT.CC1[\"\\n\"],f.VT.CC1[\"\\f\"]=f.VT.CC1[\"\\n\"],f.VT.CC1[\"\\r\"]=function(){this.terminal.setCursorColumn(0)},f.VT.CC1[\"\x0e\"]=function(){this.GL=\"G1\"},f.VT.CC1[\"\x0f\"]=function(){this.GL=\"G0\"},f.VT.CC1[\"\x11\"]=f.VT.ignore,f.VT.CC1[\"\x13\"]=f.VT.ignore,f.VT.CC1[\"\x18\"]=function(e){\"G1\"==this.GL&&(this.GL=\"G0\"),e.resetParseFunction(),this.terminal.print(\"?\")},f.VT.CC1[\"\x1a\"]=f.VT.CC1[\"\x18\"],f.VT.CC1[\"\x1b\"]=function(e){e.func=function e(t){var r=t.consumeChar();\"\x1b\"==r||(this.dispatch(\"ESC\",r,t),t.func==e&&t.resetParseFunction())}},f.VT.CC1[\"\u007f\"]=f.VT.ignore,f.VT.CC1[\"\u0084\"]=f.VT.ESC.D=function(){this.terminal.lineFeed()},f.VT.CC1[\"\u0085\"]=f.VT.ESC.E=function(){this.terminal.setCursorColumn(0),this.terminal.cursorDown(1)},f.VT.CC1[\"\u0088\"]=f.VT.ESC.H=function(){this.terminal.setTabStop(this.terminal.getCursorColumn())},f.VT.CC1[\"\u008d\"]=f.VT.ESC.M=function(){this.terminal.reverseLineFeed()},f.VT.CC1[\"\u008e\"]=f.VT.ESC.N=f.VT.ignore,f.VT.CC1[\"\u008f\"]=f.VT.ESC.O=f.VT.ignore,f.VT.CC1[\"\u0090\"]=f.VT.ESC.P=function(e){e.resetArguments(),e.func=this.parseUntilStringTerminator_},f.VT.CC1[\"\u0096\"]=f.VT.ESC.V=f.VT.ignore,f.VT.CC1[\"\u0097\"]=f.VT.ESC.W=f.VT.ignore,f.VT.CC1[\"\u0098\"]=f.VT.ESC.X=f.VT.ignore,f.VT.CC1[\"\u009a\"]=f.VT.ESC.Z=function(){this.terminal.io.sendString(\"\x1b[?1;2c\")},f.VT.CC1[\"\u009b\"]=f.VT.ESC[\"[\"]=function(e){e.resetArguments(),this.leadingModifier_=\"\",this.trailingModifier_=\"\",e.func=this.parseCSI_},f.VT.CC1[\"\u009c\"]=f.VT.ESC[\"\\\\\"]=f.VT.ignore,f.VT.CC1[\"\u009d\"]=f.VT.ESC[\"]\"]=function(e){e.resetArguments(),e.func=function e(t){if(this.parseUntilStringTerminator_(t)&&t.func!=e){var r=t.args[0].match(/^(\\d+);?(.*)$/);r?(t.args[0]=r[2],this.dispatch(\"OSC\",r[1],t)):console.warn(\"Invalid OSC: \"+JSON.stringify(t.args[0])),t.resetArguments()}}},f.VT.CC1[\"\u009e\"]=f.VT.ESC[\"^\"]=function(e){e.resetArguments(),e.func=this.parseUntilStringTerminator_},f.VT.CC1[\"\u009f\"]=f.VT.ESC._=function(e){e.resetArguments(),e.func=this.parseUntilStringTerminator_},f.VT.ESC[\" \"]=function(e){e.func=function(e){var t=e.consumeChar();this.warnUnimplemented&&console.warn(\"Unimplemented sequence: ESC 0x20 \"+t),e.resetParseFunction()}},f.VT.ESC[\"#\"]=function(e){e.func=function(e){\"8\"==e.consumeChar()&&(this.terminal.setCursorPosition(0,0),this.terminal.fill(\"E\")),e.resetParseFunction()}},f.VT.ESC[\"%\"]=function(e){e.func=function(e){var t=e.consumeChar();if(this.codingSystemLocked_)return\"/\"==t&&e.consumeChar(),void e.resetParseFunction();switch(t){case\"@\":this.setEncoding(\"iso-2022\");break;case\"G\":this.setEncoding(\"utf-8\");break;case\"/\":switch(t=e.consumeChar()){case\"G\":case\"H\":case\"I\":this.setEncoding(\"utf-8-locked\");break;default:this.warnUnimplemented&&console.warn(\"Unknown ESC % / argument: \"+JSON.stringify(t))}break;default:this.warnUnimplemented&&console.warn(\"Unknown ESC % argument: \"+JSON.stringify(t))}e.resetParseFunction()}},f.VT.ESC[\"(\"]=f.VT.ESC[\")\"]=f.VT.ESC[\"*\"]=f.VT.ESC[\"+\"]=f.VT.ESC[\"-\"]=f.VT.ESC[\".\"]=f.VT.ESC[\"/\"]=function(e,t){e.func=function(e){var r=e.consumeChar();if(\"\x1b\"==r)return e.resetParseFunction(),void e.func();var i=this.characterMaps.getMap(r);void 0===i?this.warnUnimplemented&&console.log('Invalid character set for \"'+t+'\": '+r):\"(\"==t?this.G0=i:\")\"==t||\"-\"==t?this.G1=i:\"*\"==t||\".\"==t?this.G2=i:(\"+\"==t||\"/\"==t)&&(this.G3=i),e.resetParseFunction()}},f.VT.ESC[6]=f.VT.ignore,f.VT.ESC[7]=function(){this.terminal.saveCursorAndState()},f.VT.ESC[8]=function(){this.terminal.restoreCursorAndState()},f.VT.ESC[9]=f.VT.ignore,f.VT.ESC[\"=\"]=function(){this.terminal.keyboard.applicationKeypad=!0},f.VT.ESC[\">\"]=function(){this.terminal.keyboard.applicationKeypad=!1},f.VT.ESC.F=f.VT.ignore,f.VT.ESC.c=function(){this.terminal.reset()},f.VT.ESC.l=f.VT.ESC.m=f.VT.ignore,f.VT.ESC.n=function(){this.GL=\"G2\"},f.VT.ESC.o=function(){this.GL=\"G3\"},f.VT.ESC[\"|\"]=function(){this.GR=\"G3\"},f.VT.ESC[\"}\"]=function(){this.GR=\"G2\"},f.VT.ESC[\"~\"]=function(){this.GR=\"G1\"},f.VT.OSC[0]=function(e){this.terminal.setWindowTitle(e.args[0])},f.VT.OSC[2]=f.VT.OSC[0],f.VT.OSC[4]=function(e){for(var t=e.args[0].split(\";\"),r=parseInt(t.length/2),i=this.terminal.getTextAttributes().colorPalette,o=[],n=0;n<r;++n){var s=parseInt(t[2*n]),a=t[2*n+1];if(!(s>=i.length)){if(\"?\"==a){(a=u.colors.rgbToX11(i[s]))&&o.push(s+\";\"+a);continue}(a=u.colors.x11ToCSS(a))&&(i[s]=a)}}o.length&&this.terminal.io.sendString(\"\x1b]4;\"+o.join(\";\")+\"\a\")},f.VT.OSC[8]=function(e){const t=e.args[0].split(\";\");let r=null,i=null;if(2!=t.length||0==t[1].length);else{const e=t[0].split(\":\");r=\"\",e.forEach(e=>{const t=e.indexOf(\"=\");if(-1!=t){const i=e.slice(0,t),o=e.slice(t+1);switch(i){case\"id\":r=o}}}),i=t[1]}const o=this.terminal.getTextAttributes();o.uri=i,o.uriId=r},f.VT.OSC[9]=function(e){f.notify({body:e.args[0]})},f.VT.OSC[10]=function(e){var t=e.args[0].split(\";\");if(t){var r=u.colors.x11ToCSS(t.shift());r&&this.terminal.setForegroundColor(r),0<t.length&&(e.args[0]=t.join(\";\"),f.VT.OSC[11].apply(this,[e]))}},f.VT.OSC[11]=function(e){var t=e.args[0].split(\";\");if(t){var r=u.colors.x11ToCSS(t.shift());r&&this.terminal.setBackgroundColor(r),0<t.length&&(e.args[0]=t.join(\";\"),f.VT.OSC[12].apply(this,[e]))}},f.VT.OSC[12]=function(e){var t=e.args[0].split(\";\");if(t){var r=u.colors.x11ToCSS(t.shift());r&&this.terminal.setCursorColor(r)}},f.VT.OSC[50]=function(e){var t=e.args[0].match(/CursorShape=(.)/i);if(t)switch(t[1]){case\"1\":this.terminal.setCursorShape(f.Terminal.cursorShape.BEAM);break;case\"2\":this.terminal.setCursorShape(f.Terminal.cursorShape.UNDERLINE);break;default:this.terminal.setCursorShape(f.Terminal.cursorShape.BLOCK)}else console.warn(\"Could not parse OSC 50 args: \"+e.args[0])},f.VT.OSC[52]=function(e){if(!this.enableClipboardWrite)return;var t=e.args[0].match(/^[cps01234567]*;(.*)/);if(!t)return;let r;try{r=window.atob(t[1])}catch(t){return}if(\"utf-8\"==this.characterEncoding){const e=new TextDecoder,t=u.codec.stringToCodeUnitArray(r,Uint8Array);r=e.decode(t)}r&&this.terminal.copyStringToClipboard(r)},f.VT.OSC[104]=function(e){const t=this.terminal.getTextAttributes();e.args[0]?e.args[0].split(\";\").forEach(e=>t.resetColor(e)):t.resetColorPalette()},f.VT.OSC[110]=function(){this.terminal.setForegroundColor()},f.VT.OSC[111]=function(){this.terminal.setBackgroundColor()},f.VT.OSC[112]=function(){this.terminal.setCursorColor()},f.VT.OSC[1337]=function(e){let t=e.args[0].match(/^File=([^:]*):([\\s\\S]*)$/m);if(!t)return void(this.warnUnimplemented&&console.log(`iTerm2 1337: unsupported sequence: ${t[1]}`));const r={name:\"\",size:0,preserveAspectRatio:!0,inline:!1,width:\"auto\",height:\"auto\",align:\"left\",type:\"\",buffer:u.codec.stringToCodeUnitArray(atob(t[2]),Uint8Array).buffer};if(t[1].split(\";\").forEach(e=>{const t=e.match(/^([^=]+)=(.*)$/m);if(t)switch(t[1]){case\"name\":try{r.name=window.atob(t[2])}catch(t){}break;case\"size\":try{r.size=parseInt(t[2])}catch(t){}break;case\"width\":r.width=t[2];break;case\"height\":r.height=t[2];break;case\"preserveAspectRatio\":r.preserveAspectRatio=\"0\"!=t[2];break;case\"inline\":r.inline=\"0\"!=t[2];break;case\"align\":r.align=t[2];break;case\"type\":r.type=t[2]}}),r.inline){const t=this.terminal.io,i=e.peekRemainingBuf();e.advance(i.length),this.terminal.displayImage(r),t.print(i)}else this.terminal.displayImage(r)},f.VT.OSC[777]=function(e){var t;switch(e.args[0].split(\";\",1)[0]){case\"notify\":var r,i;(t=e.args[0].match(/^[^;]+;([^;]*)(;([\\s\\S]*))?$/))&&(r=t[1],i=t[3]),f.notify({title:r,body:i});break;default:console.warn(\"Unknown urxvt module: \"+e.args[0])}},f.VT.CSI[\"@\"]=function(e){this.terminal.insertSpace(e.iarg(0,1))},f.VT.CSI.A=function(e){this.terminal.cursorUp(e.iarg(0,1))},f.VT.CSI.B=function(e){this.terminal.cursorDown(e.iarg(0,1))},f.VT.CSI.C=function(e){this.terminal.cursorRight(e.iarg(0,1))},f.VT.CSI.D=function(e){this.terminal.cursorLeft(e.iarg(0,1))},f.VT.CSI.E=function(e){this.terminal.cursorDown(e.iarg(0,1)),this.terminal.setCursorColumn(0)},f.VT.CSI.F=function(e){this.terminal.cursorUp(e.iarg(0,1)),this.terminal.setCursorColumn(0)},f.VT.CSI.G=function(e){this.terminal.setCursorColumn(e.iarg(0,1)-1)},f.VT.CSI.H=function(e){this.terminal.setCursorPosition(e.iarg(0,1)-1,e.iarg(1,1)-1)},f.VT.CSI.I=function(e){var t=e.iarg(0,1);t=u.f.clamp(t,1,this.terminal.screenSize.width);for(var r=0;r<t;r++)this.terminal.forwardTabStop()},f.VT.CSI.J=f.VT.CSI[\"?J\"]=function(e){var t=e.args[0];t&&0!=t?1==t?this.terminal.eraseAbove():2==t?this.terminal.clear():3==t&&this.enableCsiJ3&&this.terminal.clearScrollback():this.terminal.eraseBelow()},f.VT.CSI.K=f.VT.CSI[\"?K\"]=function(e){var t=e.args[0];t&&0!=t?1==t?this.terminal.eraseToLeft():2==t&&this.terminal.eraseLine():this.terminal.eraseToRight()},f.VT.CSI.L=function(e){this.terminal.insertLines(e.iarg(0,1))},f.VT.CSI.M=function(e){this.terminal.deleteLines(e.iarg(0,1))},f.VT.CSI.P=function(e){this.terminal.deleteChars(e.iarg(0,1))},f.VT.CSI.S=function(e){this.terminal.vtScrollUp(e.iarg(0,1))},f.VT.CSI.T=function(e){1>=e.args.length&&this.terminal.vtScrollDown(e.iarg(0,1))},f.VT.CSI[\">T\"]=f.VT.ignore,f.VT.CSI.X=function(e){this.terminal.eraseToRight(e.iarg(0,1))},f.VT.CSI.Z=function(e){var t=e.iarg(0,1);t=u.f.clamp(t,1,this.terminal.screenSize.width);for(var r=0;r<t;r++)this.terminal.backwardTabStop()},f.VT.CSI[\"`\"]=f.VT.CSI.G,f.VT.CSI.a=function(e){this.terminal.setCursorColumn(this.terminal.getCursorColumn()+e.iarg(0,1))},f.VT.CSI.b=f.VT.ignore,f.VT.CSI.c=function(e){e.args[0]&&0!=e.args[0]||this.terminal.io.sendString(\"\x1b[?1;2c\")},f.VT.CSI[\">c\"]=function(){this.terminal.io.sendString(\"\x1b[>0;256;0c\")},f.VT.CSI.d=function(e){this.terminal.setAbsoluteCursorRow(e.iarg(0,1)-1)},f.VT.CSI.f=f.VT.CSI.H,f.VT.CSI.g=function(e){e.args[0]&&0!=e.args[0]?3==e.args[0]&&this.terminal.clearAllTabStops():this.terminal.clearTabStopAtCursor(!1)},f.VT.CSI.h=function(e){for(var t=0;t<e.args.length;t++)this.setANSIMode(e.args[t],!0)},f.VT.CSI[\"?h\"]=function(e){for(var t=0;t<e.args.length;t++)this.setDECMode(e.args[t],!0)},f.VT.CSI.i=f.VT.CSI[\"?i\"]=f.VT.ignore,f.VT.CSI.l=function(e){for(var t=0;t<e.args.length;t++)this.setANSIMode(e.args[t],!1)},f.VT.CSI[\"?l\"]=function(e){for(var t=0;t<e.args.length;t++)this.setDECMode(e.args[t],!1)},f.VT.prototype.parseSgrExtendedColors=function(e,t,r){let i,o;if(e.argHasSubargs(t))(i=e.args[t].split(\":\")).shift(),o=!0;else{if(e.argHasSubargs(t+1))return{skipCount:0};i=e.args.slice(t+1),o=!1}switch(parseInt(i[0])){default:case 0:return{skipCount:0};case 1:return o?{color:\"rgba(0, 0, 0, 0)\",skipCount:0}:{skipCount:0};case 2:{let t;if(t=o?4==i.length?1:2:1,i.length<t+3)return{skipCount:0};return{color:`rgb(${e.parseInt(i[t+0])}, ${e.parseInt(i[t+1])}, ${e.parseInt(i[t+2])})`,skipCount:o?0:4}}case 3:if(!o)return{skipCount:0};if(4>i.length)return{skipCount:0};e.parseInt(i[1]),e.parseInt(i[2]),e.parseInt(i[3]);return{skipCount:0};case 4:if(!o)return{skipCount:0};if(5>i.length)return{skipCount:0};e.parseInt(i[1]),e.parseInt(i[2]),e.parseInt(i[3]),e.parseInt(i[4]);return{skipCount:0};case 5:{if(2>i.length)return{skipCount:0};const t={skipCount:o?0:2},n=e.parseInt(i[1]);return n<r.colorPalette.length&&(t.color=n),t}}},f.VT.CSI.m=function(e){var t=this.terminal.getTextAttributes();if(e.args.length){for(var r,i=0;i<e.args.length;i++)if(30>(r=e.iarg(i,0)))if(0==r)t.reset();else if(1==r)t.bold=!0;else if(2==r)t.faint=!0;else if(3==r)t.italic=!0;else if(4!=r)5==r?t.blink=!0:7==r?t.inverse=!0:8==r?t.invisible=!0:9==r?t.strikethrough=!0:21==r?t.underline=\"double\":22==r?(t.bold=!1,t.faint=!1):23==r?t.italic=!1:24==r?t.underline=!1:25==r?t.blink=!1:27==r?t.inverse=!1:28==r?t.invisible=!1:29==r&&(t.strikethrough=!1);else if(e.argHasSubargs(i)){const r=e.args[i].split(\":\")[1];0==r?t.underline=!1:1==r?t.underline=\"solid\":2==r?t.underline=\"double\":3==r?t.underline=\"wavy\":4==r?t.underline=\"dotted\":5==r&&(t.underline=\"dashed\")}else t.underline=\"solid\";else if(50>r)if(38>r)t.foregroundSource=r-30;else if(38==r){const r=this.parseSgrExtendedColors(e,i,t);void 0!==r.color&&(t.foregroundSource=r.color),i+=r.skipCount}else if(39==r)t.foregroundSource=t.SRC_DEFAULT;else if(48>r)t.backgroundSource=r-40;else if(48==r){const r=this.parseSgrExtendedColors(e,i,t);void 0!==r.color&&(t.backgroundSource=r.color),i+=r.skipCount}else t.backgroundSource=t.SRC_DEFAULT;else if(58==r){const r=this.parseSgrExtendedColors(e,i,t);void 0!==r.color&&(t.underlineSource=r.color),i+=r.skipCount}else 59==r?t.underlineSource=t.SRC_DEFAULT:90<=r&&97>=r?t.foregroundSource=r-90+8:100<=r&&107>=r&&(t.backgroundSource=r-100+8);t.setDefaults(this.terminal.getForegroundColor(),this.terminal.getBackgroundColor())}else t.reset()},f.VT.CSI.m.supportsSubargs=!0,f.VT.CSI[\">m\"]=f.VT.ignore,f.VT.CSI.n=function(e){if(5==e.args[0])this.terminal.io.sendString(\"\x1b0n\");else if(6==e.args[0]){var t=this.terminal.getCursorRow()+1,r=this.terminal.getCursorColumn()+1;this.terminal.io.sendString(\"\x1b[\"+t+\";\"+r+\"R\")}},f.VT.CSI[\">n\"]=f.VT.ignore,f.VT.CSI[\"?n\"]=function(e){if(6==e.args[0]){var t=this.terminal.getCursorRow()+1,r=this.terminal.getCursorColumn()+1;this.terminal.io.sendString(\"\x1b[\"+t+\";\"+r+\"R\")}else 15==e.args[0]?this.terminal.io.sendString(\"\x1b[?11n\"):25==e.args[0]?this.terminal.io.sendString(\"\x1b[?21n\"):26==e.args[0]?this.terminal.io.sendString(\"\x1b[?12;1;0;0n\"):53==e.args[0]&&this.terminal.io.sendString(\"\x1b[?50n\")},f.VT.CSI[\">p\"]=f.VT.ignore,f.VT.CSI[\"!p\"]=function(){this.terminal.softReset()},f.VT.CSI.$p=f.VT.ignore,f.VT.CSI[\"?$p\"]=f.VT.ignore,f.VT.CSI['\"p']=f.VT.ignore,f.VT.CSI.q=f.VT.ignore,f.VT.CSI[\" q\"]=function(e){var t=e.args[0];0==t||1==t?(this.terminal.setCursorShape(f.Terminal.cursorShape.BLOCK),this.terminal.setCursorBlink(!0)):2==t?(this.terminal.setCursorShape(f.Terminal.cursorShape.BLOCK),this.terminal.setCursorBlink(!1)):3==t?(this.terminal.setCursorShape(f.Terminal.cursorShape.UNDERLINE),this.terminal.setCursorBlink(!0)):4==t?(this.terminal.setCursorShape(f.Terminal.cursorShape.UNDERLINE),this.terminal.setCursorBlink(!1)):5==t?(this.terminal.setCursorShape(f.Terminal.cursorShape.BEAM),this.terminal.setCursorBlink(!0)):6==t?(this.terminal.setCursorShape(f.Terminal.cursorShape.BEAM),this.terminal.setCursorBlink(!1)):console.warn(\"Unknown cursor style: \"+t)},f.VT.CSI['\"q']=f.VT.ignore,f.VT.CSI.r=function(e){var t=e.args,r=t[0]?parseInt(t[0],10)-1:null,i=t[1]?parseInt(t[1],10)-1:null;this.terminal.setVTScrollRegion(r,i),this.terminal.setCursorPosition(0,0)},f.VT.CSI[\"?r\"]=f.VT.ignore,f.VT.CSI.$r=f.VT.ignore,f.VT.CSI.s=function(){this.terminal.saveCursorAndState()},f.VT.CSI[\"?s\"]=f.VT.ignore,f.VT.CSI.t=f.VT.ignore,f.VT.CSI.$t=f.VT.ignore,f.VT.CSI[\">t\"]=f.VT.ignore,f.VT.CSI[\" t\"]=f.VT.ignore,f.VT.CSI.u=function(){this.terminal.restoreCursorAndState()},f.VT.CSI[\" u\"]=f.VT.ignore,f.VT.CSI.$v=f.VT.ignore,f.VT.CSI[\"'w\"]=f.VT.ignore,f.VT.CSI.x=f.VT.ignore,f.VT.CSI[\"*x\"]=f.VT.ignore,f.VT.CSI.$x=f.VT.ignore,f.VT.CSI.z=function(e){if(!(1>e.args.length)){var t=e.args[0];if(0==t){if(2>e.args.length)return;this.terminal.getTextAttributes().tileData=e.args[1]}else 1==t&&(this.terminal.getTextAttributes().tileData=null)}},f.VT.CSI[\"'z\"]=f.VT.ignore,f.VT.CSI.$z=f.VT.ignore,f.VT.CSI[\"'{\"]=f.VT.ignore,f.VT.CSI[\"'|\"]=f.VT.ignore,f.VT.CSI[\"'}\"]=f.VT.ignore,f.VT.CSI[\"'~\"]=f.VT.ignore,f.VT.CharacterMap=function(e,t){this.description=e,this.GL=null,this.glmapBase_=t,this.sync_()},f.VT.CharacterMap.prototype.sync_=function(e){if(!this.glmapBase_&&!e)return this.GL=null,delete this.glmap_,void delete this.glre_;this.glmap_=e?Object.assign({},this.glmapBase_,e):this.glmapBase_;var t=Object.keys(this.glmap_).map(e=>\"\\\\x\"+u.f.zpad(e.charCodeAt(0).toString(16)));this.glre_=new RegExp(\"[\"+t.join(\"\")+\"]\",\"g\"),this.GL=e=>e.replace(this.glre_,e=>this.glmap_[e])},f.VT.CharacterMap.prototype.reset=function(){this.glmap_!==this.glmapBase_&&this.sync_()},f.VT.CharacterMap.prototype.setOverrides=function(e){this.sync_(e)},f.VT.CharacterMap.prototype.clone=function(){var e=new f.VT.CharacterMap(this.description,this.glmapBase_);return this.glmap_!==this.glmapBase_&&e.setOverrides(this.glmap_),e},f.VT.CharacterMaps=function(){this.maps_=f.VT.CharacterMaps.DefaultMaps,this.mapsBase_=this.maps_},f.VT.CharacterMaps.prototype.getMap=function(e){return this.maps_.hasOwnProperty(e)?this.maps_[e]:void 0},f.VT.CharacterMaps.prototype.addMap=function(e,t){this.maps_===this.mapsBase_&&(this.maps_=Object.assign({},this.mapsBase_)),this.maps_[e]=t},f.VT.CharacterMaps.prototype.reset=function(){this.maps_!==f.VT.CharacterMaps.DefaultMaps&&(this.maps_=f.VT.CharacterMaps.DefaultMaps)},f.VT.CharacterMaps.prototype.setOverrides=function(e){for(var t in this.maps_===this.mapsBase_&&(this.maps_=Object.assign({},this.mapsBase_)),e){var r=this.getMap(t);void 0===r?this.addMap(t,new f.VT.CharacterMap(\"user \"+t,e[t])):(this.maps_[t]=r.clone(),this.maps_[t].setOverrides(e[t]))}},f.VT.CharacterMaps.DefaultMaps={},f.VT.CharacterMaps.DefaultMaps[0]=new f.VT.CharacterMap(\"graphic\",{\"`\":\"◆\",a:\"▒\",b:\"␉\",c:\"␌\",d:\"␍\",e:\"␊\",f:\"°\",g:\"±\",h:\"␤\",i:\"␋\",j:\"┘\",k:\"┐\",l:\"┌\",m:\"└\",n:\"┼\",o:\"⎺\",p:\"⎻\",q:\"─\",r:\"⎼\",s:\"⎽\",t:\"├\",u:\"┤\",v:\"┴\",w:\"┬\",x:\"│\",y:\"≤\",z:\"≥\",\"{\":\"π\",\"|\":\"≠\",\"}\":\"£\",\"~\":\"·\"}),f.VT.CharacterMaps.DefaultMaps.A=new f.VT.CharacterMap(\"british\",{\"#\":\"£\"}),f.VT.CharacterMaps.DefaultMaps.B=new f.VT.CharacterMap(\"us\",null),f.VT.CharacterMaps.DefaultMaps[4]=new f.VT.CharacterMap(\"dutch\",{\"#\":\"£\",\"@\":\"¾\",\"[\":\"Ĳ\",\"\\\\\":\"½\",\"]\":\"|\",\"{\":\"¨\",\"|\":\"f\",\"}\":\"¼\",\"~\":\"´\"}),f.VT.CharacterMaps.DefaultMaps.C=f.VT.CharacterMaps.DefaultMaps[5]=new f.VT.CharacterMap(\"finnish\",{\"[\":\"Ä\",\"\\\\\":\"Ö\",\"]\":\"Å\",\"^\":\"Ü\",\"`\":\"é\",\"{\":\"ä\",\"|\":\"ö\",\"}\":\"å\",\"~\":\"ü\"}),f.VT.CharacterMaps.DefaultMaps.R=new f.VT.CharacterMap(\"french\",{\"#\":\"£\",\"@\":\"à\",\"[\":\"°\",\"\\\\\":\"ç\",\"]\":\"§\",\"{\":\"é\",\"|\":\"ù\",\"}\":\"è\",\"~\":\"¨\"}),f.VT.CharacterMaps.DefaultMaps.Q=new f.VT.CharacterMap(\"french canadian\",{\"@\":\"à\",\"[\":\"â\",\"\\\\\":\"ç\",\"]\":\"ê\",\"^\":\"î\",\"`\":\"ô\",\"{\":\"é\",\"|\":\"ù\",\"}\":\"è\",\"~\":\"û\"}),f.VT.CharacterMaps.DefaultMaps.K=new f.VT.CharacterMap(\"german\",{\"@\":\"§\",\"[\":\"Ä\",\"\\\\\":\"Ö\",\"]\":\"Ü\",\"{\":\"ä\",\"|\":\"ö\",\"}\":\"ü\",\"~\":\"ß\"}),f.VT.CharacterMaps.DefaultMaps.Y=new f.VT.CharacterMap(\"italian\",{\"#\":\"£\",\"@\":\"§\",\"[\":\"°\",\"\\\\\":\"ç\",\"]\":\"é\",\"`\":\"ù\",\"{\":\"à\",\"|\":\"ò\",\"}\":\"è\",\"~\":\"ì\"}),f.VT.CharacterMaps.DefaultMaps.E=f.VT.CharacterMaps.DefaultMaps[6]=new f.VT.CharacterMap(\"norwegian/danish\",{\"@\":\"Ä\",\"[\":\"Æ\",\"\\\\\":\"Ø\",\"]\":\"Å\",\"^\":\"Ü\",\"`\":\"ä\",\"{\":\"æ\",\"|\":\"ø\",\"}\":\"å\",\"~\":\"ü\"}),f.VT.CharacterMaps.DefaultMaps.Z=new f.VT.CharacterMap(\"spanish\",{\"#\":\"£\",\"@\":\"§\",\"[\":\"¡\",\"\\\\\":\"Ñ\",\"]\":\"¿\",\"{\":\"°\",\"|\":\"ñ\",\"}\":\"ç\"}),f.VT.CharacterMaps.DefaultMaps[7]=f.VT.CharacterMaps.DefaultMaps.H=new f.VT.CharacterMap(\"swedish\",{\"@\":\"É\",\"[\":\"Ä\",\"\\\\\":\"Ö\",\"]\":\"Å\",\"^\":\"Ü\",\"`\":\"é\",\"{\":\"ä\",\"|\":\"ö\",\"}\":\"å\",\"~\":\"ü\"}),f.VT.CharacterMaps.DefaultMaps[\"=\"]=new f.VT.CharacterMap(\"swiss\",{\"#\":\"ù\",\"@\":\"à\",\"[\":\"é\",\"\\\\\":\"ç\",\"]\":\"ê\",\"^\":\"î\",_:\"è\",\"`\":\"ô\",\"{\":\"ä\",\"|\":\"ö\",\"}\":\"ü\",\"~\":\"û\"}),u.resource.add(\"hterm/audio/bell\",\"audio/ogg;base64\",\"T2dnUwACAAAAAAAAAADhqW5KAAAAAMFvEjYBHgF2b3JiaXMAAAAAAYC7AAAAAAAAAHcBAAAAAAC4AU9nZ1MAAAAAAAAAAAAA4aluSgEAAAAAesI3EC3//////////////////8kDdm9yYmlzHQAAAFhpcGguT3JnIGxpYlZvcmJpcyBJIDIwMDkwNzA5AAAAAAEFdm9yYmlzKUJDVgEACAAAADFMIMWA0JBVAAAQAABgJCkOk2ZJKaWUoSh5mJRISSmllMUwiZiUicUYY4wxxhhjjDHGGGOMIDRkFQAABACAKAmOo+ZJas45ZxgnjnKgOWlOOKcgB4pR4DkJwvUmY26mtKZrbs4pJQgNWQUAAAIAQEghhRRSSCGFFGKIIYYYYoghhxxyyCGnnHIKKqigggoyyCCDTDLppJNOOumoo4466ii00EILLbTSSkwx1VZjrr0GXXxzzjnnnHPOOeecc84JQkNWAQAgAAAEQgYZZBBCCCGFFFKIKaaYcgoyyIDQkFUAACAAgAAAAABHkRRJsRTLsRzN0SRP8ixREzXRM0VTVE1VVVVVdV1XdmXXdnXXdn1ZmIVbuH1ZuIVb2IVd94VhGIZhGIZhGIZh+H3f933f930gNGQVACABAKAjOZbjKaIiGqLiOaIDhIasAgBkAAAEACAJkiIpkqNJpmZqrmmbtmirtm3LsizLsgyEhqwCAAABAAQAAAAAAKBpmqZpmqZpmqZpmqZpmqZpmqZpmmZZlmVZlmVZlmVZlmVZlmVZlmVZlmVZlmVZlmVZlmVZlmVZlmVZQGjIKgBAAgBAx3Ecx3EkRVIkx3IsBwgNWQUAyAAACABAUizFcjRHczTHczzHczxHdETJlEzN9EwPCA1ZBQAAAgAIAAAAAABAMRzFcRzJ0SRPUi3TcjVXcz3Xc03XdV1XVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVYHQkFUAAAQAACGdZpZqgAgzkGEgNGQVAIAAAAAYoQhDDAgNWQUAAAQAAIih5CCa0JrzzTkOmuWgqRSb08GJVJsnuamYm3POOeecbM4Z45xzzinKmcWgmdCac85JDJqloJnQmnPOeRKbB62p0ppzzhnnnA7GGWGcc85p0poHqdlYm3POWdCa5qi5FJtzzomUmye1uVSbc84555xzzjnnnHPOqV6czsE54Zxzzonam2u5CV2cc875ZJzuzQnhnHPOOeecc84555xzzglCQ1YBAEAAAARh2BjGnYIgfY4GYhQhpiGTHnSPDpOgMcgppB6NjkZKqYNQUhknpXSC0JBVAAAgAACEEFJIIYUUUkghhRRSSCGGGGKIIaeccgoqqKSSiirKKLPMMssss8wyy6zDzjrrsMMQQwwxtNJKLDXVVmONteaec645SGultdZaK6WUUkoppSA0ZBUAAAIAQCBkkEEGGYUUUkghhphyyimnoIIKCA1ZBQAAAgAIAAAA8CTPER3RER3RER3RER3RER3P8RxREiVREiXRMi1TMz1VVFVXdm1Zl3Xbt4Vd2HXf133f141fF4ZlWZZlWZZlWZZlWZZlWZZlCUJDVgEAIAAAAEIIIYQUUkghhZRijDHHnINOQgmB0JBVAAAgAIAAAAAAR3EUx5EcyZEkS7IkTdIszfI0T/M00RNFUTRNUxVd0RV10xZlUzZd0zVl01Vl1XZl2bZlW7d9WbZ93/d93/d93/d93/d939d1IDRkFQAgAQCgIzmSIimSIjmO40iSBISGrAIAZAAABACgKI7iOI4jSZIkWZImeZZniZqpmZ7pqaIKhIasAgAAAQAEAAAAAACgaIqnmIqniIrniI4oiZZpiZqquaJsyq7ruq7ruq7ruq7ruq7ruq7ruq7ruq7ruq7ruq7ruq7ruq7rukBoyCoAQAIAQEdyJEdyJEVSJEVyJAcIDVkFAMgAAAgAwDEcQ1Ikx7IsTfM0T/M00RM90TM9VXRFFwgNWQUAAAIACAAAAAAAwJAMS7EczdEkUVIt1VI11VItVVQ9VVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVV1TRN0zSB0JCVAAAZAAAjQQYZhBCKcpBCbj1YCDHmJAWhOQahxBiEpxAzDDkNInSQQSc9uJI5wwzz4FIoFURMg40lN44gDcKmXEnlOAhCQ1YEAFEAAIAxyDHEGHLOScmgRM4xCZ2UyDknpZPSSSktlhgzKSWmEmPjnKPSScmklBhLip2kEmOJrQAAgAAHAIAAC6HQkBUBQBQAAGIMUgophZRSzinmkFLKMeUcUko5p5xTzjkIHYTKMQadgxAppRxTzinHHITMQeWcg9BBKAAAIMABACDAQig0ZEUAECcA4HAkz5M0SxQlSxNFzxRl1xNN15U0zTQ1UVRVyxNV1VRV2xZNVbYlTRNNTfRUVRNFVRVV05ZNVbVtzzRl2VRV3RZV1bZl2xZ+V5Z13zNNWRZV1dZNVbV115Z9X9ZtXZg0zTQ1UVRVTRRV1VRV2zZV17Y1UXRVUVVlWVRVWXZlWfdVV9Z9SxRV1VNN2RVVVbZV2fVtVZZ94XRVXVdl2fdVWRZ+W9eF4fZ94RhV1dZN19V1VZZ9YdZlYbd13yhpmmlqoqiqmiiqqqmqtm2qrq1bouiqoqrKsmeqrqzKsq+rrmzrmiiqrqiqsiyqqiyrsqz7qizrtqiquq3KsrCbrqvrtu8LwyzrunCqrq6rsuz7qizruq3rxnHrujB8pinLpqvquqm6um7runHMtm0co6rqvirLwrDKsu/rui+0dSFRVXXdlF3jV2VZ921fd55b94WybTu/rfvKceu60vg5z28cubZtHLNuG7+t+8bzKz9hOI6lZ5q2baqqrZuqq+uybivDrOtCUVV9XZVl3zddWRdu3zeOW9eNoqrquirLvrDKsjHcxm8cuzAcXds2jlvXnbKtC31jyPcJz2vbxnH7OuP2daOvDAnHjwAAgAEHAIAAE8pAoSErAoA4AQAGIecUUxAqxSB0EFLqIKRUMQYhc05KxRyUUEpqIZTUKsYgVI5JyJyTEkpoKZTSUgehpVBKa6GU1lJrsabUYu0gpBZKaS2U0lpqqcbUWowRYxAy56RkzkkJpbQWSmktc05K56CkDkJKpaQUS0otVsxJyaCj0kFIqaQSU0mptVBKa6WkFktKMbYUW24x1hxKaS2kEltJKcYUU20txpojxiBkzknJnJMSSmktlNJa5ZiUDkJKmYOSSkqtlZJSzJyT0kFIqYOOSkkptpJKTKGU1kpKsYVSWmwx1pxSbDWU0lpJKcaSSmwtxlpbTLV1EFoLpbQWSmmttVZraq3GUEprJaUYS0qxtRZrbjHmGkppraQSW0mpxRZbji3GmlNrNabWam4x5hpbbT3WmnNKrdbUUo0txppjbb3VmnvvIKQWSmktlNJiai3G1mKtoZTWSiqxlZJabDHm2lqMOZTSYkmpxZJSjC3GmltsuaaWamwx5ppSi7Xm2nNsNfbUWqwtxppTS7XWWnOPufVWAADAgAMAQIAJZaDQkJUAQBQAAEGIUs5JaRByzDkqCULMOSepckxCKSlVzEEIJbXOOSkpxdY5CCWlFksqLcVWaykptRZrLQAAoMABACDABk2JxQEKDVkJAEQBACDGIMQYhAYZpRiD0BikFGMQIqUYc05KpRRjzknJGHMOQioZY85BKCmEUEoqKYUQSkklpQIAAAocAAACbNCUWByg0JAVAUAUAABgDGIMMYYgdFQyKhGETEonqYEQWgutddZSa6XFzFpqrbTYQAithdYySyXG1FpmrcSYWisAAOzAAQDswEIoNGQlAJAHAEAYoxRjzjlnEGLMOegcNAgx5hyEDirGnIMOQggVY85BCCGEzDkIIYQQQuYchBBCCKGDEEIIpZTSQQghhFJK6SCEEEIppXQQQgihlFIKAAAqcAAACLBRZHOCkaBCQ1YCAHkAAIAxSjkHoZRGKcYglJJSoxRjEEpJqXIMQikpxVY5B6GUlFrsIJTSWmw1dhBKaS3GWkNKrcVYa64hpdZirDXX1FqMteaaa0otxlprzbkAANwFBwCwAxtFNicYCSo0ZCUAkAcAgCCkFGOMMYYUYoox55xDCCnFmHPOKaYYc84555RijDnnnHOMMeecc845xphzzjnnHHPOOeecc44555xzzjnnnHPOOeecc84555xzzgkAACpwAAAIsFFkc4KRoEJDVgIAqQAAABFWYowxxhgbCDHGGGOMMUYSYowxxhhjbDHGGGOMMcaYYowxxhhjjDHGGGOMMcYYY4wxxhhjjDHGGGOMMcYYY4wxxhhjjDHGGGOMMcYYY4wxxhhjjDHGGFtrrbXWWmuttdZaa6211lprrQBAvwoHAP8HG1ZHOCkaCyw0ZCUAEA4AABjDmHOOOQYdhIYp6KSEDkIIoUNKOSglhFBKKSlzTkpKpaSUWkqZc1JSKiWlllLqIKTUWkottdZaByWl1lJqrbXWOgiltNRaa6212EFIKaXWWostxlBKSq212GKMNYZSUmqtxdhirDGk0lJsLcYYY6yhlNZaazHGGGstKbXWYoy1xlprSam11mKLNdZaCwDgbnAAgEiwcYaVpLPC0eBCQ1YCACEBAARCjDnnnHMQQgghUoox56CDEEIIIURKMeYcdBBCCCGEjDHnoIMQQgghhJAx5hx0EEIIIYQQOucchBBCCKGEUkrnHHQQQgghlFBC6SCEEEIIoYRSSikdhBBCKKGEUkopJYQQQgmllFJKKaWEEEIIoYQSSimllBBCCKWUUkoppZQSQgghlFJKKaWUUkIIoZRQSimllFJKCCGEUkoppZRSSgkhhFBKKaWUUkopIYQSSimllFJKKaUAAIADBwCAACPoJKPKImw04cIDUGjISgCADAAAcdhq6ynWyCDFnISWS4SQchBiLhFSijlHsWVIGcUY1ZQxpRRTUmvonGKMUU+dY0oxw6yUVkookYLScqy1dswBAAAgCAAwECEzgUABFBjIAIADhAQpAKCwwNAxXAQE5BIyCgwKx4Rz0mkDABCEyAyRiFgMEhOqgaJiOgBYXGDIB4AMjY20iwvoMsAFXdx1IIQgBCGIxQEUkICDE2544g1PuMEJOkWlDgIAAAAA4AAAHgAAkg0gIiKaOY4Ojw+QEJERkhKTE5QAAAAAALABgA8AgCQFiIiIZo6jw+MDJERkhKTE5AQlAAAAAAAAAAAACAgIAAAAAAAEAAAACAhPZ2dTAAQYOwAAAAAAAOGpbkoCAAAAmc74DRgyNjM69TAzOTk74dnLubewsbagmZiNp4d0KbsExSY/I3XUTwJgkeZdn1HY4zoj33/q9DFtv3Ui1/jmx7lCUtPt18/sYf9MkgAsAGRBd3gMGP4sU+qCPYBy9VrA3YqJosW3W2/ef1iO/u3cg8ZG/57jU+pPmbGEJUgkfnaI39DbPqxddZphbMRmCc5rKlkUMkyx8iIoug5dJv1OYH9a59c+3Gevqc7Z2XFdDjL/qHztRfjWEWxJ/aiGezjohu9HsCZdQBKbiH0VtU/3m85lDG2T/+xkZcYnX+E+aqzv/xTgOoTFG+x7SNqQ4N+oAABSxuVXw77Jd5bmmTmuJakX7509HH0kGYKvARPpwfOSAPySPAc2EkneDwB2HwAAJlQDYK5586N79GJCjx4+p6aDUd27XSvRyXLJkIC5YZ1jLv5lpOhZTz0s+DmnF1diptrnM6UDgIW11Xh8cHTd0/SmbgOAdxcyWwMAAGIrZ3fNSfZbzKiYrK4+tPqtnMVLOeWOG2kVvUY+p2PJ/hkCl5aFRO4TLGYPZcIU3vYM1hohS4jHFlnyW/2T5J7kGsShXWT8N05V+3C/GPqJ1QdWisGPxEzHqXISBPIinWDUt7IeJv/f5OtzBxpTzZZQ+CYEhHXfqG4aABQli72GJhN4oJv+hXcApAJSErAW8G2raAX4NUcABnVt77CzZAB+LsHcVe+Q4h+QB1wh/ZrJTPxSBdI8mgTeAdTsQOoFUEng9BHcVPhxSRRYkKWZJXOFYP6V4AEripJoEjXgA2wJRZHSExmJDm8F0A6gEXsg5a4ZsALItrMB7+fh7UKLvYWSdtsDwFf1mzYzS1F82N1h2Oyt2e76B1QdS0SAsQigLPMOgJS9JRC7hFXA6kUsLFNKD5cA5cTRvgSqPc3Fl99xW3QTi/MHR8DEm6WnvaVQATwRqRKjywQ9BrrhugR2AKTsPQeQckrAOgDOhbTESyrXQ50CkNpXdtWjW7W2/3UjeX3U95gIdalfRAoAmqUEiwp53hCdcCwlg47fcbfzlmQMAgaBkh7c+fcDgF+ifwDXfzegLPcLYJsAAJQArTXjnh/uXGy3v1Hk3pV6/3t5ruW81f6prfbM2Q3WNVy98BwUtbCwhFhAWuPev6Oe/4ZaFQUcgKrVs4defzh1TADA1DEh5b3VlDaECw5b+bPfkKos3tIAue3vJZOih3ga3l6O3PSfIkrLv0PAS86PPdL7g8oc2KteNFKKzKRehOv2gJoFLBPXmaXvPBQILgJon0bbWBszrYZYYwE7jl2j+vTdU7Vpk21LiU0QajPkywAAHqbUC0/YsYOdb4e6BOp7E0cCi04Ao/TgD8ZVAMid6h/A8IeBNkp6/xsAACZELEYIk+yvI6Qz1NN6lIftB/6IMWjWJNOqPTMedAmyaj6Es0QBklJpiSWWHnQ2CoYbGWAmt+0gLQBFKCBnp2QUUQZ/1thtZDBJUpFWY82z34ocorB62oX7qB5y0oPAv/foxH25wVmgIHf2xFOr8leZcBq1Kx3ZvCq9Bga639AxuHuPNL/71YCF4EywJpqHFAX6XF0sjVbuANnvvdLcrufYwOM/iDa6iA468AYAAB6mNBMXcgTD8HSRqJ4vw8CjAlCEPACASlX/APwPOJKl9xQAAAPmnev2eWp33Xgyw3Dvfz6myGk3oyP8YTKsCOvzAgALQi0o1c6Nzs2O2Pg2h4ACIJAgAGP0aNn5x0BDgVfH7u2TtyfDcRIuYAyQhBF/lvSRAttgA6TPbWZA9gaUrZWAUEAA+Dx47Q3/r87HxUUqZmB0BmUuMlojFjHt1gDunnvuX8MImsjSq5WkzSzGS62OEIlOufWWezxWpv6FBgDgJVltfXFYtNAAnqU0xQoD0YLiXo5cF5QV4CnY1tBLAkZCOABAhbk/AM+/AwSCCdlWAAAMcFjS7owb8GVDzveDiZvznbt2tF4bL5odN1YKl88TAEABCZvufq9YCTBtMwVAQUEAwGtNltzSaHvADYC3TxLVjqiRA+OZAMhzcqEgRcAOwoCgvdTxsTHLQEF6+oOb2+PAI8ciPQcXg7pOY+LjxQSv2fjmFuj34gGwz310/bGK6z3xgT887eomWULEaDd04wHetYxdjcgV2SxvSwn0VoZXJRqkRC5ASQ/muVoAUsX7AgAQMBNaVwAAlABRxT/1PmfqLqSRNDbhXb07berpB3b94jpuWEZjBCD2OcdXFpCKEgCDfcFPMw8AAADUwT4lnUm50lmwrpMMhPQIKj6u0E8fr2vGBngMNdIlrZsigjahljud6AFVg+tzXwUnXL3TJLpajaWKA4VAAAAMiFfqJgKAZ08XrtS3dxtQNYcpPvYEG8ClvrQRJgBephwnNWJjtGqmp6VEPSvBe7EBiU3qgJbQAwD4Le8LAMDMhHbNAAAlgK+tFs5O+YyJc9yCnJa3rxLPulGnxwsXV9Fsk2k4PisCAHC8FkwbGE9gJQAAoMnyksj0CdFMZLLgoz8M+FxziwYBgIx+zHiCBAKAlBKNpF1sO9JpVcyEi9ar15YlHgrut5fPJnkdJ6vEwZPyAHQBIEDUrlMcBAAd2KAS0Qq+JwRsE4AJZtMnAD6GnOYwYlOIZvtzUNdjreB7fiMkWI0CmBB6AIAKc38A9osEFlTSGECB+cbeRDC0aRpLHqNPplcK/76Lxn2rpmqyXsYJWRi/FQAAAKBQk9MCAOibrQBQADCDsqpooPutd+05Ce9g6iEdiYXgVmQAI4+4wskEBEiBloNQ6Ki0/KTQ0QjWfjxzi+AeuXKoMjEVfQOZzr0y941qLgM2AExvbZOqcxZ6J6krlrj4y2j9AdgKDx6GnJsVLhbc42uq584+ouSdNBpoCiCVHrz+WzUA/DDtD8ATgA3h0lMCAAzcFv+S+fSSNkeYWlTpb34mf2RfmqqJeMeklhHAfu7VoAEACgAApKRktL+KkQDWMwYCUAAAAHCKsp80xhp91UjqQBw3x45cetqkjQEyu3G9B6N+R650Uq8OVig7wOm6Wun0ea4lKDPoabJs6aLqgbhPzpv4KR4iODilw88ZpY7q1IOMcbASAOAVtmcCnobcrkG4KGS7/ZnskVWRNF9J0RUHKOnByy9WA8Dv6L4AAARMCQUA4GritfVM2lcZfH3Q3T/vZ47J2YHhcmBazjfdyuV25gLAzrc0cwAAAAAYCh6PdwAAAGyWjFW4yScjaWa2mGcofHxWxewKALglWBpLUvwwk+UOh5eNGyUOs1/EF+pZr+ud5OzoGwYdAABg2p52LiSgAY/ZVlOmilEgHn6G3OcwYjzI7vOj1t6xsx4S3lBY96EUQBF6AIBAmPYH4PoGYCoJAADWe+OZJZi7/x76/yH7Lzf9M5XzRKnFPmveMsilQHwVAAAAAKB3LQD8PCIAAADga0QujBLywzeJ4a6Z/ERVBAUlAEDqvoM7BQBAuAguzFqILtmjH3Kd4wfKobnOhA3z85qWoRPm9hwoOHoDAAlCbwDAA56FHAuXflHo3fe2ttG9XUDeA9YmYCBQ0oPr/1QC8IvuCwAAApbUAQCK22MmE3O78VAbHQT9PIPNoT9zNc3l2Oe7TAVLANBufT8MAQAAAGzT4PS8AQAAoELGHb2uaCwwEv1EWhFriUkbAaAZ27/fVZnTZXbWz3BwWpjUaMZKRj7dZ0J//gUeTdpVEwAAZOFsNxKAjQSgA+ABPoY8Jj5y2wje81jsXc/1TOQWTDYZBmAkNDiqVwuA2NJ9AQAAEBKAt9Vrsfs/2N19MO91S9rd8EHTZHnzC5MYmfQEACy/FBcAAADA5c4gi4z8RANs/m6FNXVo9DV46JG1BBDukqlw/Va5G7QbuGVSI+2aZaoLXJrdVj2zlC9Z5QEAEFz/5QzgVZwAAAAA/oXcxyC6WfTu+09Ve/c766J4VTAGUFmA51+VANKi/QPoPwYgYAkA715OH4S0s5KDHvj99MMq8TPFc3roKZnGOoT1bmIhVgc7XAMBAAAAAMAW1VbQw3gapzOpJd+Kd2fc4iSO62fJv9+movui1wUNPAj059N3OVxzk4gV73PmE8FIA2F5mRq37Evc76vLXfF4rD5UJJAw46hW6LZCb5sNLdx+kzMCAAB+hfy95+965ZCLP7B3/VlTHCvDEKtQhTm4KiCgAEAbrfbWTPssAAAAXpee1tVrozYYn41wD1aeYtkKfswN5/SXPO0JDnhO/4laUortv/s412fybe/nONdncoCHnBVliu0CQGBWlPY/5Kwom2L/kruPM6Q7oz4tvDQy+bZ3HzOi+gNHA4DZEgA=\"),u.resource.add(\"hterm/images/icon-96\",\"image/png;base64\",\"iVBORw0KGgoAAAANSUhEUgAAAGAAAABgCAYAAADimHc4AAAStklEQVR42u1dBXjrupL+RzIGmjIfvAcu42NmZub3lpmZmZmZmRkuMzPDYaYyJG0Sa9b2p2z1eQtp7bzefpv/nKnkkSw7Gg1IshNsDtpoo4022mijDWp/tlTgzbpJSqYvMoFTC9vjRD5JLb9RYaRkpk22SS28P8pacAaPdZ41KYMCI89YB6wN3JzQJM3UIGqurfTlKQTAZtqENid5SlNdU804VmbbWQtA6HMkAAdADsBeAJ7mxwIhIhFSXJ9iRPw4JYDEcqmGWEp1HhCI8gAtpXF7scB1ZRH9E3HObANCNy1AoGTegNDnCdE41tfQDH2t+CINQEpJ9Xp97oUDh3+nXK48DYAMIWQmANIkNTn6vP69e3d/zctfeu0nXNexmVn3F0gDAMxMlBoHuht0qnsEEekC42SdGHmNxgVjgk4bPN04Yui8bhc534cQBH35RKrPN9sGdLnB1/Wuv+HW4f+6/tZvBHAaAJvmKr0AjJGvyQMw8pLrrvqeT378Ax8UwrKeevoFgEhfjcGGO2JO+iuTt1SW5DHzyraDExyTlWwHjCQ/CAJcecU+XHn5xWDmVCGQFAKljsLbx8Ynvv3Bhx7/EQCzurimU04jADLsvK3r73/7W1//g1/6hU++uVqt0X/dcBcKxRIsy9Ji34DPow2et6FzgcXFKk6fOY83vu4VEFKkDiYHB3roSz73sc+Oj08eOHzk+B9oMyQABGk0gCIyOt9xHPvaD3/wnT/5VV/+meumpmbwD/98A0qdvVEBNhvMDCJaVXtM01GtVlEs+LBtC1ngzW98tX/m7Llv/emf+83HarX6vbrfGECQRgBmlLP9Ix961499+zd/5XVj45P407/8FxQ7uiGlQK1Ww1ZCvR6gXq3AsgQ8zwYzUkMIgXe+/Q1Dd9x5/6duv/P+R7QjprQaIHQd/8orLvnCJz/2/pfmcj7+6rf+DK5XgOu6sT3dQtBawqjW6lhYXIRlSTAjE/T39eLSS/ZeEwqgE8CiYUV4vQIgTULTyFve9Or3WJZN/3n9HTh3fgrFjhJmZmawFaGUwkJlEffc9xh83wMYqcFg7Noxinw+l9OBikirAabz7eju6sxJKTE7W4bn5+D7PrYmtI/gAFJasCwb4IzaBMHzXE8LgBJC4I1GQRKAa4Xo6upEsZiH53nIRYLeolDMCIIq+nq70dFRAGckgFKpAD+UgBaAgfRRkGvbliwUcoh8ABHFYSfWMnBrxOzL12PwKufzSvV55Tpmi5a0IASBQCgWcujs7ABn5AQic+b5rhNlAVAmTliTEwnA990wIxEEdUQYnxjHidMnAUIcBYABRqNDdC7BM8t0VtfTnGRd8FKdRIjJcVlCsAbPPA5UAK4rXLJjP7aNbkO9XoPrOrEQWHEm69Kua0caYEspvCBQ5toSp9EASCkt27ZF1PlCxBOZOPo5feY0Xpg8jHe/7V3YNjhqjDRac3mMVl1Oo40vtREtW+2FYwdw/S03YHJ6EkODQ1hcXIQUcaeBlUIWsCwZ+QDLdZxcubKAtBpgNmzZliUa6yLMKiRGoBR279yN6666FlJYABgvRhAIncUSHn/iCdQrAZjjSAiKFQQRVEhZIRJASJEACICmlAKQUtqhBETjw5ijuFqr4oWjBwHmF7/jVUHc6aRNXxAoZA3PdYXruvlldJfTaIATaQA4KU/CzNwMDp84DOYXf+hZXiijhJz+DK0QAEd+RYTOOAcgMw0g24oskNYAIoCXxDpbnsOxM8fB5qacwKZD+3WQcS+VxQrYYXNVNGMhI1odiIRQSHb8BmbCpgZYjmVLYi0ANmxQNKpOj50FFOB3WnDzEpOnFkGbuOXPimG5Ap0jLqZOLiKoMyIsVhfB9lLEpFSQ+S26jh2Fo/n0YagRCUlLRhpAAIMIyWl9vBinAkbfoIPXf+0wnrlxAs/dPInKVB1CUOsFkdhD6Nnp49oP98EvWfjvnzqGak0hVlwwFJsaoADK9vq2Y0eOOKUGJLTAjjQgFgBAy/gTvbGIyXC0nX66jJd+YgC7X1nCo39/AccfmUVQU1F5y0d9rsvGJW/txuXv7oGqMx7+2/OoVxWIzE5SOkfaBBGyhGPHc4G8YYjT+wDLDgUgJbQPWDGuL0/VcefvnMLRB2dw3Uf78dZv345D90zjsX++gPGjC7peC8yNI7DjpSVcE476rlEPB++awmP/dCEaEMtqbAP1Fqzkhn0VaUAegMzABJkaIMG8epNEiE3R0funce75Mi4NR+MV7+3B6NUFPPnvY3jupslISJkKoW9PDld/sA+7Xt6B8SMV3Pjzx3Di0TkENQaJ5A1qM8VRljKPgpg58pcNHyCz0ADSTnhNDTBBglCZruPhvz+PY4/M4Jqwg6772AB2vqwDd/zmKYwdWQAJpMalb+vGSz81AA6Ah/76HJ69KfI7tej6K7RPUKwaWQT1FmiAlJEJykXZZh5cE02FoaEJkpYEwGsKwNQGAnDhQAUP/915TJ5YwPCleZSG3WwWvwgYvryAYr8Tm5wn/2Mc5cm481c9RzXWobQPyBpSikgDGgJAVvMARzY0AARwc7Y5Ckn3vK4TV7+/D5YncN+fnsWpJ+cgsnDICnj0n85DSOCSUBO6Rl088g8XcObZ+VgjSKweKRG1xgcIEQnA9QE46aMgwwlHAmBuOFFepeMRd8rI1cU4FBzYn8exh2bw6D9ewNihCjgrR0wI21vAzb9yIrT/pfha7/y+nXj+5gk8EWrDzJlF/WxQUgMUwEtREGW/5RlpgJdaABq0pAGicYFVFaBzxMGV7+vFvtd3YfpsFbf+6ok4KqovxqFoph+YBBAsMg7cPonTT83jsnd247J39IQRUUcceR28cxrVcrBUX2sAa1Nar7dCAwhevCkDN7UADB9gSyEBaBVYYeT37PTw9u/aAbcg8Pi/XMAz109gfqLhFAktgX46LbrOg395DscemAnD0X68+suGQ+3L4Y7fOhVHRA00nDBRa3wAEGuAA8DbqABIkyEA2xFSrBHHM2xf4Ozz82HIOb5kbgSh1TDv69wLZdz0S8dxUTgRHLwkD2HRkgCIdBi6NBPmVpggL7krBkrnA6xIA0Qjfl4x9Bw7XInDzHo1hblJbZYoNkvP3zqFw/fPIKgqGNC7aNoEtUQDEJkg23Ecv1qtrhkFiWYeTYzCUCEEeI15QDTSgjpnMerTmyUB1CsKrGACyvABQb1VAnAt13V8NAHRxGqotEMIQUbJFgGtMhNuqQa4Ui9HbEgDKFknioKIhC4kbGUwFBhsOGHO/AqhCxAh5dOsBZFBMoqCGhpARJv7ihul35oEt84E6U0ZCv1APp0T1tACsIhEpquZQhJsT2C9UAGjtqA2vDnPzOD/NUEqymcOJ94TcPJZzYSFHYKIjHlA+iXk/kvyeO1XDENYtK6J16kn53H375+OBbFukBkFtWoewHAdJ1qQKwAQWcyEtQaQ4QPSmk6KZ6gXDlVAcn0x9vTpxTSjdhkBcOYmSO+KNTZlKK0GWHYoASJkZoJIABPHFnDbb5zEFxtshqEtMkG2rfcEtAZsJAoimBpgGRqg062KVmsAmBH2V2NfWKZ1woxYAyIBwFABXma+nE30wytV4rU/OK9xLWaGUmpJAHE+awEDUsrGnoCERsooyJYALfPaOEHNByBl7BGwKQsy8kYLUZ1kOTXyZprgUYJHSBzrctLHDZ6huflCLt61qtWDWAMawsgOWgCe5+v+JYN4vT6AtAbIpSCIGuEcRoaG8TrXRcwzCeZ7u2gcm4QIZn0QEudC5wGYdYxUt2PyjRSAyWsc6mvW6hW0CnpXzAdgQ6NZAdByJsgKBQAQGCp+oQFQ8ePdhUIBxWJxXfrJYKQHNRUMMK9kuwhzc3O4eO+eeLQqpbLfFfMaAgAnhdDccrSpAZYtAUApxujIEN725lfg3//7bvT19cOyLJhg44/ZCTo1y40yI79qmT4/5un2jTx0+XLtmAOAlUJXVx6ve83LdFkrdsWMTZkUTpikjFyAJUxHFr6oDc918cDDT6KyMB8xzVFpmBpAGGZHiCgVZgoRphSlQkCQTvXxEhFklMolXnyseY28NMtlIjXaCzsHO7aPoFDIQ6nWCMDzXS2AdJvybMl4HiaSLyK89S2vxRte/wrU6vXGIFrzOxdWTZcaMNtCgq15a9vNtWyTMjUncwEguSu2ISesO3vp3YDkE2ZSypiyQMO0JO331gTFryoJIXylVLrFOCtEpAHmaG5jbQ3Qb8r45XKFN2qCOCJpSUsxi/n5SlOP8rXB0WpoUgC8HgGwQYqI7AMHj1G9zk2Ea20wgI5iPhqs8dMk6/26GrOyiqharc16nlffvn3EaWtAc/BcBw8+/Ojc+PjkKaMvuWkNME+YnZ17+rnnDxweHOi9iCM+gzbLOXLrG8piu46JIO5/4NHD9XpwbEPfEqjJ01R0XecDYcz8lvhFMSEkwJIBaU76AZA+SsST5oHOmidqvsHQieYk6ya/ucysT/pPon6yLum/5tXN4uV45ocAKHEeWFdQYcpKKb4wNnH/xMTUjwGYArBofLHfuhfjeO+eXbu+/ms+946JyWl16NAxWmV80AZGImW+M0z/dxWUNbvJNQzaqNK4ro13v/NN9C//doP4gz/+mxKAWWNQb2hHzL/s0n1XDfT3W3fe8wRAVmLytCE56HM3LL/E+bRqb+niFZ9rSvD0nnHzd2Y+M3vs5Ckwc/S9QQMABgGc0cvS9fU8migi0uUDey7asfvQ4eMQlouuzs74Am0sL4TZQhHHTpzG8FB/qdRR3DU9M/sUgJqmphfjhJaa9H1v9/Ztw/1PPn0QtWoNs7OzWBltATiOixMnzuCS/bvtgTBwCQXg6s5fNLdTmnkuSAKww0WrS7q6St7E5Ax6egbWWHpow3EcnDs/EX8v6fDw4J4XDhzxASwAEOvSAF2Wu2j3jssAQqVSQ6+ULTQ/W3+pQy/dYHauEi9Sbhsd2gGgqB2xBEDN+gCpy3rCCGjP5OQ0FHO0idGeDTexHRkoxvjEJHZsGxkE0APgnO5TYc6x1hKAIKJtu3dtGzp1+hyKxY5oB6wpDWibIRenTp3D6OhQl5RyMAiC5w0TRCtpACW+rM8aGR7cPzTYX3ziqQPw/dzmm4gtYOaYGZ7n4cTJs3jVK67xw++l23723AVtURLhaFIDEuGnG47+S33fo8mpWZQ6XUxPT6ONtfeD7dgRj6NQyNHQ0MCOUAA2ANmMBpAhhGJo//eFy6lgFsjn823zsw6cnhyHUhw74kcfe8ozfMCKAkjOAYb27tk5cubsBTiuF3v35h1w2xwpRmgxZrBj+/AIgA4AY7pfsZYGyIi6uzv3hHOArocefQbMwNTUVFsDmjdDIUmcDgfv6OhwH4CIjie0gJfVAF3J2bVjWzgB65TnL0ygs7NrnROwthZUqzWcPHUOV1y2txiuJA/Pzc0/spYJEob5ye/Zs/NiZka5XEVPr4821gfP9xAN3nA9yB4c6Nt+cG5eLvPGDCdNUKNS7769u3ZGX1NfqwfR+s//C/PDnH5TRq+kxun8fBkdxQJGhgd2Hjx01BBAwgQl7L/I5fyd4RJE3+TUdNjIPKSc0AJg/T+JxNNnK5Uly3VuterJOpzh3hmts5DWKExy3/j6l2J4eAAjI4PbjG9UF6YQrMaBWRCufu4fHRn0Bvp7USzkUS4vmD9as+IP3cSHWL5eXGTUizk6v/IDubodM7+++qs+ENbsg2RxLlE/5pr1Ew8H25aFnp6u2CFvGx0e0JHQGdMEJTWgkTo7d4xe3NfXg1KpiLe86TWg9ONtc3eKuVX3yatei5m1AIa6pRT9QaCeb2YporBzx7Zd0chnRkgKbaSLsMLZcK6/rzecU53n5TSAEkw/HPkFy86BpJtq3LRBIK6jq7NDhPOqPi0A0+cuuxq6EMas5bGJaVQWFWgTbrqVTdEX9f4ZvmfB9/3Il5bW2hNmnZbDB4omLpw/h7n5RYCa+3E0ToY4Jp9XiGSYk/WMvHmlxDEn7yN5ffN4mTzrM808G+0leJqVbG81njbfjFJHHr4no4lZ3fjRT06GoWxQ+eFHn7rTz/1Tv5QSrBQpZrAmfVMaQJyNOXHOPESjztJfs54uxFJWl5q1zYuZRzD+RzAPEufoJFln2TyMv8axwUheJPGRVSMFEHe4ZckqMy8cOXLin5f7xVUyyPypwhKAHp13IjJCVW4iHGAz30Q5mmx3I+dwyvbWE36x0ck1AFW9Gb+g06qmWkMQVuLEQEtuVldyjR/vFJqyjxNb6+mTA6DV96HMvkx0ej2pAZZxoBL5QJ8oDKIW3jxnfA5twj1xUhPMjjd9wGpOOEgIgUzaxFG8RZ4FTgxos9N1atajtd+S1LytA26p8NKbQE7/0+BtpNakNtpoo4022vgf7lRPtKCE39oAAAAASUVORK5CYII=\"),u.resource.add(\"hterm/concat/date\",\"text/plain\",\"Thu, 14 Nov 2019 09:34:08 +0000\"),u.resource.add(\"hterm/changelog/version\",\"text/plain\",\"1.86\"),u.resource.add(\"hterm/changelog/date\",\"text/plain\",\"2019-08-06\"),u.resource.add(\"hterm/git/HEAD\",\"text/plain\",\"907ca35fa514dd9bf7b41a82d07d46b412ffa91a\"),t.lib=u,t.hterm=f}).call(this,r(2),r(3))},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var i=r(0),o=r(4),n=r(8),s=r(9),a=r(10),l=document.getElementById(\"terminal\");if(null!==l){var c;if(console.log(window.location.hash),\"#hterm\"==window.location.hash){console.log(\"before lib.init\");i.lib.init((function(){console.log(\"lib.init\")})),console.log(\"after lib.init\"),c=new n.Hterm(l)}else c=new o.Xterm(l);console.log(\"after new Xterm/Hterm\");var h=(\"https:\"==window.location.protocol?\"wss://\":\"ws://\")+window.location.host+window.location.pathname+\"ws\",u=new a.ConnectionFactory(h,s.protocols),f=new s.WebTTY(c,u).open();window.addEventListener(\"unload\",(function(){f(),c.close()}))}},function(e){function t(){throw new Error(\"setTimeout has not been defined\")}function r(){throw new Error(\"clearTimeout has not been defined\")}function i(e){if(l===setTimeout)return setTimeout(e,0);if((l===t||!l)&&setTimeout)return l=setTimeout,setTimeout(e,0);try{return l(e,0)}catch(t){try{return l.call(null,e,0)}catch(t){return l.call(this,e,0)}}}function o(){d&&u&&(d=!1,u.length?f=u.concat(f):p=-1,f.length&&n())}function n(){if(!d){var e=i(o);d=!0;for(var t=f.length;t;){for(u=f,f=[];++p<t;)u&&u[p].run();p=-1,t=f.length}u=null,d=!1,function(e){if(c===clearTimeout)return clearTimeout(e);if((c===r||!c)&&clearTimeout)return c=clearTimeout,clearTimeout(e);try{c(e)}catch(t){try{return c.call(null,e)}catch(t){return c.call(this,e)}}}(e)}}function s(e,t){this.fun=e,this.array=t}function a(){}\n/*!\n * process (https://npmjs.com/package/process)\n * @license MIT\n * @version 0.11.10\n * ==process/LICENSE==\n * (The MIT License)\n * \n * Copyright (c) 2013 Roman Shtylman <shtylman@gmail.com>\n * \n * Permission is hereby granted, free of charge, to any person obtaining\n * a copy of this software and associated documentation files (the\n * 'Software'), to deal in the Software without restriction, including\n * without limitation the rights to use, copy, modify, merge, publish,\n * distribute, sublicense, and/or sell copies of the Software, and to\n * permit persons to whom the Software is furnished to do so, subject to\n * the following conditions:\n * \n * The above copyright notice and this permission notice shall be\n * included in all copies or substantial portions of the Software.\n * \n * THE SOFTWARE IS PROVIDED 'AS IS', WITHOUT WARRANTY OF ANY KIND,\n * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.\n * IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY\n * CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT,\n * TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE\n * SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n */var l,c,h=e.exports={};!function(){try{l=\"function\"==typeof setTimeout?setTimeout:t}catch(e){l=t}try{c=\"function\"==typeof clearTimeout?clearTimeout:r}catch(e){c=r}}();var u,f=[],d=!1,p=-1;h.nextTick=function(e){var t=Array(arguments.length-1);if(1<arguments.length)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];f.push(new s(e,t)),1!==f.length||d||i(n)},s.prototype.run=function(){this.fun.apply(null,this.array)},h.title=\"browser\",h.browser=!0,h.env={},h.argv=[],h.version=\"\",h.versions={},h.on=a,h.addListener=a,h.once=a,h.off=a,h.removeListener=a,h.removeAllListeners=a,h.emit=a,h.prependListener=a,h.prependOnceListener=a,h.listeners=function(){return[]},h.binding=function(){throw new Error(\"process.binding is not supported\")},h.cwd=function(){return\"/\"},h.chdir=function(){throw new Error(\"process.chdir is not supported\")},h.umask=function(){return 0}},function(e){\n/*!\n * webpack (https://npmjs.com/package/webpack)\n * @license MIT\n * @version 4.41.2\n * ==webpack/LICENSE==\n * Copyright JS Foundation and other contributors\n * \n * Permission is hereby granted, free of charge, to any person obtaining\n * a copy of this software and associated documentation files (the\n * 'Software'), to deal in the Software without restriction, including\n * without limitation the rights to use, copy, modify, merge, publish,\n * distribute, sublicense, and/or sell copies of the Software, and to\n * permit persons to whom the Software is furnished to do so, subject to\n * the following conditions:\n * \n * The above copyright notice and this permission notice shall be\n * included in all copies or substantial portions of the Software.\n * \n * THE SOFTWARE IS PROVIDED 'AS IS', WITHOUT WARRANTY OF ANY KIND,\n * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.\n * IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY\n * CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT,\n * TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE\n * SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n */\nvar t=function(){return this}();try{t=t||new Function(\"return this\")()}catch(e){\"object\"==typeof window&&(t=window)}e.exports=t},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var i=r(5),o=r(6),n=r(7),s=function(){function e(e){var t=this;this.elem=e,this.term=new i.Terminal({fontFamily:\"DejaVu Sans Mono, Everson Mono, FreeMono, Menlo, Terminal, monospace, Apple Symbols\"}),this.fit=new o.FitAddon,this.message=e.ownerDocument.createElement(\"div\"),this.message.className=\"xterm-overlay\",this.messageTimeout=2e3,this.resizeListener=function(){console.log(\"resize:\",t.info()),t.fit.fit(),t.term.scrollToBottom(),t.showMessage(t.term.cols+\"x\"+t.term.rows,t.messageTimeout)},this.term.open(e),this.resizeListener(),window.addEventListener(\"resize\",(function(){t.resizeListener()})),this.decoder=new n.UTF8Decoder,this.term.loadAddon(this.fit),this.fit.fit()}return e.prototype.info=function(){return{columns:this.term.cols,rows:this.term.rows}},e.prototype.output=function(e){this.term.write(this.decoder.decode(e))},e.prototype.showMessage=function(e,t){var r=this;this.message.textContent=e,this.elem.appendChild(this.message),this.messageTimer&&clearTimeout(this.messageTimer),0<t&&(this.messageTimer=setTimeout((function(){r.elem.removeChild(r.message)}),t))},e.prototype.removeMessage=function(){this.message.parentNode==this.elem&&this.elem.removeChild(this.message)},e.prototype.onInput=function(e){this.term.onData((function(t){e(t)}))},e.prototype.onResize=function(e){this.term.onResize((function(t){console.log(\"onresize\"),e(t.cols,t.rows)}))},e.prototype.deactivate=function(){this.term.blur()},e.prototype.reset=function(){this.removeMessage(),this.term.clear()},e.prototype.close=function(){window.removeEventListener(\"resize\",this.resizeListener),this.term.dispose()},e}();t.Xterm=s},function(e){var t,r=Math.abs,i=Math.max,o=Math.floor,n=Math.ceil,s=Math.round,a=Math.min,l=String.fromCharCode;window,t=function(){return function(e){function t(i){if(r[i])return r[i].exports;var o=r[i]={i:i,l:!1,exports:{}};return e[i].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var r={};return t.m=e,t.c=r,t.d=function(e,r,i){t.o(e,r)||Object.defineProperty(e,r,{enumerable:!0,get:i})},t.r=function(e){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(e,\"__esModule\",{value:!0})},t.t=function(e,r){if(1&r&&(e=t(e)),8&r)return e;if(4&r&&\"object\"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(t.r(i),Object.defineProperty(i,\"default\",{enumerable:!0,value:e}),2&r&&\"string\"!=typeof e)for(var o in e)t.d(i,o,function(t){return e[t]}.bind(null,o));return i},t.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,\"a\",r),r},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p=\"\",t(t.s=32)}([function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var i=r(13);t.IBufferService=i.createDecorator(\"BufferService\"),t.ICoreMouseService=i.createDecorator(\"CoreMouseService\"),t.ICoreService=i.createDecorator(\"CoreService\"),t.IDirtyRowService=i.createDecorator(\"DirtyRowService\"),t.IInstantiationService=i.createDecorator(\"InstantiationService\"),t.ILogService=i.createDecorator(\"LogService\"),t.IOptionsService=i.createDecorator(\"OptionsService\")},function(e,t){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var r=function(){function e(){this._listeners=[]}return Object.defineProperty(e.prototype,\"event\",{get:function(){var e=this;return this._event||(this._event=function(t){return e._listeners.push(t),{dispose:function(){for(var r=0;r<e._listeners.length;r++)if(e._listeners[r]===t)return void e._listeners.splice(r,1)}}}),this._event},enumerable:!0,configurable:!0}),e.prototype.fire=function(e){for(var t=[],r=0;r<this._listeners.length;r++)t.push(this._listeners[r]);for(r=0;r<t.length;r++)t[r].call(void 0,e)},e}();t.EventEmitter=r},function(e,t){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var r=function(){function e(){this._disposables=[],this._isDisposed=!1}return e.prototype.dispose=function(){this._isDisposed=!0,this._disposables.forEach((function(e){return e.dispose()})),this._disposables.length=0},e.prototype.register=function(e){this._disposables.push(e)},e.prototype.unregister=function(e){var t=this._disposables.indexOf(e);-1!==t&&this._disposables.splice(t,1)},e}();t.Disposable=r},function(e,t){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),t.DEFAULT_COLOR=256,t.DEFAULT_ATTR=256|t.DEFAULT_COLOR<<9,t.CHAR_DATA_ATTR_INDEX=0,t.CHAR_DATA_CHAR_INDEX=1,t.CHAR_DATA_WIDTH_INDEX=2,t.CHAR_DATA_CODE_INDEX=3,t.NULL_CELL_CHAR=\"\",t.NULL_CELL_WIDTH=1,t.NULL_CELL_CODE=0,t.WHITESPACE_CELL_CHAR=\" \",t.WHITESPACE_CELL_WIDTH=1,t.WHITESPACE_CELL_CODE=32},function(e,t,r){\"use strict\";var i,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,\"__esModule\",{value:!0});var n=r(8),s=r(3),a=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.content=0,t.fg=0,t.bg=0,t.combinedData=\"\",t}return o(t,e),t.fromCharData=function(e){var r=new t;return r.setFromCharData(e),r},t.prototype.isCombined=function(){return 2097152&this.content},t.prototype.getWidth=function(){return this.content>>22},t.prototype.getChars=function(){return 2097152&this.content?this.combinedData:2097151&this.content?n.stringFromCodePoint(2097151&this.content):\"\"},t.prototype.getCode=function(){return this.isCombined()?this.combinedData.charCodeAt(this.combinedData.length-1):2097151&this.content},t.prototype.setFromCharData=function(e){this.fg=e[s.CHAR_DATA_ATTR_INDEX],this.bg=0;var t=!1;if(2<e[s.CHAR_DATA_CHAR_INDEX].length)t=!0;else if(2===e[s.CHAR_DATA_CHAR_INDEX].length){var r=e[s.CHAR_DATA_CHAR_INDEX].charCodeAt(0);if(55296<=r&&56319>=r){var i=e[s.CHAR_DATA_CHAR_INDEX].charCodeAt(1);56320<=i&&57343>=i?this.content=1024*(r-55296)+i-56320+65536|e[s.CHAR_DATA_WIDTH_INDEX]<<22:t=!0}else t=!0}else this.content=e[s.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|e[s.CHAR_DATA_WIDTH_INDEX]<<22;t&&(this.combinedData=e[s.CHAR_DATA_CHAR_INDEX],this.content=2097152|e[s.CHAR_DATA_WIDTH_INDEX]<<22)},t.prototype.getAsCharData=function(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]},t}(r(6).AttributeData);t.CellData=a},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var i=r(13);t.ICharSizeService=i.createDecorator(\"CharSizeService\"),t.IMouseService=i.createDecorator(\"MouseService\"),t.IRenderService=i.createDecorator(\"RenderService\"),t.ISelectionService=i.createDecorator(\"SelectionService\"),t.ISoundService=i.createDecorator(\"SoundService\")},function(e,t){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var r=function(){function e(){this.fg=0,this.bg=0}return e.toColorRGB=function(e){return[255&e>>>16,255&e>>>8,255&e]},e.fromColorRGB=function(e){return(255&e[0])<<16|(255&e[1])<<8|255&e[2]},e.prototype.clone=function(){var t=new e;return t.fg=this.fg,t.bg=this.bg,t},e.prototype.isInverse=function(){return 67108864&this.fg},e.prototype.isBold=function(){return 134217728&this.fg},e.prototype.isUnderline=function(){return 268435456&this.fg},e.prototype.isBlink=function(){return 536870912&this.fg},e.prototype.isInvisible=function(){return 1073741824&this.fg},e.prototype.isItalic=function(){return 67108864&this.bg},e.prototype.isDim=function(){return 134217728&this.bg},e.prototype.getFgColorMode=function(){return 50331648&this.fg},e.prototype.getBgColorMode=function(){return 50331648&this.bg},e.prototype.isFgRGB=function(){return 50331648==(50331648&this.fg)},e.prototype.isBgRGB=function(){return 50331648==(50331648&this.bg)},e.prototype.isFgPalette=function(){return 16777216==(50331648&this.fg)||33554432==(50331648&this.fg)},e.prototype.isBgPalette=function(){return 16777216==(50331648&this.bg)||33554432==(50331648&this.bg)},e.prototype.isFgDefault=function(){return 0==(50331648&this.fg)},e.prototype.isBgDefault=function(){return 0==(50331648&this.bg)},e.prototype.getFgColor=function(){switch(50331648&this.fg){case 16777216:case 33554432:return 255&this.fg;case 50331648:return 16777215&this.fg;default:return-1}},e.prototype.getBgColor=function(){switch(50331648&this.bg){case 16777216:case 33554432:return 255&this.bg;case 50331648:return 16777215&this.bg;default:return-1}},e}();t.AttributeData=r},function(e,t){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),t.addDisposableDomListener=function(e,t,r,i){return e.addEventListener(t,r,i),{dispose:function(){r&&e.removeEventListener(t,r,i)}}}},function(e,t){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),t.stringFromCodePoint=function(e){return 65535<e?l(55296+((e-=65536)>>10))+l(e%1024+56320):l(e)},t.utf32ToString=function(e,t,r){void 0===t&&(t=0),void 0===r&&(r=e.length);for(var i,o=\"\",n=t;n<r;++n)65535<(i=e[n])?o+=l(55296+((i-=65536)>>10))+l(i%1024+56320):o+=l(i);return o};var r=function(){function e(){this._interim=0}return e.prototype.clear=function(){this._interim=0},e.prototype.decode=function(e,t){var r=e.length;if(!r)return 0;var i=0,o=0;this._interim&&(56320<=(a=e.charCodeAt(o++))&&57343>=a?t[i++]=1024*(this._interim-55296)+a-56320+65536:(t[i++]=this._interim,t[i++]=a),this._interim=0);for(var n,s=o;s<r;++s)if(55296<=(n=e.charCodeAt(s))&&56319>=n){if(++s>=r)return this._interim=n,i;var a;56320<=(a=e.charCodeAt(s))&&57343>=a?t[i++]=1024*(n-55296)+a-56320+65536:(t[i++]=n,t[i++]=a)}else t[i++]=n;return i},e}();t.StringToUtf32=r;var i=function(){function e(){this.interim=new Uint8Array(3)}return e.prototype.clear=function(){this.interim.fill(0)},e.prototype.decode=function(e,t){var r=e.length;if(!r)return 0;var i,o,n,s,a=0,l=0,c=0;if(this.interim[0]){var h=!1,u=this.interim[0];u&=192==(224&u)?31:224==(240&u)?15:7;for(var f=0,d=void 0;(d=63&this.interim[++f])&&4>f;)u<<=6,u|=d;for(var p=192==(224&this.interim[0])?2:224==(240&this.interim[0])?3:4,_=p-f;c<_;){if(c>=r)return 0;if(128!=(192&(d=e[c++]))){c--,h=!0;break}this.interim[f++]=d,u<<=6,u|=63&d}h||(2==p?128>u?c--:t[a++]=u:3==p?2048>u||55296<=u&&57343>=u||(t[a++]=u):65536>u||1114111<u||(t[a++]=u)),this.interim.fill(0)}for(var g=c;g<r;){for(;!(!(g<r-4)||128&(i=e[g])||128&(o=e[g+1])||128&(n=e[g+2])||128&(s=e[g+3]));)t[a++]=i,t[a++]=o,t[a++]=n,t[a++]=s,g+=4;if(128>(i=e[g++]))t[a++]=i;else if(192==(224&i)){if(g>=r)return this.interim[0]=i,a;if(128!=(192&(o=e[g++]))){g--;continue}if(128>(l=(31&i)<<6|63&o)){g--;continue}t[a++]=l}else if(224==(240&i)){if(g>=r)return this.interim[0]=i,a;if(128!=(192&(o=e[g++]))){g--;continue}if(g>=r)return this.interim[0]=i,this.interim[1]=o,a;if(128!=(192&(n=e[g++]))){g--;continue}if(2048>(l=(15&i)<<12|(63&o)<<6|63&n)||55296<=l&&57343>=l)continue;t[a++]=l}else if(240==(248&i)){if(g>=r)return this.interim[0]=i,a;if(128!=(192&(o=e[g++]))){g--;continue}if(g>=r)return this.interim[0]=i,this.interim[1]=o,a;if(128!=(192&(n=e[g++]))){g--;continue}if(g>=r)return this.interim[0]=i,this.interim[1]=o,this.interim[2]=n,a;if(128!=(192&(s=e[g++]))){g--;continue}if(65536>(l=(7&i)<<18|(63&o)<<12|(63&n)<<6|63&s)||1114111<l)continue;t[a++]=l}}return a},e}();t.Utf8ToUtf32=i},function(e,t){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),t.INVERTED_DEFAULT_COLOR=257,t.DIM_OPACITY=.5,t.CHAR_ATLAS_CELL_SPACING=1},function(e,t){\"use strict\";function r(e,t){return 0<=e.indexOf(t)}Object.defineProperty(t,\"__esModule\",{value:!0});var i=\"undefined\"==typeof navigator,o=i?\"node\":navigator.userAgent,n=i?\"node\":navigator.platform;t.isFirefox=!!~o.indexOf(\"Firefox\"),t.isSafari=/^((?!chrome|android).)*safari/i.test(o),t.isMac=r([\"Macintosh\",\"MacIntel\",\"MacPPC\",\"Mac68K\"],n),t.isIpad=\"iPad\"===n,t.isIphone=\"iPhone\"===n,t.isWindows=r([\"Windows\",\"Win16\",\"Win32\",\"WinCE\"],n),t.isLinux=0<=n.indexOf(\"Linux\")},function(e,t){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),function(e){e.NUL=\"\\0\",e.SOH=\"\x01\",e.STX=\"\x02\",e.ETX=\"\x03\",e.EOT=\"\x04\",e.ENQ=\"\x05\",e.ACK=\"\x06\",e.BEL=\"\a\",e.BS=\"\\b\",e.HT=\"\\t\",e.LF=\"\\n\",e.VT=\"\\v\",e.FF=\"\\f\",e.CR=\"\\r\",e.SO=\"\x0e\",e.SI=\"\x0f\",e.DLE=\"\x10\",e.DC1=\"\x11\",e.DC2=\"\x12\",e.DC3=\"\x13\",e.DC4=\"\x14\",e.NAK=\"\x15\",e.SYN=\"\x16\",e.ETB=\"\x17\",e.CAN=\"\x18\",e.EM=\"\x19\",e.SUB=\"\x1a\",e.ESC=\"\x1b\",e.FS=\"\x1c\",e.GS=\"\x1d\",e.RS=\"\x1e\",e.US=\"\x1f\",e.SP=\" \",e.DEL=\"\u007f\"}(t.C0||(t.C0={})),function(e){e.PAD=\"\u0080\",e.HOP=\"\u0081\",e.BPH=\"\u0082\",e.NBH=\"\u0083\",e.IND=\"\u0084\",e.NEL=\"\u0085\",e.SSA=\"\u0086\",e.ESA=\"\u0087\",e.HTS=\"\u0088\",e.HTJ=\"\u0089\",e.VTS=\"\u008a\",e.PLD=\"\u008b\",e.PLU=\"\u008c\",e.RI=\"\u008d\",e.SS2=\"\u008e\",e.SS3=\"\u008f\",e.DCS=\"\u0090\",e.PU1=\"\u0091\",e.PU2=\"\u0092\",e.STS=\"\u0093\",e.CCH=\"\u0094\",e.MW=\"\u0095\",e.SPA=\"\u0096\",e.EPA=\"\u0097\",e.SOS=\"\u0098\",e.SGCI=\"\u0099\",e.SCI=\"\u009a\",e.CSI=\"\u009b\",e.ST=\"\u009c\",e.OSC=\"\u009d\",e.PM=\"\u009e\",e.APC=\"\u009f\"}(t.C1||(t.C1={}))},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var i=r(3),o=r(9),n=r(23),s=r(6),a=r(26),l=function(){function e(e,t,r,i,o,n,s,a){this._container=e,this._alpha=i,this._colors=o,this._rendererId=n,this._bufferService=s,this._optionsService=a,this._scaledCharWidth=0,this._scaledCharHeight=0,this._scaledCellWidth=0,this._scaledCellHeight=0,this._scaledCharLeft=0,this._scaledCharTop=0,this._currentGlyphIdentifier={chars:\"\",code:0,bg:0,fg:0,bold:!1,dim:!1,italic:!1},this._canvas=document.createElement(\"canvas\"),this._canvas.classList.add(\"xterm-\"+t+\"-layer\"),this._canvas.style.zIndex=r.toString(),this._initCanvas(),this._container.appendChild(this._canvas)}return e.prototype.dispose=function(){this._container.removeChild(this._canvas),this._charAtlas&&this._charAtlas.dispose()},e.prototype._initCanvas=function(){this._ctx=a.throwIfFalsy(this._canvas.getContext(\"2d\",{alpha:this._alpha})),this._alpha||this._clearAll()},e.prototype.onOptionsChanged=function(){},e.prototype.onBlur=function(){},e.prototype.onFocus=function(){},e.prototype.onCursorMove=function(){},e.prototype.onGridChanged=function(){},e.prototype.onSelectionChanged=function(e,t,r){void 0===r&&(r=!1)},e.prototype.setColors=function(e){this._refreshCharAtlas(e)},e.prototype._setTransparency=function(e){if(e!==this._alpha){var t=this._canvas;this._alpha=e,this._canvas=this._canvas.cloneNode(),this._initCanvas(),this._container.replaceChild(this._canvas,t),this._refreshCharAtlas(this._colors),this.onGridChanged(0,this._bufferService.rows-1)}},e.prototype._refreshCharAtlas=function(e){0>=this._scaledCharWidth&&0>=this._scaledCharHeight||(this._charAtlas=n.acquireCharAtlas(this._optionsService.options,this._rendererId,e,this._scaledCharWidth,this._scaledCharHeight),this._charAtlas.warmUp())},e.prototype.resize=function(e){this._scaledCellWidth=e.scaledCellWidth,this._scaledCellHeight=e.scaledCellHeight,this._scaledCharWidth=e.scaledCharWidth,this._scaledCharHeight=e.scaledCharHeight,this._scaledCharLeft=e.scaledCharLeft,this._scaledCharTop=e.scaledCharTop,this._canvas.width=e.scaledCanvasWidth,this._canvas.height=e.scaledCanvasHeight,this._canvas.style.width=e.canvasWidth+\"px\",this._canvas.style.height=e.canvasHeight+\"px\",this._alpha||this._clearAll(),this._refreshCharAtlas(this._colors)},e.prototype._fillCells=function(e,t,r,i){this._ctx.fillRect(e*this._scaledCellWidth,t*this._scaledCellHeight,r*this._scaledCellWidth,i*this._scaledCellHeight)},e.prototype._fillBottomLineAtCells=function(e,t,r){void 0===r&&(r=1),this._ctx.fillRect(e*this._scaledCellWidth,(t+1)*this._scaledCellHeight-window.devicePixelRatio-1,r*this._scaledCellWidth,window.devicePixelRatio)},e.prototype._fillLeftLineAtCell=function(e,t){this._ctx.fillRect(e*this._scaledCellWidth,t*this._scaledCellHeight,window.devicePixelRatio,this._scaledCellHeight)},e.prototype._strokeRectAtCell=function(e,t,r,i){this._ctx.lineWidth=window.devicePixelRatio,this._ctx.strokeRect(e*this._scaledCellWidth+window.devicePixelRatio/2,t*this._scaledCellHeight+window.devicePixelRatio/2,r*this._scaledCellWidth-window.devicePixelRatio,i*this._scaledCellHeight-window.devicePixelRatio)},e.prototype._clearAll=function(){this._alpha?this._ctx.clearRect(0,0,this._canvas.width,this._canvas.height):(this._ctx.fillStyle=this._colors.background.css,this._ctx.fillRect(0,0,this._canvas.width,this._canvas.height))},e.prototype._clearCells=function(e,t,r,i){this._alpha?this._ctx.clearRect(e*this._scaledCellWidth,t*this._scaledCellHeight,r*this._scaledCellWidth,i*this._scaledCellHeight):(this._ctx.fillStyle=this._colors.background.css,this._ctx.fillRect(e*this._scaledCellWidth,t*this._scaledCellHeight,r*this._scaledCellWidth,i*this._scaledCellHeight))},e.prototype._fillCharTrueColor=function(e,t,r){this._ctx.font=this._getFont(!1,!1),this._ctx.textBaseline=\"middle\",this._clipRow(r),this._ctx.fillText(e.getChars(),t*this._scaledCellWidth+this._scaledCharLeft,r*this._scaledCellHeight+this._scaledCharTop+this._scaledCharHeight/2)},e.prototype._drawChars=function(e,t,r){var n,s;e.isFgRGB()||e.isBgRGB()?this._drawUncachedChars(e,t,r):(e.isInverse()?(n=e.isBgDefault()?o.INVERTED_DEFAULT_COLOR:e.getBgColor(),s=e.isFgDefault()?o.INVERTED_DEFAULT_COLOR:e.getFgColor()):(s=e.isBgDefault()?i.DEFAULT_COLOR:e.getBgColor(),n=e.isFgDefault()?i.DEFAULT_COLOR:e.getFgColor()),n+=this._optionsService.options.drawBoldTextInBrightColors&&e.isBold()&&8>n&&n!==o.INVERTED_DEFAULT_COLOR?8:0,this._currentGlyphIdentifier.chars=e.getChars()||i.WHITESPACE_CELL_CHAR,this._currentGlyphIdentifier.code=e.getCode()||i.WHITESPACE_CELL_CODE,this._currentGlyphIdentifier.bg=s,this._currentGlyphIdentifier.fg=n,this._currentGlyphIdentifier.bold=!!e.isBold(),this._currentGlyphIdentifier.dim=!!e.isDim(),this._currentGlyphIdentifier.italic=!!e.isItalic(),this._charAtlas&&this._charAtlas.draw(this._ctx,this._currentGlyphIdentifier,t*this._scaledCellWidth+this._scaledCharLeft,r*this._scaledCellHeight+this._scaledCharTop)||this._drawUncachedChars(e,t,r))},e.prototype._drawUncachedChars=function(e,t,r){if(this._ctx.save(),this._ctx.font=this._getFont(!!e.isBold(),!!e.isItalic()),this._ctx.textBaseline=\"middle\",e.isInverse())this._ctx.fillStyle=e.isBgDefault()?this._colors.background.css:e.isBgRGB()?\"rgb(\"+s.AttributeData.toColorRGB(e.getBgColor()).join(\",\")+\")\":this._colors.ansi[e.getBgColor()].css;else if(e.isFgDefault())this._ctx.fillStyle=this._colors.foreground.css;else if(e.isFgRGB())this._ctx.fillStyle=\"rgb(\"+s.AttributeData.toColorRGB(e.getFgColor()).join(\",\")+\")\";else{var i=e.getFgColor();this._optionsService.options.drawBoldTextInBrightColors&&e.isBold()&&8>i&&(i+=8),this._ctx.fillStyle=this._colors.ansi[i].css}this._clipRow(r),e.isDim()&&(this._ctx.globalAlpha=o.DIM_OPACITY),this._ctx.fillText(e.getChars(),t*this._scaledCellWidth+this._scaledCharLeft,r*this._scaledCellHeight+this._scaledCharTop+this._scaledCharHeight/2),this._ctx.restore()},e.prototype._clipRow=function(e){this._ctx.beginPath(),this._ctx.rect(0,e*this._scaledCellHeight,this._bufferService.cols*this._scaledCellWidth,this._scaledCellHeight),this._ctx.clip()},e.prototype._getFont=function(e,t){return(t?\"italic\":\"\")+\" \"+(e?this._optionsService.options.fontWeightBold:this._optionsService.options.fontWeight)+\" \"+this._optionsService.options.fontSize*window.devicePixelRatio+\"px \"+this._optionsService.options.fontFamily},e}();t.BaseRenderLayer=l},function(e,t){\"use strict\";function r(e,t,r){t[i]===t?t[o].push({id:e,index:r}):(t[o]=[{id:e,index:r}],t[i]=t)}Object.defineProperty(t,\"__esModule\",{value:!0});var i=\"di$target\",o=\"di$dependencies\";t.serviceRegistry=new Map,t.getServiceDependencies=function(e){return e[o]||[]},t.createDecorator=function(e){if(t.serviceRegistry.has(e))return t.serviceRegistry.get(e);var i=function(e,t,o){if(3!==arguments.length)throw new Error(\"@IServiceName-decorator can only be used to decorate a parameter\");r(i,e,o)};return i.toString=function(){return e},t.serviceRegistry.set(e,i),i}},function(e,t){\"use strict\";function r(e,t,r,i){if(void 0===r&&(r=0),void 0===i&&(i=e.length),r>=e.length)return e;r=(e.length+r)%e.length,i=i>=e.length?e.length:(e.length+i)%e.length;for(var o=r;o<i;++o)e[o]=t;return e}Object.defineProperty(t,\"__esModule\",{value:!0}),t.fill=function(e,t,i,o){return e.fill?e.fill(t,i,o):r(e,t,i,o)},t.fillFallback=r,t.concat=function(e,t){var r=new e.constructor(e.length+t.length);return r.set(e),r.set(t,e.length),r}},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var i=r(8),o=r(3),n=r(4),s=r(6),l=3;t.DEFAULT_ATTR_DATA=Object.freeze(new s.AttributeData);var c=function(){function e(e,t,r){void 0===r&&(r=!1),this.isWrapped=r,this._combined={},this._data=new Uint32Array(e*l);for(var i=t||n.CellData.fromCharData([0,o.NULL_CELL_CHAR,o.NULL_CELL_WIDTH,o.NULL_CELL_CODE]),s=0;s<e;++s)this.setCell(s,i);this.length=e}return e.prototype.get=function(e){var t=this._data[e*l+0],r=2097151&t;return[this._data[e*l+1],2097152&t?this._combined[e]:r?i.stringFromCodePoint(r):\"\",t>>22,2097152&t?this._combined[e].charCodeAt(this._combined[e].length-1):r]},e.prototype.set=function(e,t){this._data[e*l+1]=t[o.CHAR_DATA_ATTR_INDEX],1<t[o.CHAR_DATA_CHAR_INDEX].length?(this._combined[e]=t[1],this._data[e*l+0]=2097152|e|t[o.CHAR_DATA_WIDTH_INDEX]<<22):this._data[e*l+0]=t[o.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|t[o.CHAR_DATA_WIDTH_INDEX]<<22},e.prototype.getWidth=function(e){return this._data[e*l+0]>>22},e.prototype.hasWidth=function(e){return 12582912&this._data[e*l+0]},e.prototype.getFg=function(e){return this._data[e*l+1]},e.prototype.getBg=function(e){return this._data[e*l+2]},e.prototype.hasContent=function(e){return 4194303&this._data[e*l+0]},e.prototype.getCodePoint=function(e){var t=this._data[e*l+0];return 2097152&t?this._combined[e].charCodeAt(this._combined[e].length-1):2097151&t},e.prototype.isCombined=function(e){return 2097152&this._data[e*l+0]},e.prototype.getString=function(e){var t=this._data[e*l+0];return 2097152&t?this._combined[e]:2097151&t?i.stringFromCodePoint(2097151&t):\"\"},e.prototype.loadCell=function(e,t){var r=e*l;return t.content=this._data[r+0],t.fg=this._data[r+1],t.bg=this._data[r+2],2097152&t.content&&(t.combinedData=this._combined[e]),t},e.prototype.setCell=function(e,t){2097152&t.content&&(this._combined[e]=t.combinedData),this._data[e*l+0]=t.content,this._data[e*l+1]=t.fg,this._data[e*l+2]=t.bg},e.prototype.setCellFromCodePoint=function(e,t,r,i,o){this._data[e*l+0]=t|r<<22,this._data[e*l+1]=i,this._data[e*l+2]=o},e.prototype.addCodepointToCell=function(e,t){var r=this._data[e*l+0];2097152&r?this._combined[e]+=i.stringFromCodePoint(t):(2097151&r?(this._combined[e]=i.stringFromCodePoint(2097151&r)+i.stringFromCodePoint(t),r&=-2097152,r|=2097152):r=4194304|t,this._data[e*l+0]=r)},e.prototype.insertCells=function(e,t,r){if(e%=this.length,t<this.length-e){for(var i=new n.CellData,o=this.length-e-t-1;0<=o;--o)this.setCell(e+t+o,this.loadCell(e+o,i));for(o=0;o<t;++o)this.setCell(e+o,r)}else for(o=e;o<this.length;++o)this.setCell(o,r)},e.prototype.deleteCells=function(e,t,r){if(e%=this.length,t<this.length-e){for(var i=new n.CellData,o=0;o<this.length-e-t;++o)this.setCell(e+o,this.loadCell(e+t+o,i));for(o=this.length-t;o<this.length;++o)this.setCell(o,r)}else for(o=e;o<this.length;++o)this.setCell(o,r)},e.prototype.replaceCells=function(e,t,r){for(;e<t&&e<this.length;)this.setCell(e++,r)},e.prototype.resize=function(e,t){if(e!==this.length){if(e>this.length){var r=new Uint32Array(e*l);this.length&&(e*l<this._data.length?r.set(this._data.subarray(0,e*l)):r.set(this._data)),this._data=r;for(var i=this.length;i<e;++i)this.setCell(i,t)}else if(e){(r=new Uint32Array(e*l)).set(this._data.subarray(0,e*l)),this._data=r;var o=Object.keys(this._combined);for(i=0;i<o.length;i++){var n=parseInt(o[i],10);n>=e&&delete this._combined[n]}}else this._data=new Uint32Array(0),this._combined={};this.length=e}},e.prototype.fill=function(e){this._combined={};for(var t=0;t<this.length;++t)this.setCell(t,e)},e.prototype.copyFrom=function(e){for(var t in this.length===e.length?this._data.set(e._data):this._data=new Uint32Array(e._data),this.length=e.length,this._combined={},e._combined)this._combined[t]=e._combined[t];this.isWrapped=e.isWrapped},e.prototype.clone=function(){var t=new e(0);for(var r in t._data=new Uint32Array(this._data),t.length=this.length,this._combined)t._combined[r]=this._combined[r];return t.isWrapped=this.isWrapped,t},e.prototype.getTrimmedLength=function(){for(var e=this.length-1;0<=e;--e)if(4194303&this._data[e*l+0])return e+(this._data[e*l+0]>>22);return 0},e.prototype.copyCellsFrom=function(e,t,r,i,o){var n=e._data;if(o)for(var s=i-1;0<=s;s--)for(var a=0;a<l;a++)this._data[(r+s)*l+a]=n[(t+s)*l+a];else for(s=0;s<i;s++)for(a=0;a<l;a++)this._data[(r+s)*l+a]=n[(t+s)*l+a];var c=Object.keys(e._combined);for(a=0;a<c.length;a++){var h=parseInt(c[a],10);h>=t&&(this._combined[h-t+r]=e._combined[h])}},e.prototype.translateToString=function(e,t,r){void 0===e&&(e=!1),void 0===t&&(t=0),void 0===r&&(r=this.length),e&&(r=a(r,this.getTrimmedLength()));for(var n=\"\";t<r;){var s=this._data[t*l+0],c=2097151&s;n+=2097152&s?this._combined[t]:c?i.stringFromCodePoint(c):o.WHITESPACE_CELL_CHAR,t+=s>>22||1}return n},e}();t.BufferLine=c},function(e,t){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),t.promptLabel=\"Terminal input\",t.tooMuchOutput=\"Too much output to announce, navigate to rows manually to read\"},function(e,t){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),t.CHARSETS={},t.DEFAULT_CHARSET=t.CHARSETS.B,t.CHARSETS[0]={\"`\":\"◆\",a:\"▒\",b:\"\\t\",c:\"\\f\",d:\"\\r\",e:\"\\n\",f:\"°\",g:\"±\",h:\"␤\",i:\"\\v\",j:\"┘\",k:\"┐\",l:\"┌\",m:\"└\",n:\"┼\",o:\"⎺\",p:\"⎻\",q:\"─\",r:\"⎼\",s:\"⎽\",t:\"├\",u:\"┤\",v:\"┴\",w:\"┬\",x:\"│\",y:\"≤\",z:\"≥\",\"{\":\"π\",\"|\":\"≠\",\"}\":\"£\",\"~\":\"·\"},t.CHARSETS.A={\"#\":\"£\"},t.CHARSETS.B=null,t.CHARSETS[4]={\"#\":\"£\",\"@\":\"¾\",\"[\":\"ij\",\"\\\\\":\"½\",\"]\":\"|\",\"{\":\"¨\",\"|\":\"f\",\"}\":\"¼\",\"~\":\"´\"},t.CHARSETS.C=t.CHARSETS[5]={\"[\":\"Ä\",\"\\\\\":\"Ö\",\"]\":\"Å\",\"^\":\"Ü\",\"`\":\"é\",\"{\":\"ä\",\"|\":\"ö\",\"}\":\"å\",\"~\":\"ü\"},t.CHARSETS.R={\"#\":\"£\",\"@\":\"à\",\"[\":\"°\",\"\\\\\":\"ç\",\"]\":\"§\",\"{\":\"é\",\"|\":\"ù\",\"}\":\"è\",\"~\":\"¨\"},t.CHARSETS.Q={\"@\":\"à\",\"[\":\"â\",\"\\\\\":\"ç\",\"]\":\"ê\",\"^\":\"î\",\"`\":\"ô\",\"{\":\"é\",\"|\":\"ù\",\"}\":\"è\",\"~\":\"û\"},t.CHARSETS.K={\"@\":\"§\",\"[\":\"Ä\",\"\\\\\":\"Ö\",\"]\":\"Ü\",\"{\":\"ä\",\"|\":\"ö\",\"}\":\"ü\",\"~\":\"ß\"},t.CHARSETS.Y={\"#\":\"£\",\"@\":\"§\",\"[\":\"°\",\"\\\\\":\"ç\",\"]\":\"é\",\"`\":\"ù\",\"{\":\"à\",\"|\":\"ò\",\"}\":\"è\",\"~\":\"ì\"},t.CHARSETS.E=t.CHARSETS[6]={\"@\":\"Ä\",\"[\":\"Æ\",\"\\\\\":\"Ø\",\"]\":\"Å\",\"^\":\"Ü\",\"`\":\"ä\",\"{\":\"æ\",\"|\":\"ø\",\"}\":\"å\",\"~\":\"ü\"},t.CHARSETS.Z={\"#\":\"£\",\"@\":\"§\",\"[\":\"¡\",\"\\\\\":\"Ñ\",\"]\":\"¿\",\"{\":\"°\",\"|\":\"ñ\",\"}\":\"ç\"},t.CHARSETS.H=t.CHARSETS[7]={\"@\":\"É\",\"[\":\"Ä\",\"\\\\\":\"Ö\",\"]\":\"Å\",\"^\":\"Ü\",\"`\":\"é\",\"{\":\"ä\",\"|\":\"ö\",\"}\":\"å\",\"~\":\"ü\"},t.CHARSETS[\"=\"]={\"#\":\"ù\",\"@\":\"à\",\"[\":\"é\",\"\\\\\":\"ç\",\"]\":\"ê\",\"^\":\"î\",_:\"è\",\"`\":\"ô\",\"{\":\"ä\",\"|\":\"ö\",\"}\":\"ü\",\"~\":\"û\"}},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var i=r(14);t.wcwidth=function(e){var t=[[768,879],[1155,1158],[1160,1161],[1425,1469],[1471,1471],[1473,1474],[1476,1477],[1479,1479],[1536,1539],[1552,1557],[1611,1630],[1648,1648],[1750,1764],[1767,1768],[1770,1773],[1807,1807],[1809,1809],[1840,1866],[1958,1968],[2027,2035],[2305,2306],[2364,2364],[2369,2376],[2381,2381],[2385,2388],[2402,2403],[2433,2433],[2492,2492],[2497,2500],[2509,2509],[2530,2531],[2561,2562],[2620,2620],[2625,2626],[2631,2632],[2635,2637],[2672,2673],[2689,2690],[2748,2748],[2753,2757],[2759,2760],[2765,2765],[2786,2787],[2817,2817],[2876,2876],[2879,2879],[2881,2883],[2893,2893],[2902,2902],[2946,2946],[3008,3008],[3021,3021],[3134,3136],[3142,3144],[3146,3149],[3157,3158],[3260,3260],[3263,3263],[3270,3270],[3276,3277],[3298,3299],[3393,3395],[3405,3405],[3530,3530],[3538,3540],[3542,3542],[3633,3633],[3636,3642],[3655,3662],[3761,3761],[3764,3769],[3771,3772],[3784,3789],[3864,3865],[3893,3893],[3895,3895],[3897,3897],[3953,3966],[3968,3972],[3974,3975],[3984,3991],[3993,4028],[4038,4038],[4141,4144],[4146,4146],[4150,4151],[4153,4153],[4184,4185],[4448,4607],[4959,4959],[5906,5908],[5938,5940],[5970,5971],[6002,6003],[6068,6069],[6071,6077],[6086,6086],[6089,6099],[6109,6109],[6155,6157],[6313,6313],[6432,6434],[6439,6440],[6450,6450],[6457,6459],[6679,6680],[6912,6915],[6964,6964],[6966,6970],[6972,6972],[6978,6978],[7019,7027],[7616,7626],[7678,7679],[8203,8207],[8234,8238],[8288,8291],[8298,8303],[8400,8431],[12330,12335],[12441,12442],[43014,43014],[43019,43019],[43045,43046],[64286,64286],[65024,65039],[65056,65059],[65279,65279],[65529,65531]],r=[[68097,68099],[68101,68102],[68108,68111],[68152,68154],[68159,68159],[119143,119145],[119155,119170],[119173,119179],[119210,119213],[119362,119364],[917505,917505],[917536,917631],[917760,917999]],o=0|e.control,n=new Uint8Array(65536);i.fill(n,1),n[0]=e.nul,i.fill(n,e.control,1,32),i.fill(n,e.control,127,160),i.fill(n,2,4352,4448),n[9001]=2,n[9002]=2,i.fill(n,2,11904,42192),n[12351]=1,i.fill(n,2,44032,55204),i.fill(n,2,63744,64256),i.fill(n,2,65040,65050),i.fill(n,2,65072,65136),i.fill(n,2,65280,65377),i.fill(n,2,65504,65511);for(var s=0;s<t.length;++s)i.fill(n,0,t[s][0],t[s][1]+1);return function(e){return 32>e?0|o:127>e?1:65536>e?n[e]:function(e,t){var r,i=0,o=t.length-1;if(e<t[0][0]||e>t[o][1])return!1;for(;o>=i;)if(e>t[r=i+o>>1][1])i=r+1;else{if(!(e<t[r][0]))return!0;o=r-1}return!1}(t=e,r)?0:131072<=t&&196605>=t||196608<=t&&262141>=t?2:1;var t}}({nul:0,control:0}),t.getStringCellWidth=function(e){for(var r,i=0,o=e.length,n=0;n<o;++n){if(55296<=(r=e.charCodeAt(n))&&56319>=r){if(++n>=o)return i+t.wcwidth(r);var s=e.charCodeAt(n);56320<=s&&57343>=s?r=1024*(r-55296)+s-56320+65536:i+=t.wcwidth(s)}i+=t.wcwidth(r)}return i}},function(e,t){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var r=function(){function e(e,t){if(void 0===e&&(e=32),void 0===t&&(t=32),this.maxLength=e,this.maxSubParamsLength=t,t>256)throw new Error(\"maxSubParamsLength must not be greater than 256\");this.params=new Int32Array(e),this.length=0,this._subParams=new Int32Array(t),this._subParamsLength=0,this._subParamsIdx=new Uint16Array(e),this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}return e.fromArray=function(t){var r=new e;if(!t.length)return r;for(var i,o=t[0]instanceof Array?1:0;o<t.length;++o)if((i=t[o])instanceof Array)for(var n=0;n<i.length;++n)r.addSubParam(i[n]);else r.addParam(i);return r},e.prototype.clone=function(){var t=new e(this.maxLength,this.maxSubParamsLength);return t.params.set(this.params),t.length=this.length,t._subParams.set(this._subParams),t._subParamsLength=this._subParamsLength,t._subParamsIdx.set(this._subParamsIdx),t._rejectDigits=this._rejectDigits,t._rejectSubDigits=this._rejectSubDigits,t._digitIsSub=this._digitIsSub,t},e.prototype.toArray=function(){for(var e=[],t=0;t<this.length;++t){e.push(this.params[t]);var r=this._subParamsIdx[t]>>8,i=255&this._subParamsIdx[t];0<i-r&&e.push(Array.prototype.slice.call(this._subParams,r,i))}return e},e.prototype.reset=function(){this.length=0,this._subParamsLength=0,this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1},e.prototype.addParam=function(e){if(this._digitIsSub=!1,this.length>=this.maxLength)this._rejectDigits=!0;else{if(-1>e)throw new Error(\"values lesser than -1 are not allowed\");this._subParamsIdx[this.length]=this._subParamsLength<<8|this._subParamsLength,this.params[this.length++]=2147483647<e?2147483647:e}},e.prototype.addSubParam=function(e){if(this._digitIsSub=!0,this.length)if(this._rejectDigits||this._subParamsLength>=this.maxSubParamsLength)this._rejectSubDigits=!0;else{if(-1>e)throw new Error(\"values lesser than -1 are not allowed\");this._subParams[this._subParamsLength++]=2147483647<e?2147483647:e,this._subParamsIdx[this.length-1]++}},e.prototype.hasSubParams=function(e){return 0<(255&this._subParamsIdx[e])-(this._subParamsIdx[e]>>8)},e.prototype.getSubParams=function(e){var t=this._subParamsIdx[e]>>8,r=255&this._subParamsIdx[e];return 0<r-t?this._subParams.subarray(t,r):null},e.prototype.getSubParamsAll=function(){for(var e={},t=0;t<this.length;++t){var r=this._subParamsIdx[t]>>8,i=255&this._subParamsIdx[t];0<i-r&&(e[t]=this._subParams.slice(r,i))}return e},e.prototype.addDigit=function(e){var t;if(!(this._rejectDigits||!(t=this._digitIsSub?this._subParamsLength:this.length)||this._digitIsSub&&this._rejectSubDigits)){var r=this._digitIsSub?this._subParams:this.params,i=r[t-1];r[t-1]=~i?a(10*i+e,2147483647):e}},e}();t.Params=r},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var i=r(21),o=r(8),n=function(){function e(){this._state=0,this._id=-1,this._handlers=Object.create(null),this._handlerFb=function(){}}return e.prototype.addHandler=function(e,t){void 0===this._handlers[e]&&(this._handlers[e]=[]);var r=this._handlers[e];return r.push(t),{dispose:function(){var e=r.indexOf(t);-1!==e&&r.splice(e,1)}}},e.prototype.setHandler=function(e,t){this._handlers[e]=[t]},e.prototype.clearHandler=function(e){this._handlers[e]&&delete this._handlers[e]},e.prototype.setHandlerFallback=function(e){this._handlerFb=e},e.prototype.dispose=function(){this._handlers=Object.create(null),this._handlerFb=function(){}},e.prototype.reset=function(){2===this._state&&this.end(!1),this._id=-1,this._state=0},e.prototype._start=function(){var e=this._handlers[this._id];if(e)for(var t=e.length-1;0<=t;t--)e[t].start();else this._handlerFb(this._id,\"START\")},e.prototype._put=function(e,t,r){var i=this._handlers[this._id];if(i)for(var n=i.length-1;0<=n;n--)i[n].put(e,t,r);else this._handlerFb(this._id,\"PUT\",o.utf32ToString(e,t,r))},e.prototype._end=function(e){var t=this._handlers[this._id];if(t){for(var r=t.length-1;0<=r&&!1===t[r].end(e);r--);for(r--;0<=r;r--)t[r].end(!1)}else this._handlerFb(this._id,\"END\",e)},e.prototype.start=function(){this.reset(),this._id=-1,this._state=1},e.prototype.put=function(e,t,r){if(3!==this._state){if(1===this._state)for(;t<r;){var i=e[t++];if(59===i){this._state=2,this._start();break}if(48>i||57<i)return void(this._state=3);-1===this._id&&(this._id=0),this._id=10*this._id+i-48}2===this._state&&0<r-t&&this._put(e,t,r)}},e.prototype.end=function(e){0!==this._state&&(3!==this._state&&(1===this._state&&this._start(),this._end(e)),this._id=-1,this._state=0)},e}();t.OscParser=n;var s=function(){function e(e){this._handler=e,this._data=\"\",this._hitLimit=!1}return e.prototype.start=function(){this._data=\"\",this._hitLimit=!1},e.prototype.put=function(e,t,r){this._hitLimit||(this._data+=o.utf32ToString(e,t,r),this._data.length>i.PAYLOAD_LIMIT&&(this._data=\"\",this._hitLimit=!0))},e.prototype.end=function(e){var t;return this._hitLimit?t=!1:e&&(t=this._handler(this._data)),this._data=\"\",this._hitLimit=!1,t},e}();t.OscHandler=s},function(e,t){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),t.PAYLOAD_LIMIT=1e7},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var i=r(8),o=r(19),n=r(21),s=[],a=function(){function e(){this._handlers=Object.create(null),this._active=s,this._ident=0,this._handlerFb=function(){}}return e.prototype.dispose=function(){this._handlers=Object.create(null),this._handlerFb=function(){}},e.prototype.addHandler=function(e,t){void 0===this._handlers[e]&&(this._handlers[e]=[]);var r=this._handlers[e];return r.push(t),{dispose:function(){var e=r.indexOf(t);-1!==e&&r.splice(e,1)}}},e.prototype.setHandler=function(e,t){this._handlers[e]=[t]},e.prototype.clearHandler=function(e){this._handlers[e]&&delete this._handlers[e]},e.prototype.setHandlerFallback=function(e){this._handlerFb=e},e.prototype.reset=function(){this._active.length&&this.unhook(!1),this._active=s,this._ident=0},e.prototype.hook=function(e,t){if(this.reset(),this._ident=e,this._active=this._handlers[e]||s,this._active.length)for(var r=this._active.length-1;0<=r;r--)this._active[r].hook(t);else this._handlerFb(this._ident,\"HOOK\",t)},e.prototype.put=function(e,t,r){if(this._active.length)for(var o=this._active.length-1;0<=o;o--)this._active[o].put(e,t,r);else this._handlerFb(this._ident,\"PUT\",i.utf32ToString(e,t,r))},e.prototype.unhook=function(e){if(this._active.length){for(var t=this._active.length-1;0<=t&&!1===this._active[t].unhook(e);t--);for(t--;0<=t;t--)this._active[t].unhook(!1)}else this._handlerFb(this._ident,\"UNHOOK\",e);this._active=s,this._ident=0},e}();t.DcsParser=a;var l=function(){function e(e){this._handler=e,this._data=\"\",this._hitLimit=!1}return e.prototype.hook=function(e){this._params=e.clone(),this._data=\"\",this._hitLimit=!1},e.prototype.put=function(e,t,r){this._hitLimit||(this._data+=i.utf32ToString(e,t,r),this._data.length>n.PAYLOAD_LIMIT&&(this._data=\"\",this._hitLimit=!0))},e.prototype.unhook=function(e){var t;return this._hitLimit?t=!1:e&&(t=this._handler(this._data,this._params?this._params:new o.Params)),this._params=void 0,this._data=\"\",this._hitLimit=!1,t},e}();t.DcsHandler=l},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var i=r(24),o=r(42),n=[];t.acquireCharAtlas=function(e,t,r,s,a){for(var l,c=i.generateConfig(s,a,e,r),h=0;h<n.length;h++)if(0<=(l=(u=n[h]).ownedBy.indexOf(t))){if(i.configEquals(u.config,c))return u.atlas;1===u.ownedBy.length?(u.atlas.dispose(),n.splice(h,1)):u.ownedBy.splice(l,1);break}for(h=0;h<n.length;h++){var u=n[h];if(i.configEquals(u.config,c))return u.ownedBy.push(t),u.atlas}var f={atlas:new o.DynamicCharAtlas(document,c),config:c,ownedBy:[t]};return n.push(f),f.atlas},t.removeTerminalFromCache=function(e){for(var t,r=0;r<n.length;r++)if(-1!==(t=n[r].ownedBy.indexOf(e))){1===n[r].ownedBy.length?(n[r].atlas.dispose(),n.splice(r,1)):n[r].ownedBy.splice(t,1);break}}},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var i=r(3);t.generateConfig=function(e,t,r,i){var o={foreground:i.foreground,background:i.background,cursor:void 0,cursorAccent:void 0,selection:void 0,ansi:i.ansi.slice(0,16)};return{devicePixelRatio:window.devicePixelRatio,scaledCharWidth:e,scaledCharHeight:t,fontFamily:r.fontFamily,fontSize:r.fontSize,fontWeight:r.fontWeight,fontWeightBold:r.fontWeightBold,allowTransparency:r.allowTransparency,colors:o}},t.configEquals=function(e,t){for(var r=0;r<e.colors.ansi.length;r++)if(e.colors.ansi[r].rgba!==t.colors.ansi[r].rgba)return!1;return e.devicePixelRatio===t.devicePixelRatio&&e.fontFamily===t.fontFamily&&e.fontSize===t.fontSize&&e.fontWeight===t.fontWeight&&e.fontWeightBold===t.fontWeightBold&&e.allowTransparency===t.allowTransparency&&e.scaledCharWidth===t.scaledCharWidth&&e.scaledCharHeight===t.scaledCharHeight&&e.colors.foreground===t.colors.foreground&&e.colors.background===t.colors.background},t.is256Color=function(e){return e<i.DEFAULT_COLOR}},function(e,t){\"use strict\";function r(e){return{css:e,rgba:255|parseInt(e.slice(1),16)<<8}}function i(e){var t=e.toString(16);return 2>t.length?\"0\"+t:t}Object.defineProperty(t,\"__esModule\",{value:!0});var o=r(\"#ffffff\"),n=r(\"#000000\"),s=r(\"#ffffff\"),a=r(\"#000000\"),l={css:\"rgba(255, 255, 255, 0.3)\",rgba:4294967159};t.DEFAULT_ANSI_COLORS=function(){for(var e=[r(\"#2e3436\"),r(\"#cc0000\"),r(\"#4e9a06\"),r(\"#c4a000\"),r(\"#3465a4\"),r(\"#75507b\"),r(\"#06989a\"),r(\"#d3d7cf\"),r(\"#555753\"),r(\"#ef2929\"),r(\"#8ae234\"),r(\"#fce94f\"),r(\"#729fcf\"),r(\"#ad7fa8\"),r(\"#34e2e2\"),r(\"#eeeeec\")],t=[0,95,135,175,215,255],o=0;216>o;o++){var n=t[0|o/36%6],s=t[0|o/6%6],a=t[o%6];e.push({css:\"#\"+i(n)+i(s)+i(a),rgba:(n<<24|s<<16|a<<8|255)>>>0})}for(o=0;24>o;o++){var l=8+10*o,c=i(l);e.push({css:\"#\"+c+c+c,rgba:(l<<24|l<<16|l<<8|255)>>>0})}return e}();var c=function(){function e(e,r){this.allowTransparency=r;var i=e.createElement(\"canvas\");i.width=1,i.height=1;var c=i.getContext(\"2d\");if(!c)throw new Error(\"Could not get rendering context\");this._ctx=c,this._ctx.globalCompositeOperation=\"copy\",this._litmusColor=this._ctx.createLinearGradient(0,0,1,1),this.colors={foreground:o,background:n,cursor:s,cursorAccent:a,selection:l,ansi:t.DEFAULT_ANSI_COLORS.slice()}}return e.prototype.setTheme=function(e){void 0===e&&(e={}),this.colors.foreground=this._parseColor(e.foreground,o),this.colors.background=this._parseColor(e.background,n),this.colors.cursor=this._parseColor(e.cursor,s,!0),this.colors.cursorAccent=this._parseColor(e.cursorAccent,a,!0),this.colors.selection=this._parseColor(e.selection,l,!0),this.colors.ansi[0]=this._parseColor(e.black,t.DEFAULT_ANSI_COLORS[0]),this.colors.ansi[1]=this._parseColor(e.red,t.DEFAULT_ANSI_COLORS[1]),this.colors.ansi[2]=this._parseColor(e.green,t.DEFAULT_ANSI_COLORS[2]),this.colors.ansi[3]=this._parseColor(e.yellow,t.DEFAULT_ANSI_COLORS[3]),this.colors.ansi[4]=this._parseColor(e.blue,t.DEFAULT_ANSI_COLORS[4]),this.colors.ansi[5]=this._parseColor(e.magenta,t.DEFAULT_ANSI_COLORS[5]),this.colors.ansi[6]=this._parseColor(e.cyan,t.DEFAULT_ANSI_COLORS[6]),this.colors.ansi[7]=this._parseColor(e.white,t.DEFAULT_ANSI_COLORS[7]),this.colors.ansi[8]=this._parseColor(e.brightBlack,t.DEFAULT_ANSI_COLORS[8]),this.colors.ansi[9]=this._parseColor(e.brightRed,t.DEFAULT_ANSI_COLORS[9]),this.colors.ansi[10]=this._parseColor(e.brightGreen,t.DEFAULT_ANSI_COLORS[10]),this.colors.ansi[11]=this._parseColor(e.brightYellow,t.DEFAULT_ANSI_COLORS[11]),this.colors.ansi[12]=this._parseColor(e.brightBlue,t.DEFAULT_ANSI_COLORS[12]),this.colors.ansi[13]=this._parseColor(e.brightMagenta,t.DEFAULT_ANSI_COLORS[13]),this.colors.ansi[14]=this._parseColor(e.brightCyan,t.DEFAULT_ANSI_COLORS[14]),this.colors.ansi[15]=this._parseColor(e.brightWhite,t.DEFAULT_ANSI_COLORS[15])},e.prototype._parseColor=function(e,t,r){if(void 0===r&&(r=this.allowTransparency),void 0===e)return t;if(this._ctx.fillStyle=this._litmusColor,this._ctx.fillStyle=e,\"string\"!=typeof this._ctx.fillStyle)return console.warn(\"Color: \"+e+\" is invalid using fallback \"+t.css),t;this._ctx.fillRect(0,0,1,1);var i=this._ctx.getImageData(0,0,1,1).data;return r||255===i[3]?{css:e,rgba:(i[0]<<24|i[1]<<16|i[2]<<8|i[3])>>>0}:(console.warn(\"Color: \"+e+\" is using transparency, but allowTransparency is false. Using fallback \"+t.css+\".\"),t)},e}();t.ColorManager=c},function(e,t){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),t.throwIfFalsy=function(e){if(!e)throw new Error(\"value must not be falsy\");return e}},function(e,t,r){\"use strict\";var o,n=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,\"__esModule\",{value:!0});var s=r(6),l=r(3),c=r(4),h=function(e){function t(t,r,i){var o=e.call(this)||this;return o.content=0,o.combinedData=\"\",o.fg=t.fg,o.bg=t.bg,o.combinedData=r,o._width=i,o}return n(t,e),t.prototype.isCombined=function(){return 2097152},t.prototype.getWidth=function(){return this._width},t.prototype.getChars=function(){return this.combinedData},t.prototype.getCode=function(){return 2097151},t.prototype.setFromCharData=function(){throw new Error(\"not implemented\")},t.prototype.getAsCharData=function(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]},t}(s.AttributeData);t.JoinedCellData=h;var u=function(){function e(e){this._bufferService=e,this._characterJoiners=[],this._nextCharacterJoinerId=0,this._workCell=new c.CellData}return e.prototype.registerCharacterJoiner=function(e){var t={id:this._nextCharacterJoinerId++,handler:e};return this._characterJoiners.push(t),t.id},e.prototype.deregisterCharacterJoiner=function(e){for(var t=0;t<this._characterJoiners.length;t++)if(this._characterJoiners[t].id===e)return this._characterJoiners.splice(t,1),!0;return!1},e.prototype.getJoinedCharacters=function(e){if(0===this._characterJoiners.length)return[];var t=this._bufferService.buffer.lines.get(e);if(!t||0===t.length)return[];for(var r=[],i=t.translateToString(!0),o=0,n=0,s=0,a=t.getFg(0),c=t.getBg(0),h=0;h<t.getTrimmedLength();h++)if(t.loadCell(h,this._workCell),0!==this._workCell.getWidth()){if(this._workCell.fg!==a||this._workCell.bg!==c){if(1<h-o)for(var u=this._getJoinedRanges(i,s,n,t,o),f=0;f<u.length;f++)r.push(u[f]);o=h,s=n,a=this._workCell.fg,c=this._workCell.bg}n+=this._workCell.getChars().length||l.WHITESPACE_CELL_CHAR.length}if(1<this._bufferService.cols-o)for(u=this._getJoinedRanges(i,s,n,t,o),f=0;f<u.length;f++)r.push(u[f]);return r},e.prototype._getJoinedRanges=function(t,r,i,o,n){for(var s=t.substring(r,i),a=this._characterJoiners[0].handler(s),l=1;l<this._characterJoiners.length;l++)for(var c=this._characterJoiners[l].handler(s),h=0;h<c.length;h++)e._mergeRanges(a,c[h]);return this._stringRangesToCellRanges(a,o,n),a},e.prototype._stringRangesToCellRanges=function(e,t,r){var i=0,o=!1,n=0,s=e[i];if(s){for(var a=r;a<this._bufferService.cols;a++){var c=t.getWidth(a),h=t.getString(a).length||l.WHITESPACE_CELL_CHAR.length;if(0!==c){if(!o&&s[0]<=n&&(s[0]=a,o=!0),s[1]<=n){if(s[1]=a,!(s=e[++i]))break;s[0]<=n?(s[0]=a,o=!0):o=!1}n+=h}}s&&(s[1]=this._bufferService.cols)}},e._mergeRanges=function(e,t){for(var r,o=!1,n=0;n<e.length;n++)if(r=e[n],o){if(t[1]<=r[0])return e[n-1][1]=t[1],e;if(t[1]<=r[1])return e[n-1][1]=i(t[1],r[1]),e.splice(n,1),e;e.splice(n,1),n--}else{if(t[1]<=r[0])return e.splice(n,0,t),e;if(t[1]<=r[1])return r[0]=a(t[0],r[0]),e;t[0]<r[1]&&(r[0]=a(t[0],r[0]),o=!0)}return o?e[e.length-1][1]=t[1]:e.push(t),e},e}();t.CharacterJoinerRegistry=u},function(e,t){\"use strict\";function r(e,t){var r=t.getBoundingClientRect();return[e.clientX-r.left,e.clientY-r.top]}Object.defineProperty(t,\"__esModule\",{value:!0}),t.getCoordsRelativeToElement=r,t.getCoords=function(e,t,o,s,l,c,h,u){if(l){var f=r(e,t);if(f)return f[0]=n((f[0]+(u?c/2:0))/c),f[1]=n(f[1]/h),f[0]=a(i(f[0],1),o+(u?1:0)),f[1]=a(i(f[1],1),s),f}},t.getRawByteCoords=function(e){if(e)return{x:e[0]+32,y:e[1]+32}}},function(e,t){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var r=function(){function e(e){this._renderCallback=e}return e.prototype.dispose=function(){this._animationFrame&&(window.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)},e.prototype.refresh=function(e,t,r){var o=this;this._rowCount=r,e=void 0===e?0:e,t=void 0===t?this._rowCount-1:t,this._rowStart=void 0===this._rowStart?e:a(this._rowStart,e),this._rowEnd=void 0===this._rowEnd?t:i(this._rowEnd,t),this._animationFrame||(this._animationFrame=window.requestAnimationFrame((function(){return o._innerRefresh()})))},e.prototype._innerRefresh=function(){void 0!==this._rowStart&&void 0!==this._rowEnd&&void 0!==this._rowCount&&(this._rowStart=i(this._rowStart,0),this._rowEnd=a(this._rowEnd,this._rowCount-1),this._renderCallback(this._rowStart,this._rowEnd),this._rowStart=void 0,this._rowEnd=void 0,this._animationFrame=void 0)},e}();t.RenderDebouncer=r},function(e,t,r){\"use strict\";var i,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,\"__esModule\",{value:!0});var n=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._currentDevicePixelRatio=window.devicePixelRatio,t}return o(t,e),t.prototype.setListener=function(e){var t=this;this._listener&&this.clearListener(),this._listener=e,this._outerListener=function(){t._listener&&(t._listener(window.devicePixelRatio,t._currentDevicePixelRatio),t._updateDpr())},this._updateDpr()},t.prototype.dispose=function(){e.prototype.dispose.call(this),this.clearListener()},t.prototype._updateDpr=function(){this._resolutionMediaMatchList&&this._outerListener&&(this._resolutionMediaMatchList.removeListener(this._outerListener),this._currentDevicePixelRatio=window.devicePixelRatio,this._resolutionMediaMatchList=window.matchMedia(\"screen and (resolution: \"+window.devicePixelRatio+\"dppx)\"),this._resolutionMediaMatchList.addListener(this._outerListener))},t.prototype.clearListener=function(){this._resolutionMediaMatchList&&this._listener&&this._outerListener&&(this._resolutionMediaMatchList.removeListener(this._outerListener),this._resolutionMediaMatchList=void 0,this._listener=void 0,this._outerListener=void 0)},t}(r(2).Disposable);t.ScreenDprMonitor=n},function(e,t){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),t.clone=function e(t,r){if(void 0===r&&(r=5),\"object\"!=typeof t)return t;var i=Array.isArray(t)?[]:{};for(var o in t)i[o]=1>=r?t[o]:t[o]?e(t[o],r-1):t[o];return i}},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var i=r(33),o=r(16),n=r(75),s=function(){function e(e){this._core=new i.Terminal(e),this._addonManager=new n.AddonManager}return Object.defineProperty(e.prototype,\"onCursorMove\",{get:function(){return this._core.onCursorMove},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"onLineFeed\",{get:function(){return this._core.onLineFeed},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"onSelectionChange\",{get:function(){return this._core.onSelectionChange},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"onData\",{get:function(){return this._core.onData},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"onTitleChange\",{get:function(){return this._core.onTitleChange},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"onScroll\",{get:function(){return this._core.onScroll},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"onKey\",{get:function(){return this._core.onKey},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"onRender\",{get:function(){return this._core.onRender},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"onResize\",{get:function(){return this._core.onResize},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"element\",{get:function(){return this._core.element},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"parser\",{get:function(){return this._parser||(this._parser=new h(this._core)),this._parser},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"textarea\",{get:function(){return this._core.textarea},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"rows\",{get:function(){return this._core.rows},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"cols\",{get:function(){return this._core.cols},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"buffer\",{get:function(){return new a(this._core.buffer)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"markers\",{get:function(){return this._core.markers},enumerable:!0,configurable:!0}),e.prototype.blur=function(){this._core.blur()},e.prototype.focus=function(){this._core.focus()},e.prototype.resize=function(e,t){this._verifyIntegers(e,t),this._core.resize(e,t)},e.prototype.open=function(e){this._core.open(e)},e.prototype.attachCustomKeyEventHandler=function(e){this._core.attachCustomKeyEventHandler(e)},e.prototype.registerLinkMatcher=function(e,t,r){return this._core.registerLinkMatcher(e,t,r)},e.prototype.deregisterLinkMatcher=function(e){this._core.deregisterLinkMatcher(e)},e.prototype.registerCharacterJoiner=function(e){return this._core.registerCharacterJoiner(e)},e.prototype.deregisterCharacterJoiner=function(e){this._core.deregisterCharacterJoiner(e)},e.prototype.addMarker=function(e){return this._verifyIntegers(e),this._core.addMarker(e)},e.prototype.hasSelection=function(){return this._core.hasSelection()},e.prototype.select=function(e,t,r){this._verifyIntegers(e,t,r),this._core.select(e,t,r)},e.prototype.getSelection=function(){return this._core.getSelection()},e.prototype.getSelectionPosition=function(){return this._core.getSelectionPosition()},e.prototype.clearSelection=function(){this._core.clearSelection()},e.prototype.selectAll=function(){this._core.selectAll()},e.prototype.selectLines=function(e,t){this._verifyIntegers(e,t),this._core.selectLines(e,t)},e.prototype.dispose=function(){this._addonManager.dispose(),this._core.dispose()},e.prototype.scrollLines=function(e){this._verifyIntegers(e),this._core.scrollLines(e)},e.prototype.scrollPages=function(e){this._verifyIntegers(e),this._core.scrollPages(e)},e.prototype.scrollToTop=function(){this._core.scrollToTop()},e.prototype.scrollToBottom=function(){this._core.scrollToBottom()},e.prototype.scrollToLine=function(e){this._verifyIntegers(e),this._core.scrollToLine(e)},e.prototype.clear=function(){this._core.clear()},e.prototype.write=function(e,t){this._core.write(e,t)},e.prototype.writeUtf8=function(e,t){this._core.write(e,t)},e.prototype.writeln=function(e,t){this._core.write(e),this._core.write(\"\\r\\n\",t)},e.prototype.paste=function(e){this._core.paste(e)},e.prototype.getOption=function(e){return this._core.optionsService.getOption(e)},e.prototype.setOption=function(e,t){this._core.optionsService.setOption(e,t)},e.prototype.refresh=function(e,t){this._verifyIntegers(e,t),this._core.refresh(e,t)},e.prototype.reset=function(){this._core.reset()},e.prototype.loadAddon=function(e){return this._addonManager.loadAddon(this,e)},Object.defineProperty(e,\"strings\",{get:function(){return o},enumerable:!0,configurable:!0}),e.prototype._verifyIntegers=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];e.forEach((function(e){if(e===1/0||isNaN(e)||0!=e%1)throw new Error(\"This API only accepts integers\")}))},e}();t.Terminal=s;var a=function(){function e(e){this._buffer=e}return Object.defineProperty(e.prototype,\"cursorY\",{get:function(){return this._buffer.y},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"cursorX\",{get:function(){return this._buffer.x},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"viewportY\",{get:function(){return this._buffer.ydisp},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"baseY\",{get:function(){return this._buffer.ybase},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"length\",{get:function(){return this._buffer.lines.length},enumerable:!0,configurable:!0}),e.prototype.getLine=function(e){var t=this._buffer.lines.get(e);if(t)return new l(t)},e}(),l=function(){function e(e){this._line=e}return Object.defineProperty(e.prototype,\"isWrapped\",{get:function(){return this._line.isWrapped},enumerable:!0,configurable:!0}),e.prototype.getCell=function(e){if(!(0>e||e>=this._line.length))return new c(this._line,e)},e.prototype.translateToString=function(e,t,r){return this._line.translateToString(e,t,r)},e}(),c=function(){function e(e,t){this._line=e,this._x=t}return Object.defineProperty(e.prototype,\"char\",{get:function(){return this._line.getString(this._x)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"width\",{get:function(){return this._line.getWidth(this._x)},enumerable:!0,configurable:!0}),e}(),h=function(){function e(e){this._core=e}return e.prototype.addCsiHandler=function(e,t){return this._core.addCsiHandler(e,(function(e){return t(e.toArray())}))},e.prototype.addDcsHandler=function(e,t){return this._core.addDcsHandler(e,(function(e,r){return t(e,r.toArray())}))},e.prototype.addEscHandler=function(e,t){return this._core.addEscHandler(e,t)},e.prototype.addOscHandler=function(e,t){return this._core.addOscHandler(e,t)},e}()},function(e,t,o){\"use strict\";var n,s=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,\"__esModule\",{value:!0});var c=o(34),h=o(35),u=o(36),f=o(11),d=o(37),p=o(39),_=o(48),g=o(49),b=o(10),y=o(7),m=o(16),v=o(52),C=o(53),S=o(54),w=o(55),A=o(57),T=o(1),E=o(15),k=o(58),P=o(25),R=o(59),x=o(0),D=o(60),L=o(5),M=o(61),O=o(62),F=o(2),I=o(68),B=o(69),N=o(70),V=o(71),H=o(72),K=o(73),U=o(74),W=\"undefined\"==typeof window?null:window.document,z=function(e){function t(t){void 0===t&&(t={});var r=e.call(this)||this;return r.browser=b,r.mouseEvents=0,r._keyDownHandled=!1,r._blankLine=null,r._onCursorMove=new T.EventEmitter,r._onData=new T.EventEmitter,r._onKey=new T.EventEmitter,r._onLineFeed=new T.EventEmitter,r._onRender=new T.EventEmitter,r._onResize=new T.EventEmitter,r._onScroll=new T.EventEmitter,r._onSelectionChange=new T.EventEmitter,r._onTitleChange=new T.EventEmitter,r._onFocus=new T.EventEmitter,r._onBlur=new T.EventEmitter,r.onA11yCharEmitter=new T.EventEmitter,r.onA11yTabEmitter=new T.EventEmitter,r._instantiationService=new H.InstantiationService,r.optionsService=new D.OptionsService(t),r._instantiationService.setService(x.IOptionsService,r.optionsService),r._bufferService=r._instantiationService.createInstance(O.BufferService),r._instantiationService.setService(x.IBufferService,r._bufferService),r._logService=r._instantiationService.createInstance(N.LogService),r._instantiationService.setService(x.ILogService,r._logService),r._coreService=r._instantiationService.createInstance(B.CoreService,(function(){return r.scrollToBottom()})),r._instantiationService.setService(x.ICoreService,r._coreService),r._coreService.onData((function(e){return r._onData.fire(e)})),r._coreMouseService=r._instantiationService.createInstance(K.CoreMouseService),r._instantiationService.setService(x.ICoreMouseService,r._coreMouseService),r._dirtyRowService=r._instantiationService.createInstance(V.DirtyRowService),r._instantiationService.setService(x.IDirtyRowService,r._dirtyRowService),r._setupOptionsListeners(),r._setup(),r._writeBuffer=new U.WriteBuffer((function(e){return r._inputHandler.parse(e)})),r}return s(t,e),Object.defineProperty(t.prototype,\"options\",{get:function(){return this.optionsService.options},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"cols\",{get:function(){return this._bufferService.cols},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"rows\",{get:function(){return this._bufferService.rows},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"onCursorMove\",{get:function(){return this._onCursorMove.event},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"onData\",{get:function(){return this._onData.event},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"onKey\",{get:function(){return this._onKey.event},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"onLineFeed\",{get:function(){return this._onLineFeed.event},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"onRender\",{get:function(){return this._onRender.event},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"onResize\",{get:function(){return this._onResize.event},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"onScroll\",{get:function(){return this._onScroll.event},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"onSelectionChange\",{get:function(){return this._onSelectionChange.event},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"onTitleChange\",{get:function(){return this._onTitleChange.event},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"onFocus\",{get:function(){return this._onFocus.event},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"onBlur\",{get:function(){return this._onBlur.event},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"onA11yChar\",{get:function(){return this.onA11yCharEmitter.event},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"onA11yTab\",{get:function(){return this.onA11yTabEmitter.event},enumerable:!0,configurable:!0}),t.prototype.dispose=function(){this._isDisposed||(e.prototype.dispose.call(this),this._windowsMode&&(this._windowsMode.dispose(),this._windowsMode=void 0),this._renderService&&this._renderService.dispose(),this._customKeyEventHandler=null,this.write=function(){},this.element&&this.element.parentNode&&this.element.parentNode.removeChild(this.element))},t.prototype._setup=function(){var e=this;this._parent=W?W.body:null,this.cursorState=0,this.cursorHidden=!1,this._customKeyEventHandler=null,this.applicationKeypad=!1,this.originMode=!1,this.insertMode=!1,this.wraparoundMode=!0,this.bracketedPasteMode=!1,this.charset=null,this.gcharset=null,this.glevel=0,this.charsets=[null],this.curAttrData=E.DEFAULT_ATTR_DATA.clone(),this._eraseAttrData=E.DEFAULT_ATTR_DATA.clone(),this.params=[],this.currentParam=0,this._userScrolling=!1,this._inputHandler=new d.InputHandler(this,this._bufferService,this._coreService,this._dirtyRowService,this._logService,this.optionsService,this._coreMouseService),this._inputHandler.onCursorMove((function(){return e._onCursorMove.fire()})),this._inputHandler.onLineFeed((function(){return e._onLineFeed.fire()})),this.register(this._inputHandler),this.linkifier=this.linkifier||new _.Linkifier(this._bufferService,this._logService),this.options.windowsMode&&(this._windowsMode=k.applyWindowsMode(this))},Object.defineProperty(t.prototype,\"buffer\",{get:function(){return this.buffers.active},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"buffers\",{get:function(){return this._bufferService.buffers},enumerable:!0,configurable:!0}),t.prototype.eraseAttrData=function(){return this._eraseAttrData.bg&=-67108864,this._eraseAttrData.bg|=67108863&this.curAttrData.bg,this._eraseAttrData},t.prototype.focus=function(){this.textarea&&this.textarea.focus({preventScroll:!0})},Object.defineProperty(t.prototype,\"isFocused\",{get:function(){return W.activeElement===this.textarea&&W.hasFocus()},enumerable:!0,configurable:!0}),t.prototype._setupOptionsListeners=function(){var e=this;this.optionsService.onOptionChange((function(t){\"fontFamily\"===t||\"fontSize\"===t?(e._renderService&&e._renderService.clear(),e._charSizeService&&e._charSizeService.measure()):\"drawBoldTextInBrightColors\"===t||\"letterSpacing\"===t||\"lineHeight\"===t||\"fontWeight\"===t||\"fontWeightBold\"===t?e._renderService&&(e._renderService.clear(),e._renderService.onResize(e.cols,e.rows),e.refresh(0,e.rows-1)):\"rendererType\"===t?e._renderService&&(e._renderService.setRenderer(e._createRenderer()),e._renderService.onResize(e.cols,e.rows)):\"scrollback\"===t?(e.buffers.resize(e.cols,e.rows),e.viewport&&e.viewport.syncScrollArea()):\"screenReaderMode\"===t?e.optionsService.options.screenReaderMode?!e._accessibilityManager&&e._renderService&&(e._accessibilityManager=new S.AccessibilityManager(e,e._renderService)):e._accessibilityManager&&(e._accessibilityManager.dispose(),e._accessibilityManager=null):\"tabStopWidth\"===t?e.buffers.setupTabStops():\"theme\"===t?e._setTheme(e.optionsService.options.theme):\"windowsMode\"===t&&(e.optionsService.options.windowsMode?e._windowsMode||(e._windowsMode=k.applyWindowsMode(e)):e._windowsMode&&(e._windowsMode.dispose(),e._windowsMode=void 0))}))},t.prototype._onTextAreaFocus=function(e){this.sendFocus&&this._coreService.triggerDataEvent(f.C0.ESC+\"[I\"),this.updateCursorStyle(e),this.element.classList.add(\"focus\"),this.showCursor(),this._onFocus.fire()},t.prototype.blur=function(){return this.textarea.blur()},t.prototype._onTextAreaBlur=function(){this.textarea.value=\"\",this.refresh(this.buffer.y,this.buffer.y),this.sendFocus&&this._coreService.triggerDataEvent(f.C0.ESC+\"[O\"),this.element.classList.remove(\"focus\"),this._onBlur.fire()},t.prototype._initGlobal=function(){var e=this;this._bindKeys(),this.register(y.addDisposableDomListener(this.element,\"copy\",(function(t){e.hasSelection()&&u.copyHandler(t,e._selectionService)})));var t=function(t){return u.handlePasteEvent(t,e.textarea,e.bracketedPasteMode,e._coreService)};this.register(y.addDisposableDomListener(this.textarea,\"paste\",t)),this.register(y.addDisposableDomListener(this.element,\"paste\",t)),b.isFirefox?this.register(y.addDisposableDomListener(this.element,\"mousedown\",(function(t){2===t.button&&u.rightClickHandler(t,e.textarea,e.screenElement,e._selectionService,e.options.rightClickSelectsWord)}))):this.register(y.addDisposableDomListener(this.element,\"contextmenu\",(function(t){u.rightClickHandler(t,e.textarea,e.screenElement,e._selectionService,e.options.rightClickSelectsWord)}))),b.isLinux&&this.register(y.addDisposableDomListener(this.element,\"auxclick\",(function(t){1===t.button&&u.moveTextAreaUnderMouseCursor(t,e.textarea,e.screenElement)})))},t.prototype._bindKeys=function(){var e=this;this.register(y.addDisposableDomListener(this.textarea,\"keyup\",(function(t){return e._keyUp(t)}),!0)),this.register(y.addDisposableDomListener(this.textarea,\"keydown\",(function(t){return e._keyDown(t)}),!0)),this.register(y.addDisposableDomListener(this.textarea,\"keypress\",(function(t){return e._keyPress(t)}),!0)),this.register(y.addDisposableDomListener(this.textarea,\"compositionstart\",(function(){return e._compositionHelper.compositionstart()}))),this.register(y.addDisposableDomListener(this.textarea,\"compositionupdate\",(function(t){return e._compositionHelper.compositionupdate(t)}))),this.register(y.addDisposableDomListener(this.textarea,\"compositionend\",(function(){return e._compositionHelper.compositionend()}))),this.register(this.onRender((function(){return e._compositionHelper.updateCompositionElements()}))),this.register(this.onRender((function(t){return e._queueLinkification(t.start,t.end)})))},t.prototype.open=function(e){var t=this;if(this._parent=e||this._parent,!this._parent)throw new Error(\"Terminal requires a parent element.\");W.body.contains(e)||this._logService.warn(\"Terminal.open was called on an element that was not attached to the DOM\"),this._document=this._parent.ownerDocument,this.element=this._document.createElement(\"div\"),this.element.dir=\"ltr\",this.element.classList.add(\"terminal\"),this.element.classList.add(\"xterm\"),this.element.setAttribute(\"tabindex\",\"0\"),this._parent.appendChild(this.element);var r=W.createDocumentFragment();this._viewportElement=W.createElement(\"div\"),this._viewportElement.classList.add(\"xterm-viewport\"),r.appendChild(this._viewportElement),this._viewportScrollArea=W.createElement(\"div\"),this._viewportScrollArea.classList.add(\"xterm-scroll-area\"),this._viewportElement.appendChild(this._viewportScrollArea),this.screenElement=W.createElement(\"div\"),this.screenElement.classList.add(\"xterm-screen\"),this._helperContainer=W.createElement(\"div\"),this._helperContainer.classList.add(\"xterm-helpers\"),this.screenElement.appendChild(this._helperContainer),r.appendChild(this.screenElement),this.textarea=W.createElement(\"textarea\"),this.textarea.classList.add(\"xterm-helper-textarea\"),this.textarea.setAttribute(\"aria-label\",m.promptLabel),this.textarea.setAttribute(\"aria-multiline\",\"false\"),this.textarea.setAttribute(\"autocorrect\",\"off\"),this.textarea.setAttribute(\"autocapitalize\",\"off\"),this.textarea.setAttribute(\"spellcheck\",\"false\"),this.textarea.tabIndex=0,this.register(y.addDisposableDomListener(this.textarea,\"focus\",(function(e){return t._onTextAreaFocus(e)}))),this.register(y.addDisposableDomListener(this.textarea,\"blur\",(function(){return t._onTextAreaBlur()}))),this._helperContainer.appendChild(this.textarea),this._charSizeService=this._instantiationService.createInstance(M.CharSizeService,this._document,this._helperContainer),this._instantiationService.setService(L.ICharSizeService,this._charSizeService),this._compositionView=W.createElement(\"div\"),this._compositionView.classList.add(\"composition-view\"),this._compositionHelper=this._instantiationService.createInstance(c.CompositionHelper,this.textarea,this._compositionView),this._helperContainer.appendChild(this._compositionView),this.element.appendChild(r),this._theme=this.options.theme||this._theme,this.options.theme=void 0,this._colorManager=new P.ColorManager(W,this.options.allowTransparency),this._colorManager.setTheme(this._theme);var i=this._createRenderer();this._renderService=this._instantiationService.createInstance(R.RenderService,i,this.rows,this.screenElement),this._instantiationService.setService(L.IRenderService,this._renderService),this._renderService.onRender((function(e){return t._onRender.fire(e)})),this.onResize((function(e){return t._renderService.resize(e.cols,e.rows)})),this._soundService=this._instantiationService.createInstance(v.SoundService),this._instantiationService.setService(L.ISoundService,this._soundService),this._mouseService=this._instantiationService.createInstance(I.MouseService),this._instantiationService.setService(L.IMouseService,this._mouseService),this.viewport=this._instantiationService.createInstance(h.Viewport,(function(e,r){return t.scrollLines(e,r)}),this._viewportElement,this._viewportScrollArea),this.viewport.onThemeChange(this._colorManager.colors),this.register(this.viewport),this.register(this.onCursorMove((function(){return t._renderService.onCursorMove()}))),this.register(this.onResize((function(){return t._renderService.onResize(t.cols,t.rows)}))),this.register(this.onBlur((function(){return t._renderService.onBlur()}))),this.register(this.onFocus((function(){return t._renderService.onFocus()}))),this.register(this._renderService.onDimensionsChange((function(){return t.viewport.syncScrollArea()}))),this._selectionService=this._instantiationService.createInstance(g.SelectionService,(function(e,r){return t.scrollLines(e,r)}),this.element,this.screenElement),this._instantiationService.setService(L.ISelectionService,this._selectionService),this.register(this._selectionService.onSelectionChange((function(){return t._onSelectionChange.fire()}))),this.register(this._selectionService.onRedrawRequest((function(e){return t._renderService.onSelectionChanged(e.start,e.end,e.columnSelectMode)}))),this.register(this._selectionService.onLinuxMouseSelection((function(e){t.textarea.value=e,t.textarea.focus(),t.textarea.select()}))),this.register(this.onScroll((function(){t.viewport.syncScrollArea(),t._selectionService.refresh()}))),this.register(y.addDisposableDomListener(this._viewportElement,\"scroll\",(function(){return t._selectionService.refresh()}))),this._mouseZoneManager=this._instantiationService.createInstance(C.MouseZoneManager,this.element,this.screenElement),this.register(this._mouseZoneManager),this.register(this.onScroll((function(){return t._mouseZoneManager.clearAll()}))),this.linkifier.attachToDom(this.element,this._mouseZoneManager),this.register(y.addDisposableDomListener(this.element,\"mousedown\",(function(e){return t._selectionService.onMouseDown(e)}))),this.mouseEvents?(this._selectionService.disable(),this.element.classList.add(\"enable-mouse-events\")):this._selectionService.enable(),this.options.screenReaderMode&&(this._accessibilityManager=new S.AccessibilityManager(this,this._renderService)),this._charSizeService.measure(),this.refresh(0,this.rows-1),this._initGlobal(),this.bindMouse()},t.prototype._createRenderer=function(){switch(this.options.rendererType){case\"canvas\":return new p.Renderer(this._colorManager.colors,this,this._bufferService,this._charSizeService,this.optionsService);case\"dom\":return new w.DomRenderer(this,this._colorManager.colors,this._charSizeService,this.optionsService);default:throw new Error('Unrecognized rendererType \"'+this.options.rendererType+'\"')}},t.prototype._setTheme=function(e){this._theme=e,this._colorManager&&this._colorManager.setTheme(e),this._renderService&&this._renderService.setColors(this._colorManager.colors),this.viewport&&this.viewport.onThemeChange(this._colorManager.colors)},t.prototype.bindMouse=function(){function e(e){var t,r,o;if(!(t=i._mouseService.getRawByteCoords(e,i.screenElement,i.cols,i.rows)))return!1;switch(e.overrideType||e.type){case\"mousemove\":o=32,void 0===e.buttons?(r=3,void 0!==e.button&&(r=3>e.button?e.button:3)):r=1&e.buttons?0:4&e.buttons?1:2&e.buttons?2:3;break;case\"mouseup\":o=0,r=3>e.button?e.button:3;break;case\"mousedown\":o=1,r=3>e.button?e.button:3;break;case\"wheel\":0!==e.deltaY&&(o=0>e.deltaY?0:1),r=4;break;default:return!1}return!(void 0===o||void 0===r||4<r)&&i._coreMouseService.triggerMouseEvent({col:t.x-33,row:t.y-33,button:r,action:o,ctrl:e.ctrlKey,alt:e.altKey,shift:e.shiftKey})}var t=this,i=this,o=this.element,n={mouseup:null,wheel:null,mousedrag:null,mousemove:null},s=function(r){return e(r),r.buttons||(t._document.removeEventListener(\"mouseup\",n.mouseup),n.mousedrag&&t._document.removeEventListener(\"mousemove\",n.mousedrag)),t.cancel(r)},a=function(r){return e(r),r.preventDefault(),t.cancel(r)},l=function(t){t.buttons&&e(t)},c=function(t){t.buttons||e(t)};this._coreMouseService.onProtocolChange((function(e){t.mouseEvents=e,e?(\"debug\"===t.optionsService.options.logLevel&&t._logService.debug(\"Binding to mouse events:\",t._coreMouseService.explainEvents(e)),t.element.classList.add(\"enable-mouse-events\"),t._selectionService.disable()):(t._logService.debug(\"Unbinding from mouse events.\"),t.element.classList.remove(\"enable-mouse-events\"),t._selectionService.enable()),8&e?n.mousemove||(o.addEventListener(\"mousemove\",c),n.mousemove=c):(o.removeEventListener(\"mousemove\",n.mousemove),n.mousemove=null),16&e?n.wheel||(o.addEventListener(\"wheel\",a),n.wheel=a):(o.removeEventListener(\"wheel\",n.wheel),n.wheel=null),2&e?n.mouseup||(n.mouseup=s):(t._document.removeEventListener(\"mouseup\",n.mouseup),n.mouseup=null),4&e?n.mousedrag||(n.mousedrag=l):(t._document.removeEventListener(\"mousemove\",n.mousedrag),n.mousedrag=null)})),this._coreMouseService.activeProtocol=this._coreMouseService.activeProtocol,this.register(y.addDisposableDomListener(o,\"mousedown\",(function(r){if(r.preventDefault(),t.focus(),t.mouseEvents&&!t._selectionService.shouldForceSelection(r))return e(r),n.mouseup&&t._document.addEventListener(\"mouseup\",n.mouseup),n.mousedrag&&t._document.addEventListener(\"mousemove\",n.mousedrag),t.cancel(r)}))),this.register(y.addDisposableDomListener(o,\"wheel\",(function(e){if(n.wheel);else if(!t.buffer.hasScrollback){var i=t.viewport.getLinesScrolled(e);if(0===i)return;for(var o=f.C0.ESC+(t._coreService.decPrivateModes.applicationCursorKeys?\"O\":\"[\")+(0>e.deltaY?\"A\":\"B\"),s=\"\",a=0;a<r(i);a++)s+=o;t._coreService.triggerDataEvent(s,!0)}}))),this.register(y.addDisposableDomListener(o,\"wheel\",(function(e){if(!n.wheel)return t.viewport.onWheel(e)?void 0:t.cancel(e)}))),this.register(y.addDisposableDomListener(o,\"touchstart\",(function(e){if(!t.mouseEvents)return t.viewport.onTouchStart(e),t.cancel(e)}))),this.register(y.addDisposableDomListener(o,\"touchmove\",(function(e){if(!t.mouseEvents)return t.viewport.onTouchMove(e)?void 0:t.cancel(e)})))},t.prototype.refresh=function(e,t){this._renderService&&this._renderService.refreshRows(e,t)},t.prototype._queueLinkification=function(e,t){this.linkifier&&this.linkifier.linkifyRows(e,t)},t.prototype.updateCursorStyle=function(e){this._selectionService&&this._selectionService.shouldColumnSelect(e)?this.element.classList.add(\"column-select\"):this.element.classList.remove(\"column-select\")},t.prototype.showCursor=function(){this.cursorState||(this.cursorState=1,this.refresh(this.buffer.y,this.buffer.y))},t.prototype.scroll=function(e){var t;void 0===e&&(e=!1),t=this._blankLine;var r=this.eraseAttrData();t&&t.length===this.cols&&t.getFg(0)===r.fg&&t.getBg(0)===r.bg||(t=this.buffer.getBlankLine(r,e),this._blankLine=t),t.isWrapped=e;var o=this.buffer.ybase+this.buffer.scrollTop,n=this.buffer.ybase+this.buffer.scrollBottom;if(0===this.buffer.scrollTop){var s=this.buffer.lines.isFull;n===this.buffer.lines.length-1?s?this.buffer.lines.recycle().copyFrom(t):this.buffer.lines.push(t.clone()):this.buffer.lines.splice(n+1,0,t.clone()),s?this._userScrolling&&(this.buffer.ydisp=i(this.buffer.ydisp-1,0)):(this.buffer.ybase++,this._userScrolling||this.buffer.ydisp++)}else this.buffer.lines.shiftElements(o+1,n-o+1-1,-1),this.buffer.lines.set(n,t.clone());this._userScrolling||(this.buffer.ydisp=this.buffer.ybase),this._dirtyRowService.markRangeDirty(this.buffer.scrollTop,this.buffer.scrollBottom),this._onScroll.fire(this.buffer.ydisp)},t.prototype.scrollLines=function(e,t){if(0>e){if(0===this.buffer.ydisp)return;this._userScrolling=!0}else e+this.buffer.ydisp>=this.buffer.ybase&&(this._userScrolling=!1);var r=this.buffer.ydisp;this.buffer.ydisp=i(a(this.buffer.ydisp+e,this.buffer.ybase),0),r!==this.buffer.ydisp&&(t||this._onScroll.fire(this.buffer.ydisp),this.refresh(0,this.rows-1))},t.prototype.scrollPages=function(e){this.scrollLines(e*(this.rows-1))},t.prototype.scrollToTop=function(){this.scrollLines(-this.buffer.ydisp)},t.prototype.scrollToBottom=function(){this.scrollLines(this.buffer.ybase-this.buffer.ydisp)},t.prototype.scrollToLine=function(e){var t=e-this.buffer.ydisp;0!=t&&this.scrollLines(t)},t.prototype.paste=function(e){u.paste(e,this.textarea,this.bracketedPasteMode,this._coreService)},t.prototype.attachCustomKeyEventHandler=function(e){this._customKeyEventHandler=e},t.prototype.addEscHandler=function(e,t){return this._inputHandler.addEscHandler(e,t)},t.prototype.addDcsHandler=function(e,t){return this._inputHandler.addDcsHandler(e,t)},t.prototype.addCsiHandler=function(e,t){return this._inputHandler.addCsiHandler(e,t)},t.prototype.addOscHandler=function(e,t){return this._inputHandler.addOscHandler(e,t)},t.prototype.registerLinkMatcher=function(e,t,r){var i=this.linkifier.registerLinkMatcher(e,t,r);return this.refresh(0,this.rows-1),i},t.prototype.deregisterLinkMatcher=function(e){this.linkifier.deregisterLinkMatcher(e)&&this.refresh(0,this.rows-1)},t.prototype.registerCharacterJoiner=function(e){var t=this._renderService.registerCharacterJoiner(e);return this.refresh(0,this.rows-1),t},t.prototype.deregisterCharacterJoiner=function(e){this._renderService.deregisterCharacterJoiner(e)&&this.refresh(0,this.rows-1)},Object.defineProperty(t.prototype,\"markers\",{get:function(){return this.buffer.markers},enumerable:!0,configurable:!0}),t.prototype.addMarker=function(e){if(this.buffer===this.buffers.normal)return this.buffer.addMarker(this.buffer.ybase+this.buffer.y+e)},t.prototype.hasSelection=function(){return!!this._selectionService&&this._selectionService.hasSelection},t.prototype.select=function(e,t,r){this._selectionService.setSelection(e,t,r)},t.prototype.getSelection=function(){return this._selectionService?this._selectionService.selectionText:\"\"},t.prototype.getSelectionPosition=function(){if(this._selectionService.hasSelection)return{startColumn:this._selectionService.selectionStart[0],startRow:this._selectionService.selectionStart[1],endColumn:this._selectionService.selectionEnd[0],endRow:this._selectionService.selectionEnd[1]}},t.prototype.clearSelection=function(){this._selectionService&&this._selectionService.clearSelection()},t.prototype.selectAll=function(){this._selectionService&&this._selectionService.selectAll()},t.prototype.selectLines=function(e,t){this._selectionService&&this._selectionService.selectLines(e,t)},t.prototype._keyDown=function(e){if(this._keyDownHandled=!1,this._customKeyEventHandler&&!1===this._customKeyEventHandler(e))return!1;if(!this._compositionHelper.keydown(e))return this.buffer.ybase!==this.buffer.ydisp&&this.scrollToBottom(),!1;var t=A.evaluateKeyboardEvent(e,this._coreService.decPrivateModes.applicationCursorKeys,this.browser.isMac,this.options.macOptionIsMeta);if(this.updateCursorStyle(e),3===t.type||2===t.type){var r=this.rows-1;return this.scrollLines(2===t.type?-r:r),this.cancel(e,!0)}return 1===t.type&&this.selectAll(),!!this._isThirdLevelShift(this.browser,e)||(t.cancel&&this.cancel(e,!0),!t.key||(t.key!==f.C0.ETX&&t.key!==f.C0.CR||(this.textarea.value=\"\"),this._onKey.fire({key:t.key,domEvent:e}),this.showCursor(),this._coreService.triggerDataEvent(t.key,!0),this.optionsService.options.screenReaderMode?void(this._keyDownHandled=!0):this.cancel(e,!0)))},t.prototype._isThirdLevelShift=function(e,t){var r=e.isMac&&!this.options.macOptionIsMeta&&t.altKey&&!t.ctrlKey&&!t.metaKey||e.isWindows&&t.altKey&&t.ctrlKey&&!t.metaKey;return\"keypress\"===t.type?r:r&&(!t.keyCode||47<t.keyCode)},t.prototype.setgLevel=function(e){this.glevel=e,this.charset=this.charsets[e]},t.prototype.setgCharset=function(e,t){this.charsets[e]=t,this.glevel===e&&(this.charset=t)},t.prototype._keyUp=function(e){this._customKeyEventHandler&&!1===this._customKeyEventHandler(e)||(function(e){return 16===e.keyCode||17===e.keyCode||18===e.keyCode}(e)||this.focus(),this.updateCursorStyle(e))},t.prototype._keyPress=function(e){var t;if(this._keyDownHandled)return!1;if(this._customKeyEventHandler&&!1===this._customKeyEventHandler(e))return!1;if(this.cancel(e),e.charCode)t=e.charCode;else if(null===e.which||void 0===e.which)t=e.keyCode;else{if(0===e.which||0===e.charCode)return!1;t=e.which}return!(!t||(e.altKey||e.ctrlKey||e.metaKey)&&!this._isThirdLevelShift(this.browser,e)||(t=l(t),this._onKey.fire({key:t,domEvent:e}),this.showCursor(),this._coreService.triggerDataEvent(t,!0),0))},t.prototype.bell=function(){var e=this;this._soundBell()&&this._soundService.playBellSound(),this._visualBell()&&(this.element.classList.add(\"visual-bell-active\"),clearTimeout(this._visualBellTimer),this._visualBellTimer=window.setTimeout((function(){e.element.classList.remove(\"visual-bell-active\")}),200))},t.prototype.resize=function(e,t){isNaN(e)||isNaN(t)||(e!==this.cols||t!==this.rows?(e<O.MINIMUM_COLS&&(e=O.MINIMUM_COLS),t<O.MINIMUM_ROWS&&(t=O.MINIMUM_ROWS),this.buffers.resize(e,t),this._bufferService.resize(e,t),this.buffers.setupTabStops(this.cols),this._charSizeService&&this._charSizeService.measure(),this.viewport.syncScrollArea(!0),this.refresh(0,this.rows-1),this._onResize.fire({cols:e,rows:t})):this._charSizeService&&!this._charSizeService.hasValidSize&&this._charSizeService.measure())},t.prototype.clear=function(){if(0!==this.buffer.ybase||0!==this.buffer.y){this.buffer.lines.set(0,this.buffer.lines.get(this.buffer.ybase+this.buffer.y)),this.buffer.lines.length=1,this.buffer.ydisp=0,this.buffer.ybase=0,this.buffer.y=0;for(var e=1;e<this.rows;e++)this.buffer.lines.push(this.buffer.getBlankLine(E.DEFAULT_ATTR_DATA));this.refresh(0,this.rows-1),this._onScroll.fire(this.buffer.ydisp)}},t.prototype.is=function(e){return 0===(this.options.termName+\"\").indexOf(e)},t.prototype.handleTitle=function(e){this._onTitleChange.fire(e)},t.prototype.reset=function(){this.options.rows=this.rows,this.options.cols=this.cols;var e=this._customKeyEventHandler,t=this._inputHandler,r=this.cursorState,i=this._userScrolling;this._setup(),this._bufferService.reset(),this._coreService.reset(),this._coreMouseService.reset(),this._selectionService&&this._selectionService.reset(),this._customKeyEventHandler=e,this._inputHandler=t,this.cursorState=r,this._userScrolling=i,this.refresh(0,this.rows-1),this.viewport&&this.viewport.syncScrollArea()},t.prototype.cancel=function(e,t){if(this.options.cancelEvents||t)return e.preventDefault(),e.stopPropagation(),!1},t.prototype._visualBell=function(){return!1},t.prototype._soundBell=function(){return\"sound\"===this.options.bellStyle},t.prototype.write=function(e,t){this._writeBuffer.write(e,t)},t.prototype.writeSync=function(e){this._writeBuffer.writeSync(e)},t}(F.Disposable);t.Terminal=z},function(e,t,r){\"use strict\";var i=this&&this.__decorate||function(e,t,r,i){var o,n=arguments.length,s=3>n?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if(\"object\"==typeof Reflect&&\"function\"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,i);else for(var a=e.length-1;0<=a;a--)(o=e[a])&&(s=(3>n?o(s):3<n?o(t,r,s):o(t,r))||s);return 3<n&&s&&Object.defineProperty(t,r,s),s},o=this&&this.__param||function(e,t){return function(r,i){t(r,i,e)}};Object.defineProperty(t,\"__esModule\",{value:!0});var s=r(5),a=r(0),l=function(){function e(e,t,r,i,o,n){this._textarea=e,this._compositionView=t,this._bufferService=r,this._optionsService=i,this._charSizeService=o,this._coreService=n,this._isComposing=!1,this._isSendingComposition=!1,this._compositionPosition={start:0,end:0}}return e.prototype.compositionstart=function(){this._isComposing=!0,this._compositionPosition.start=this._textarea.value.length,this._compositionView.textContent=\"\",this._compositionView.classList.add(\"active\")},e.prototype.compositionupdate=function(e){var t=this;this._compositionView.textContent=e.data,this.updateCompositionElements(),setTimeout((function(){t._compositionPosition.end=t._textarea.value.length}),0)},e.prototype.compositionend=function(){this._finalizeComposition(!0)},e.prototype.keydown=function(e){if(this._isComposing||this._isSendingComposition){if(229===e.keyCode)return!1;if(16===e.keyCode||17===e.keyCode||18===e.keyCode)return!1;this._finalizeComposition(!1)}return 229!==e.keyCode||(this._handleAnyTextareaChanges(),!1)},e.prototype._finalizeComposition=function(e){var t=this;if(this._compositionView.classList.remove(\"active\"),this._isComposing=!1,this._clearTextareaPosition(),e){var r={start:this._compositionPosition.start,end:this._compositionPosition.end};this._isSendingComposition=!0,setTimeout((function(){var e;t._isSendingComposition&&(t._isSendingComposition=!1,e=t._isComposing?t._textarea.value.substring(r.start,r.end):t._textarea.value.substring(r.start),t._coreService.triggerDataEvent(e,!0))}),0)}else{this._isSendingComposition=!1;var i=this._textarea.value.substring(this._compositionPosition.start,this._compositionPosition.end);this._coreService.triggerDataEvent(i,!0)}},e.prototype._handleAnyTextareaChanges=function(){var e=this,t=this._textarea.value;setTimeout((function(){if(!e._isComposing){var r=e._textarea.value.replace(t,\"\");0<r.length&&e._coreService.triggerDataEvent(r,!0)}}),0)},e.prototype.updateCompositionElements=function(e){var t=this;if(this._isComposing){if(this._bufferService.buffer.isCursorInViewport){var r=n(this._charSizeService.height*this._optionsService.options.lineHeight),i=this._bufferService.buffer.y*r,o=this._bufferService.buffer.x*this._charSizeService.width;this._compositionView.style.left=o+\"px\",this._compositionView.style.top=i+\"px\",this._compositionView.style.height=r+\"px\",this._compositionView.style.lineHeight=r+\"px\",this._compositionView.style.fontFamily=this._optionsService.options.fontFamily,this._compositionView.style.fontSize=this._optionsService.options.fontSize+\"px\";var s=this._compositionView.getBoundingClientRect();this._textarea.style.left=o+\"px\",this._textarea.style.top=i+\"px\",this._textarea.style.width=s.width+\"px\",this._textarea.style.height=s.height+\"px\",this._textarea.style.lineHeight=s.height+\"px\"}e||setTimeout((function(){return t.updateCompositionElements(!0)}),0)}},e.prototype._clearTextareaPosition=function(){this._textarea.style.left=\"\",this._textarea.style.top=\"\"},i([o(2,a.IBufferService),o(3,a.IOptionsService),o(4,s.ICharSizeService),o(5,a.ICoreService)],e)}();t.CompositionHelper=l},function(e,t,i){\"use strict\";var n,a=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),l=this&&this.__decorate||function(e,t,r,i){var o,n=arguments.length,s=3>n?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if(\"object\"==typeof Reflect&&\"function\"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,i);else for(var a=e.length-1;0<=a;a--)(o=e[a])&&(s=(3>n?o(s):3<n?o(t,r,s):o(t,r))||s);return 3<n&&s&&Object.defineProperty(t,r,s),s},c=this&&this.__param||function(e,t){return function(r,i){t(r,i,e)}};Object.defineProperty(t,\"__esModule\",{value:!0});var h=i(2),u=i(7),f=i(5),d=i(0),p=function(e){function t(t,r,i,o,n,s,a){var l=e.call(this)||this;return l._scrollLines=t,l._viewportElement=r,l._scrollArea=i,l._bufferService=o,l._optionsService=n,l._charSizeService=s,l._renderService=a,l.scrollBarWidth=0,l._currentRowHeight=0,l._lastRecordedBufferLength=0,l._lastRecordedViewportHeight=0,l._lastRecordedBufferHeight=0,l._lastTouchY=0,l._lastScrollTop=0,l._wheelPartialScroll=0,l._refreshAnimationFrame=null,l._ignoreNextScrollEvent=!1,l.scrollBarWidth=l._viewportElement.offsetWidth-l._scrollArea.offsetWidth||15,l.register(u.addDisposableDomListener(l._viewportElement,\"scroll\",l._onScroll.bind(l))),setTimeout((function(){return l.syncScrollArea()}),0),l}return a(t,e),t.prototype.onThemeChange=function(e){this._viewportElement.style.backgroundColor=e.background.css},t.prototype._refresh=function(e){var t=this;return e?(this._innerRefresh(),void(null!==this._refreshAnimationFrame&&cancelAnimationFrame(this._refreshAnimationFrame))):void(null===this._refreshAnimationFrame&&(this._refreshAnimationFrame=requestAnimationFrame((function(){return t._innerRefresh()}))))},t.prototype._innerRefresh=function(){if(0<this._charSizeService.height){this._currentRowHeight=this._renderService.dimensions.scaledCellHeight/window.devicePixelRatio,this._lastRecordedViewportHeight=this._viewportElement.offsetHeight;var e=s(this._currentRowHeight*this._lastRecordedBufferLength)+(this._lastRecordedViewportHeight-this._renderService.dimensions.canvasHeight);this._lastRecordedBufferHeight!==e&&(this._lastRecordedBufferHeight=e,this._scrollArea.style.height=this._lastRecordedBufferHeight+\"px\")}var t=this._bufferService.buffer.ydisp*this._currentRowHeight;this._viewportElement.scrollTop!==t&&(this._ignoreNextScrollEvent=!0,this._viewportElement.scrollTop=t),this._refreshAnimationFrame=null},t.prototype.syncScrollArea=function(e){if(void 0===e&&(e=!1),this._lastRecordedBufferLength!==this._bufferService.buffer.lines.length)return this._lastRecordedBufferLength=this._bufferService.buffer.lines.length,void this._refresh(e);if(this._lastRecordedViewportHeight===this._renderService.dimensions.canvasHeight){var t=this._bufferService.buffer.ydisp*this._currentRowHeight;this._lastScrollTop===t&&this._lastScrollTop===this._viewportElement.scrollTop&&this._renderService.dimensions.scaledCellHeight/window.devicePixelRatio===this._currentRowHeight||this._refresh(e)}else this._refresh(e)},t.prototype._onScroll=function(){if(this._lastScrollTop=this._viewportElement.scrollTop,this._viewportElement.offsetParent)if(this._ignoreNextScrollEvent)this._ignoreNextScrollEvent=!1;else{var e=s(this._lastScrollTop/this._currentRowHeight)-this._bufferService.buffer.ydisp;this._scrollLines(e,!0)}},t.prototype._bubbleScroll=function(e,t){var r=this._viewportElement.scrollTop+this._lastRecordedViewportHeight;return!(0>t&&0!==this._viewportElement.scrollTop||0<t&&r<this._lastRecordedBufferHeight)||(e.cancelable&&e.preventDefault(),!1)},t.prototype.onWheel=function(e){var t=this._getPixelsScrolled(e);return 0!==t&&(this._viewportElement.scrollTop+=t,this._bubbleScroll(e,t))},t.prototype._getPixelsScrolled=function(e){if(0===e.deltaY)return 0;var t=this._applyScrollModifier(e.deltaY,e);return e.deltaMode===WheelEvent.DOM_DELTA_LINE?t*=this._currentRowHeight:e.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(t*=this._currentRowHeight*this._bufferService.rows),t},t.prototype.getLinesScrolled=function(e){if(0===e.deltaY)return 0;var t=this._applyScrollModifier(e.deltaY,e);return e.deltaMode===WheelEvent.DOM_DELTA_PIXEL?(t/=this._currentRowHeight+0,this._wheelPartialScroll+=t,t=o(r(this._wheelPartialScroll))*(0<this._wheelPartialScroll?1:-1),this._wheelPartialScroll%=1):e.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(t*=this._bufferService.rows),t},t.prototype._applyScrollModifier=function(e,t){var r=this._optionsService.options.fastScrollModifier;return\"alt\"===r&&t.altKey||\"ctrl\"===r&&t.ctrlKey||\"shift\"===r&&t.shiftKey?e*this._optionsService.options.fastScrollSensitivity*this._optionsService.options.scrollSensitivity:e*this._optionsService.options.scrollSensitivity},t.prototype.onTouchStart=function(e){this._lastTouchY=e.touches[0].pageY},t.prototype.onTouchMove=function(e){var t=this._lastTouchY-e.touches[0].pageY;return this._lastTouchY=e.touches[0].pageY,0!=t&&(this._viewportElement.scrollTop+=t,this._bubbleScroll(e,t))},l([c(3,d.IBufferService),c(4,d.IOptionsService),c(5,f.ICharSizeService),c(6,f.IRenderService)],t)}(h.Disposable);t.Viewport=p},function(e,t){\"use strict\";function r(e){return e.replace(/\\r?\\n/g,\"\\r\")}function i(e,t){return t?\"\x1b[200~\"+e+\"\x1b[201~\":e}function o(e,t,o,n){e=i(e=r(e),o),n.triggerDataEvent(e,!0),t.value=\"\"}function n(e,t,r){var i=r.getBoundingClientRect(),o=e.clientX-i.left-10,n=e.clientY-i.top-10;t.style.position=\"absolute\",t.style.width=\"20px\",t.style.height=\"20px\",t.style.left=o+\"px\",t.style.top=n+\"px\",t.style.zIndex=\"1000\",t.focus(),setTimeout((function(){t.style.position=null,t.style.width=null,t.style.height=null,t.style.left=null,t.style.top=null,t.style.zIndex=null}),200)}Object.defineProperty(t,\"__esModule\",{value:!0}),t.prepareTextForTerminal=r,t.bracketTextForPaste=i,t.copyHandler=function(e,t){e.clipboardData&&e.clipboardData.setData(\"text/plain\",t.selectionText),e.preventDefault()},t.handlePasteEvent=function(e,t,r,i){e.stopPropagation(),e.clipboardData&&o(e.clipboardData.getData(\"text/plain\"),t,r,i)},t.paste=o,t.moveTextAreaUnderMouseCursor=n,t.rightClickHandler=function(e,t,r,i,o){n(e,t,r),o&&!i.isClickInSelection(e)&&i.selectWordAtCursor(e),t.value=i.selectionText,t.select()}},function(e,t,r){\"use strict\";var o,n=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,\"__esModule\",{value:!0});var s=r(11),c=r(17),h=r(18),u=r(38),f=r(2),d=r(14),p=r(8),_=r(15),g=r(1),b=r(3),y=r(4),m=r(6),v=r(20),C=r(22),S={\"(\":0,\")\":1,\"*\":2,\"+\":3,\"-\":1,\".\":2},w=function(){function e(e,t,r,i){this._bufferService=e,this._coreService=t,this._logService=r,this._optionsService=i,this._data=new Uint32Array(0)}return e.prototype.hook=function(){this._data=new Uint32Array(0)},e.prototype.put=function(e,t,r){this._data=d.concat(this._data,e.subarray(t,r))},e.prototype.unhook=function(e){if(e){var t=p.utf32ToString(this._data);switch(this._data=new Uint32Array(0),t){case'\"q':return this._coreService.triggerDataEvent(s.C0.ESC+'P1$r0\"q'+s.C0.ESC+\"\\\\\");case'\"p':return this._coreService.triggerDataEvent(s.C0.ESC+'P1$r61\"p'+s.C0.ESC+\"\\\\\");case\"r\":var r=this._bufferService.buffer.scrollTop+1+\";\"+(this._bufferService.buffer.scrollBottom+1)+\"r\";return this._coreService.triggerDataEvent(s.C0.ESC+\"P1$r\"+r+s.C0.ESC+\"\\\\\");case\"m\":return this._coreService.triggerDataEvent(s.C0.ESC+\"P1$r0m\"+s.C0.ESC+\"\\\\\");case\" q\":var i={block:2,underline:4,bar:6}[this._optionsService.options.cursorStyle];return i-=this._optionsService.options.cursorBlink?1:0,this._coreService.triggerDataEvent(s.C0.ESC+\"P1$r\"+i+\" q\"+s.C0.ESC+\"\\\\\");default:this._logService.debug(\"Unknown DCS $q %s\",t),this._coreService.triggerDataEvent(s.C0.ESC+\"P0$r\"+s.C0.ESC+\"\\\\\")}}else this._data=new Uint32Array(0)},e}(),A=function(e){function t(t,r,i,o,n,a,l,h){void 0===h&&(h=new u.EscapeSequenceParser);var f=e.call(this)||this;f._terminal=t,f._bufferService=r,f._coreService=i,f._dirtyRowService=o,f._logService=n,f._optionsService=a,f._coreMouseService=l,f._parser=h,f._parseBuffer=new Uint32Array(4096),f._stringDecoder=new p.StringToUtf32,f._utf8Decoder=new p.Utf8ToUtf32,f._workCell=new y.CellData,f._onCursorMove=new g.EventEmitter,f._onLineFeed=new g.EventEmitter,f._onScroll=new g.EventEmitter,f.register(f._parser),f._parser.setCsiHandlerFallback((function(e,t){f._logService.debug(\"Unknown CSI code: \",{identifier:f._parser.identToString(e),params:t.toArray()})})),f._parser.setEscHandlerFallback((function(e){f._logService.debug(\"Unknown ESC code: \",{identifier:f._parser.identToString(e)})})),f._parser.setExecuteHandlerFallback((function(e){f._logService.debug(\"Unknown EXECUTE code: \",{code:e})})),f._parser.setOscHandlerFallback((function(e,t,r){f._logService.debug(\"Unknown OSC code: \",{identifier:e,action:t,data:r})})),f._parser.setDcsHandlerFallback((function(e,t,r){\"HOOK\"===t&&(r=r.toArray()),f._logService.debug(\"Unknown DCS code: \",{identifier:f._parser.identToString(e),action:t,payload:r})})),f._parser.setPrintHandler((function(e,t,r){return f.print(e,t,r)})),f._parser.setCsiHandler({final:\"@\"},(function(e){return f.insertChars(e)})),f._parser.setCsiHandler({intermediates:\" \",final:\"@\"},(function(e){return f.scrollLeft(e)})),f._parser.setCsiHandler({final:\"A\"},(function(e){return f.cursorUp(e)})),f._parser.setCsiHandler({intermediates:\" \",final:\"A\"},(function(e){return f.scrollRight(e)})),f._parser.setCsiHandler({final:\"B\"},(function(e){return f.cursorDown(e)})),f._parser.setCsiHandler({final:\"C\"},(function(e){return f.cursorForward(e)})),f._parser.setCsiHandler({final:\"D\"},(function(e){return f.cursorBackward(e)})),f._parser.setCsiHandler({final:\"E\"},(function(e){return f.cursorNextLine(e)})),f._parser.setCsiHandler({final:\"F\"},(function(e){return f.cursorPrecedingLine(e)})),f._parser.setCsiHandler({final:\"G\"},(function(e){return f.cursorCharAbsolute(e)})),f._parser.setCsiHandler({final:\"H\"},(function(e){return f.cursorPosition(e)})),f._parser.setCsiHandler({final:\"I\"},(function(e){return f.cursorForwardTab(e)})),f._parser.setCsiHandler({final:\"J\"},(function(e){return f.eraseInDisplay(e)})),f._parser.setCsiHandler({prefix:\"?\",final:\"J\"},(function(e){return f.eraseInDisplay(e)})),f._parser.setCsiHandler({final:\"K\"},(function(e){return f.eraseInLine(e)})),f._parser.setCsiHandler({prefix:\"?\",final:\"K\"},(function(e){return f.eraseInLine(e)})),f._parser.setCsiHandler({final:\"L\"},(function(e){return f.insertLines(e)})),f._parser.setCsiHandler({final:\"M\"},(function(e){return f.deleteLines(e)})),f._parser.setCsiHandler({final:\"P\"},(function(e){return f.deleteChars(e)})),f._parser.setCsiHandler({final:\"S\"},(function(e){return f.scrollUp(e)})),f._parser.setCsiHandler({final:\"T\"},(function(e){return f.scrollDown(e)})),f._parser.setCsiHandler({final:\"X\"},(function(e){return f.eraseChars(e)})),f._parser.setCsiHandler({final:\"Z\"},(function(e){return f.cursorBackwardTab(e)})),f._parser.setCsiHandler({final:\"`\"},(function(e){return f.charPosAbsolute(e)})),f._parser.setCsiHandler({final:\"a\"},(function(e){return f.hPositionRelative(e)})),f._parser.setCsiHandler({final:\"b\"},(function(e){return f.repeatPrecedingCharacter(e)})),f._parser.setCsiHandler({final:\"c\"},(function(e){return f.sendDeviceAttributesPrimary(e)})),f._parser.setCsiHandler({prefix:\">\",final:\"c\"},(function(e){return f.sendDeviceAttributesSecondary(e)})),f._parser.setCsiHandler({final:\"d\"},(function(e){return f.linePosAbsolute(e)})),f._parser.setCsiHandler({final:\"e\"},(function(e){return f.vPositionRelative(e)})),f._parser.setCsiHandler({final:\"f\"},(function(e){return f.hVPosition(e)})),f._parser.setCsiHandler({final:\"g\"},(function(e){return f.tabClear(e)})),f._parser.setCsiHandler({final:\"h\"},(function(e){return f.setMode(e)})),f._parser.setCsiHandler({prefix:\"?\",final:\"h\"},(function(e){return f.setModePrivate(e)})),f._parser.setCsiHandler({final:\"l\"},(function(e){return f.resetMode(e)})),f._parser.setCsiHandler({prefix:\"?\",final:\"l\"},(function(e){return f.resetModePrivate(e)})),f._parser.setCsiHandler({final:\"m\"},(function(e){return f.charAttributes(e)})),f._parser.setCsiHandler({final:\"n\"},(function(e){return f.deviceStatus(e)})),f._parser.setCsiHandler({prefix:\"?\",final:\"n\"},(function(e){return f.deviceStatusPrivate(e)})),f._parser.setCsiHandler({intermediates:\"!\",final:\"p\"},(function(e){return f.softReset(e)})),f._parser.setCsiHandler({intermediates:\" \",final:\"q\"},(function(e){return f.setCursorStyle(e)})),f._parser.setCsiHandler({final:\"r\"},(function(e){return f.setScrollRegion(e)})),f._parser.setCsiHandler({final:\"s\"},(function(e){return f.saveCursor(e)})),f._parser.setCsiHandler({final:\"u\"},(function(e){return f.restoreCursor(e)})),f._parser.setCsiHandler({intermediates:\"'\",final:\"}\"},(function(e){return f.insertColumns(e)})),f._parser.setCsiHandler({intermediates:\"'\",final:\"~\"},(function(e){return f.deleteColumns(e)})),f._parser.setExecuteHandler(s.C0.BEL,(function(){return f.bell()})),f._parser.setExecuteHandler(s.C0.LF,(function(){return f.lineFeed()})),f._parser.setExecuteHandler(s.C0.VT,(function(){return f.lineFeed()})),f._parser.setExecuteHandler(s.C0.FF,(function(){return f.lineFeed()})),f._parser.setExecuteHandler(s.C0.CR,(function(){return f.carriageReturn()})),f._parser.setExecuteHandler(s.C0.BS,(function(){return f.backspace()})),f._parser.setExecuteHandler(s.C0.HT,(function(){return f.tab()})),f._parser.setExecuteHandler(s.C0.SO,(function(){return f.shiftOut()})),f._parser.setExecuteHandler(s.C0.SI,(function(){return f.shiftIn()})),f._parser.setExecuteHandler(s.C1.IND,(function(){return f.index()})),f._parser.setExecuteHandler(s.C1.NEL,(function(){return f.nextLine()})),f._parser.setExecuteHandler(s.C1.HTS,(function(){return f.tabSet()})),f._parser.setOscHandler(0,new v.OscHandler((function(e){return f.setTitle(e)}))),f._parser.setOscHandler(2,new v.OscHandler((function(e){return f.setTitle(e)}))),f._parser.setEscHandler({final:\"7\"},(function(){return f.saveCursor()})),f._parser.setEscHandler({final:\"8\"},(function(){return f.restoreCursor()})),f._parser.setEscHandler({final:\"D\"},(function(){return f.index()})),f._parser.setEscHandler({final:\"E\"},(function(){return f.nextLine()})),f._parser.setEscHandler({final:\"H\"},(function(){return f.tabSet()})),f._parser.setEscHandler({final:\"M\"},(function(){return f.reverseIndex()})),f._parser.setEscHandler({final:\"=\"},(function(){return f.keypadApplicationMode()})),f._parser.setEscHandler({final:\">\"},(function(){return f.keypadNumericMode()})),f._parser.setEscHandler({final:\"c\"},(function(){return f.reset()})),f._parser.setEscHandler({final:\"n\"},(function(){return f.setgLevel(2)})),f._parser.setEscHandler({final:\"o\"},(function(){return f.setgLevel(3)})),f._parser.setEscHandler({final:\"|\"},(function(){return f.setgLevel(3)})),f._parser.setEscHandler({final:\"}\"},(function(){return f.setgLevel(2)})),f._parser.setEscHandler({final:\"~\"},(function(){return f.setgLevel(1)})),f._parser.setEscHandler({intermediates:\"%\",final:\"@\"},(function(){return f.selectDefaultCharset()})),f._parser.setEscHandler({intermediates:\"%\",final:\"G\"},(function(){return f.selectDefaultCharset()}));var d=function(e){_._parser.setEscHandler({intermediates:\"(\",final:e},(function(){return f.selectCharset(\"(\"+e)})),_._parser.setEscHandler({intermediates:\")\",final:e},(function(){return f.selectCharset(\")\"+e)})),_._parser.setEscHandler({intermediates:\"*\",final:e},(function(){return f.selectCharset(\"*\"+e)})),_._parser.setEscHandler({intermediates:\"+\",final:e},(function(){return f.selectCharset(\"+\"+e)})),_._parser.setEscHandler({intermediates:\"-\",final:e},(function(){return f.selectCharset(\"-\"+e)})),_._parser.setEscHandler({intermediates:\".\",final:e},(function(){return f.selectCharset(\".\"+e)})),_._parser.setEscHandler({intermediates:\"/\",final:e},(function(){return f.selectCharset(\"/\"+e)}))},_=this;for(var b in c.CHARSETS)d(b);return f._parser.setEscHandler({intermediates:\"#\",final:\"8\"},(function(){return f.screenAlignmentPattern()})),f._parser.setErrorHandler((function(e){return f._logService.error(\"Parsing error: \",e),e})),f._parser.setDcsHandler({intermediates:\"$\",final:\"q\"},new w(f._bufferService,f._coreService,f._logService,f._optionsService)),f}return n(t,e),Object.defineProperty(t.prototype,\"onCursorMove\",{get:function(){return this._onCursorMove.event},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"onLineFeed\",{get:function(){return this._onLineFeed.event},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"onScroll\",{get:function(){return this._onScroll.event},enumerable:!0,configurable:!0}),t.prototype.dispose=function(){e.prototype.dispose.call(this)},t.prototype.parse=function(e){var t=this._bufferService.buffer,r=t.x,i=t.y;if(this._logService.debug(\"parsing data\",e),this._parseBuffer.length<e.length&&131072>this._parseBuffer.length&&(this._parseBuffer=new Uint32Array(a(e.length,131072))),this._dirtyRowService.clearRange(),131072<e.length)for(var o=0;o<e.length;o+=131072){var n=o+131072<e.length?o+131072:e.length,s=\"string\"==typeof e?this._stringDecoder.decode(e.substring(o,n),this._parseBuffer):this._utf8Decoder.decode(e.subarray(o,n),this._parseBuffer);this._parser.parse(this._parseBuffer,s)}else s=\"string\"==typeof e?this._stringDecoder.decode(e,this._parseBuffer):this._utf8Decoder.decode(e,this._parseBuffer),this._parser.parse(this._parseBuffer,s);(t=this._bufferService.buffer).x===r&&t.y===i||this._onCursorMove.fire(),this._terminal.refresh(this._dirtyRowService.start,this._dirtyRowService.end)},t.prototype.print=function(e,t,r){var i,o,n=this._bufferService.buffer,s=this._terminal.charset,a=this._optionsService.options.screenReaderMode,c=this._bufferService.cols,u=this._terminal.wraparoundMode,f=this._terminal.insertMode,d=this._terminal.curAttrData,_=n.lines.get(n.y+n.ybase);this._dirtyRowService.markDirty(n.y);for(var g=t;g<r;++g){if(i=e[g],o=h.wcwidth(i),127>i&&s){var y=s[l(i)];y&&(i=y.charCodeAt(0))}if(a&&this._terminal.onA11yCharEmitter.fire(p.stringFromCodePoint(i)),o||!n.x){if(n.x+o-1>=c)if(u)n.x=0,n.y++,n.y===n.scrollBottom+1?(n.y--,this._terminal.scroll(!0)):(n.y>=this._bufferService.rows&&(n.y=this._bufferService.rows-1),n.lines.get(n.y).isWrapped=!0),_=n.lines.get(n.y+n.ybase);else if(n.x=c-1,2===o)continue;if(f&&(_.insertCells(n.x,o,n.getNullCell(d)),2===_.getWidth(c-1)&&_.setCellFromCodePoint(c-1,b.NULL_CELL_CODE,b.NULL_CELL_WIDTH,d.fg,d.bg)),_.setCellFromCodePoint(n.x++,i,o,d.fg,d.bg),0<o)for(;--o;)_.setCellFromCodePoint(n.x++,0,0,d.fg,d.bg)}else _.getWidth(n.x-1)?_.addCodepointToCell(n.x-1,i):_.addCodepointToCell(n.x-2,i)}r&&(_.loadCell(n.x-1,this._workCell),this._parser.precedingCodepoint=2===this._workCell.getWidth()||65535<this._workCell.getCode()?0:this._workCell.isCombined()?this._workCell.getChars().charCodeAt(0):this._workCell.content),this._dirtyRowService.markDirty(n.y)},t.prototype.addCsiHandler=function(e,t){return this._parser.addCsiHandler(e,t)},t.prototype.addDcsHandler=function(e,t){return this._parser.addDcsHandler(e,new C.DcsHandler(t))},t.prototype.addEscHandler=function(e,t){return this._parser.addEscHandler(e,t)},t.prototype.addOscHandler=function(e,t){return this._parser.addOscHandler(e,new v.OscHandler(t))},t.prototype.bell=function(){this._terminal.bell()},t.prototype.lineFeed=function(){var e=this._bufferService.buffer;this._optionsService.options.convertEol&&(e.x=0),e.y++,e.y===e.scrollBottom+1?(e.y--,this._terminal.scroll()):e.y>=this._bufferService.rows&&(e.y=this._bufferService.rows-1),e.x>=this._bufferService.cols&&e.x--,this._onLineFeed.fire()},t.prototype.carriageReturn=function(){this._bufferService.buffer.x=0},t.prototype.backspace=function(){this._restrictCursor(),0<this._bufferService.buffer.x&&this._bufferService.buffer.x--},t.prototype.tab=function(){if(!(this._bufferService.buffer.x>=this._bufferService.cols)){var e=this._bufferService.buffer.x;this._bufferService.buffer.x=this._bufferService.buffer.nextStop(),this._optionsService.options.screenReaderMode&&this._terminal.onA11yTabEmitter.fire(this._bufferService.buffer.x-e)}},t.prototype.shiftOut=function(){this._terminal.setgLevel(1)},t.prototype.shiftIn=function(){this._terminal.setgLevel(0)},t.prototype._restrictCursor=function(){this._bufferService.buffer.x=a(this._bufferService.cols-1,i(0,this._bufferService.buffer.x)),this._bufferService.buffer.y=this._terminal.originMode?a(this._bufferService.buffer.scrollBottom,i(this._bufferService.buffer.scrollTop,this._bufferService.buffer.y)):a(this._bufferService.rows-1,i(0,this._bufferService.buffer.y))},t.prototype._setCursor=function(e,t){this._terminal.originMode?(this._bufferService.buffer.x=e,this._bufferService.buffer.y=this._bufferService.buffer.scrollTop+t):(this._bufferService.buffer.x=e,this._bufferService.buffer.y=t),this._restrictCursor()},t.prototype._moveCursor=function(e,t){this._restrictCursor(),this._setCursor(this._bufferService.buffer.x+e,this._bufferService.buffer.y+t)},t.prototype.cursorUp=function(e){var t=this._bufferService.buffer.y-this._bufferService.buffer.scrollTop;0<=t?this._moveCursor(0,-a(t,e.params[0]||1)):this._moveCursor(0,-(e.params[0]||1))},t.prototype.cursorDown=function(e){var t=this._bufferService.buffer.scrollBottom-this._bufferService.buffer.y;0<=t?this._moveCursor(0,a(t,e.params[0]||1)):this._moveCursor(0,e.params[0]||1)},t.prototype.cursorForward=function(e){this._moveCursor(e.params[0]||1,0)},t.prototype.cursorBackward=function(e){this._moveCursor(-(e.params[0]||1),0)},t.prototype.cursorNextLine=function(e){this.cursorDown(e),this._bufferService.buffer.x=0},t.prototype.cursorPrecedingLine=function(e){this.cursorUp(e),this._bufferService.buffer.x=0},t.prototype.cursorCharAbsolute=function(e){this._setCursor((e.params[0]||1)-1,this._bufferService.buffer.y)},t.prototype.cursorPosition=function(e){this._setCursor(2<=e.length?(e.params[1]||1)-1:0,(e.params[0]||1)-1)},t.prototype.charPosAbsolute=function(e){this._setCursor((e.params[0]||1)-1,this._bufferService.buffer.y)},t.prototype.hPositionRelative=function(e){this._moveCursor(e.params[0]||1,0)},t.prototype.linePosAbsolute=function(e){this._setCursor(this._bufferService.buffer.x,(e.params[0]||1)-1)},t.prototype.vPositionRelative=function(e){this._moveCursor(0,e.params[0]||1)},t.prototype.hVPosition=function(e){this.cursorPosition(e)},t.prototype.tabClear=function(e){var t=e.params[0];0===t?delete this._bufferService.buffer.tabs[this._bufferService.buffer.x]:3===t&&(this._bufferService.buffer.tabs={})},t.prototype.cursorForwardTab=function(e){if(!(this._bufferService.buffer.x>=this._bufferService.cols))for(var t=e.params[0]||1;t--;)this._bufferService.buffer.x=this._bufferService.buffer.nextStop()},t.prototype.cursorBackwardTab=function(e){if(!(this._bufferService.buffer.x>=this._bufferService.cols))for(var t=e.params[0]||1,r=this._bufferService.buffer;t--;)r.x=r.prevStop()},t.prototype._eraseInBufferLine=function(e,t,r,i){void 0===i&&(i=!1);var o=this._bufferService.buffer.lines.get(this._bufferService.buffer.ybase+e);o.replaceCells(t,r,this._bufferService.buffer.getNullCell(this._terminal.eraseAttrData())),i&&(o.isWrapped=!1)},t.prototype._resetBufferLine=function(e){var t=this._bufferService.buffer.lines.get(this._bufferService.buffer.ybase+e);t.fill(this._bufferService.buffer.getNullCell(this._terminal.eraseAttrData())),t.isWrapped=!1},t.prototype.eraseInDisplay=function(e){var t;switch(this._restrictCursor(),e.params[0]){case 0:for(t=this._bufferService.buffer.y,this._dirtyRowService.markDirty(t),this._eraseInBufferLine(t++,this._bufferService.buffer.x,this._bufferService.cols,0===this._bufferService.buffer.x);t<this._bufferService.rows;t++)this._resetBufferLine(t);this._dirtyRowService.markDirty(t);break;case 1:for(t=this._bufferService.buffer.y,this._dirtyRowService.markDirty(t),this._eraseInBufferLine(t,0,this._bufferService.buffer.x+1,!0),this._bufferService.buffer.x+1>=this._bufferService.cols&&(this._bufferService.buffer.lines.get(t+1).isWrapped=!1);t--;)this._resetBufferLine(t);this._dirtyRowService.markDirty(0);break;case 2:for(t=this._bufferService.rows,this._dirtyRowService.markDirty(t-1);t--;)this._resetBufferLine(t);this._dirtyRowService.markDirty(0);break;case 3:var r=this._bufferService.buffer.lines.length-this._bufferService.rows;0<r&&(this._bufferService.buffer.lines.trimStart(r),this._bufferService.buffer.ybase=i(this._bufferService.buffer.ybase-r,0),this._bufferService.buffer.ydisp=i(this._bufferService.buffer.ydisp-r,0),this._onScroll.fire(0))}},t.prototype.eraseInLine=function(e){switch(this._restrictCursor(),e.params[0]){case 0:this._eraseInBufferLine(this._bufferService.buffer.y,this._bufferService.buffer.x,this._bufferService.cols);break;case 1:this._eraseInBufferLine(this._bufferService.buffer.y,0,this._bufferService.buffer.x+1);break;case 2:this._eraseInBufferLine(this._bufferService.buffer.y,0,this._bufferService.cols)}this._dirtyRowService.markDirty(this._bufferService.buffer.y)},t.prototype.insertLines=function(e){this._restrictCursor();var t=e.params[0]||1,r=this._bufferService.buffer;if(!(r.y>r.scrollBottom||r.y<r.scrollTop)){for(var i=r.y+r.ybase,o=this._bufferService.rows-1-r.scrollBottom,n=this._bufferService.rows-1+r.ybase-o+1;t--;)r.lines.splice(n-1,1),r.lines.splice(i,0,r.getBlankLine(this._terminal.eraseAttrData()));this._dirtyRowService.markRangeDirty(r.y,r.scrollBottom),r.x=0}},t.prototype.deleteLines=function(e){this._restrictCursor();var t=e.params[0]||1,r=this._bufferService.buffer;if(!(r.y>r.scrollBottom||r.y<r.scrollTop)){var i,o=r.y+r.ybase;for(i=this._bufferService.rows-1-r.scrollBottom,i=this._bufferService.rows-1+r.ybase-i;t--;)r.lines.splice(o,1),r.lines.splice(i,0,r.getBlankLine(this._terminal.eraseAttrData()));this._dirtyRowService.markRangeDirty(r.y,r.scrollBottom),r.x=0}},t.prototype.insertChars=function(e){this._restrictCursor();var t=this._bufferService.buffer.lines.get(this._bufferService.buffer.y+this._bufferService.buffer.ybase);t&&(t.insertCells(this._bufferService.buffer.x,e.params[0]||1,this._bufferService.buffer.getNullCell(this._terminal.eraseAttrData())),this._dirtyRowService.markDirty(this._bufferService.buffer.y))},t.prototype.deleteChars=function(e){this._restrictCursor();var t=this._bufferService.buffer.lines.get(this._bufferService.buffer.y+this._bufferService.buffer.ybase);t&&(t.deleteCells(this._bufferService.buffer.x,e.params[0]||1,this._bufferService.buffer.getNullCell(this._terminal.eraseAttrData())),this._dirtyRowService.markDirty(this._bufferService.buffer.y))},t.prototype.scrollUp=function(e){for(var t=e.params[0]||1,r=this._bufferService.buffer;t--;)r.lines.splice(r.ybase+r.scrollTop,1),r.lines.splice(r.ybase+r.scrollBottom,0,r.getBlankLine(this._terminal.eraseAttrData()));this._dirtyRowService.markRangeDirty(r.scrollTop,r.scrollBottom)},t.prototype.scrollDown=function(e){for(var t=e.params[0]||1,r=this._bufferService.buffer;t--;)r.lines.splice(r.ybase+r.scrollBottom,1),r.lines.splice(r.ybase+r.scrollTop,0,r.getBlankLine(_.DEFAULT_ATTR_DATA));this._dirtyRowService.markRangeDirty(r.scrollTop,r.scrollBottom)},t.prototype.scrollLeft=function(e){var t=this._bufferService.buffer;if(!(t.y>t.scrollBottom||t.y<t.scrollTop)){for(var r,i=e.params[0]||1,o=t.scrollTop;o<=t.scrollBottom;++o)(r=t.lines.get(t.ybase+o)).deleteCells(0,i,t.getNullCell(this._terminal.eraseAttrData())),r.isWrapped=!1;this._dirtyRowService.markRangeDirty(t.scrollTop,t.scrollBottom)}},t.prototype.scrollRight=function(e){var t=this._bufferService.buffer;if(!(t.y>t.scrollBottom||t.y<t.scrollTop)){for(var r,i=e.params[0]||1,o=t.scrollTop;o<=t.scrollBottom;++o)(r=t.lines.get(t.ybase+o)).insertCells(0,i,t.getNullCell(this._terminal.eraseAttrData())),r.isWrapped=!1;this._dirtyRowService.markRangeDirty(t.scrollTop,t.scrollBottom)}},t.prototype.insertColumns=function(e){var t=this._bufferService.buffer;if(!(t.y>t.scrollBottom||t.y<t.scrollTop)){for(var r,i=e.params[0]||1,o=t.scrollTop;o<=t.scrollBottom;++o)(r=this._bufferService.buffer.lines.get(t.ybase+o)).insertCells(t.x,i,t.getNullCell(this._terminal.eraseAttrData())),r.isWrapped=!1;this._dirtyRowService.markRangeDirty(t.scrollTop,t.scrollBottom)}},t.prototype.deleteColumns=function(e){var t=this._bufferService.buffer;if(!(t.y>t.scrollBottom||t.y<t.scrollTop)){for(var r,i=e.params[0]||1,o=t.scrollTop;o<=t.scrollBottom;++o)(r=t.lines.get(t.ybase+o)).deleteCells(t.x,i,t.getNullCell(this._terminal.eraseAttrData())),r.isWrapped=!1;this._dirtyRowService.markRangeDirty(t.scrollTop,t.scrollBottom)}},t.prototype.eraseChars=function(e){this._restrictCursor();var t=this._bufferService.buffer.lines.get(this._bufferService.buffer.y+this._bufferService.buffer.ybase);t&&(t.replaceCells(this._bufferService.buffer.x,this._bufferService.buffer.x+(e.params[0]||1),this._bufferService.buffer.getNullCell(this._terminal.eraseAttrData())),this._dirtyRowService.markDirty(this._bufferService.buffer.y))},t.prototype.repeatPrecedingCharacter=function(e){if(this._parser.precedingCodepoint){for(var t=e.params[0]||1,r=new Uint32Array(t),i=0;i<t;++i)r[i]=this._parser.precedingCodepoint;this.print(r,0,r.length)}},t.prototype.sendDeviceAttributesPrimary=function(e){0<e.params[0]||(this._terminal.is(\"xterm\")||this._terminal.is(\"rxvt-unicode\")||this._terminal.is(\"screen\")?this._coreService.triggerDataEvent(s.C0.ESC+\"[?1;2c\"):this._terminal.is(\"linux\")&&this._coreService.triggerDataEvent(s.C0.ESC+\"[?6c\"))},t.prototype.sendDeviceAttributesSecondary=function(e){0<e.params[0]||(this._terminal.is(\"xterm\")?this._coreService.triggerDataEvent(s.C0.ESC+\"[>0;276;0c\"):this._terminal.is(\"rxvt-unicode\")?this._coreService.triggerDataEvent(s.C0.ESC+\"[>85;95;0c\"):this._terminal.is(\"linux\")?this._coreService.triggerDataEvent(e.params[0]+\"c\"):this._terminal.is(\"screen\")&&this._coreService.triggerDataEvent(s.C0.ESC+\"[>83;40003;0c\"))},t.prototype.setMode=function(e){for(var t=0;t<e.length;t++)switch(e.params[t]){case 4:this._terminal.insertMode=!0}},t.prototype.setModePrivate=function(e){for(var t=0;t<e.length;t++)switch(e.params[t]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!0;break;case 2:this._terminal.setgCharset(0,c.DEFAULT_CHARSET),this._terminal.setgCharset(1,c.DEFAULT_CHARSET),this._terminal.setgCharset(2,c.DEFAULT_CHARSET),this._terminal.setgCharset(3,c.DEFAULT_CHARSET);break;case 3:this._terminal.savedCols=this._bufferService.cols,this._terminal.resize(132,this._bufferService.rows),this._terminal.reset();break;case 6:this._terminal.originMode=!0,this._setCursor(0,0);break;case 7:this._terminal.wraparoundMode=!0;break;case 12:break;case 66:this._logService.debug(\"Serial port requested application keypad.\"),this._terminal.applicationKeypad=!0,this._terminal.viewport&&this._terminal.viewport.syncScrollArea();break;case 9:this._coreMouseService.activeProtocol=\"X10\";break;case 1e3:this._coreMouseService.activeProtocol=\"VT200\";break;case 1002:this._coreMouseService.activeProtocol=\"DRAG\";break;case 1003:this._coreMouseService.activeProtocol=\"ANY\";break;case 1004:this._terminal.sendFocus=!0;break;case 1005:this._logService.debug(\"DECSET 1005 not supported (see #2507)\");break;case 1006:this._coreMouseService.activeEncoding=\"SGR\";break;case 1015:this._logService.debug(\"DECSET 1015 not supported (see #2507)\");break;case 25:this._terminal.cursorHidden=!1;break;case 1048:this.saveCursor();break;case 1049:this.saveCursor();case 47:case 1047:this._bufferService.buffers.activateAltBuffer(this._terminal.eraseAttrData()),this._terminal.refresh(0,this._bufferService.rows-1),this._terminal.viewport&&this._terminal.viewport.syncScrollArea(),this._terminal.showCursor();break;case 2004:this._terminal.bracketedPasteMode=!0}},t.prototype.resetMode=function(e){for(var t=0;t<e.length;t++)switch(e.params[t]){case 4:this._terminal.insertMode=!1}},t.prototype.resetModePrivate=function(e){for(var t=0;t<e.length;t++)switch(e.params[t]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!1;break;case 3:132===this._bufferService.cols&&this._terminal.savedCols&&this._terminal.resize(this._terminal.savedCols,this._bufferService.rows),delete this._terminal.savedCols,this._terminal.reset();break;case 6:this._terminal.originMode=!1,this._setCursor(0,0);break;case 7:this._terminal.wraparoundMode=!1;break;case 12:break;case 66:this._logService.debug(\"Switching back to normal keypad.\"),this._terminal.applicationKeypad=!1,this._terminal.viewport&&this._terminal.viewport.syncScrollArea();break;case 9:case 1e3:case 1002:case 1003:this._coreMouseService.activeProtocol=\"NONE\";break;case 1004:this._terminal.sendFocus=!1;break;case 1005:this._logService.debug(\"DECRST 1005 not supported (see #2507)\");break;case 1006:this._coreMouseService.activeEncoding=\"DEFAULT\";break;case 1015:this._logService.debug(\"DECRST 1015 not supported (see #2507)\");break;case 25:this._terminal.cursorHidden=!0;break;case 1048:this.restoreCursor();break;case 1049:case 47:case 1047:this._bufferService.buffers.activateNormalBuffer(),1049===e.params[t]&&this.restoreCursor(),this._terminal.refresh(0,this._bufferService.rows-1),this._terminal.viewport&&this._terminal.viewport.syncScrollArea(),this._terminal.showCursor();break;case 2004:this._terminal.bracketedPasteMode=!1}},t.prototype._extractColor=function(e,t,r){var i=[0,0,-1,0,0,0],o=0,n=0;do{if(i[n+o]=e.params[t+n],e.hasSubParams(t+n)){var s=e.getSubParams(t+n),a=0;do{5===i[1]&&(o=1),i[n+a+1+o]=s[a]}while(++a<s.length&&a+n+1+o<i.length);break}if(5===i[1]&&2<=n+o||2===i[1]&&5<=n+o)break;i[1]&&(o=1)}while(++n+t<e.length&&n+o<i.length);for(a=2;a<i.length;++a)-1===i[a]&&(i[a]=0);return 38===i[0]?2===i[1]?(r.fg|=50331648,r.fg&=-16777216,r.fg|=m.AttributeData.fromColorRGB([i[3],i[4],i[5]])):5===i[1]&&(r.fg&=-50331904,r.fg|=33554432|255&i[3]):48===i[0]&&(2===i[1]?(r.bg|=50331648,r.bg&=-16777216,r.bg|=m.AttributeData.fromColorRGB([i[3],i[4],i[5]])):5===i[1]&&(r.bg&=-50331904,r.bg|=33554432|255&i[3])),n},t.prototype.charAttributes=function(e){if(1===e.length&&0===e.params[0])return this._terminal.curAttrData.fg=_.DEFAULT_ATTR_DATA.fg,void(this._terminal.curAttrData.bg=_.DEFAULT_ATTR_DATA.bg);for(var t,r=e.length,i=this._terminal.curAttrData,o=0;o<r;o++)30<=(t=e.params[o])&&37>=t?(i.fg&=-50331904,i.fg|=16777216|t-30):40<=t&&47>=t?(i.bg&=-50331904,i.bg|=16777216|t-40):90<=t&&97>=t?(i.fg&=-50331904,i.fg|=16777224|t-90):100<=t&&107>=t?(i.bg&=-50331904,i.bg|=16777224|t-100):0===t?(i.fg=_.DEFAULT_ATTR_DATA.fg,i.bg=_.DEFAULT_ATTR_DATA.bg):1===t?i.fg|=134217728:3===t?i.bg|=67108864:4===t?i.fg|=268435456:5===t?i.fg|=536870912:7===t?i.fg|=67108864:8===t?i.fg|=1073741824:2===t?i.bg|=134217728:22===t?(i.fg&=-134217729,i.bg&=-134217729):23===t?i.bg&=-67108865:24===t?i.fg&=-268435457:25===t?i.fg&=-536870913:27===t?i.fg&=-67108865:28===t?i.fg&=-1073741825:39===t?(i.fg&=-67108864,i.fg|=16777215&_.DEFAULT_ATTR_DATA.fg):49===t?(i.bg&=-67108864,i.bg|=16777215&_.DEFAULT_ATTR_DATA.bg):38===t||48===t?o+=this._extractColor(e,o,i):100===t?(i.fg&=-67108864,i.fg|=16777215&_.DEFAULT_ATTR_DATA.fg,i.bg&=-67108864,i.bg|=16777215&_.DEFAULT_ATTR_DATA.bg):this._logService.debug(\"Unknown SGR attribute: %d.\",t)},t.prototype.deviceStatus=function(e){switch(e.params[0]){case 5:this._coreService.triggerDataEvent(s.C0.ESC+\"[0n\");break;case 6:var t=this._bufferService.buffer.y+1,r=this._bufferService.buffer.x+1;this._coreService.triggerDataEvent(s.C0.ESC+\"[\"+t+\";\"+r+\"R\")}},t.prototype.deviceStatusPrivate=function(e){switch(e.params[0]){case 6:var t=this._bufferService.buffer.y+1,r=this._bufferService.buffer.x+1;this._coreService.triggerDataEvent(s.C0.ESC+\"[?\"+t+\";\"+r+\"R\")}},t.prototype.softReset=function(){this._terminal.cursorHidden=!1,this._terminal.insertMode=!1,this._terminal.originMode=!1,this._terminal.wraparoundMode=!0,this._terminal.applicationKeypad=!1,this._terminal.viewport&&this._terminal.viewport.syncScrollArea(),this._coreService.decPrivateModes.applicationCursorKeys=!1,this._bufferService.buffer.scrollTop=0,this._bufferService.buffer.scrollBottom=this._bufferService.rows-1,this._terminal.curAttrData=_.DEFAULT_ATTR_DATA.clone(),this._bufferService.buffer.x=this._bufferService.buffer.y=0,this._terminal.charset=null,this._terminal.glevel=0,this._terminal.charsets=[null]},t.prototype.setCursorStyle=function(e){var t=e.params[0]||1;1===t||2===t?this._optionsService.options.cursorStyle=\"block\":3===t||4===t?this._optionsService.options.cursorStyle=\"underline\":(5===t||6===t)&&(this._optionsService.options.cursorStyle=\"bar\"),this._optionsService.options.cursorBlink=1==t%2},t.prototype.setScrollRegion=function(e){var t,r=e.params[0]||1;(2>e.length||(t=e.params[1])>this._bufferService.rows||0===t)&&(t=this._bufferService.rows),t>r&&(this._bufferService.buffer.scrollTop=r-1,this._bufferService.buffer.scrollBottom=t-1,this._setCursor(0,0))},t.prototype.saveCursor=function(){this._bufferService.buffer.savedX=this._bufferService.buffer.x,this._bufferService.buffer.savedY=this._bufferService.buffer.ybase+this._bufferService.buffer.y,this._bufferService.buffer.savedCurAttrData.fg=this._terminal.curAttrData.fg,this._bufferService.buffer.savedCurAttrData.bg=this._terminal.curAttrData.bg,this._bufferService.buffer.savedCharset=this._terminal.charset},t.prototype.restoreCursor=function(){this._bufferService.buffer.x=this._bufferService.buffer.savedX||0,this._bufferService.buffer.y=i(this._bufferService.buffer.savedY-this._bufferService.buffer.ybase,0),this._terminal.curAttrData.fg=this._bufferService.buffer.savedCurAttrData.fg,this._terminal.curAttrData.bg=this._bufferService.buffer.savedCurAttrData.bg,this._terminal.charset=this._savedCharset,this._bufferService.buffer.savedCharset&&(this._terminal.charset=this._bufferService.buffer.savedCharset),this._restrictCursor()},t.prototype.setTitle=function(e){this._terminal.handleTitle(e)},t.prototype.nextLine=function(){this._bufferService.buffer.x=0,this.index()},t.prototype.keypadApplicationMode=function(){this._logService.debug(\"Serial port requested application keypad.\"),this._terminal.applicationKeypad=!0,this._terminal.viewport&&this._terminal.viewport.syncScrollArea()},t.prototype.keypadNumericMode=function(){this._logService.debug(\"Switching back to normal keypad.\"),this._terminal.applicationKeypad=!1,this._terminal.viewport&&this._terminal.viewport.syncScrollArea()},t.prototype.selectDefaultCharset=function(){this._terminal.setgLevel(0),this._terminal.setgCharset(0,c.DEFAULT_CHARSET)},t.prototype.selectCharset=function(e){2===e.length?\"/\"!==e[0]&&this._terminal.setgCharset(S[e[0]],c.CHARSETS[e[1]]||c.DEFAULT_CHARSET):this.selectDefaultCharset()},t.prototype.index=function(){this._restrictCursor();var e=this._bufferService.buffer;this._bufferService.buffer.y++,e.y===e.scrollBottom+1?(e.y--,this._terminal.scroll()):e.y>=this._bufferService.rows&&(e.y=this._bufferService.rows-1),this._restrictCursor()},t.prototype.tabSet=function(){this._bufferService.buffer.tabs[this._bufferService.buffer.x]=!0},t.prototype.reverseIndex=function(){this._restrictCursor();var e=this._bufferService.buffer;if(e.y===e.scrollTop){var t=e.scrollBottom-e.scrollTop;e.lines.shiftElements(e.y+e.ybase,t,1),e.lines.set(e.y+e.ybase,e.getBlankLine(this._terminal.eraseAttrData())),this._dirtyRowService.markRangeDirty(e.scrollTop,e.scrollBottom)}else e.y--,this._restrictCursor()},t.prototype.reset=function(){this._parser.reset(),this._terminal.reset()},t.prototype.setgLevel=function(e){this._terminal.setgLevel(e)},t.prototype.screenAlignmentPattern=function(){var e=new y.CellData;e.content=4194373,e.fg=this._terminal.curAttrData.fg,e.bg=this._terminal.curAttrData.bg;var t=this._bufferService.buffer;this._setCursor(0,0);for(var r,i=0;i<this._bufferService.rows;++i)r=t.y+t.ybase+i,t.lines.get(r).fill(e),t.lines.get(r).isWrapped=!1;this._dirtyRowService.markAllDirty(),this._setCursor(0,0)},t}(f.Disposable);t.InputHandler=A},function(e,t,r){\"use strict\";var i,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,\"__esModule\",{value:!0});var n=r(2),s=r(14),a=r(19),c=r(20),h=r(22),u=function(){function e(e){this.table=new Uint8Array(e)}return e.prototype.setDefault=function(e,t){s.fill(this.table,e<<4|t)},e.prototype.add=function(e,t,r,i){this.table[t<<8|e]=r<<4|i},e.prototype.addMany=function(e,t,r,i){for(var o=0;o<e.length;o++)this.table[t<<8|e[o]]=r<<4|i},e}();t.TransitionTable=u,t.VT500_TRANSITION_TABLE=function(){var e=new u(4095),t=Array.apply(null,Array(256)).map((function(e,t){return t})),r=function(e,r){return t.slice(e,r)},i=r(32,127),o=r(0,24);o.push(25),o.push.apply(o,r(28,32));var n,s=r(0,14);for(n in e.setDefault(1,0),e.addMany(i,0,2,0),s)e.addMany([24,26,153,154],n,3,0),e.addMany(r(128,144),n,3,0),e.addMany(r(144,152),n,3,0),e.add(156,n,0,0),e.add(27,n,11,1),e.add(157,n,4,8),e.addMany([152,158,159],n,0,7),e.add(155,n,11,3),e.add(144,n,11,9);return e.addMany(o,0,3,0),e.addMany(o,1,3,1),e.add(127,1,0,1),e.addMany(o,8,0,8),e.addMany(o,3,3,3),e.add(127,3,0,3),e.addMany(o,4,3,4),e.add(127,4,0,4),e.addMany(o,6,3,6),e.addMany(o,5,3,5),e.add(127,5,0,5),e.addMany(o,2,3,2),e.add(127,2,0,2),e.add(93,1,4,8),e.addMany(i,8,5,8),e.add(127,8,5,8),e.addMany([156,27,24,26,7],8,6,0),e.addMany(r(28,32),8,0,8),e.addMany([88,94,95],1,0,7),e.addMany(i,7,0,7),e.addMany(o,7,0,7),e.add(156,7,0,0),e.add(127,7,0,7),e.add(91,1,11,3),e.addMany(r(64,127),3,7,0),e.addMany(r(48,60),3,8,4),e.addMany([60,61,62,63],3,9,4),e.addMany(r(48,60),4,8,4),e.addMany(r(64,127),4,7,0),e.addMany([60,61,62,63],4,0,6),e.addMany(r(32,64),6,0,6),e.add(127,6,0,6),e.addMany(r(64,127),6,0,0),e.addMany(r(32,48),3,9,5),e.addMany(r(32,48),5,9,5),e.addMany(r(48,64),5,0,6),e.addMany(r(64,127),5,7,0),e.addMany(r(32,48),4,9,5),e.addMany(r(32,48),1,9,2),e.addMany(r(32,48),2,9,2),e.addMany(r(48,127),2,10,0),e.addMany(r(48,80),1,10,0),e.addMany(r(81,88),1,10,0),e.addMany([89,90,92],1,10,0),e.addMany(r(96,127),1,10,0),e.add(80,1,11,9),e.addMany(o,9,0,9),e.add(127,9,0,9),e.addMany(r(28,32),9,0,9),e.addMany(r(32,48),9,9,12),e.addMany(r(48,60),9,8,10),e.addMany([60,61,62,63],9,9,10),e.addMany(o,11,0,11),e.addMany(r(32,128),11,0,11),e.addMany(r(28,32),11,0,11),e.addMany(o,10,0,10),e.add(127,10,0,10),e.addMany(r(28,32),10,0,10),e.addMany(r(48,60),10,8,10),e.addMany([60,61,62,63],10,0,11),e.addMany(r(32,48),10,9,12),e.addMany(o,12,0,12),e.add(127,12,0,12),e.addMany(r(28,32),12,0,12),e.addMany(r(32,48),12,9,12),e.addMany(r(48,64),12,0,11),e.addMany(r(64,127),12,12,13),e.addMany(r(64,127),10,12,13),e.addMany(r(64,127),9,12,13),e.addMany(o,13,13,13),e.addMany(i,13,13,13),e.add(127,13,0,13),e.addMany([27,156,24,26],13,14,0),e.add(160,0,2,0),e.add(160,8,5,8),e.add(160,6,0,6),e.add(160,11,0,11),e.add(160,13,13,13),e}();var f=function(e){function r(r){void 0===r&&(r=t.VT500_TRANSITION_TABLE);var i=e.call(this)||this;return i.TRANSITIONS=r,i.initialState=0,i.currentState=i.initialState,i._params=new a.Params,i._params.addParam(0),i._collect=0,i.precedingCodepoint=0,i._printHandlerFb=function(){},i._executeHandlerFb=function(){},i._csiHandlerFb=function(){},i._escHandlerFb=function(){},i._errorHandlerFb=function(e){return e},i._printHandler=i._printHandlerFb,i._executeHandlers=Object.create(null),i._csiHandlers=Object.create(null),i._escHandlers=Object.create(null),i._oscParser=new c.OscParser,i._dcsParser=new h.DcsParser,i._errorHandler=i._errorHandlerFb,i.setEscHandler({final:\"\\\\\"},(function(){})),i}return o(r,e),r.prototype._identifier=function(e,t){void 0===t&&(t=[64,126]);var r=0;if(e.prefix){if(1<e.prefix.length)throw new Error(\"only one byte as prefix supported\");if((r=e.prefix.charCodeAt(0))&&60>r||63<r)throw new Error(\"prefix must be in range 0x3c .. 0x3f\")}if(e.intermediates){if(2<e.intermediates.length)throw new Error(\"only two bytes as intermediates are supported\");for(var i,o=0;o<e.intermediates.length;++o){if(32>(i=e.intermediates.charCodeAt(o))||47<i)throw new Error(\"intermediate must be in range 0x20 .. 0x2f\");r<<=8,r|=i}}if(1!==e.final.length)throw new Error(\"final must be a single byte\");var n=e.final.charCodeAt(0);if(t[0]>n||n>t[1])throw new Error(\"final must be in range \"+t[0]+\" .. \"+t[1]);return(r<<=8)|n},r.prototype.identToString=function(e){for(var t=[];e;)t.push(l(255&e)),e>>=8;return t.reverse().join(\"\")},r.prototype.dispose=function(){this._csiHandlers=Object.create(null),this._executeHandlers=Object.create(null),this._escHandlers=Object.create(null),this._oscParser.dispose(),this._dcsParser.dispose()},r.prototype.setPrintHandler=function(e){this._printHandler=e},r.prototype.clearPrintHandler=function(){this._printHandler=this._printHandlerFb},r.prototype.addEscHandler=function(e,t){var r=this._identifier(e,[48,126]);void 0===this._escHandlers[r]&&(this._escHandlers[r]=[]);var i=this._escHandlers[r];return i.push(t),{dispose:function(){var e=i.indexOf(t);-1!==e&&i.splice(e,1)}}},r.prototype.setEscHandler=function(e,t){this._escHandlers[this._identifier(e,[48,126])]=[t]},r.prototype.clearEscHandler=function(e){this._escHandlers[this._identifier(e,[48,126])]&&delete this._escHandlers[this._identifier(e,[48,126])]},r.prototype.setEscHandlerFallback=function(e){this._escHandlerFb=e},r.prototype.setExecuteHandler=function(e,t){this._executeHandlers[e.charCodeAt(0)]=t},r.prototype.clearExecuteHandler=function(e){this._executeHandlers[e.charCodeAt(0)]&&delete this._executeHandlers[e.charCodeAt(0)]},r.prototype.setExecuteHandlerFallback=function(e){this._executeHandlerFb=e},r.prototype.addCsiHandler=function(e,t){var r=this._identifier(e);void 0===this._csiHandlers[r]&&(this._csiHandlers[r]=[]);var i=this._csiHandlers[r];return i.push(t),{dispose:function(){var e=i.indexOf(t);-1!==e&&i.splice(e,1)}}},r.prototype.setCsiHandler=function(e,t){this._csiHandlers[this._identifier(e)]=[t]},r.prototype.clearCsiHandler=function(e){this._csiHandlers[this._identifier(e)]&&delete this._csiHandlers[this._identifier(e)]},r.prototype.setCsiHandlerFallback=function(e){this._csiHandlerFb=e},r.prototype.addDcsHandler=function(e,t){return this._dcsParser.addHandler(this._identifier(e),t)},r.prototype.setDcsHandler=function(e,t){this._dcsParser.setHandler(this._identifier(e),t)},r.prototype.clearDcsHandler=function(e){this._dcsParser.clearHandler(this._identifier(e))},r.prototype.setDcsHandlerFallback=function(e){this._dcsParser.setHandlerFallback(e)},r.prototype.addOscHandler=function(e,t){return this._oscParser.addHandler(e,t)},r.prototype.setOscHandler=function(e,t){this._oscParser.setHandler(e,t)},r.prototype.clearOscHandler=function(e){this._oscParser.clearHandler(e)},r.prototype.setOscHandlerFallback=function(e){this._oscParser.setHandlerFallback(e)},r.prototype.setErrorHandler=function(e){this._errorHandler=e},r.prototype.clearErrorHandler=function(){this._errorHandler=this._errorHandlerFb},r.prototype.reset=function(){this.currentState=this.initialState,this._oscParser.reset(),this._dcsParser.reset(),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingCodepoint=0},r.prototype.parse=function(e,t){for(var r=0,i=0,o=this.currentState,n=this._oscParser,s=this._dcsParser,a=this._collect,l=this._params,c=this.TRANSITIONS.table,h=0;h<t;++h){switch((i=c[o<<8|(160>(r=e[h])?r:160)])>>4){case 2:for(var u=h+1;;++u){if(u>=t||32>(r=e[u])||126<r&&160>r){this._printHandler(e,h,u),h=u-1;break}if(++u>=t||32>(r=e[u])||126<r&&160>r){this._printHandler(e,h,u),h=u-1;break}if(++u>=t||32>(r=e[u])||126<r&&160>r){this._printHandler(e,h,u),h=u-1;break}if(++u>=t||32>(r=e[u])||126<r&&160>r){this._printHandler(e,h,u),h=u-1;break}}break;case 3:this._executeHandlers[r]?this._executeHandlers[r]():this._executeHandlerFb(r),this.precedingCodepoint=0;break;case 0:break;case 1:if(this._errorHandler({position:h,code:r,currentState:o,collect:a,params:l,abort:!1}).abort)return;break;case 7:for(var f=this._csiHandlers[a<<8|r],d=f?f.length-1:-1;0<=d&&!1===f[d](l);d--);0>d&&this._csiHandlerFb(a<<8|r,l),this.precedingCodepoint=0;break;case 8:do{59===r?l.addParam(0):58===r?l.addSubParam(-1):l.addDigit(r-48)}while(++h<t&&47<(r=e[h])&&60>r);h--;break;case 9:a<<=8,a|=r;break;case 10:for(var p=this._escHandlers[a<<8|r],_=p?p.length-1:-1;0<=_&&!1===p[_]();_--);0>_&&this._escHandlerFb(a<<8|r),this.precedingCodepoint=0;break;case 11:l.reset(),l.addParam(0),a=0;break;case 12:s.hook(a<<8|r,l);break;case 13:for(var g=h+1;;++g)if(g>=t||24===(r=e[g])||26===r||27===r||127<r&&160>r){s.put(e,h,g),h=g-1;break}break;case 14:s.unhook(24!==r&&26!==r),27===r&&(i|=1),l.reset(),l.addParam(0),a=0,this.precedingCodepoint=0;break;case 4:n.start();break;case 5:for(var b=h+1;;b++)if(b>=t||32>(r=e[b])||127<r&&159>=r){n.put(e,h,b),h=b-1;break}break;case 6:n.end(24!==r&&26!==r),27===r&&(i|=1),l.reset(),l.addParam(0),a=0,this.precedingCodepoint=0}o=15&i}this._collect=a,this.currentState=o},r}(n.Disposable);t.EscapeSequenceParser=f},function(e,t,r){\"use strict\";var i,a=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,\"__esModule\",{value:!0});var l=r(40),c=r(45),h=r(46),u=r(47),f=r(27),d=r(2),p=r(23),_=1,g=function(e){function t(t,r,i,o,n){var s=e.call(this)||this;s._colors=t,s._terminal=r,s.bufferService=i,s._charSizeService=o,s.optionsService=n,s._id=_++;var a=s._terminal.options.allowTransparency;return s._characterJoinerRegistry=new f.CharacterJoinerRegistry(i),s._renderLayers=[new l.TextRenderLayer(s._terminal.screenElement,0,s._colors,s._characterJoinerRegistry,a,s._id,i,n),new c.SelectionRenderLayer(s._terminal.screenElement,1,s._colors,s._id,i,n),new u.LinkRenderLayer(s._terminal.screenElement,2,s._colors,s._id,s._terminal.linkifier,i,n),new h.CursorRenderLayer(s._terminal.screenElement,3,s._colors,s._terminal,s._id,i,n)],s.dimensions={scaledCharWidth:null,scaledCharHeight:null,scaledCellWidth:null,scaledCellHeight:null,scaledCharLeft:null,scaledCharTop:null,scaledCanvasWidth:null,scaledCanvasHeight:null,canvasWidth:null,canvasHeight:null,actualCellWidth:null,actualCellHeight:null},s._devicePixelRatio=window.devicePixelRatio,s._updateDimensions(),s.onOptionsChanged(),s}return a(t,e),t.prototype.dispose=function(){e.prototype.dispose.call(this),this._renderLayers.forEach((function(e){return e.dispose()})),p.removeTerminalFromCache(this._id)},t.prototype.onDevicePixelRatioChange=function(){this._devicePixelRatio!==window.devicePixelRatio&&(this._devicePixelRatio=window.devicePixelRatio,this.onResize(this._terminal.cols,this._terminal.rows))},t.prototype.setColors=function(e){var t=this;this._colors=e,this._renderLayers.forEach((function(e){e.setColors(t._colors),e.reset()}))},t.prototype.onResize=function(){var e=this;this._updateDimensions(),this._renderLayers.forEach((function(t){return t.resize(e.dimensions)})),this._terminal.screenElement.style.width=this.dimensions.canvasWidth+\"px\",this._terminal.screenElement.style.height=this.dimensions.canvasHeight+\"px\"},t.prototype.onCharSizeChanged=function(){this.onResize(this._terminal.cols,this._terminal.rows)},t.prototype.onBlur=function(){this._runOperation((function(e){return e.onBlur()}))},t.prototype.onFocus=function(){this._runOperation((function(e){return e.onFocus()}))},t.prototype.onSelectionChanged=function(e,t,r){void 0===r&&(r=!1),this._runOperation((function(i){return i.onSelectionChanged(e,t,r)}))},t.prototype.onCursorMove=function(){this._runOperation((function(e){return e.onCursorMove()}))},t.prototype.onOptionsChanged=function(){this._runOperation((function(e){return e.onOptionsChanged()}))},t.prototype.clear=function(){this._runOperation((function(e){return e.reset()}))},t.prototype._runOperation=function(e){this._renderLayers.forEach((function(t){return e(t)}))},t.prototype.renderRows=function(e,t){this._renderLayers.forEach((function(r){return r.onGridChanged(e,t)}))},t.prototype._updateDimensions=function(){this._charSizeService.hasValidSize&&(this.dimensions.scaledCharWidth=o(this._charSizeService.width*window.devicePixelRatio),this.dimensions.scaledCharHeight=n(this._charSizeService.height*window.devicePixelRatio),this.dimensions.scaledCellHeight=o(this.dimensions.scaledCharHeight*this._terminal.options.lineHeight),this.dimensions.scaledCharTop=1===this._terminal.options.lineHeight?0:s((this.dimensions.scaledCellHeight-this.dimensions.scaledCharHeight)/2),this.dimensions.scaledCellWidth=this.dimensions.scaledCharWidth+s(this._terminal.options.letterSpacing),this.dimensions.scaledCharLeft=o(this._terminal.options.letterSpacing/2),this.dimensions.scaledCanvasHeight=this._terminal.rows*this.dimensions.scaledCellHeight,this.dimensions.scaledCanvasWidth=this._terminal.cols*this.dimensions.scaledCellWidth,this.dimensions.canvasHeight=s(this.dimensions.scaledCanvasHeight/window.devicePixelRatio),this.dimensions.canvasWidth=s(this.dimensions.scaledCanvasWidth/window.devicePixelRatio),this.dimensions.actualCellHeight=this.dimensions.canvasHeight/this._terminal.rows,this.dimensions.actualCellWidth=this.dimensions.canvasWidth/this._terminal.cols)},t.prototype.registerCharacterJoiner=function(e){return this._characterJoinerRegistry.registerCharacterJoiner(e)},t.prototype.deregisterCharacterJoiner=function(e){return this._characterJoinerRegistry.deregisterCharacterJoiner(e)},t}(d.Disposable);t.Renderer=g},function(e,t,r){\"use strict\";var i,n=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,\"__esModule\",{value:!0});var s=r(41),a=r(12),l=r(6),c=r(3),h=r(27),u=r(4),f=function(e){function t(t,r,i,o,n,a,l,c){var h=e.call(this,t,\"text\",r,n,i,a,l,c)||this;return h.bufferService=l,h.optionsService=c,h._characterWidth=0,h._characterFont=\"\",h._characterOverlapCache={},h._workCell=new u.CellData,h._state=new s.GridCache,h._characterJoinerRegistry=o,h}return n(t,e),t.prototype.resize=function(t){e.prototype.resize.call(this,t);var r=this._getFont(!1,!1);this._characterWidth===t.scaledCharWidth&&this._characterFont===r||(this._characterWidth=t.scaledCharWidth,this._characterFont=r,this._characterOverlapCache={}),this._state.clear(),this._state.resize(this._bufferService.cols,this._bufferService.rows)},t.prototype.reset=function(){this._state.clear(),this._clearAll()},t.prototype._forEachCell=function(e,t,r,i){for(var o=e;o<=t;o++)for(var n=o+this._bufferService.buffer.ydisp,s=this._bufferService.buffer.lines.get(n),a=r?r.getJoinedCharacters(n):[],l=0;l<this._bufferService.cols;l++){s.loadCell(l,this._workCell);var u=this._workCell,f=!1,d=l;if(0!==u.getWidth()){if(0<a.length&&l===a[0][0]){f=!0;var p=a.shift();u=new h.JoinedCellData(this._workCell,s.translateToString(!0,p[0],p[1]),p[1]-p[0]),d=p[1]-1}!f&&this._isOverlapping(u)&&d<s.length-1&&s.getCodePoint(d+1)===c.NULL_CELL_CODE&&(u.content&=-12582913,u.content|=8388608),i(u,l,o),l=d}}},t.prototype._drawBackground=function(e,t){var r=this,i=this._ctx,o=this._bufferService.cols,n=0,s=0,a=null;i.save(),this._forEachCell(e,t,null,(function(e,t,c){var h=null;e.isInverse()?h=e.isFgDefault()?r._colors.foreground.css:e.isFgRGB()?\"rgb(\"+l.AttributeData.toColorRGB(e.getFgColor()).join(\",\")+\")\":r._colors.ansi[e.getFgColor()].css:e.isBgRGB()?h=\"rgb(\"+l.AttributeData.toColorRGB(e.getBgColor()).join(\",\")+\")\":e.isBgPalette()&&(h=r._colors.ansi[e.getBgColor()].css),null===a&&(n=t,s=c),c===s?a!==h&&(i.fillStyle=a||\"\",r._fillCells(n,s,t-n,1),n=t,s=c):(i.fillStyle=a||\"\",r._fillCells(n,s,o-n,1),n=t,s=c),a=h})),null!==a&&(i.fillStyle=a,this._fillCells(n,s,o-n,1)),i.restore()},t.prototype._drawForeground=function(e,t){var r=this;this._forEachCell(e,t,this._characterJoinerRegistry,(function(e,t,i){if(!e.isInvisible()&&(r._drawChars(e,t,i),e.isUnderline())){if(r._ctx.save(),e.isInverse())r._ctx.fillStyle=e.isBgDefault()?r._colors.background.css:e.isBgRGB()?\"rgb(\"+l.AttributeData.toColorRGB(e.getBgColor()).join(\",\")+\")\":r._colors.ansi[e.getBgColor()].css;else if(e.isFgDefault())r._ctx.fillStyle=r._colors.foreground.css;else if(e.isFgRGB())r._ctx.fillStyle=\"rgb(\"+l.AttributeData.toColorRGB(e.getFgColor()).join(\",\")+\")\";else{var o=e.getFgColor();r._optionsService.options.drawBoldTextInBrightColors&&e.isBold()&&8>o&&(o+=8),r._ctx.fillStyle=r._colors.ansi[o].css}r._fillBottomLineAtCells(t,i,e.getWidth()),r._ctx.restore()}}))},t.prototype.onGridChanged=function(e,t){0!==this._state.cache.length&&(this._charAtlas&&this._charAtlas.beginFrame(),this._clearCells(0,e,this._bufferService.cols,t-e+1),this._drawBackground(e,t),this._drawForeground(e,t))},t.prototype.onOptionsChanged=function(){this._setTransparency(this._optionsService.options.allowTransparency)},t.prototype._isOverlapping=function(e){if(1!==e.getWidth())return!1;if(256>e.getCode())return!1;var t=e.getChars();if(this._characterOverlapCache.hasOwnProperty(t))return this._characterOverlapCache[t];this._ctx.save(),this._ctx.font=this._characterFont;var r=o(this._ctx.measureText(t).width)>this._characterWidth;return this._ctx.restore(),this._characterOverlapCache[t]=r,r},t}(a.BaseRenderLayer);t.TextRenderLayer=f},function(e,t){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var r=function(){function e(){this.cache=[]}return e.prototype.resize=function(e,t){for(var r=0;r<e;r++){this.cache.length<=r&&this.cache.push([]);for(var i=this.cache[r].length;i<t;i++)this.cache[r].push(void 0);this.cache[r].length=t}this.cache.length=e},e.prototype.clear=function(){for(var e=0;e<this.cache.length;e++)for(var t=0;t<this.cache[e].length;t++)this.cache[e][t]=void 0},e}();t.GridCache=r},function(e,t,r){\"use strict\";function i(e){return e.code<<21|e.bg<<12|e.fg<<3|(e.bold?0:4)+(e.dim?0:2)+(e.italic?0:1)}var n,s=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,\"__esModule\",{value:!0});var a=r(9),l=r(43),c=r(25),h=r(44),u=r(10),f=r(26),d=1024,p=1024,_={css:\"rgba(0, 0, 0, 0)\",rgba:0};t.getGlyphCacheKey=i;var g=function(e){function t(t,r){var i=e.call(this)||this;i._config=r,i._drawToCacheCount=0,i._glyphsWaitingOnBitmap=[],i._bitmapCommitTimeout=null,i._bitmap=null,i._cacheCanvas=t.createElement(\"canvas\"),i._cacheCanvas.width=d,i._cacheCanvas.height=p,i._cacheCtx=f.throwIfFalsy(i._cacheCanvas.getContext(\"2d\",{alpha:!0}));var n=t.createElement(\"canvas\");n.width=i._config.scaledCharWidth,n.height=i._config.scaledCharHeight,i._tmpCtx=f.throwIfFalsy(n.getContext(\"2d\",{alpha:i._config.allowTransparency})),i._width=o(d/i._config.scaledCharWidth),i._height=o(p/i._config.scaledCharHeight);var s=i._width*i._height;return i._cacheMap=new h.LRUMap(s),i._cacheMap.prealloc(s),i}return s(t,e),t.prototype.dispose=function(){null!==this._bitmapCommitTimeout&&(window.clearTimeout(this._bitmapCommitTimeout),this._bitmapCommitTimeout=null)},t.prototype.beginFrame=function(){this._drawToCacheCount=0},t.prototype.draw=function(e,t,r,o){if(32===t.code)return!0;if(!this._canCache(t))return!1;var n=i(t),s=this._cacheMap.get(n);if(null!=s)return this._drawFromCache(e,s,r,o),!0;if(100>this._drawToCacheCount){var a=this._cacheMap.size<this._cacheMap.capacity?this._cacheMap.size:this._cacheMap.peek().index,l=this._drawToCache(t,a);return this._cacheMap.set(n,l),this._drawFromCache(e,l,r,o),!0}return!1},t.prototype._canCache=function(e){return 256>e.code},t.prototype._toCoordinateX=function(e){return e%this._width*this._config.scaledCharWidth},t.prototype._toCoordinateY=function(e){return o(e/this._width)*this._config.scaledCharHeight},t.prototype._drawFromCache=function(e,t,r,i){if(!t.isEmpty){var o=this._toCoordinateX(t.index),n=this._toCoordinateY(t.index);e.drawImage(t.inBitmap?this._bitmap:this._cacheCanvas,o,n,this._config.scaledCharWidth,this._config.scaledCharHeight,r,i,this._config.scaledCharWidth,this._config.scaledCharHeight)}},t.prototype._getColorFromAnsiIndex=function(e){return e<this._config.colors.ansi.length?this._config.colors.ansi[e]:c.DEFAULT_ANSI_COLORS[e]},t.prototype._getBackgroundColor=function(e){return this._config.allowTransparency?_:e.bg===a.INVERTED_DEFAULT_COLOR?this._config.colors.foreground:256>e.bg?this._getColorFromAnsiIndex(e.bg):this._config.colors.background},t.prototype._getForegroundColor=function(e){return e.fg===a.INVERTED_DEFAULT_COLOR?this._config.colors.background:256>e.fg?this._getColorFromAnsiIndex(e.fg):this._config.colors.foreground},t.prototype._drawToCache=function(e,t){this._drawToCacheCount++,this._tmpCtx.save();var r=this._getBackgroundColor(e);this._tmpCtx.globalCompositeOperation=\"copy\",this._tmpCtx.fillStyle=r.css,this._tmpCtx.fillRect(0,0,this._config.scaledCharWidth,this._config.scaledCharHeight),this._tmpCtx.globalCompositeOperation=\"source-over\";var i=e.bold?this._config.fontWeightBold:this._config.fontWeight,o=e.italic?\"italic\":\"\";this._tmpCtx.font=o+\" \"+i+\" \"+this._config.fontSize*this._config.devicePixelRatio+\"px \"+this._config.fontFamily,this._tmpCtx.textBaseline=\"middle\",this._tmpCtx.fillStyle=this._getForegroundColor(e).css,e.dim&&(this._tmpCtx.globalAlpha=a.DIM_OPACITY),this._tmpCtx.fillText(e.chars,0,this._config.scaledCharHeight/2),this._tmpCtx.restore();var n=this._tmpCtx.getImageData(0,0,this._config.scaledCharWidth,this._config.scaledCharHeight),s=!1;this._config.allowTransparency||(s=function(e,t){for(var r=!0,i=t.rgba>>>24,o=255&t.rgba>>>16,n=255&t.rgba>>>8,s=0;s<e.data.length;s+=4)e.data[s]===i&&e.data[s+1]===o&&e.data[s+2]===n?e.data[s+3]=0:r=!1;return r}(n,r));var l=this._toCoordinateX(t),c=this._toCoordinateY(t);this._cacheCtx.putImageData(n,l,c);var h={index:t,isEmpty:s,inBitmap:!1};return this._addGlyphToBitmap(h),h},t.prototype._addGlyphToBitmap=function(e){var t=this;!(\"createImageBitmap\"in window)||u.isFirefox||u.isSafari||(this._glyphsWaitingOnBitmap.push(e),null===this._bitmapCommitTimeout&&(this._bitmapCommitTimeout=window.setTimeout((function(){return t._generateBitmap()}),100)))},t.prototype._generateBitmap=function(){var e=this,t=this._glyphsWaitingOnBitmap;this._glyphsWaitingOnBitmap=[],window.createImageBitmap(this._cacheCanvas).then((function(r){e._bitmap=r;for(var i=0;i<t.length;i++)t[i].inBitmap=!0})),this._bitmapCommitTimeout=null},t}(l.BaseCharAtlas);t.DynamicCharAtlas=g;var b=function(e){function t(){return e.call(this)||this}return s(t,e),t.prototype.draw=function(){return!1},t}(l.BaseCharAtlas);t.NoneCharAtlas=b},function(e,t){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var r=function(){function e(){this._didWarmUp=!1}return e.prototype.dispose=function(){},e.prototype.warmUp=function(){this._didWarmUp||(this._doWarmUp(),this._didWarmUp=!0)},e.prototype._doWarmUp=function(){},e.prototype.beginFrame=function(){},e}();t.BaseCharAtlas=r},function(e,t){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var r=function(){function e(e){this.capacity=e,this._map={},this._head=null,this._tail=null,this._nodePool=[],this.size=0}return e.prototype._unlinkNode=function(e){var t=e.prev,r=e.next;e===this._head&&(this._head=r),e===this._tail&&(this._tail=t),null!==t&&(t.next=r),null!==r&&(r.prev=t)},e.prototype._appendNode=function(e){var t=this._tail;null!==t&&(t.next=e),e.prev=t,e.next=null,this._tail=e,null===this._head&&(this._head=e)},e.prototype.prealloc=function(e){for(var t=this._nodePool,r=0;r<e;r++)t.push({prev:null,next:null,key:null,value:null})},e.prototype.get=function(e){var t=this._map[e];return void 0===t?null:(this._unlinkNode(t),this._appendNode(t),t.value)},e.prototype.peekValue=function(e){var t=this._map[e];return void 0===t?null:t.value},e.prototype.peek=function(){var e=this._head;return null===e?null:e.value},e.prototype.set=function(e,t){var r=this._map[e];if(void 0!==r)r=this._map[e],this._unlinkNode(r),r.value=t;else if(this.size>=this.capacity)r=this._head,this._unlinkNode(r),delete this._map[r.key],r.key=e,r.value=t,this._map[e]=r;else{var i=this._nodePool;0<i.length?((r=i.pop()).key=e,r.value=t):r={prev:null,next:null,key:e,value:t},this._map[e]=r,this.size++}this._appendNode(r)},e}();t.LRUMap=r},function(e,t,r){\"use strict\";var o,n=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,\"__esModule\",{value:!0});var s=function(e){function t(t,r,i,o,n,s){var a=e.call(this,t,\"selection\",r,!0,i,o,n,s)||this;return a.bufferService=n,a.optionsService=s,a._clearState(),a}return n(t,e),t.prototype._clearState=function(){this._state={start:void 0,end:void 0,columnSelectMode:void 0,ydisp:void 0}},t.prototype.resize=function(t){e.prototype.resize.call(this,t),this._clearState()},t.prototype.reset=function(){this._state.start&&this._state.end&&(this._clearState(),this._clearAll())},t.prototype.onSelectionChanged=function(e,t,r){if(this._didStateChange(e,t,r,this._bufferService.buffer.ydisp))if(this._clearAll(),e&&t){var o=e[1]-this._bufferService.buffer.ydisp,n=t[1]-this._bufferService.buffer.ydisp,s=i(o,0),l=a(n,this._bufferService.rows-1);if(!(s>=this._bufferService.rows||0>l)){if(this._ctx.fillStyle=this._colors.selection.css,r){var c=e[0],h=t[0]-c;this._fillCells(c,s,h,l-s+1)}else{c=o===s?e[0]:0;var u=s===l?t[0]:this._bufferService.cols;this._fillCells(c,s,u-c,1);var f=i(l-s-1,0);if(this._fillCells(0,s+1,this._bufferService.cols,f),s!==l){var d=n===l?t[0]:this._bufferService.cols;this._fillCells(0,l,d,1)}}this._state.start=[e[0],e[1]],this._state.end=[t[0],t[1]],this._state.columnSelectMode=r,this._state.ydisp=this._bufferService.buffer.ydisp}}else this._clearState()},t.prototype._didStateChange=function(e,t,r,i){return!this._areCoordinatesEqual(e,this._state.start)||!this._areCoordinatesEqual(t,this._state.end)||r!==this._state.columnSelectMode||i!==this._state.ydisp},t.prototype._areCoordinatesEqual=function(e,t){return e&&t&&e[0]===t[0]&&e[1]===t[1]},t}(r(12).BaseRenderLayer);t.SelectionRenderLayer=s},function(e,t,r){\"use strict\";var i,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,\"__esModule\",{value:!0});var n=r(12),s=r(4),a=function(e){function t(t,r,i,o,n,a,l){var c=e.call(this,t,\"cursor\",r,!0,i,n,a,l)||this;return c._terminal=o,c.bufferService=a,c.optionsService=l,c._cell=new s.CellData,c._state={x:null,y:null,isFocused:null,style:null,width:null},c._cursorRenderers={bar:c._renderBarCursor.bind(c),block:c._renderBlockCursor.bind(c),underline:c._renderUnderlineCursor.bind(c)},c}return o(t,e),t.prototype.resize=function(t){e.prototype.resize.call(this,t),this._state={x:null,y:null,isFocused:null,style:null,width:null}},t.prototype.reset=function(){this._clearCursor(),this._cursorBlinkStateManager&&(this._cursorBlinkStateManager.dispose(),this._cursorBlinkStateManager=null,this.onOptionsChanged())},t.prototype.onBlur=function(){this._cursorBlinkStateManager&&this._cursorBlinkStateManager.pause(),this._terminal.refresh(this._bufferService.buffer.y,this._bufferService.buffer.y)},t.prototype.onFocus=function(){this._cursorBlinkStateManager?this._cursorBlinkStateManager.resume():this._terminal.refresh(this._bufferService.buffer.y,this._bufferService.buffer.y)},t.prototype.onOptionsChanged=function(){var e=this;this._optionsService.options.cursorBlink?this._cursorBlinkStateManager||(this._cursorBlinkStateManager=new l(this._terminal.isFocused,(function(){e._render(!0)}))):this._cursorBlinkStateManager&&(this._cursorBlinkStateManager.dispose(),this._cursorBlinkStateManager=null),this._terminal.refresh(this._bufferService.buffer.y,this._bufferService.buffer.y)},t.prototype.onCursorMove=function(){this._cursorBlinkStateManager&&this._cursorBlinkStateManager.restartBlinkAnimation()},t.prototype.onGridChanged=function(){!this._cursorBlinkStateManager||this._cursorBlinkStateManager.isPaused?this._render(!1):this._cursorBlinkStateManager.restartBlinkAnimation()},t.prototype._render=function(){if(this._terminal.cursorState&&!this._terminal.cursorHidden){var e=this._bufferService.buffer.ybase+this._bufferService.buffer.y,t=e-this._bufferService.buffer.ydisp;if(0>t||t>=this._bufferService.rows)this._clearCursor();else if(this._bufferService.buffer.lines.get(e).loadCell(this._bufferService.buffer.x,this._cell),void 0!==this._cell.content){if(!this._terminal.isFocused){this._clearCursor(),this._ctx.save(),this._ctx.fillStyle=this._colors.cursor.css;var r=this._optionsService.options.cursorStyle;return r&&\"block\"!==r?this._cursorRenderers[r](this._bufferService.buffer.x,t,this._cell):this._renderBlurCursor(this._bufferService.buffer.x,t,this._cell),this._ctx.restore(),this._state.x=this._bufferService.buffer.x,this._state.y=t,this._state.isFocused=!1,this._state.style=r,void(this._state.width=this._cell.getWidth())}if(!this._cursorBlinkStateManager||this._cursorBlinkStateManager.isCursorVisible){if(this._state){if(this._state.x===this._bufferService.buffer.x&&this._state.y===t&&this._state.isFocused===this._terminal.isFocused&&this._state.style===this._optionsService.options.cursorStyle&&this._state.width===this._cell.getWidth())return;this._clearCursor()}this._ctx.save(),this._cursorRenderers[this._optionsService.options.cursorStyle||\"block\"](this._bufferService.buffer.x,t,this._cell),this._ctx.restore(),this._state.x=this._bufferService.buffer.x,this._state.y=t,this._state.isFocused=!1,this._state.style=this._optionsService.options.cursorStyle,this._state.width=this._cell.getWidth()}else this._clearCursor()}}else this._clearCursor()},t.prototype._clearCursor=function(){this._state&&(this._clearCells(this._state.x,this._state.y,this._state.width,1),this._state={x:null,y:null,isFocused:null,style:null,width:null})},t.prototype._renderBarCursor=function(e,t){this._ctx.save(),this._ctx.fillStyle=this._colors.cursor.css,this._fillLeftLineAtCell(e,t),this._ctx.restore()},t.prototype._renderBlockCursor=function(e,t,r){this._ctx.save(),this._ctx.fillStyle=this._colors.cursor.css,this._fillCells(e,t,r.getWidth(),1),this._ctx.fillStyle=this._colors.cursorAccent.css,this._fillCharTrueColor(r,e,t),this._ctx.restore()},t.prototype._renderUnderlineCursor=function(e,t){this._ctx.save(),this._ctx.fillStyle=this._colors.cursor.css,this._fillBottomLineAtCells(e,t),this._ctx.restore()},t.prototype._renderBlurCursor=function(e,t,r){this._ctx.save(),this._ctx.strokeStyle=this._colors.cursor.css,this._strokeRectAtCell(e,t,r.getWidth(),1),this._ctx.restore()},t}(n.BaseRenderLayer);t.CursorRenderLayer=a;var l=function(){function e(e,t){this._renderCallback=t,this.isCursorVisible=!0,e&&this._restartInterval()}return Object.defineProperty(e.prototype,\"isPaused\",{get:function(){return!(this._blinkStartTimeout||this._blinkInterval)},enumerable:!0,configurable:!0}),e.prototype.dispose=function(){this._blinkInterval&&(window.clearInterval(this._blinkInterval),this._blinkInterval=null),this._blinkStartTimeout&&(window.clearTimeout(this._blinkStartTimeout),this._blinkStartTimeout=null),this._animationFrame&&(window.cancelAnimationFrame(this._animationFrame),this._animationFrame=null)},e.prototype.restartBlinkAnimation=function(){var e=this;this.isPaused||(this._animationTimeRestarted=Date.now(),this.isCursorVisible=!0,this._animationFrame||(this._animationFrame=window.requestAnimationFrame((function(){e._renderCallback(),e._animationFrame=null}))))},e.prototype._restartInterval=function(e){var t=this;void 0===e&&(e=600),this._blinkInterval&&window.clearInterval(this._blinkInterval),this._blinkStartTimeout=setTimeout((function(){if(t._animationTimeRestarted){var e=600-(Date.now()-t._animationTimeRestarted);if(t._animationTimeRestarted=null,0<e)return void t._restartInterval(e)}t.isCursorVisible=!1,t._animationFrame=window.requestAnimationFrame((function(){t._renderCallback(),t._animationFrame=null})),t._blinkInterval=setInterval((function(){if(t._animationTimeRestarted){var e=600-(Date.now()-t._animationTimeRestarted);return t._animationTimeRestarted=null,void t._restartInterval(e)}t.isCursorVisible=!t.isCursorVisible,t._animationFrame=window.requestAnimationFrame((function(){t._renderCallback(),t._animationFrame=null}))}),600)}),e)},e.prototype.pause=function(){this.isCursorVisible=!0,this._blinkInterval&&(window.clearInterval(this._blinkInterval),this._blinkInterval=null),this._blinkStartTimeout&&(window.clearTimeout(this._blinkStartTimeout),this._blinkStartTimeout=null),this._animationFrame&&(window.cancelAnimationFrame(this._animationFrame),this._animationFrame=null)},e.prototype.resume=function(){this._animationTimeRestarted=null,this._restartInterval(),this.restartBlinkAnimation()},e}()},function(e,t,r){\"use strict\";var i,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,\"__esModule\",{value:!0});var n=r(12),s=r(9),a=r(24),l=function(e){function t(t,r,i,o,n,s,a){var l=e.call(this,t,\"link\",r,!0,i,o,s,a)||this;return l.bufferService=s,l.optionsService=a,n.onLinkHover((function(e){return l._onLinkHover(e)})),n.onLinkLeave((function(e){return l._onLinkLeave(e)})),l}return o(t,e),t.prototype.resize=function(t){e.prototype.resize.call(this,t),this._state=void 0},t.prototype.reset=function(){this._clearCurrentLink()},t.prototype._clearCurrentLink=function(){if(this._state){this._clearCells(this._state.x1,this._state.y1,this._state.cols-this._state.x1,1);var e=this._state.y2-this._state.y1-1;0<e&&this._clearCells(0,this._state.y1+1,this._state.cols,e),this._clearCells(0,this._state.y2,this._state.x2,1),this._state=void 0}},t.prototype._onLinkHover=function(e){if(this._ctx.fillStyle=e.fg===s.INVERTED_DEFAULT_COLOR?this._colors.background.css:e.fg&&a.is256Color(e.fg)?this._colors.ansi[e.fg].css:this._colors.foreground.css,e.y1===e.y2)this._fillBottomLineAtCells(e.x1,e.y1,e.x2-e.x1);else{this._fillBottomLineAtCells(e.x1,e.y1,e.cols-e.x1);for(var t=e.y1+1;t<e.y2;t++)this._fillBottomLineAtCells(0,t,e.cols);this._fillBottomLineAtCells(0,e.y2,e.x2)}this._state=e},t.prototype._onLinkLeave=function(){this._clearCurrentLink()},t}(n.BaseRenderLayer);t.LinkRenderLayer=l},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var s=r(18),l=r(1),c=function(){function e(e,t){this._bufferService=e,this._logService=t,this._linkMatchers=[],this._nextLinkMatcherId=0,this._onLinkHover=new l.EventEmitter,this._onLinkLeave=new l.EventEmitter,this._onLinkTooltip=new l.EventEmitter,this._rowsToLinkify={start:void 0,end:void 0}}return Object.defineProperty(e.prototype,\"onLinkHover\",{get:function(){return this._onLinkHover.event},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"onLinkLeave\",{get:function(){return this._onLinkLeave.event},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"onLinkTooltip\",{get:function(){return this._onLinkTooltip.event},enumerable:!0,configurable:!0}),e.prototype.attachToDom=function(e,t){this._element=e,this._mouseZoneManager=t},e.prototype.linkifyRows=function(t,r){var o=this;this._mouseZoneManager&&(void 0===this._rowsToLinkify.start||void 0===this._rowsToLinkify.end?(this._rowsToLinkify.start=t,this._rowsToLinkify.end=r):(this._rowsToLinkify.start=a(this._rowsToLinkify.start,t),this._rowsToLinkify.end=i(this._rowsToLinkify.end,r)),this._mouseZoneManager.clearAll(t,r),this._rowsTimeoutId&&clearTimeout(this._rowsTimeoutId),this._rowsTimeoutId=setTimeout((function(){return o._linkifyRows()}),e._timeBeforeLatency))},e.prototype._linkifyRows=function(){this._rowsTimeoutId=void 0;var e=this._bufferService.buffer;if(void 0!==this._rowsToLinkify.start&&void 0!==this._rowsToLinkify.end){var t=e.ydisp+this._rowsToLinkify.start;if(!(t>=e.lines.length)){for(var r=e.ydisp+a(this._rowsToLinkify.end,this._bufferService.rows)+1,i=n(2e3/this._bufferService.cols),o=this._bufferService.buffer.iterator(!1,t,r,i,i);o.hasNext();)for(var s=o.next(),l=0;l<this._linkMatchers.length;l++)this._doLinkifyRow(s.range.first,s.content,this._linkMatchers[l]);this._rowsToLinkify.start=void 0,this._rowsToLinkify.end=void 0}}else this._logService.debug(\"_rowToLinkify was unset before _linkifyRows was called\")},e.prototype.registerLinkMatcher=function(e,t,r){if(void 0===r&&(r={}),!t)throw new Error(\"handler must be defined\");var i={id:this._nextLinkMatcherId++,regex:e,handler:t,matchIndex:r.matchIndex,validationCallback:r.validationCallback,hoverTooltipCallback:r.tooltipCallback,hoverLeaveCallback:r.leaveCallback,willLinkActivate:r.willLinkActivate,priority:r.priority||0};return this._addLinkMatcherToList(i),i.id},e.prototype._addLinkMatcherToList=function(e){if(0!==this._linkMatchers.length){for(var t=this._linkMatchers.length-1;0<=t;t--)if(e.priority<=this._linkMatchers[t].priority)return void this._linkMatchers.splice(t+1,0,e);this._linkMatchers.splice(0,0,e)}else this._linkMatchers.push(e)},e.prototype.deregisterLinkMatcher=function(e){for(var t=0;t<this._linkMatchers.length;t++)if(this._linkMatchers[t].id===e)return this._linkMatchers.splice(t,1),!0;return!1},e.prototype._doLinkifyRow=function(e,t,r){for(var i,o=this,n=new RegExp(r.regex.source,(r.regex.flags||\"\")+\"g\"),s=-1,a=function(){var a=i[\"number\"==typeof r.matchIndex?r.matchIndex:0];if(!a)return l._logService.debug(\"match found without corresponding matchIndex\",i,r),\"break\";if(s=t.indexOf(a,s+1),n.lastIndex=s+a.length,0>s)return\"break\";var c=l._bufferService.buffer.stringIndexToBufferIndex(e,s);if(0>c[0])return\"break\";var h=l._bufferService.buffer.lines.get(c[0]);if(!h)return\"break\";var u=h.getFg(c[1]),f=u?511&u>>9:void 0;r.validationCallback?r.validationCallback(a,(function(e){o._rowsTimeoutId||e&&o._addLink(c[1],c[0]-o._bufferService.buffer.ydisp,a,r,f)})):l._addLink(c[1],c[0]-l._bufferService.buffer.ydisp,a,r,f)},l=this;null!==(i=n.exec(t))&&\"break\"!==a(););},e.prototype._addLink=function(e,t,r,i,n){var a=this;if(this._mouseZoneManager&&this._element){var l=s.getStringCellWidth(r),c=e%this._bufferService.cols,u=t+o(e/this._bufferService.cols),f=(c+l)%this._bufferService.cols,d=u+o((c+l)/this._bufferService.cols);0===f&&(f=this._bufferService.cols,d--),this._mouseZoneManager.add(new h(c+1,u+1,f+1,d+1,(function(e){return i.handler?i.handler(e,r):void window.open(r,\"_blank\")}),(function(){a._onLinkHover.fire(a._createLinkHoverEvent(c,u,f,d,n)),a._element.classList.add(\"xterm-cursor-pointer\")}),(function(e){a._onLinkTooltip.fire(a._createLinkHoverEvent(c,u,f,d,n)),i.hoverTooltipCallback&&i.hoverTooltipCallback(e,r,{start:{x:c,y:u},end:{x:f,y:d}})}),(function(){a._onLinkLeave.fire(a._createLinkHoverEvent(c,u,f,d,n)),a._element.classList.remove(\"xterm-cursor-pointer\"),i.hoverLeaveCallback&&i.hoverLeaveCallback()}),(function(e){return!i.willLinkActivate||i.willLinkActivate(e,r)})))}},e.prototype._createLinkHoverEvent=function(e,t,r,i,o){return{x1:e,y1:t,x2:r,y2:i,cols:this._bufferService.cols,fg:o}},e._timeBeforeLatency=200,e}();t.Linkifier=c;var h=function(e,t,r,i,o,n,s,a,l){this.x1=e,this.y1=t,this.x2=r,this.y2=i,this.clickCallback=o,this.hoverCallback=n,this.tooltipCallback=s,this.leaveCallback=a,this.willLinkActivate=l};t.MouseZone=h},function(e,t,o){\"use strict\";var l=this&&this.__decorate||function(e,t,r,i){var o,n=arguments.length,s=3>n?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if(\"object\"==typeof Reflect&&\"function\"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,i);else for(var a=e.length-1;0<=a;a--)(o=e[a])&&(s=(3>n?o(s):3<n?o(t,r,s):o(t,r))||s);return 3<n&&s&&Object.defineProperty(t,r,s),s},c=this&&this.__param||function(e,t){return function(r,i){t(r,i,e)}};Object.defineProperty(t,\"__esModule\",{value:!0});var h=o(10),u=o(50),f=o(4),d=o(1),p=o(5),_=o(0),g=o(28),b=o(51),y=/\u00a0/g,m=function(){function e(e,t,r,i,o,n,s,a){var l=this;this._scrollLines=e,this._element=t,this._screenElement=r,this._charSizeService=i,this._bufferService=o,this._coreService=n,this._mouseService=s,this._optionsService=a,this._dragScrollAmount=0,this._enabled=!0,this._workCell=new f.CellData,this._mouseDownTimeStamp=0,this._onLinuxMouseSelection=new d.EventEmitter,this._onRedrawRequest=new d.EventEmitter,this._onSelectionChange=new d.EventEmitter,this._mouseMoveListener=function(e){return l._onMouseMove(e)},this._mouseUpListener=function(e){return l._onMouseUp(e)},this._coreService.onUserInput((function(){l.hasSelection&&l.clearSelection()})),this._trimListener=this._bufferService.buffer.lines.onTrim((function(e){return l._onTrim(e)})),this._bufferService.buffers.onBufferActivate((function(e){return l._onBufferActivate(e)})),this.enable(),this._model=new u.SelectionModel(this._bufferService),this._activeSelectionMode=0}return Object.defineProperty(e.prototype,\"onLinuxMouseSelection\",{get:function(){return this._onLinuxMouseSelection.event},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"onRedrawRequest\",{get:function(){return this._onRedrawRequest.event},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"onSelectionChange\",{get:function(){return this._onSelectionChange.event},enumerable:!0,configurable:!0}),e.prototype.dispose=function(){this._removeMouseDownListeners()},e.prototype.reset=function(){this.clearSelection()},e.prototype.disable=function(){this.clearSelection(),this._enabled=!1},e.prototype.enable=function(){this._enabled=!0},Object.defineProperty(e.prototype,\"selectionStart\",{get:function(){return this._model.finalSelectionStart},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"selectionEnd\",{get:function(){return this._model.finalSelectionEnd},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"hasSelection\",{get:function(){var e=this._model.finalSelectionStart,t=this._model.finalSelectionEnd;return e&&t&&(e[0]!==t[0]||e[1]!==t[1])},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"selectionText\",{get:function(){var e=this._model.finalSelectionStart,t=this._model.finalSelectionEnd;if(!e||!t)return\"\";var r=this._bufferService.buffer,i=[];if(3===this._activeSelectionMode){if(e[0]===t[0])return\"\";for(var o,n=e[1];n<=t[1];n++)o=r.translateBufferLineToString(n,!0,e[0],t[0]),i.push(o)}else{var s=e[1]===t[1]?t[0]:void 0;for(i.push(r.translateBufferLineToString(e[1],!0,e[0],s)),n=e[1]+1;n<=t[1]-1;n++){var a=r.lines.get(n);o=r.translateBufferLineToString(n,!0),a&&a.isWrapped?i[i.length-1]+=o:i.push(o)}e[1]!==t[1]&&(a=r.lines.get(t[1]),o=r.translateBufferLineToString(t[1],!0,0,t[0]),a&&a.isWrapped?i[i.length-1]+=o:i.push(o))}return i.map((function(e){return e.replace(y,\" \")})).join(h.isWindows?\"\\r\\n\":\"\\n\")},enumerable:!0,configurable:!0}),e.prototype.clearSelection=function(){this._model.clearSelection(),this._removeMouseDownListeners(),this.refresh(),this._onSelectionChange.fire()},e.prototype.refresh=function(e){var t=this;this._refreshAnimationFrame||(this._refreshAnimationFrame=window.requestAnimationFrame((function(){return t._refresh()}))),h.isLinux&&e&&this.selectionText.length&&this._onLinuxMouseSelection.fire(this.selectionText)},e.prototype._refresh=function(){this._refreshAnimationFrame=void 0,this._onRedrawRequest.fire({start:this._model.finalSelectionStart,end:this._model.finalSelectionEnd,columnSelectMode:3===this._activeSelectionMode})},e.prototype.isClickInSelection=function(e){var t=this._getMouseBufferCoords(e),r=this._model.finalSelectionStart,i=this._model.finalSelectionEnd;return!!(r&&i&&t)&&this._areCoordsInSelection(t,r,i)},e.prototype._areCoordsInSelection=function(e,t,r){return e[1]>t[1]&&e[1]<r[1]||t[1]===r[1]&&e[1]===t[1]&&e[0]>=t[0]&&e[0]<r[0]||t[1]<r[1]&&e[1]===r[1]&&e[0]<r[0]||t[1]<r[1]&&e[1]===t[1]&&e[0]>=t[0]},e.prototype.selectWordAtCursor=function(e){var t=this._getMouseBufferCoords(e);t&&(this._selectWordAt(t,!1),this._model.selectionEnd=void 0,this.refresh(!0))},e.prototype.selectAll=function(){this._model.isSelectAllActive=!0,this.refresh(),this._onSelectionChange.fire()},e.prototype.selectLines=function(e,t){this._model.clearSelection(),e=i(e,0),t=a(t,this._bufferService.buffer.lines.length-1),this._model.selectionStart=[0,e],this._model.selectionEnd=[this._bufferService.cols,t],this.refresh(),this._onSelectionChange.fire()},e.prototype._onTrim=function(e){this._model.onTrim(e)&&this.refresh()},e.prototype._getMouseBufferCoords=function(e){var t=this._mouseService.getCoords(e,this._screenElement,this._bufferService.cols,this._bufferService.rows,!0);if(t)return t[0]--,t[1]--,t[1]+=this._bufferService.buffer.ydisp,t},e.prototype._getMouseEventScrollAmount=function(e){var t=g.getCoordsRelativeToElement(e,this._screenElement)[1],o=this._bufferService.rows*n(this._charSizeService.height*this._optionsService.options.lineHeight);return 0<=t&&t<=o?0:(t>o&&(t-=o),t=a(i(t,-50),50),(t/=50)/r(t)+s(14*t))},e.prototype.shouldForceSelection=function(e){return h.isMac?e.altKey&&this._optionsService.options.macOptionClickForcesSelection:e.shiftKey},e.prototype.onMouseDown=function(e){if(this._mouseDownTimeStamp=e.timeStamp,(2!==e.button||!this.hasSelection)&&0===e.button){if(!this._enabled){if(!this.shouldForceSelection(e))return;e.stopPropagation()}e.preventDefault(),this._dragScrollAmount=0,this._enabled&&e.shiftKey?this._onIncrementalClick(e):1===e.detail?this._onSingleClick(e):2===e.detail?this._onDoubleClick(e):3===e.detail&&this._onTripleClick(e),this._addMouseDownListeners(),this.refresh(!0)}},e.prototype._addMouseDownListeners=function(){var e=this;this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.addEventListener(\"mousemove\",this._mouseMoveListener),this._screenElement.ownerDocument.addEventListener(\"mouseup\",this._mouseUpListener)),this._dragScrollIntervalTimer=window.setInterval((function(){return e._dragScroll()}),50)},e.prototype._removeMouseDownListeners=function(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.removeEventListener(\"mousemove\",this._mouseMoveListener),this._screenElement.ownerDocument.removeEventListener(\"mouseup\",this._mouseUpListener)),clearInterval(this._dragScrollIntervalTimer),this._dragScrollIntervalTimer=void 0},e.prototype._onIncrementalClick=function(e){this._model.selectionStart&&(this._model.selectionEnd=this._getMouseBufferCoords(e))},e.prototype._onSingleClick=function(e){if(this._model.selectionStartLength=0,this._model.isSelectAllActive=!1,this._activeSelectionMode=this.shouldColumnSelect(e)?3:0,this._model.selectionStart=this._getMouseBufferCoords(e),this._model.selectionStart){this._model.selectionEnd=void 0;var t=this._bufferService.buffer.lines.get(this._model.selectionStart[1]);t&&t.length!==this._model.selectionStart[0]&&0===t.hasWidth(this._model.selectionStart[0])&&this._model.selectionStart[0]++}},e.prototype._onDoubleClick=function(e){var t=this._getMouseBufferCoords(e);t&&(this._activeSelectionMode=1,this._selectWordAt(t,!0))},e.prototype._onTripleClick=function(e){var t=this._getMouseBufferCoords(e);t&&(this._activeSelectionMode=2,this._selectLineAt(t[1]))},e.prototype.shouldColumnSelect=function(e){return e.altKey&&!(h.isMac&&this._optionsService.options.macOptionClickForcesSelection)},e.prototype._onMouseMove=function(e){if(e.stopImmediatePropagation(),this._model.selectionStart){var t=this._model.selectionEnd?[this._model.selectionEnd[0],this._model.selectionEnd[1]]:null;if(this._model.selectionEnd=this._getMouseBufferCoords(e),this._model.selectionEnd){2===this._activeSelectionMode?this._model.selectionEnd[1]<this._model.selectionStart[1]?this._model.selectionEnd[0]=0:this._model.selectionEnd[0]=this._bufferService.cols:1===this._activeSelectionMode&&this._selectToWordAt(this._model.selectionEnd),this._dragScrollAmount=this._getMouseEventScrollAmount(e),3!==this._activeSelectionMode&&(0<this._dragScrollAmount?this._model.selectionEnd[0]=this._bufferService.cols:0>this._dragScrollAmount&&(this._model.selectionEnd[0]=0));var r=this._bufferService.buffer;if(this._model.selectionEnd[1]<r.lines.length){var i=r.lines.get(this._model.selectionEnd[1]);i&&0===i.hasWidth(this._model.selectionEnd[0])&&this._model.selectionEnd[0]++}t&&t[0]===this._model.selectionEnd[0]&&t[1]===this._model.selectionEnd[1]||this.refresh(!0)}else this.refresh(!0)}},e.prototype._dragScroll=function(){if(this._model.selectionEnd&&this._model.selectionStart&&this._dragScrollAmount){this._scrollLines(this._dragScrollAmount,!1);var e=this._bufferService.buffer;0<this._dragScrollAmount?(3!==this._activeSelectionMode&&(this._model.selectionEnd[0]=this._bufferService.cols),this._model.selectionEnd[1]=a(e.ydisp+this._bufferService.rows,e.lines.length-1)):(3!==this._activeSelectionMode&&(this._model.selectionEnd[0]=0),this._model.selectionEnd[1]=e.ydisp),this.refresh()}},e.prototype._onMouseUp=function(e){var t=e.timeStamp-this._mouseDownTimeStamp;if(this._removeMouseDownListeners(),1>=this.selectionText.length&&500>t){if(e.altKey&&this._bufferService.buffer.ybase===this._bufferService.buffer.ydisp){var r=this._mouseService.getCoords(e,this._element,this._bufferService.cols,this._bufferService.rows,!1);if(r&&void 0!==r[0]&&void 0!==r[1]){var i=b.moveToCellSequence(r[0]-1,r[1]-1,this._bufferService,this._coreService.decPrivateModes.applicationCursorKeys);this._coreService.triggerDataEvent(i,!0)}}}else this.hasSelection&&this._onSelectionChange.fire()},e.prototype._onBufferActivate=function(e){var t=this;this.clearSelection(),this._trimListener&&this._trimListener.dispose(),this._trimListener=e.activeBuffer.lines.onTrim((function(e){return t._onTrim(e)}))},e.prototype._convertViewportColToCharacterIndex=function(e,t){for(var r,i=t[0],o=0;t[0]>=o;o++)r=e.loadCell(o,this._workCell).getChars().length,0===this._workCell.getWidth()?i--:1<r&&t[0]!==o&&(i+=r-1);return i},e.prototype.setSelection=function(e,t,r){this._model.clearSelection(),this._removeMouseDownListeners(),this._model.selectionStart=[e,t],this._model.selectionStartLength=r,this.refresh()},e.prototype._getWordAt=function(e,t,r,i){if(void 0===r&&(r=!0),void 0===i&&(i=!0),!(e[0]>=this._bufferService.cols)){var o=this._bufferService.buffer,n=o.lines.get(e[1]);if(n){var s=o.translateBufferLineToString(e[1],!1),l=this._convertViewportColToCharacterIndex(n,e),c=l,h=e[0]-l,u=0,f=0,d=0,p=0;if(\" \"===s.charAt(l)){for(;0<l&&\" \"===s.charAt(l-1);)l--;for(;c<s.length&&\" \"===s.charAt(c+1);)c++}else{var _=e[0],g=e[0];0===n.getWidth(_)&&(u++,_--),2===n.getWidth(g)&&(f++,g++);var b=n.getString(g).length;for(1<b&&(p+=b-1,c+=b-1);0<_&&0<l&&!this._isCharWordSeparator(n.loadCell(_-1,this._workCell));){n.loadCell(_-1,this._workCell);var y=this._workCell.getChars().length;0===this._workCell.getWidth()?(u++,_--):1<y&&(d+=y-1,l-=y-1),l--,_--}for(;g<n.length&&c+1<s.length&&!this._isCharWordSeparator(n.loadCell(g+1,this._workCell));){n.loadCell(g+1,this._workCell);var m=this._workCell.getChars().length;2===this._workCell.getWidth()?(f++,g++):1<m&&(p+=m-1,c+=m-1),c++,g++}}c++;var v=l+h-u+d,C=a(this._bufferService.cols,c-l+u+f-d-p);if(t||\"\"!==s.slice(l,c).trim()){if(r&&0==v&&32!==n.getCodePoint(0)){var S=o.lines.get(e[1]-1);if(S&&n.isWrapped&&32!==S.getCodePoint(this._bufferService.cols-1)){var w=this._getWordAt([this._bufferService.cols-1,e[1]-1],!1,!0,!1);if(w){var A=this._bufferService.cols-w.start;v-=A,C+=A}}}if(i&&v+C===this._bufferService.cols&&32!==n.getCodePoint(this._bufferService.cols-1)){var T=o.lines.get(e[1]+1);if(T&&T.isWrapped&&32!==T.getCodePoint(0)){var E=this._getWordAt([0,e[1]+1],!1,!1,!0);E&&(C+=E.length)}}return{start:v,length:C}}}}},e.prototype._selectWordAt=function(e,t){var r=this._getWordAt(e,t);if(r){for(;0>r.start;)r.start+=this._bufferService.cols,e[1]--;this._model.selectionStart=[r.start,e[1]],this._model.selectionStartLength=r.length}},e.prototype._selectToWordAt=function(e){var t=this._getWordAt(e,!0);if(t){for(var r=e[1];0>t.start;)t.start+=this._bufferService.cols,r--;if(!this._model.areSelectionValuesReversed())for(;t.start+t.length>this._bufferService.cols;)t.length-=this._bufferService.cols,r++;this._model.selectionEnd=[this._model.areSelectionValuesReversed()?t.start:t.start+t.length,r]}},e.prototype._isCharWordSeparator=function(e){return 0!==e.getWidth()&&0<=this._optionsService.options.wordSeparator.indexOf(e.getChars())},e.prototype._selectLineAt=function(e){var t=this._bufferService.buffer.getWrappedRangeForLine(e);this._model.selectionStart=[0,t.first],this._model.selectionEnd=[this._bufferService.cols,t.last],this._model.selectionStartLength=0},l([c(3,p.ICharSizeService),c(4,_.IBufferService),c(5,_.ICoreService),c(6,p.IMouseService),c(7,_.IOptionsService)],e)}();t.SelectionService=m},function(e,t){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var r=function(){function e(e){this._bufferService=e,this.isSelectAllActive=!1,this.selectionStartLength=0}return e.prototype.clearSelection=function(){this.selectionStart=void 0,this.selectionEnd=void 0,this.isSelectAllActive=!1,this.selectionStartLength=0},Object.defineProperty(e.prototype,\"finalSelectionStart\",{get:function(){return this.isSelectAllActive?[0,0]:this.selectionEnd&&this.selectionStart&&this.areSelectionValuesReversed()?this.selectionEnd:this.selectionStart},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"finalSelectionEnd\",{get:function(){if(this.isSelectAllActive)return[this._bufferService.cols,this._bufferService.buffer.ybase+this._bufferService.rows-1];if(this.selectionStart){if(!this.selectionEnd||this.areSelectionValuesReversed()){var e=this.selectionStart[0]+this.selectionStartLength;return e>this._bufferService.cols?[e%this._bufferService.cols,this.selectionStart[1]+o(e/this._bufferService.cols)]:[e,this.selectionStart[1]]}return this.selectionStartLength&&this.selectionEnd[1]===this.selectionStart[1]?[i(this.selectionStart[0]+this.selectionStartLength,this.selectionEnd[0]),this.selectionEnd[1]]:this.selectionEnd}},enumerable:!0,configurable:!0}),e.prototype.areSelectionValuesReversed=function(){var e=this.selectionStart,t=this.selectionEnd;return e&&t&&(e[1]>t[1]||e[1]===t[1]&&e[0]>t[0])},e.prototype.onTrim=function(e){return this.selectionStart&&(this.selectionStart[1]-=e),this.selectionEnd&&(this.selectionEnd[1]-=e),this.selectionEnd&&0>this.selectionEnd[1]?(this.clearSelection(),!0):(this.selectionStart&&0>this.selectionStart[1]&&(this.selectionStart[1]=0),!1)},e}();t.SelectionModel=r},function(e,t,i){\"use strict\";function n(e,t,i,o){var n=e-s(i,e),a=t-s(i,t);return u(r(n-a)-function(e,t,i){for(var o=0,n=e-s(i,e),a=t-s(i,t),c=0;c<r(n-a);c++){var h=\"A\"===l(e,t)?-1:1,u=i.buffer.lines.get(n+h*c);u&&u.isWrapped&&o++}return o}(e,t,i),h(l(e,t),o))}function s(e,t){for(var r=0,i=e.buffer.lines.get(t),o=i&&i.isWrapped;o&&0<=t&&t<e.rows;)r++,o=(i=e.buffer.lines.get(--t))&&i.isWrapped;return r}function a(e,t,r,i,o,a){var l;return l=0<n(r,i,o,a).length?i-s(o,i):t,e<r&&l<=i||e>=r&&l<i?\"C\":\"D\"}function l(e,t){return e>t?\"A\":\"B\"}function c(e,t,r,i,o,n){for(var s=e,a=t,l=\"\";s!==r||a!==i;)s+=o?1:-1,o&&s>n.cols-1?(l+=n.buffer.translateBufferLineToString(a,!1,e,s),s=0,e=0,a++):!o&&0>s&&(l+=n.buffer.translateBufferLineToString(a,!1,0,e+1),e=s=n.cols-1,a--);return l+n.buffer.translateBufferLineToString(a,!1,e,s)}function h(e,t){var r=t?\"O\":\"[\";return f.C0.ESC+r+e}function u(e,t){e=o(e);for(var r=\"\",i=0;i<e;i++)r+=t;return r}Object.defineProperty(t,\"__esModule\",{value:!0});var f=i(11);t.moveToCellSequence=function(e,t,i,o){var l=i.buffer.x,f=i.buffer.y;return i.buffer.hasScrollback?function(e,t,i,o,n,s){var l=a(e,t,i,o,n,s);return u(r(e-i),h(l,s))}(l,f,e,t,i,o):function(e,t,r,i,o,a){return 0===n(t,i,o,a).length?\"\":u(c(e,t,e,t-s(o,t),!1,o).length,h(\"D\",a))}(l,f,0,t,i,o)+n(f,t,i,o)+function(e,t,r,i,o,l){var f=0<n(t,i,o,l).length?i-s(o,i):t,d=a(e,t,r,i,o,l);return u(c(e,f,r,i,\"C\"===d,o).length,h(d,l))}(l,f,e,t,i,o)}},function(e,t,r){\"use strict\";var i=this&&this.__decorate||function(e,t,r,i){var o,n=arguments.length,s=3>n?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if(\"object\"==typeof Reflect&&\"function\"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,i);else for(var a=e.length-1;0<=a;a--)(o=e[a])&&(s=(3>n?o(s):3<n?o(t,r,s):o(t,r))||s);return 3<n&&s&&Object.defineProperty(t,r,s),s},o=this&&this.__param||function(e,t){return function(r,i){t(r,i,e)}};Object.defineProperty(t,\"__esModule\",{value:!0});var n=r(0),s=function(){function e(e){this._optionsService=e}return Object.defineProperty(e,\"audioContext\",{get:function(){if(!e._audioContext){var t=window.AudioContext||window.webkitAudioContext;if(!t)return console.warn(\"Web Audio API is not supported by this browser. Consider upgrading to the latest version\"),null;e._audioContext=new t}return e._audioContext},enumerable:!0,configurable:!0}),e.prototype.playBellSound=function(){var t=e.audioContext;if(t){var r=t.createBufferSource();t.decodeAudioData(this._base64ToArrayBuffer(this._removeMimeType(this._optionsService.options.bellSound)),(function(e){r.buffer=e,r.connect(t.destination),r.start(0)}))}},e.prototype._base64ToArrayBuffer=function(e){for(var t=window.atob(e),r=t.length,i=new Uint8Array(r),o=0;o<r;o++)i[o]=t.charCodeAt(o);return i.buffer},e.prototype._removeMimeType=function(e){return e.split(\",\")[1]},e=i([o(0,n.IOptionsService)],e)}();t.SoundService=s},function(e,t,r){\"use strict\";var i,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),n=this&&this.__decorate||function(e,t,r,i){var o,n=arguments.length,s=3>n?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if(\"object\"==typeof Reflect&&\"function\"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,i);else for(var a=e.length-1;0<=a;a--)(o=e[a])&&(s=(3>n?o(s):3<n?o(t,r,s):o(t,r))||s);return 3<n&&s&&Object.defineProperty(t,r,s),s},s=this&&this.__param||function(e,t){return function(r,i){t(r,i,e)}};Object.defineProperty(t,\"__esModule\",{value:!0});var a=r(2),l=r(7),c=r(5),h=r(0),u=function(e){function t(t,r,i,o,n){var s=e.call(this)||this;return s._element=t,s._screenElement=r,s._bufferService=i,s._mouseService=o,s._selectionService=n,s._zones=[],s._areZonesActive=!1,s._lastHoverCoords=[void 0,void 0],s._initialSelectionLength=0,s.register(l.addDisposableDomListener(s._element,\"mousedown\",(function(e){return s._onMouseDown(e)}))),s._mouseMoveListener=function(e){return s._onMouseMove(e)},s._mouseLeaveListener=function(e){return s._onMouseLeave(e)},s._clickListener=function(e){return s._onClick(e)},s}return o(t,e),t.prototype.dispose=function(){e.prototype.dispose.call(this),this._deactivate()},t.prototype.add=function(e){this._zones.push(e),1===this._zones.length&&this._activate()},t.prototype.clearAll=function(e,t){if(0!==this._zones.length){e&&t||(e=0,t=this._bufferService.rows-1);for(var r,i=0;i<this._zones.length;i++)((r=this._zones[i]).y1>e&&r.y1<=t+1||r.y2>e&&r.y2<=t+1||r.y1<e&&r.y2>t+1)&&(this._currentZone&&this._currentZone===r&&(this._currentZone.leaveCallback(),this._currentZone=void 0),this._zones.splice(i--,1));0===this._zones.length&&this._deactivate()}},t.prototype._activate=function(){this._areZonesActive||(this._areZonesActive=!0,this._element.addEventListener(\"mousemove\",this._mouseMoveListener),this._element.addEventListener(\"mouseleave\",this._mouseLeaveListener),this._element.addEventListener(\"click\",this._clickListener))},t.prototype._deactivate=function(){this._areZonesActive&&(this._areZonesActive=!1,this._element.removeEventListener(\"mousemove\",this._mouseMoveListener),this._element.removeEventListener(\"mouseleave\",this._mouseLeaveListener),this._element.removeEventListener(\"click\",this._clickListener))},t.prototype._onMouseMove=function(e){this._lastHoverCoords[0]===e.pageX&&this._lastHoverCoords[1]===e.pageY||(this._onHover(e),this._lastHoverCoords=[e.pageX,e.pageY])},t.prototype._onHover=function(e){var t=this,r=this._findZoneEventAt(e);r!==this._currentZone&&(this._currentZone&&(this._currentZone.leaveCallback(),this._currentZone=void 0,this._tooltipTimeout&&clearTimeout(this._tooltipTimeout)),r&&(this._currentZone=r,r.hoverCallback&&r.hoverCallback(e),this._tooltipTimeout=setTimeout((function(){return t._onTooltip(e)}),500)))},t.prototype._onTooltip=function(e){this._tooltipTimeout=void 0;var t=this._findZoneEventAt(e);t&&t.tooltipCallback&&t.tooltipCallback(e)},t.prototype._onMouseDown=function(e){if(this._initialSelectionLength=this._getSelectionLength(),this._areZonesActive){var t=this._findZoneEventAt(e);t&&t.willLinkActivate(e)&&(e.preventDefault(),e.stopImmediatePropagation())}},t.prototype._onMouseLeave=function(){this._currentZone&&(this._currentZone.leaveCallback(),this._currentZone=void 0,this._tooltipTimeout&&clearTimeout(this._tooltipTimeout))},t.prototype._onClick=function(e){var t=this._findZoneEventAt(e),r=this._getSelectionLength();t&&r===this._initialSelectionLength&&(t.clickCallback(e),e.preventDefault(),e.stopImmediatePropagation())},t.prototype._getSelectionLength=function(){var e=this._selectionService.selectionText;return e?e.length:0},t.prototype._findZoneEventAt=function(e){var t=this._mouseService.getCoords(e,this._screenElement,this._bufferService.cols,this._bufferService.rows);if(t)for(var r,i=t[0],o=t[1],n=0;n<this._zones.length;n++)if((r=this._zones[n]).y1===r.y2){if(o===r.y1&&i>=r.x1&&i<r.x2)return r}else if(o===r.y1&&i>=r.x1||o===r.y2&&i<r.x2||o>r.y1&&o<r.y2)return r},n([s(2,h.IBufferService),s(3,c.IMouseService),s(4,c.ISelectionService)],t)}(a.Disposable);t.MouseZoneManager=u},function(e,t,r){\"use strict\";var i,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,\"__esModule\",{value:!0});var n=r(16),s=r(10),a=r(29),l=r(7),c=r(2),h=r(30),u=function(e){function t(t,r){var i=e.call(this)||this;i._terminal=t,i._renderService=r,i._liveRegionLineCount=0,i._charsToConsume=[],i._charsToAnnounce=\"\",i._accessibilityTreeRoot=document.createElement(\"div\"),i._accessibilityTreeRoot.classList.add(\"xterm-accessibility\"),i._rowContainer=document.createElement(\"div\"),i._rowContainer.classList.add(\"xterm-accessibility-tree\"),i._rowElements=[];for(var o=0;o<i._terminal.rows;o++)i._rowElements[o]=i._createAccessibilityTreeNode(),i._rowContainer.appendChild(i._rowElements[o]);return i._topBoundaryFocusListener=function(e){return i._onBoundaryFocus(e,0)},i._bottomBoundaryFocusListener=function(e){return i._onBoundaryFocus(e,1)},i._rowElements[0].addEventListener(\"focus\",i._topBoundaryFocusListener),i._rowElements[i._rowElements.length-1].addEventListener(\"focus\",i._bottomBoundaryFocusListener),i._refreshRowsDimensions(),i._accessibilityTreeRoot.appendChild(i._rowContainer),i._renderRowsDebouncer=new a.RenderDebouncer(i._renderRows.bind(i)),i._refreshRows(),i._liveRegion=document.createElement(\"div\"),i._liveRegion.classList.add(\"live-region\"),i._liveRegion.setAttribute(\"aria-live\",\"assertive\"),i._accessibilityTreeRoot.appendChild(i._liveRegion),i._terminal.element.insertAdjacentElement(\"afterbegin\",i._accessibilityTreeRoot),i.register(i._renderRowsDebouncer),i.register(i._terminal.onResize((function(e){return i._onResize(e.rows)}))),i.register(i._terminal.onRender((function(e){return i._refreshRows(e.start,e.end)}))),i.register(i._terminal.onScroll((function(){return i._refreshRows()}))),i.register(i._terminal.onA11yChar((function(e){return i._onChar(e)}))),i.register(i._terminal.onLineFeed((function(){return i._onChar(\"\\n\")}))),i.register(i._terminal.onA11yTab((function(e){return i._onTab(e)}))),i.register(i._terminal.onKey((function(e){return i._onKey(e.key)}))),i.register(i._terminal.onBlur((function(){return i._clearLiveRegion()}))),i.register(i._renderService.onDimensionsChange((function(){return i._refreshRowsDimensions()}))),i._screenDprMonitor=new h.ScreenDprMonitor,i.register(i._screenDprMonitor),i._screenDprMonitor.setListener((function(){return i._refreshRowsDimensions()})),i.register(l.addDisposableDomListener(window,\"resize\",(function(){return i._refreshRowsDimensions()}))),i}return o(t,e),t.prototype.dispose=function(){e.prototype.dispose.call(this),this._terminal.element.removeChild(this._accessibilityTreeRoot),this._rowElements.length=0},t.prototype._onBoundaryFocus=function(e,t){var r=e.target,i=this._rowElements[0===t?1:this._rowElements.length-2];if(r.getAttribute(\"aria-posinset\")!==(0===t?\"1\":\"\"+this._terminal.buffer.lines.length)&&e.relatedTarget===i){var o,n;if(0===t?(o=r,n=this._rowElements.pop(),this._rowContainer.removeChild(n)):(o=this._rowElements.shift(),n=r,this._rowContainer.removeChild(o)),o.removeEventListener(\"focus\",this._topBoundaryFocusListener),n.removeEventListener(\"focus\",this._bottomBoundaryFocusListener),0===t){var s=this._createAccessibilityTreeNode();this._rowElements.unshift(s),this._rowContainer.insertAdjacentElement(\"afterbegin\",s)}else s=this._createAccessibilityTreeNode(),this._rowElements.push(s),this._rowContainer.appendChild(s);this._rowElements[0].addEventListener(\"focus\",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener(\"focus\",this._bottomBoundaryFocusListener),this._terminal.scrollLines(0===t?-1:1),this._rowElements[0===t?1:this._rowElements.length-2].focus(),e.preventDefault(),e.stopImmediatePropagation()}},t.prototype._onResize=function(e){this._rowElements[this._rowElements.length-1].removeEventListener(\"focus\",this._bottomBoundaryFocusListener);for(var t=this._rowContainer.children.length;t<this._terminal.rows;t++)this._rowElements[t]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[t]);for(;this._rowElements.length>e;)this._rowContainer.removeChild(this._rowElements.pop());this._rowElements[this._rowElements.length-1].addEventListener(\"focus\",this._bottomBoundaryFocusListener),this._refreshRowsDimensions()},t.prototype._createAccessibilityTreeNode=function(){var e=document.createElement(\"div\");return e.setAttribute(\"role\",\"listitem\"),e.tabIndex=-1,this._refreshRowDimensions(e),e},t.prototype._onTab=function(e){for(var t=0;t<e;t++)this._onChar(\" \")},t.prototype._onChar=function(e){var t=this;21>this._liveRegionLineCount&&(0<this._charsToConsume.length?this._charsToConsume.shift()!==e&&(this._charsToAnnounce+=e):this._charsToAnnounce+=e,\"\\n\"===e&&(this._liveRegionLineCount++,21===this._liveRegionLineCount&&(this._liveRegion.textContent+=n.tooMuchOutput)),s.isMac&&this._liveRegion.textContent&&0<this._liveRegion.textContent.length&&!this._liveRegion.parentNode&&setTimeout((function(){t._accessibilityTreeRoot.appendChild(t._liveRegion)}),0))},t.prototype._clearLiveRegion=function(){this._liveRegion.textContent=\"\",this._liveRegionLineCount=0,s.isMac&&this._liveRegion.parentNode&&this._accessibilityTreeRoot.removeChild(this._liveRegion)},t.prototype._onKey=function(e){this._clearLiveRegion(),this._charsToConsume.push(e)},t.prototype._refreshRows=function(e,t){this._renderRowsDebouncer.refresh(e,t,this._terminal.rows)},t.prototype._renderRows=function(e,t){for(var r=this._terminal.buffer,i=r.lines.length.toString(),o=e;o<=t;o++){var n=r.translateBufferLineToString(r.ydisp+o,!0),s=(r.ydisp+o+1).toString(),a=this._rowElements[o];a&&(0===n.length?a.innerHTML=\"&nbsp;\":a.textContent=n,a.setAttribute(\"aria-posinset\",s),a.setAttribute(\"aria-setsize\",i))}this._announceCharacters()},t.prototype._refreshRowsDimensions=function(){if(this._renderService.dimensions.actualCellHeight){this._rowElements.length!==this._terminal.rows&&this._onResize(this._terminal.rows);for(var e=0;e<this._terminal.rows;e++)this._refreshRowDimensions(this._rowElements[e])}},t.prototype._refreshRowDimensions=function(e){e.style.height=this._renderService.dimensions.actualCellHeight+\"px\"},t.prototype._announceCharacters=function(){0!==this._charsToAnnounce.length&&(this._liveRegion.textContent+=this._charsToAnnounce,this._charsToAnnounce=\"\")},t}(c.Disposable);t.AccessibilityManager=u},function(e,t,r){\"use strict\";var l,c=this&&this.__extends||(l=function(e,t){return(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}l(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,\"__esModule\",{value:!0});var h=r(56),u=r(9),f=r(2),d=\"xterm-dom-renderer-owner-\",p=\"xterm-rows\",_=\"xterm-selection\",g=1,b=function(e){function t(t,r,i,o){var n=e.call(this)||this;return n._terminal=t,n._colors=r,n._charSizeService=i,n._optionsService=o,n._terminalClass=g++,n._rowElements=[],n._rowContainer=document.createElement(\"div\"),n._rowContainer.classList.add(p),n._rowContainer.style.lineHeight=\"normal\",n._rowContainer.setAttribute(\"aria-hidden\",\"true\"),n._refreshRowElements(n._terminal.cols,n._terminal.rows),n._selectionContainer=document.createElement(\"div\"),n._selectionContainer.classList.add(_),n._selectionContainer.setAttribute(\"aria-hidden\",\"true\"),n.dimensions={scaledCharWidth:null,scaledCharHeight:null,scaledCellWidth:null,scaledCellHeight:null,scaledCharLeft:null,scaledCharTop:null,scaledCanvasWidth:null,scaledCanvasHeight:null,canvasWidth:null,canvasHeight:null,actualCellWidth:null,actualCellHeight:null},n._updateDimensions(),n._injectCss(),n._rowFactory=new h.DomRendererRowFactory(document,n._optionsService),n._terminal.element.classList.add(d+n._terminalClass),n._terminal.screenElement.appendChild(n._rowContainer),n._terminal.screenElement.appendChild(n._selectionContainer),n._terminal.linkifier.onLinkHover((function(e){return n._onLinkHover(e)})),n._terminal.linkifier.onLinkLeave((function(e){return n._onLinkLeave(e)})),n}return c(t,e),t.prototype.dispose=function(){this._terminal.element.classList.remove(d+this._terminalClass),this._terminal.screenElement.removeChild(this._rowContainer),this._terminal.screenElement.removeChild(this._selectionContainer),this._terminal.screenElement.removeChild(this._themeStyleElement),this._terminal.screenElement.removeChild(this._dimensionsStyleElement),e.prototype.dispose.call(this)},t.prototype._updateDimensions=function(){var e=this;this.dimensions.scaledCharWidth=this._charSizeService.width*window.devicePixelRatio,this.dimensions.scaledCharHeight=n(this._charSizeService.height*window.devicePixelRatio),this.dimensions.scaledCellWidth=this.dimensions.scaledCharWidth+s(this._terminal.options.letterSpacing),this.dimensions.scaledCellHeight=o(this.dimensions.scaledCharHeight*this._terminal.options.lineHeight),this.dimensions.scaledCharLeft=0,this.dimensions.scaledCharTop=0,this.dimensions.scaledCanvasWidth=this.dimensions.scaledCellWidth*this._terminal.cols,this.dimensions.scaledCanvasHeight=this.dimensions.scaledCellHeight*this._terminal.rows,this.dimensions.canvasWidth=s(this.dimensions.scaledCanvasWidth/window.devicePixelRatio),this.dimensions.canvasHeight=s(this.dimensions.scaledCanvasHeight/window.devicePixelRatio),this.dimensions.actualCellWidth=this.dimensions.canvasWidth/this._terminal.cols,this.dimensions.actualCellHeight=this.dimensions.canvasHeight/this._terminal.rows,this._rowElements.forEach((function(t){t.style.width=e.dimensions.canvasWidth+\"px\",t.style.height=e.dimensions.actualCellHeight+\"px\",t.style.lineHeight=e.dimensions.actualCellHeight+\"px\",t.style.overflow=\"hidden\"})),this._dimensionsStyleElement||(this._dimensionsStyleElement=document.createElement(\"style\"),this._terminal.screenElement.appendChild(this._dimensionsStyleElement));var t=this._terminalSelector+\" .\"+p+\" span { display: inline-block; height: 100%; vertical-align: top; width: \"+this.dimensions.actualCellWidth+\"px}\";this._dimensionsStyleElement.innerHTML=t,this._selectionContainer.style.height=this._terminal._viewportElement.style.height,this._terminal.screenElement.style.width=this.dimensions.canvasWidth+\"px\",this._terminal.screenElement.style.height=this.dimensions.canvasHeight+\"px\"},t.prototype.setColors=function(e){this._colors=e,this._injectCss()},t.prototype._injectCss=function(){var e=this;this._themeStyleElement||(this._themeStyleElement=document.createElement(\"style\"),this._terminal.screenElement.appendChild(this._themeStyleElement));var t=this._terminalSelector+\" .\"+p+\" { color: \"+this._colors.foreground.css+\"; background-color: \"+this._colors.background.css+\"; font-family: \"+this._terminal.options.fontFamily+\"; font-size: \"+this._terminal.options.fontSize+\"px;}\";t+=this._terminalSelector+\" span:not(.\"+h.BOLD_CLASS+\") { font-weight: \"+this._terminal.options.fontWeight+\";}\"+this._terminalSelector+\" span.\"+h.BOLD_CLASS+\" { font-weight: \"+this._terminal.options.fontWeightBold+\";}\"+this._terminalSelector+\" span.\"+h.ITALIC_CLASS+\" { font-style: italic;}\",t+=\"@keyframes blink_box_shadow { 50% {  box-shadow: none; }}\",t+=\"@keyframes blink_block { 0% {  background-color: \"+this._colors.cursor.css+\";  color: \"+this._colors.cursorAccent.css+\"; } 50% {  background-color: \"+this._colors.cursorAccent.css+\";  color: \"+this._colors.cursor.css+\"; }}\",t+=this._terminalSelector+\" .\"+p+\":not(.xterm-focus) .\"+h.CURSOR_CLASS+\".\"+h.CURSOR_STYLE_BLOCK_CLASS+\" { outline: 1px solid \"+this._colors.cursor.css+\"; outline-offset: -1px;}\"+this._terminalSelector+\" .\"+p+\".xterm-focus .\"+h.CURSOR_CLASS+\".\"+h.CURSOR_BLINK_CLASS+\":not(.\"+h.CURSOR_STYLE_BLOCK_CLASS+\") { animation: blink_box_shadow 1s step-end infinite;}\"+this._terminalSelector+\" .\"+p+\".xterm-focus .\"+h.CURSOR_CLASS+\".\"+h.CURSOR_BLINK_CLASS+\".\"+h.CURSOR_STYLE_BLOCK_CLASS+\" { animation: blink_block 1s step-end infinite;}\"+this._terminalSelector+\" .\"+p+\".xterm-focus .\"+h.CURSOR_CLASS+\".\"+h.CURSOR_STYLE_BLOCK_CLASS+\" { background-color: \"+this._colors.cursor.css+\"; color: \"+this._colors.cursorAccent.css+\";}\"+this._terminalSelector+\" .\"+p+\" .\"+h.CURSOR_CLASS+\".\"+h.CURSOR_STYLE_BAR_CLASS+\" { box-shadow: 1px 0 0 \"+this._colors.cursor.css+\" inset;}\"+this._terminalSelector+\" .\"+p+\" .\"+h.CURSOR_CLASS+\".\"+h.CURSOR_STYLE_UNDERLINE_CLASS+\" { box-shadow: 0 -1px 0 \"+this._colors.cursor.css+\" inset;}\",t+=this._terminalSelector+\" .\"+_+\" { position: absolute; top: 0; left: 0; z-index: 1; pointer-events: none;}\"+this._terminalSelector+\" .\"+_+\" div { position: absolute; background-color: \"+this._colors.selection.css+\";}\",this._colors.ansi.forEach((function(r,i){t+=e._terminalSelector+\" .xterm-fg-\"+i+\" { color: \"+r.css+\"; }\"+e._terminalSelector+\" .xterm-bg-\"+i+\" { background-color: \"+r.css+\"; }\"})),t+=this._terminalSelector+\" .xterm-fg-\"+u.INVERTED_DEFAULT_COLOR+\" { color: \"+this._colors.background.css+\"; }\"+this._terminalSelector+\" .xterm-bg-\"+u.INVERTED_DEFAULT_COLOR+\" { background-color: \"+this._colors.foreground.css+\"; }\",this._themeStyleElement.innerHTML=t},t.prototype.onDevicePixelRatioChange=function(){this._updateDimensions()},t.prototype._refreshRowElements=function(e,t){for(var r,i=this._rowElements.length;i<=t;i++)r=document.createElement(\"div\"),this._rowContainer.appendChild(r),this._rowElements.push(r);for(;this._rowElements.length>t;)this._rowContainer.removeChild(this._rowElements.pop())},t.prototype.onResize=function(e,t){this._refreshRowElements(e,t),this._updateDimensions()},t.prototype.onCharSizeChanged=function(){this._updateDimensions()},t.prototype.onBlur=function(){this._rowContainer.classList.remove(\"xterm-focus\")},t.prototype.onFocus=function(){this._rowContainer.classList.add(\"xterm-focus\")},t.prototype.onSelectionChanged=function(e,t,r){for(;this._selectionContainer.children.length;)this._selectionContainer.removeChild(this._selectionContainer.children[0]);if(e&&t){var o=e[1]-this._terminal.buffer.ydisp,n=t[1]-this._terminal.buffer.ydisp,s=i(o,0),l=a(n,this._terminal.rows-1);if(!(s>=this._terminal.rows||0>l)){var c=document.createDocumentFragment();if(r)c.appendChild(this._createSelectionElement(s,e[0],t[0],l-s+1));else{var h=o===s?e[0]:0,u=s===l?t[0]:this._terminal.cols;if(c.appendChild(this._createSelectionElement(s,h,u)),c.appendChild(this._createSelectionElement(s+1,0,this._terminal.cols,l-s-1)),s!==l){var f=n===l?t[0]:this._terminal.cols;c.appendChild(this._createSelectionElement(l,0,f))}}this._selectionContainer.appendChild(c)}}},t.prototype._createSelectionElement=function(e,t,r,i){void 0===i&&(i=1);var o=document.createElement(\"div\");return o.style.height=i*this.dimensions.actualCellHeight+\"px\",o.style.top=e*this.dimensions.actualCellHeight+\"px\",o.style.left=t*this.dimensions.actualCellWidth+\"px\",o.style.width=this.dimensions.actualCellWidth*(r-t)+\"px\",o},t.prototype.onCursorMove=function(){},t.prototype.onOptionsChanged=function(){this._updateDimensions(),this._injectCss(),this._terminal.refresh(0,this._terminal.rows-1)},t.prototype.clear=function(){this._rowElements.forEach((function(e){return e.innerHTML=\"\"}))},t.prototype.renderRows=function(e,t){for(var r,i=this._terminal,o=i.buffer.ybase+i.buffer.y,n=this._terminal.buffer.x,s=this._terminal.options.cursorBlink,a=e;a<=t;a++){(r=this._rowElements[a]).innerHTML=\"\";var l=a+i.buffer.ydisp,c=i.buffer.lines.get(l),h=i.options.cursorStyle;r.appendChild(this._rowFactory.createRow(c,l===o,h,n,s,this.dimensions.actualCellWidth,i.cols))}},Object.defineProperty(t.prototype,\"_terminalSelector\",{get:function(){return\".\"+d+this._terminalClass},enumerable:!0,configurable:!0}),t.prototype.registerCharacterJoiner=function(){return-1},t.prototype.deregisterCharacterJoiner=function(){return!1},t.prototype._onLinkHover=function(e){this._setCellUnderline(e.x1,e.x2,e.y1,e.y2,e.cols,!0)},t.prototype._onLinkLeave=function(e){this._setCellUnderline(e.x1,e.x2,e.y1,e.y2,e.cols,!1)},t.prototype._setCellUnderline=function(e,t,r,i,o,n){for(;e!==t||r!==i;){var s=this._rowElements[r];if(!s)return;var a=s.children[e];a&&(a.style.textDecoration=n?\"underline\":\"none\"),++e>=o&&(e=0,r++)}},t}(f.Disposable);t.DomRenderer=b},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var i=r(9),o=r(6),n=r(3),s=r(4);t.BOLD_CLASS=\"xterm-bold\",t.DIM_CLASS=\"xterm-dim\",t.ITALIC_CLASS=\"xterm-italic\",t.UNDERLINE_CLASS=\"xterm-underline\",t.CURSOR_CLASS=\"xterm-cursor\",t.CURSOR_BLINK_CLASS=\"xterm-cursor-blink\",t.CURSOR_STYLE_BLOCK_CLASS=\"xterm-cursor-block\",t.CURSOR_STYLE_BAR_CLASS=\"xterm-cursor-bar\",t.CURSOR_STYLE_UNDERLINE_CLASS=\"xterm-cursor-underline\";var l=function(){function e(e,t){this._document=e,this._optionsService=t,this._workCell=new s.CellData}return e.prototype.createRow=function(e,r,s,l,c,h,u){for(var f=this._document.createDocumentFragment(),d=0,p=a(e.length,u)-1;0<=p;p--)if(e.loadCell(p,this._workCell).getCode()!==n.NULL_CELL_CODE||r&&p===l){d=p+1;break}for(p=0;p<d;p++){e.loadCell(p,this._workCell);var _=this._workCell.getWidth();if(0!==_){var g=this._document.createElement(\"span\");if(1<_&&(g.style.width=h*_+\"px\"),r&&p===l)switch(g.classList.add(t.CURSOR_CLASS),c&&g.classList.add(t.CURSOR_BLINK_CLASS),s){case\"bar\":g.classList.add(t.CURSOR_STYLE_BAR_CLASS);break;case\"underline\":g.classList.add(t.CURSOR_STYLE_UNDERLINE_CLASS);break;default:g.classList.add(t.CURSOR_STYLE_BLOCK_CLASS)}this._workCell.isBold()&&g.classList.add(t.BOLD_CLASS),this._workCell.isItalic()&&g.classList.add(t.ITALIC_CLASS),this._workCell.isDim()&&g.classList.add(t.DIM_CLASS),this._workCell.isUnderline()&&g.classList.add(t.UNDERLINE_CLASS),g.textContent=this._workCell.getChars()||n.WHITESPACE_CELL_CHAR;var b=this._workCell.isInverse();if(this._workCell.isFgRGB()){var y=g.getAttribute(\"style\")||\"\";y+=(b?\"background-\":\"\")+\"color:rgb(\"+o.AttributeData.toColorRGB(this._workCell.getFgColor()).join(\",\")+\");\",g.setAttribute(\"style\",y)}else if(this._workCell.isFgPalette()){var m=this._workCell.getFgColor();this._workCell.isBold()&&8>m&&!b&&this._optionsService.options.drawBoldTextInBrightColors&&(m+=8),g.classList.add(\"xterm-\"+(b?\"b\":\"f\")+\"g-\"+m)}else b&&g.classList.add(\"xterm-bg-\"+i.INVERTED_DEFAULT_COLOR);this._workCell.isBgRGB()?(y=g.getAttribute(\"style\")||\"\",y+=(b?\"\":\"background-\")+\"color:rgb(\"+o.AttributeData.toColorRGB(this._workCell.getBgColor()).join(\",\")+\");\",g.setAttribute(\"style\",y)):this._workCell.isBgPalette()?g.classList.add(\"xterm-\"+(b?\"f\":\"b\")+\"g-\"+this._workCell.getBgColor()):b&&g.classList.add(\"xterm-fg-\"+i.INVERTED_DEFAULT_COLOR),f.appendChild(g)}}return f},e}();t.DomRendererRowFactory=l},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var i=r(11),o={48:[\"0\",\")\"],49:[\"1\",\"!\"],50:[\"2\",\"@\"],51:[\"3\",\"#\"],52:[\"4\",\"$\"],53:[\"5\",\"%\"],54:[\"6\",\"^\"],55:[\"7\",\"&\"],56:[\"8\",\"*\"],57:[\"9\",\"(\"],186:[\";\",\":\"],187:[\"=\",\"+\"],188:[\",\",\"<\"],189:[\"-\",\"_\"],190:[\".\",\">\"],191:[\"/\",\"?\"],192:[\"`\",\"~\"],219:[\"[\",\"{\"],220:[\"\\\\\",\"|\"],221:[\"]\",\"}\"],222:[\"'\",'\"']};t.evaluateKeyboardEvent=function(e,t,r,n){var s={type:0,cancel:!1,key:void 0},a=(e.shiftKey?1:0)|(e.altKey?2:0)|(e.ctrlKey?4:0)|(e.metaKey?8:0);switch(e.keyCode){case 0:\"UIKeyInputUpArrow\"===e.key?s.key=t?i.C0.ESC+\"OA\":i.C0.ESC+\"[A\":\"UIKeyInputLeftArrow\"===e.key?s.key=t?i.C0.ESC+\"OD\":i.C0.ESC+\"[D\":\"UIKeyInputRightArrow\"===e.key?s.key=t?i.C0.ESC+\"OC\":i.C0.ESC+\"[C\":\"UIKeyInputDownArrow\"===e.key&&(s.key=t?i.C0.ESC+\"OB\":i.C0.ESC+\"[B\");break;case 8:if(e.shiftKey){s.key=i.C0.BS;break}if(e.altKey){s.key=i.C0.ESC+i.C0.DEL;break}s.key=i.C0.DEL;break;case 9:if(e.shiftKey){s.key=i.C0.ESC+\"[Z\";break}s.key=i.C0.HT,s.cancel=!0;break;case 13:s.key=i.C0.CR,s.cancel=!0;break;case 27:s.key=i.C0.ESC,s.cancel=!0;break;case 37:if(e.metaKey)break;a?(s.key=i.C0.ESC+\"[1;\"+(a+1)+\"D\",s.key===i.C0.ESC+\"[1;3D\"&&(s.key=i.C0.ESC+(r?\"b\":\"[1;5D\"))):s.key=t?i.C0.ESC+\"OD\":i.C0.ESC+\"[D\";break;case 39:if(e.metaKey)break;a?(s.key=i.C0.ESC+\"[1;\"+(a+1)+\"C\",s.key===i.C0.ESC+\"[1;3C\"&&(s.key=i.C0.ESC+(r?\"f\":\"[1;5C\"))):s.key=t?i.C0.ESC+\"OC\":i.C0.ESC+\"[C\";break;case 38:if(e.metaKey)break;a?(s.key=i.C0.ESC+\"[1;\"+(a+1)+\"A\",r||s.key!==i.C0.ESC+\"[1;3A\"||(s.key=i.C0.ESC+\"[1;5A\")):s.key=t?i.C0.ESC+\"OA\":i.C0.ESC+\"[A\";break;case 40:if(e.metaKey)break;a?(s.key=i.C0.ESC+\"[1;\"+(a+1)+\"B\",r||s.key!==i.C0.ESC+\"[1;3B\"||(s.key=i.C0.ESC+\"[1;5B\")):s.key=t?i.C0.ESC+\"OB\":i.C0.ESC+\"[B\";break;case 45:e.shiftKey||e.ctrlKey||(s.key=i.C0.ESC+\"[2~\");break;case 46:s.key=a?i.C0.ESC+\"[3;\"+(a+1)+\"~\":i.C0.ESC+\"[3~\";break;case 36:s.key=a?i.C0.ESC+\"[1;\"+(a+1)+\"H\":t?i.C0.ESC+\"OH\":i.C0.ESC+\"[H\";break;case 35:s.key=a?i.C0.ESC+\"[1;\"+(a+1)+\"F\":t?i.C0.ESC+\"OF\":i.C0.ESC+\"[F\";break;case 33:e.shiftKey?s.type=2:s.key=i.C0.ESC+\"[5~\";break;case 34:e.shiftKey?s.type=3:s.key=i.C0.ESC+\"[6~\";break;case 112:s.key=a?i.C0.ESC+\"[1;\"+(a+1)+\"P\":i.C0.ESC+\"OP\";break;case 113:s.key=a?i.C0.ESC+\"[1;\"+(a+1)+\"Q\":i.C0.ESC+\"OQ\";break;case 114:s.key=a?i.C0.ESC+\"[1;\"+(a+1)+\"R\":i.C0.ESC+\"OR\";break;case 115:s.key=a?i.C0.ESC+\"[1;\"+(a+1)+\"S\":i.C0.ESC+\"OS\";break;case 116:s.key=a?i.C0.ESC+\"[15;\"+(a+1)+\"~\":i.C0.ESC+\"[15~\";break;case 117:s.key=a?i.C0.ESC+\"[17;\"+(a+1)+\"~\":i.C0.ESC+\"[17~\";break;case 118:s.key=a?i.C0.ESC+\"[18;\"+(a+1)+\"~\":i.C0.ESC+\"[18~\";break;case 119:s.key=a?i.C0.ESC+\"[19;\"+(a+1)+\"~\":i.C0.ESC+\"[19~\";break;case 120:s.key=a?i.C0.ESC+\"[20;\"+(a+1)+\"~\":i.C0.ESC+\"[20~\";break;case 121:s.key=a?i.C0.ESC+\"[21;\"+(a+1)+\"~\":i.C0.ESC+\"[21~\";break;case 122:s.key=a?i.C0.ESC+\"[23;\"+(a+1)+\"~\":i.C0.ESC+\"[23~\";break;case 123:s.key=a?i.C0.ESC+\"[24;\"+(a+1)+\"~\":i.C0.ESC+\"[24~\";break;default:if(!e.ctrlKey||e.shiftKey||e.altKey||e.metaKey)if(r&&!n||!e.altKey||e.metaKey)r&&!e.altKey&&!e.ctrlKey&&e.metaKey?65===e.keyCode&&(s.type=1):e.key&&!e.ctrlKey&&!e.altKey&&!e.metaKey&&48<=e.keyCode&&1===e.key.length?s.key=e.key:e.key&&e.ctrlKey&&\"_\"===e.key&&(s.key=i.C0.US);else{var c=o[e.keyCode],h=c&&c[e.shiftKey?1:0];if(h)s.key=i.C0.ESC+h;else if(65<=e.keyCode&&90>=e.keyCode){var u=e.ctrlKey?e.keyCode-64:e.keyCode+32;s.key=i.C0.ESC+l(u)}}else 65<=e.keyCode&&90>=e.keyCode?s.key=l(e.keyCode-64):32===e.keyCode?s.key=i.C0.NUL:51<=e.keyCode&&55>=e.keyCode?s.key=l(e.keyCode-51+27):56===e.keyCode?s.key=i.C0.DEL:219===e.keyCode?s.key=i.C0.ESC:220===e.keyCode?s.key=i.C0.FS:221===e.keyCode&&(s.key=i.C0.GS)}return s}},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var i=r(3);t.applyWindowsMode=function(e){return e.onLineFeed((function(){var t=e.buffer.lines.get(e.buffer.ybase+e.buffer.y-1).get(e.cols-1);e.buffer.lines.get(e.buffer.ybase+e.buffer.y).isWrapped=t[i.CHAR_DATA_CODE_INDEX]!==i.NULL_CELL_CODE&&t[i.CHAR_DATA_CODE_INDEX]!==i.WHITESPACE_CELL_CODE}))}},function(e,t,r){\"use strict\";var i,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),n=this&&this.__decorate||function(e,t,r,i){var o,n=arguments.length,s=3>n?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if(\"object\"==typeof Reflect&&\"function\"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,i);else for(var a=e.length-1;0<=a;a--)(o=e[a])&&(s=(3>n?o(s):3<n?o(t,r,s):o(t,r))||s);return 3<n&&s&&Object.defineProperty(t,r,s),s},s=this&&this.__param||function(e,t){return function(r,i){t(r,i,e)}};Object.defineProperty(t,\"__esModule\",{value:!0});var a=r(29),l=r(1),c=r(2),h=r(30),u=r(7),f=r(0),d=r(5),p=function(e){function t(t,r,i,o,n){var s=e.call(this)||this;if(s._renderer=t,s._rowCount=r,s.screenElement=i,s.optionsService=o,s.charSizeService=n,s._isPaused=!1,s._needsFullRefresh=!1,s._canvasWidth=0,s._canvasHeight=0,s._onDimensionsChange=new l.EventEmitter,s._onRender=new l.EventEmitter,s._onRefreshRequest=new l.EventEmitter,s._renderDebouncer=new a.RenderDebouncer((function(e,t){return s._renderRows(e,t)})),s.register(s._renderDebouncer),s._screenDprMonitor=new h.ScreenDprMonitor,s._screenDprMonitor.setListener((function(){return s.onDevicePixelRatioChange()})),s.register(s._screenDprMonitor),s.register(o.onOptionChange((function(){return s._renderer.onOptionsChanged()}))),s.register(n.onCharSizeChange((function(){return s.onCharSizeChanged()}))),s.register(u.addDisposableDomListener(window,\"resize\",(function(){return s.onDevicePixelRatioChange()}))),\"IntersectionObserver\"in window){var c=new IntersectionObserver((function(e){return s._onIntersectionChange(e[e.length-1])}),{threshold:0});c.observe(i),s.register({dispose:function(){return c.disconnect()}})}return s}return o(t,e),Object.defineProperty(t.prototype,\"onDimensionsChange\",{get:function(){return this._onDimensionsChange.event},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"onRender\",{get:function(){return this._onRender.event},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"onRefreshRequest\",{get:function(){return this._onRefreshRequest.event},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"dimensions\",{get:function(){return this._renderer.dimensions},enumerable:!0,configurable:!0}),t.prototype._onIntersectionChange=function(e){this._isPaused=0===e.intersectionRatio,!this._isPaused&&this._needsFullRefresh&&(this.refreshRows(0,this._rowCount-1),this._needsFullRefresh=!1)},t.prototype.refreshRows=function(e,t){this._isPaused?this._needsFullRefresh=!0:this._renderDebouncer.refresh(e,t,this._rowCount)},t.prototype._renderRows=function(e,t){this._renderer.renderRows(e,t),this._onRender.fire({start:e,end:t})},t.prototype.resize=function(e,t){this._rowCount=t,this._fireOnCanvasResize()},t.prototype.changeOptions=function(){this._renderer.onOptionsChanged(),this._fireOnCanvasResize()},t.prototype._fireOnCanvasResize=function(){this._renderer.dimensions.canvasWidth===this._canvasWidth&&this._renderer.dimensions.canvasHeight===this._canvasHeight||this._onDimensionsChange.fire(this._renderer.dimensions)},t.prototype.dispose=function(){this._renderer.dispose()},t.prototype.setRenderer=function(e){this._renderer.dispose(),this._renderer=e,this.refreshRows(0,this._rowCount-1)},t.prototype._fullRefresh=function(){this._isPaused?this._needsFullRefresh=!0:this.refreshRows(0,this._rowCount-1)},t.prototype.setColors=function(e){this._renderer.setColors(e),this._fullRefresh()},t.prototype.onDevicePixelRatioChange=function(){this._renderer.onDevicePixelRatioChange(),this.refreshRows(0,this._rowCount-1)},t.prototype.onResize=function(e,t){this._renderer.onResize(e,t),this._fullRefresh()},t.prototype.onCharSizeChanged=function(){this._renderer.onCharSizeChanged()},t.prototype.onBlur=function(){this._renderer.onBlur()},t.prototype.onFocus=function(){this._renderer.onFocus()},t.prototype.onSelectionChanged=function(e,t,r){this._renderer.onSelectionChanged(e,t,r)},t.prototype.onCursorMove=function(){this._renderer.onCursorMove()},t.prototype.clear=function(){this._renderer.clear()},t.prototype.registerCharacterJoiner=function(e){return this._renderer.registerCharacterJoiner(e)},t.prototype.deregisterCharacterJoiner=function(e){return this._renderer.deregisterCharacterJoiner(e)},n([s(3,f.IOptionsService),s(4,d.ICharSizeService)],t)}(c.Disposable);t.RenderService=p},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var i=r(1),o=r(10),n=r(31);t.DEFAULT_BELL_SOUND=\"data:audio/mp3;base64,SUQzBAAAAAAAI1RTU0UAAAAPAAADTGF2ZjU4LjMyLjEwNAAAAAAAAAAAAAAA//tQxAADB8AhSmxhIIEVCSiJrDCQBTcu3UrAIwUdkRgQbFAZC1CQEwTJ9mjRvBA4UOLD8nKVOWfh+UlK3z/177OXrfOdKl7pyn3Xf//WreyTRUoAWgBgkOAGbZHBgG1OF6zM82DWbZaUmMBptgQhGjsyYqc9ae9XFz280948NMBWInljyzsNRFLPWdnZGWrddDsjK1unuSrVN9jJsK8KuQtQCtMBjCEtImISdNKJOopIpBFpNSMbIHCSRpRR5iakjTiyzLhchUUBwCgyKiweBv/7UsQbg8isVNoMPMjAAAA0gAAABEVFGmgqK////9bP/6XCykxBTUUzLjEwMKqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqq\",t.DEFAULT_OPTIONS=Object.freeze({cols:80,rows:24,cursorBlink:!1,cursorStyle:\"block\",bellSound:t.DEFAULT_BELL_SOUND,bellStyle:\"none\",drawBoldTextInBrightColors:!0,fastScrollModifier:\"alt\",fastScrollSensitivity:5,fontFamily:\"courier-new, courier, monospace\",fontSize:15,fontWeight:\"normal\",fontWeightBold:\"bold\",lineHeight:1,letterSpacing:0,logLevel:\"info\",scrollback:1e3,scrollSensitivity:1,screenReaderMode:!1,macOptionIsMeta:!1,macOptionClickForcesSelection:!1,disableStdin:!1,allowTransparency:!1,tabStopWidth:8,theme:{},rightClickSelectsWord:o.isMac,rendererType:\"canvas\",windowsMode:!1,convertEol:!1,termName:\"xterm\",screenKeys:!1,cancelEvents:!1,useFlowControl:!1,wordSeparator:\" ()[]{}',:;\\\"\"});var s=[\"cols\",\"rows\"],l=function(){function e(e){var r=this;this._onOptionChange=new i.EventEmitter,this.options=n.clone(t.DEFAULT_OPTIONS),Object.keys(e).forEach((function(t){if(t in r.options){var i=e[t];r.options[t]=i}}))}return Object.defineProperty(e.prototype,\"onOptionChange\",{get:function(){return this._onOptionChange.event},enumerable:!0,configurable:!0}),e.prototype.setOption=function(e,r){if(!(e in t.DEFAULT_OPTIONS))throw new Error('No option with key \"'+e+'\"');if(-1!==s.indexOf(e))throw new Error('Option \"'+e+'\" can only be set in the constructor');this.options[e]!==r&&(r=this._sanitizeAndValidateOption(e,r),this.options[e]!==r&&(this.options[e]=r,this._onOptionChange.fire(e)))},e.prototype._sanitizeAndValidateOption=function(e,r){switch(e){case\"bellStyle\":case\"cursorStyle\":case\"fontWeight\":case\"fontWeightBold\":case\"rendererType\":case\"wordSeparator\":r||(r=t.DEFAULT_OPTIONS[e]);break;case\"lineHeight\":case\"tabStopWidth\":if(1>r)throw new Error(e+\" cannot be less than 1, value: \"+r);break;case\"scrollback\":if(0>(r=a(r,4294967295)))throw new Error(e+\" cannot be less than 0, value: \"+r);break;case\"fastScrollSensitivity\":case\"scrollSensitivity\":if(0>=r)throw new Error(e+\" cannot be less than or equal to 0, value: \"+r)}return r},e.prototype.getOption=function(e){if(!(e in t.DEFAULT_OPTIONS))throw new Error('No option with key \"'+e+'\"');return this.options[e]},e}();t.OptionsService=l},function(e,t,r){\"use strict\";var i=this&&this.__decorate||function(e,t,r,i){var o,n=arguments.length,s=3>n?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if(\"object\"==typeof Reflect&&\"function\"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,i);else for(var a=e.length-1;0<=a;a--)(o=e[a])&&(s=(3>n?o(s):3<n?o(t,r,s):o(t,r))||s);return 3<n&&s&&Object.defineProperty(t,r,s),s},o=this&&this.__param||function(e,t){return function(r,i){t(r,i,e)}};Object.defineProperty(t,\"__esModule\",{value:!0});var s=r(0),a=r(1),l=function(){function e(e,t,r){this.document=e,this.parentElement=t,this._optionsService=r,this.width=0,this.height=0,this._onCharSizeChange=new a.EventEmitter,this._measureStrategy=new c(e,t,this._optionsService)}return Object.defineProperty(e.prototype,\"hasValidSize\",{get:function(){return 0<this.width&&0<this.height},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"onCharSizeChange\",{get:function(){return this._onCharSizeChange.event},enumerable:!0,configurable:!0}),e.prototype.measure=function(){var e=this._measureStrategy.measure();e.width===this.width&&e.height===this.height||(this.width=e.width,this.height=e.height,this._onCharSizeChange.fire())},i([o(2,s.IOptionsService)],e)}();t.CharSizeService=l;var c=function(){function e(e,t,r){this._document=e,this._parentElement=t,this._optionsService=r,this._result={width:0,height:0},this._measureElement=this._document.createElement(\"span\"),this._measureElement.classList.add(\"xterm-char-measure-element\"),this._measureElement.textContent=\"W\",this._measureElement.setAttribute(\"aria-hidden\",\"true\"),this._parentElement.appendChild(this._measureElement)}return e.prototype.measure=function(){this._measureElement.style.fontFamily=this._optionsService.options.fontFamily,this._measureElement.style.fontSize=this._optionsService.options.fontSize+\"px\";var e=this._measureElement.getBoundingClientRect();return 0!==e.width&&0!==e.height&&(this._result.width=e.width,this._result.height=n(e.height)),this._result},e}()},function(e,t,r){\"use strict\";var o=this&&this.__decorate||function(e,t,r,i){var o,n=arguments.length,s=3>n?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if(\"object\"==typeof Reflect&&\"function\"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,i);else for(var a=e.length-1;0<=a;a--)(o=e[a])&&(s=(3>n?o(s):3<n?o(t,r,s):o(t,r))||s);return 3<n&&s&&Object.defineProperty(t,r,s),s},n=this&&this.__param||function(e,t){return function(r,i){t(r,i,e)}};Object.defineProperty(t,\"__esModule\",{value:!0});var s=r(0),a=r(63);t.MINIMUM_COLS=2,t.MINIMUM_ROWS=1;var l=function(){function e(e){this._optionsService=e,this.cols=i(e.options.cols,t.MINIMUM_COLS),this.rows=i(e.options.rows,t.MINIMUM_ROWS),this.buffers=new a.BufferSet(e,this)}return Object.defineProperty(e.prototype,\"buffer\",{get:function(){return this.buffers.active},enumerable:!0,configurable:!0}),e.prototype.resize=function(e,t){this.cols=e,this.rows=t},e.prototype.reset=function(){this.buffers=new a.BufferSet(this._optionsService,this)},o([n(0,s.IOptionsService)],e)}();t.BufferService=l},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var i=r(64),o=r(1),n=function(){function e(e,t){this.optionsService=e,this.bufferService=t,this._onBufferActivate=new o.EventEmitter,this._normal=new i.Buffer(!0,e,t),this._normal.fillViewportRows(),this._alt=new i.Buffer(!1,e,t),this._activeBuffer=this._normal,this.setupTabStops()}return Object.defineProperty(e.prototype,\"onBufferActivate\",{get:function(){return this._onBufferActivate.event},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"alt\",{get:function(){return this._alt},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"active\",{get:function(){return this._activeBuffer},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"normal\",{get:function(){return this._normal},enumerable:!0,configurable:!0}),e.prototype.activateNormalBuffer=function(){this._activeBuffer!==this._normal&&(this._normal.x=this._alt.x,this._normal.y=this._alt.y,this._alt.clear(),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}))},e.prototype.activateAltBuffer=function(e){this._activeBuffer!==this._alt&&(this._alt.fillViewportRows(e),this._alt.x=this._normal.x,this._alt.y=this._normal.y,this._activeBuffer=this._alt,this._onBufferActivate.fire({activeBuffer:this._alt,inactiveBuffer:this._normal}))},e.prototype.resize=function(e,t){this._normal.resize(e,t),this._alt.resize(e,t)},e.prototype.setupTabStops=function(e){this._normal.setupTabStops(e),this._alt.setupTabStops(e)},e}();t.BufferSet=n},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var o=r(65),n=r(15),s=r(4),l=r(3),c=r(66),h=r(67),u=r(17);t.MAX_BUFFER_SIZE=4294967295;var f=function(){function e(e,t,r){this._hasScrollback=e,this._optionsService=t,this._bufferService=r,this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.savedY=0,this.savedX=0,this.savedCurAttrData=n.DEFAULT_ATTR_DATA.clone(),this.savedCharset=u.DEFAULT_CHARSET,this.markers=[],this._nullCell=s.CellData.fromCharData([0,l.NULL_CELL_CHAR,l.NULL_CELL_WIDTH,l.NULL_CELL_CODE]),this._whitespaceCell=s.CellData.fromCharData([0,l.WHITESPACE_CELL_CHAR,l.WHITESPACE_CELL_WIDTH,l.WHITESPACE_CELL_CODE]),this._cols=this._bufferService.cols,this._rows=this._bufferService.rows,this.lines=new o.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}return e.prototype.getNullCell=function(e){return e?(this._nullCell.fg=e.fg,this._nullCell.bg=e.bg):(this._nullCell.fg=0,this._nullCell.bg=0),this._nullCell},e.prototype.getWhitespaceCell=function(e){return e?(this._whitespaceCell.fg=e.fg,this._whitespaceCell.bg=e.bg):(this._whitespaceCell.fg=0,this._whitespaceCell.bg=0),this._whitespaceCell},e.prototype.getBlankLine=function(e,t){return new n.BufferLine(this._bufferService.cols,this.getNullCell(e),t)},Object.defineProperty(e.prototype,\"hasScrollback\",{get:function(){return this._hasScrollback&&this.lines.maxLength>this._rows},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"isCursorInViewport\",{get:function(){var e=this.ybase+this.y-this.ydisp;return 0<=e&&e<this._rows},enumerable:!0,configurable:!0}),e.prototype._getCorrectBufferLength=function(e){if(!this._hasScrollback)return e;var r=e+this._optionsService.options.scrollback;return r>t.MAX_BUFFER_SIZE?t.MAX_BUFFER_SIZE:r},e.prototype.fillViewportRows=function(e){if(0===this.lines.length){void 0===e&&(e=n.DEFAULT_ATTR_DATA);for(var t=this._rows;t--;)this.lines.push(this.getBlankLine(e))}},e.prototype.clear=function(){this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.lines=new o.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()},e.prototype.resize=function(e,t){var r=this.getNullCell(n.DEFAULT_ATTR_DATA),o=this._getCorrectBufferLength(t);if(o>this.lines.maxLength&&(this.lines.maxLength=o),0<this.lines.length){if(this._cols<e)for(var s=0;s<this.lines.length;s++)this.lines.get(s).resize(e,r);var l=0;if(this._rows<t)for(var c=this._rows;c<t;c++)this.lines.length<t+this.ybase&&(this._optionsService.options.windowsMode?this.lines.push(new n.BufferLine(e,r)):0<this.ybase&&this.lines.length<=this.ybase+this.y+l+1?(this.ybase--,l++,0<this.ydisp&&this.ydisp--):this.lines.push(new n.BufferLine(e,r)));else for(c=this._rows;c>t;c--)this.lines.length>t+this.ybase&&(this.lines.length>this.ybase+this.y+1?this.lines.pop():(this.ybase++,this.ydisp++));if(o<this.lines.maxLength){var h=this.lines.length-o;0<h&&(this.lines.trimStart(h),this.ybase=i(this.ybase-h,0),this.ydisp=i(this.ydisp-h,0),this.savedY=i(this.savedY-h,0)),this.lines.maxLength=o}this.x=a(this.x,e-1),this.y=a(this.y,t-1),l&&(this.y+=l),this.savedX=a(this.savedX,e-1),this.scrollTop=0}if(this.scrollBottom=t-1,this._isReflowEnabled&&(this._reflow(e,t),this._cols>e))for(s=0;s<this.lines.length;s++)this.lines.get(s).resize(e,r);this._cols=e,this._rows=t},Object.defineProperty(e.prototype,\"_isReflowEnabled\",{get:function(){return this._hasScrollback&&!this._optionsService.options.windowsMode},enumerable:!0,configurable:!0}),e.prototype._reflow=function(e,t){this._cols!==e&&(e>this._cols?this._reflowLarger(e,t):this._reflowSmaller(e,t))},e.prototype._reflowLarger=function(e,t){var r=c.reflowLargerGetLinesToRemove(this.lines,this._cols,e,this.ybase+this.y,this.getNullCell(n.DEFAULT_ATTR_DATA));if(0<r.length){var i=c.reflowLargerCreateNewLayout(this.lines,r);c.reflowLargerApplyNewLayout(this.lines,i.layout),this._reflowLargerAdjustViewport(e,t,i.countRemoved)}},e.prototype._reflowLargerAdjustViewport=function(e,t,r){for(var o=this.getNullCell(n.DEFAULT_ATTR_DATA),s=r;0<s--;)0===this.ybase?(0<this.y&&this.y--,this.lines.length<t&&this.lines.push(new n.BufferLine(e,o))):(this.ydisp===this.ybase&&this.ydisp--,this.ybase--);this.savedY=i(this.savedY-r,0)},e.prototype._reflowSmaller=function(e,t){for(var r,o=this.getNullCell(n.DEFAULT_ATTR_DATA),s=[],l=0,h=this.lines.length-1;0<=h;h--)if((r=this.lines.get(h))&&(r.isWrapped||!(r.getTrimmedLength()<=e))){for(var u=[r];r.isWrapped&&0<h;)r=this.lines.get(--h),u.unshift(r);var f=this.ybase+this.y;if(!(f>=h&&f<h+u.length)){var d,p=u[u.length-1].getTrimmedLength(),_=c.reflowSmallerGetNewLineLengths(u,this._cols,e),g=_.length-u.length;d=0===this.ybase&&this.y!==this.lines.length-1?i(0,this.y-this.lines.maxLength+g):i(0,this.lines.length-this.lines.maxLength+g);for(var b,y=[],m=0;m<g;m++)b=this.getBlankLine(n.DEFAULT_ATTR_DATA,!0),y.push(b);0<y.length&&(s.push({start:h+u.length+l,newLines:y}),l+=y.length),u.push.apply(u,y);var v=_.length-1,C=_[v];0===C&&(C=_[--v]);for(var S,w=u.length-g-1,A=p;0<=w;)if(S=a(A,C),u[v].copyCellsFrom(u[w],A-S,C-S,S,!0),0==(C-=S)&&(C=_[--v]),0==(A-=S)){w--;var T=i(w,0);A=c.getWrappedLineTrimmedLength(u,T,this._cols)}for(m=0;m<u.length;m++)_[m]<e&&u[m].setCell(_[m],o);for(var E=g-d;0<E--;)0===this.ybase?this.y<t-1?(this.y++,this.lines.pop()):(this.ybase++,this.ydisp++):this.ybase<a(this.lines.maxLength,this.lines.length+l)-t&&(this.ybase===this.ydisp&&this.ydisp++,this.ybase++);this.savedY=a(this.savedY+g,this.ybase+t-1)}}if(0<s.length){var k=[],P=[];for(m=0;m<this.lines.length;m++)P.push(this.lines.get(m));var R=this.lines.length,x=R-1,D=0,L=s[D];this.lines.length=a(this.lines.maxLength,this.lines.length+l);var M=0;for(m=a(this.lines.maxLength-1,R+l-1);0<=m;m--)if(L&&L.start>x+M){for(var O=L.newLines.length-1;0<=O;O--)this.lines.set(m--,L.newLines[O]);m++,k.push({index:x+1,amount:L.newLines.length}),M+=L.newLines.length,L=s[++D]}else this.lines.set(m,P[x--]);var F=0;for(m=k.length-1;0<=m;m--)k[m].index+=F,this.lines.onInsertEmitter.fire(k[m]),F+=k[m].amount;var I=i(0,R+l-this.lines.maxLength);0<I&&this.lines.onTrimEmitter.fire(I)}},e.prototype.stringIndexToBufferIndex=function(e,t,r){for(void 0===r&&(r=!1);t;){var i=this.lines.get(e);if(!i)return[-1,-1];for(var o=r?i.getTrimmedLength():i.length,n=0;n<o;++n)if(i.get(n)[l.CHAR_DATA_WIDTH_INDEX]&&(t-=i.get(n)[l.CHAR_DATA_CHAR_INDEX].length||1),0>t)return[e,n];e++}return[e,0]},e.prototype.translateBufferLineToString=function(e,t,r,i){void 0===r&&(r=0);var o=this.lines.get(e);return o?o.translateToString(t,r,i):\"\"},e.prototype.getWrappedRangeForLine=function(e){for(var t=e,r=e;0<t&&this.lines.get(t).isWrapped;)t--;for(;r+1<this.lines.length&&this.lines.get(r+1).isWrapped;)r++;return{first:t,last:r}},e.prototype.setupTabStops=function(e){for(null==e?(this.tabs={},e=0):this.tabs[e]||(e=this.prevStop(e));e<this._cols;e+=this._optionsService.options.tabStopWidth)this.tabs[e]=!0},e.prototype.prevStop=function(e){for(null==e&&(e=this.x);!this.tabs[--e]&&0<e;);return e>=this._cols?this._cols-1:0>e?0:e},e.prototype.nextStop=function(e){for(null==e&&(e=this.x);!this.tabs[++e]&&e<this._cols;);return e>=this._cols?this._cols-1:0>e?0:e},e.prototype.addMarker=function(e){var t=this,r=new h.Marker(e);return this.markers.push(r),r.register(this.lines.onTrim((function(e){r.line-=e,0>r.line&&r.dispose()}))),r.register(this.lines.onInsert((function(e){r.line>=e.index&&(r.line+=e.amount)}))),r.register(this.lines.onDelete((function(e){r.line>=e.index&&r.line<e.index+e.amount&&r.dispose(),r.line>e.index&&(r.line-=e.amount)}))),r.register(r.onDispose((function(){return t._removeMarker(r)}))),r},e.prototype._removeMarker=function(e){this.markers.splice(this.markers.indexOf(e),1)},e.prototype.iterator=function(e,t,r,i,o){return new d(this,e,t,r,i,o)},e}();t.Buffer=f;var d=function(){function e(e,t,r,i,o,n){void 0===r&&(r=0),void 0===i&&(i=e.lines.length),void 0===o&&(o=0),void 0===n&&(n=0),this._buffer=e,this._trimRight=t,this._startIndex=r,this._endIndex=i,this._startOverscan=o,this._endOverscan=n,0>this._startIndex&&(this._startIndex=0),this._endIndex>this._buffer.lines.length&&(this._endIndex=this._buffer.lines.length),this._current=this._startIndex}return e.prototype.hasNext=function(){return this._current<this._endIndex},e.prototype.next=function(){var e=this._buffer.getWrappedRangeForLine(this._current);e.first<this._startIndex-this._startOverscan&&(e.first=this._startIndex-this._startOverscan),e.last>this._endIndex+this._endOverscan&&(e.last=this._endIndex+this._endOverscan),e.first=i(e.first,0),e.last=a(e.last,this._buffer.lines.length);for(var t=\"\",r=e.first;r<=e.last;++r)t+=this._buffer.translateBufferLineToString(r,this._trimRight);return this._current=e.last+1,{range:e,content:t}},e}();t.BufferStringIterator=d},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var i=r(1),o=function(){function e(e){this._maxLength=e,this.onDeleteEmitter=new i.EventEmitter,this.onInsertEmitter=new i.EventEmitter,this.onTrimEmitter=new i.EventEmitter,this._array=Array(this._maxLength),this._startIndex=0,this._length=0}return Object.defineProperty(e.prototype,\"onDelete\",{get:function(){return this.onDeleteEmitter.event},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"onInsert\",{get:function(){return this.onInsertEmitter.event},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"onTrim\",{get:function(){return this.onTrimEmitter.event},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"maxLength\",{get:function(){return this._maxLength},set:function(e){if(this._maxLength!==e){for(var t=Array(e),r=0;r<a(e,this.length);r++)t[r]=this._array[this._getCyclicIndex(r)];this._array=t,this._maxLength=e,this._startIndex=0}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"length\",{get:function(){return this._length},set:function(e){if(e>this._length)for(var t=this._length;t<e;t++)this._array[t]=void 0;this._length=e},enumerable:!0,configurable:!0}),e.prototype.get=function(e){return this._array[this._getCyclicIndex(e)]},e.prototype.set=function(e,t){this._array[this._getCyclicIndex(e)]=t},e.prototype.push=function(e){this._array[this._getCyclicIndex(this._length)]=e,this._length===this._maxLength?(this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1)):this._length++},e.prototype.recycle=function(){if(this._length!==this._maxLength)throw new Error(\"Can only recycle when the buffer is full\");return this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1),this._array[this._getCyclicIndex(this._length-1)]},Object.defineProperty(e.prototype,\"isFull\",{get:function(){return this._length===this._maxLength},enumerable:!0,configurable:!0}),e.prototype.pop=function(){return this._array[this._getCyclicIndex(this._length---1)]},e.prototype.splice=function(e,t){for(var r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(t){for(var o=e;o<this._length-t;o++)this._array[this._getCyclicIndex(o)]=this._array[this._getCyclicIndex(o+t)];this._length-=t}for(o=this._length-1;o>=e;o--)this._array[this._getCyclicIndex(o+r.length)]=this._array[this._getCyclicIndex(o)];for(o=0;o<r.length;o++)this._array[this._getCyclicIndex(e+o)]=r[o];if(this._length+r.length>this._maxLength){var n=this._length+r.length-this._maxLength;this._startIndex+=n,this._length=this._maxLength,this.onTrimEmitter.fire(n)}else this._length+=r.length},e.prototype.trimStart=function(e){e>this._length&&(e=this._length),this._startIndex+=e,this._length-=e,this.onTrimEmitter.fire(e)},e.prototype.shiftElements=function(e,t,r){if(!(0>=t)){if(0>e||e>=this._length)throw new Error(\"start argument out of range\");if(0>e+r)throw new Error(\"Cannot shift elements in list beyond index 0\");if(0<r){for(var i=t-1;0<=i;i--)this.set(e+i+r,this.get(e+i));var o=e+t+r-this._length;if(0<o)for(this._length+=o;this._length>this._maxLength;)this._length--,this._startIndex++,this.onTrimEmitter.fire(1)}else for(i=0;i<t;i++)this.set(e+i+r,this.get(e+i))}},e.prototype._getCyclicIndex=function(e){return(this._startIndex+e)%this._maxLength},e}();t.CircularList=o},function(e,t){\"use strict\";function r(e,t,r){if(t===e.length-1)return e[t].getTrimmedLength();var i=!e[t].hasContent(r-1)&&1===e[t].getWidth(r-1),o=2===e[t+1].getWidth(0);return i&&o?r-1:r}Object.defineProperty(t,\"__esModule\",{value:!0}),t.reflowLargerGetLinesToRemove=function(e,t,i,o,n){for(var s=[],l=0;l<e.length-1;l++){var c=l,h=e.get(++c);if(h.isWrapped){for(var u=[e.get(l)];c<e.length&&h.isWrapped;)u.push(h),h=e.get(++c);if(o>=l&&o<c)l+=u.length-1;else{for(var f=0,d=r(u,f,t),p=1,_=0;p<u.length;){var g=r(u,p,t),b=a(g-_,i-d);u[f].copyCellsFrom(u[p],_,d,b,!1),(d+=b)===i&&(f++,d=0),(_+=b)===g&&(p++,_=0),0===d&&0!=f&&2===u[f-1].getWidth(i-1)&&(u[f].copyCellsFrom(u[f-1],i-1,d++,1,!1),u[f-1].setCell(i-1,n))}u[f].replaceCells(d,i,n);for(var y=0,m=u.length-1;0<m&&(m>f||0===u[m].getTrimmedLength());m--)y++;0<y&&(s.push(l+u.length-y),s.push(y)),l+=u.length-1}}}return s},t.reflowLargerCreateNewLayout=function(e,t){for(var r=[],i=0,o=t[i],n=0,s=0;s<e.length;s++)if(o===s){var a=t[++i];e.onDeleteEmitter.fire({index:s-n,amount:a}),s+=a-1,n+=a,o=t[++i]}else r.push(s);return{layout:r,countRemoved:n}},t.reflowLargerApplyNewLayout=function(e,t){for(var r=[],i=0;i<t.length;i++)r.push(e.get(t[i]));for(i=0;i<r.length;i++)e.set(i,r[i]);e.length=t.length},t.reflowSmallerGetNewLineLengths=function(e,t,i){for(var o=[],n=e.map((function(i,o){return r(e,o,t)})).reduce((function(e,t){return e+t})),s=0,a=0,l=0;l<n;){if(n-l<i){o.push(n-l);break}s+=i;var c=r(e,a,t);s>c&&(s-=c,a++);var h=2===e[a].getWidth(s-1);h&&s--;var u=h?i-1:i;o.push(u),l+=u}return o},t.getWrappedLineTrimmedLength=r},function(e,t,r){\"use strict\";var i,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,\"__esModule\",{value:!0});var n=r(1),s=function(e){function t(r){var i=e.call(this)||this;return i.line=r,i._id=t._nextId++,i.isDisposed=!1,i._onDispose=new n.EventEmitter,i}return o(t,e),Object.defineProperty(t.prototype,\"id\",{get:function(){return this._id},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"onDispose\",{get:function(){return this._onDispose.event},enumerable:!0,configurable:!0}),t.prototype.dispose=function(){this.isDisposed||(this.isDisposed=!0,this.line=-1,this._onDispose.fire())},t._nextId=1,t}(r(2).Disposable);t.Marker=s},function(e,t,r){\"use strict\";var i=this&&this.__decorate||function(e,t,r,i){var o,n=arguments.length,s=3>n?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if(\"object\"==typeof Reflect&&\"function\"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,i);else for(var a=e.length-1;0<=a;a--)(o=e[a])&&(s=(3>n?o(s):3<n?o(t,r,s):o(t,r))||s);return 3<n&&s&&Object.defineProperty(t,r,s),s},o=this&&this.__param||function(e,t){return function(r,i){t(r,i,e)}};Object.defineProperty(t,\"__esModule\",{value:!0});var n=r(5),s=r(28),a=function(){function e(e,t){this._renderService=e,this._charSizeService=t}return e.prototype.getCoords=function(e,t,r,i,o){return s.getCoords(e,t,r,i,this._charSizeService.hasValidSize,this._renderService.dimensions.actualCellWidth,this._renderService.dimensions.actualCellHeight,o)},e.prototype.getRawByteCoords=function(e,t,r,i){var o=this.getCoords(e,t,r,i);return s.getRawByteCoords(o)},i([o(0,n.IRenderService),o(1,n.ICharSizeService)],e)}();t.MouseService=a},function(e,t,r){\"use strict\";var i=this&&this.__decorate||function(e,t,r,i){var o,n=arguments.length,s=3>n?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if(\"object\"==typeof Reflect&&\"function\"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,i);else for(var a=e.length-1;0<=a;a--)(o=e[a])&&(s=(3>n?o(s):3<n?o(t,r,s):o(t,r))||s);return 3<n&&s&&Object.defineProperty(t,r,s),s},o=this&&this.__param||function(e,t){return function(r,i){t(r,i,e)}};Object.defineProperty(t,\"__esModule\",{value:!0});var n=r(0),s=r(1),a=r(31),l=Object.freeze({applicationCursorKeys:!1}),c=function(){function e(e,t,r,i){this._scrollToBottom=e,this._bufferService=t,this._logService=r,this._optionsService=i,this._onData=new s.EventEmitter,this._onUserInput=new s.EventEmitter,this.decPrivateModes=a.clone(l)}return Object.defineProperty(e.prototype,\"onData\",{get:function(){return this._onData.event},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"onUserInput\",{get:function(){return this._onUserInput.event},enumerable:!0,configurable:!0}),e.prototype.reset=function(){this.decPrivateModes=a.clone(l)},e.prototype.triggerDataEvent=function(e,t){if(void 0===t&&(t=!1),!this._optionsService.options.disableStdin){var r=this._bufferService.buffer;r.ybase!==r.ydisp&&this._scrollToBottom(),t&&this._onUserInput.fire(),this._logService.debug('sending data \"'+e+'\"',(function(){return e.split(\"\").map((function(e){return e.charCodeAt(0)}))})),this._onData.fire(e)}},i([o(1,n.IBufferService),o(2,n.ILogService),o(3,n.IOptionsService)],e)}();t.CoreService=c},function(e,t,r){\"use strict\";var i=this&&this.__decorate||function(e,t,r,i){var o,n=arguments.length,s=3>n?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if(\"object\"==typeof Reflect&&\"function\"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,i);else for(var a=e.length-1;0<=a;a--)(o=e[a])&&(s=(3>n?o(s):3<n?o(t,r,s):o(t,r))||s);return 3<n&&s&&Object.defineProperty(t,r,s),s},o=this&&this.__param||function(e,t){return function(r,i){t(r,i,e)}},n=this&&this.__spreadArrays||function(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;var i=Array(e),o=0;for(t=0;t<r;t++)for(var n=arguments[t],s=0,a=n.length;s<a;s++,o++)i[o]=n[s];return i};Object.defineProperty(t,\"__esModule\",{value:!0});var s,a=r(0);!function(e){e[e.DEBUG=0]=\"DEBUG\",e[e.INFO=1]=\"INFO\",e[e.WARN=2]=\"WARN\",e[e.ERROR=3]=\"ERROR\",e[e.OFF=4]=\"OFF\"}(s=t.LogLevel||(t.LogLevel={}));var l={debug:s.DEBUG,info:s.INFO,warn:s.WARN,error:s.ERROR,off:s.OFF},c=function(){function e(e){var t=this;this._optionsService=e,this._updateLogLevel(),this._optionsService.onOptionChange((function(e){\"logLevel\"===e&&t._updateLogLevel()}))}return e.prototype._updateLogLevel=function(){this._logLevel=l[this._optionsService.options.logLevel]},e.prototype._evalLazyOptionalParams=function(e){for(var t=0;t<e.length;t++)\"function\"==typeof e[t]&&(e[t]=e[t]())},e.prototype._log=function(e,t,r){this._evalLazyOptionalParams(r),e.call.apply(e,n([console,\"xterm.js: \"+t],r))},e.prototype.debug=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];this._logLevel<=s.DEBUG&&this._log(console.log,e,t)},e.prototype.info=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];this._logLevel<=s.INFO&&this._log(console.info,e,t)},e.prototype.warn=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];this._logLevel<=s.WARN&&this._log(console.warn,e,t)},e.prototype.error=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];this._logLevel<=s.ERROR&&this._log(console.error,e,t)},i([o(0,a.IOptionsService)],e)}();t.LogService=c},function(e,t,r){\"use strict\";var i=this&&this.__decorate||function(e,t,r,i){var o,n=arguments.length,s=3>n?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if(\"object\"==typeof Reflect&&\"function\"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,i);else for(var a=e.length-1;0<=a;a--)(o=e[a])&&(s=(3>n?o(s):3<n?o(t,r,s):o(t,r))||s);return 3<n&&s&&Object.defineProperty(t,r,s),s},o=this&&this.__param||function(e,t){return function(r,i){t(r,i,e)}};Object.defineProperty(t,\"__esModule\",{value:!0});var n=r(0),s=function(){function e(e){this._bufferService=e,this.clearRange()}return Object.defineProperty(e.prototype,\"start\",{get:function(){return this._start},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"end\",{get:function(){return this._end},enumerable:!0,configurable:!0}),e.prototype.clearRange=function(){this._start=this._bufferService.buffer.y,this._end=this._bufferService.buffer.y},e.prototype.markDirty=function(e){e<this._start?this._start=e:e>this._end&&(this._end=e)},e.prototype.markRangeDirty=function(e,t){if(e>t){var r=e;e=t,t=r}e<this._start&&(this._start=e),t>this._end&&(this._end=t)},e.prototype.markAllDirty=function(){this.markRangeDirty(0,this._bufferService.rows-1)},i([o(0,n.IBufferService)],e)}();t.DirtyRowService=s},function(e,t,r){\"use strict\";var i=this&&this.__spreadArrays||function(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;var i=Array(e),o=0;for(t=0;t<r;t++)for(var n=arguments[t],s=0,a=n.length;s<a;s++,o++)i[o]=n[s];return i};Object.defineProperty(t,\"__esModule\",{value:!0});var o=r(0),n=r(13),s=function(){function e(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._entries=new Map;for(var r=0,i=e;r<i.length;r++){var o=i[r],n=o[0],s=o[1];this.set(n,s)}}return e.prototype.set=function(e,t){var r=this._entries.get(e);return this._entries.set(e,t),r},e.prototype.forEach=function(e){this._entries.forEach((function(t,r){return e(r,t)}))},e.prototype.has=function(e){return this._entries.has(e)},e.prototype.get=function(e){return this._entries.get(e)},e}();t.ServiceCollection=s;var a=function(){function e(){this._services=new s,this._services.set(o.IInstantiationService,this)}return e.prototype.setService=function(e,t){this._services.set(e,t)},e.prototype.createInstance=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];for(var o=n.getServiceDependencies(e).sort((function(e,t){return e.index-t.index})),s=[],a=0,l=o;a<l.length;a++){var c=l[a],h=this._services.get(c.id);if(!h)throw new Error(\"[createInstance] \"+e.name+\" depends on UNKNOWN service \"+c.id+\".\");s.push(h)}var u=0<o.length?o[0].index:t.length;if(t.length!==u)throw new Error(\"[createInstance] First service dependency of \"+e.name+\" at position \"+(u+1)+\" conflicts with \"+t.length+\" static arguments\");return new(e.bind.apply(e,i([void 0],i(t,s))))},e}();t.InstantiationService=a},function(e,t,r){\"use strict\";function i(e,t){var r=(e.ctrl?16:0)|(e.shift?4:0)|(e.alt?8:0);return 4===e.button?(r|=64,r|=e.action):(r|=3&e.button,4&e.button&&(r|=64),8&e.button&&(r|=128),32===e.action?r|=32:0!==e.action||t||(r|=3)),r}var o=this&&this.__decorate||function(e,t,r,i){var o,n=arguments.length,s=3>n?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if(\"object\"==typeof Reflect&&\"function\"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,i);else for(var a=e.length-1;0<=a;a--)(o=e[a])&&(s=(3>n?o(s):3<n?o(t,r,s):o(t,r))||s);return 3<n&&s&&Object.defineProperty(t,r,s),s},n=this&&this.__param||function(e,t){return function(r,i){t(r,i,e)}};Object.defineProperty(t,\"__esModule\",{value:!0});var s=r(0),a=r(1),c={NONE:{events:0,restrict:function(){return!1}},X10:{events:1,restrict:function(e){return 4!==e.button&&1===e.action&&(e.ctrl=!1,e.alt=!1,e.shift=!1,!0)}},VT200:{events:19,restrict:function(e){return 32!==e.action}},DRAG:{events:23,restrict:function(e){return 32!==e.action||3!==e.button}},ANY:{events:31,restrict:function(){return!0}}},h=l,u={DEFAULT:function(e){var t=[i(e,!1)+32,e.col+32,e.row+32];return t=t.map((function(e){return 127<e?127:e})),\"\x1b[M\"+h(t[0])+h(t[1])+h(t[2])},SGR:function(e){var t=0===e.action&&4!==e.button?\"m\":\"M\";return\"\x1b[<\"+i(e,!0)+\";\"+e.col+\";\"+e.row+t}},f=function(){function e(e,t){var r=this;this._bufferService=e,this._coreService=t,this._protocols={},this._encodings={},this._activeProtocol=\"\",this._activeEncoding=\"\",this._onProtocolChange=new a.EventEmitter,this._lastEvent=null,Object.keys(c).forEach((function(e){return r.addProtocol(e,c[e])})),Object.keys(u).forEach((function(e){return r.addEncoding(e,u[e])})),this.reset()}return e.prototype.addProtocol=function(e,t){this._protocols[e]=t},e.prototype.addEncoding=function(e,t){this._encodings[e]=t},Object.defineProperty(e.prototype,\"activeProtocol\",{get:function(){return this._activeProtocol},set:function(e){if(!this._protocols[e])throw new Error('unknown protocol \"'+e+'\"');this._activeProtocol=e,this._onProtocolChange.fire(this._protocols[e].events)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"activeEncoding\",{get:function(){return this._activeEncoding},set:function(e){if(!this._encodings[e])throw new Error('unknown encoding \"'+e+'\"');this._activeEncoding=e},enumerable:!0,configurable:!0}),e.prototype.reset=function(){this.activeProtocol=\"NONE\",this.activeEncoding=\"DEFAULT\",this._lastEvent=null},Object.defineProperty(e.prototype,\"onProtocolChange\",{get:function(){return this._onProtocolChange.event},enumerable:!0,configurable:!0}),e.prototype.triggerMouseEvent=function(e){if(0>e.col||e.col>=this._bufferService.cols||0>e.row||e.row>=this._bufferService.rows)return!1;if(4===e.button&&32===e.action)return!1;if(3===e.button&&32!==e.action)return!1;if(4!==e.button&&(2===e.action||3===e.action))return!1;if(e.col++,e.row++,32===e.action&&this._lastEvent&&this._compareEvents(this._lastEvent,e))return!1;if(!this._protocols[this._activeProtocol].restrict(e))return!1;var t=this._encodings[this._activeEncoding](e);return this._coreService.triggerDataEvent(t,!0),this._lastEvent=e,!0},e.prototype.explainEvents=function(e){return{DOWN:!!(1&e),UP:!!(2&e),DRAG:!!(4&e),MOVE:!!(8&e),WHEEL:!!(16&e)}},e.prototype._compareEvents=function(e,t){return e.col===t.col&&e.row===t.row&&e.button===t.button&&e.action===t.action&&e.ctrl===t.ctrl&&e.alt===t.alt&&e.shift===t.shift},o([n(0,s.IBufferService),n(1,s.ICoreService)],e)}();t.CoreMouseService=f},function(e,t){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var r=function(){function e(e){this._action=e,this._writeBuffer=[],this._callbacks=[],this._pendingData=0,this._bufferOffset=0}return e.prototype.writeSync=function(e){if(this._writeBuffer.length){for(var t=this._bufferOffset;t<this._writeBuffer.length;++t){var r=this._writeBuffer[t],i=this._callbacks[t];this._action(r),i&&i()}this._writeBuffer=[],this._callbacks=[],this._pendingData=0,this._bufferOffset=2147483647}this._action(e)},e.prototype.write=function(e,t){var r=this;if(5e7<this._pendingData)throw new Error(\"write data discarded, use flow control to avoid losing data\");this._writeBuffer.length||(this._bufferOffset=0,setTimeout((function(){return r._innerWrite()}))),this._pendingData+=e.length,this._writeBuffer.push(e),this._callbacks.push(t)},e.prototype._innerWrite=function(){for(var e=this,t=Date.now();this._writeBuffer.length>this._bufferOffset;){var r=this._writeBuffer[this._bufferOffset],i=this._callbacks[this._bufferOffset];if(this._bufferOffset++,this._action(r),this._pendingData-=r.length,i&&i(),12<=Date.now()-t)break}this._writeBuffer.length>this._bufferOffset?(50<this._bufferOffset&&(this._writeBuffer=this._writeBuffer.slice(this._bufferOffset),this._callbacks=this._callbacks.slice(this._bufferOffset),this._bufferOffset=0),setTimeout((function(){return e._innerWrite()}),0)):(this._writeBuffer=[],this._callbacks=[],this._pendingData=0,this._bufferOffset=0)},e}();t.WriteBuffer=r},function(e,t){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var r=function(){function e(){this._addons=[]}return e.prototype.dispose=function(){for(var e=this._addons.length-1;0<=e;e--)this._addons[e].instance.dispose()},e.prototype.loadAddon=function(e,t){var r=this,i={instance:t,dispose:t.dispose,isDisposed:!1};this._addons.push(i),t.dispose=function(){return r._wrappedAddonDispose(i)},t.activate(e)},e.prototype._wrappedAddonDispose=function(e){if(!e.isDisposed){for(var t=-1,r=0;r<this._addons.length;r++)if(this._addons[r]===e){t=r;break}if(-1===t)throw new Error(\"Could not dispose an addon that has not been loaded\");e.isDisposed=!0,e.dispose.apply(e.instance),this._addons.splice(t,1)}},e}();t.AddonManager=r}])},e.exports=t()},function(e){var t=Math.max,r=Math.floor;window,e.exports=function(e){function t(i){if(r[i])return r[i].exports;var o=r[i]={i:i,l:!1,exports:{}};return e[i].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var r={};return t.m=e,t.c=r,t.d=function(e,r,i){t.o(e,r)||Object.defineProperty(e,r,{enumerable:!0,get:i})},t.r=function(e){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(e,\"__esModule\",{value:!0})},t.t=function(e,r){if(1&r&&(e=t(e)),8&r)return e;if(4&r&&\"object\"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(t.r(i),Object.defineProperty(i,\"default\",{enumerable:!0,value:e}),2&r&&\"string\"!=typeof e)for(var o in e)t.d(i,o,function(t){return e[t]}.bind(null,o));return i},t.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,\"a\",r),r},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p=\"\",t(t.s=0)}([function(e,i){\"use strict\";Object.defineProperty(i,\"__esModule\",{value:!0});var o=function(){function e(){}return e.prototype.activate=function(e){this._terminal=e},e.prototype.dispose=function(){},e.prototype.fit=function(){var e=this.proposeDimensions();if(e&&this._terminal){var t=this._terminal._core;this._terminal.rows===e.rows&&this._terminal.cols===e.cols||(t._renderService.clear(),this._terminal.resize(e.cols,e.rows))}},e.prototype.proposeDimensions=function(){if(this._terminal&&this._terminal.element&&this._terminal.element.parentElement){var e=this._terminal._core,i=window.getComputedStyle(this._terminal.element.parentElement),o=parseInt(i.getPropertyValue(\"height\")),n=t(0,parseInt(i.getPropertyValue(\"width\"))),s=window.getComputedStyle(this._terminal.element),a=o-(parseInt(s.getPropertyValue(\"padding-top\"))+parseInt(s.getPropertyValue(\"padding-bottom\"))),l=n-(parseInt(s.getPropertyValue(\"padding-right\"))+parseInt(s.getPropertyValue(\"padding-left\")))-e.viewport.scrollBarWidth;return{cols:t(2,r(l/e._renderService.dimensions.actualCellWidth)),rows:t(1,r(a/e._renderService.dimensions.actualCellHeight))}}},e}();i.FitAddon=o}])},function(e,t){\"use strict\";\n/*!\n * libdot (https://npmjs.com/package/libdot)\n * @license BSD-3-Clause\n * @version 3.0.0\n * ==libdot/LICENSE==\n * Copyright (c) 2006-2009 The Chromium OS Authors. All rights reserved.\n * \n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n * \n * 1. Redistributions of source code must retain the above copyright notice,\n *    this list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright\n *    notice, this list of conditions and the following disclaimer in the\n *    documentation and/or other materials provided with the distribution.\n * 3. Neither the name of Google Inc. nor the names of its\n *    contributors may be used to endorse or promote products derived from\n *    this software without specific prior written permission.\n * \n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\"\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE\n * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE\n * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\n * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF\n * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS\n * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN\n * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\n * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\n * POSSIBILITY OF SUCH DAMAGE.\n */var r=String.fromCharCode;t.UTF8Decoder=function(){this.bytesLeft=0,this.codePoint=0,this.lowerBound=0},t.UTF8Decoder.prototype.decode=function(e){for(var t,i=\"\",o=0;o<e.length;o++)if(t=e.charCodeAt(o),0==this.bytesLeft)127>=t?i+=e.charAt(o):192<=t&&223>=t?(this.codePoint=t-192,this.bytesLeft=1,this.lowerBound=128):224<=t&&239>=t?(this.codePoint=t-224,this.bytesLeft=2,this.lowerBound=2048):240<=t&&247>=t?(this.codePoint=t-240,this.bytesLeft=3,this.lowerBound=65536):248<=t&&251>=t?(this.codePoint=t-248,this.bytesLeft=4,this.lowerBound=2097152):252<=t&&253>=t?(this.codePoint=t-252,this.bytesLeft=5,this.lowerBound=67108864):i+=\"�\";else if(128<=t&&191>=t){if(this.bytesLeft--,this.codePoint=(this.codePoint<<6)+(t-128),0==this.bytesLeft){var n=this.codePoint;n<this.lowerBound||55296<=n&&57343>=n||1114111<n?i+=\"�\":65536>n?i+=r(n):i+=r(55296+(1023&(n-=65536)>>>10),56320+(1023&n))}}else i+=\"�\",this.bytesLeft=0,o--;return i}},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var i=r(0);console.log(\"hterm: before lib.init\"),i.lib.init((function(){console.log(\"lib.init\")})),console.log(\"hterm: after lib.init\");var o=function(){function e(e){var t=this;this.elem=e,i.hterm.defaultStorage=new i.lib.Storage.Memory,this.term=new i.hterm.Terminal,this.term.onTerminalReady=function(){var e=t.term.io.push();e.onVTKeystroke=function(){},e.sendString=function(){},e.onTerminalResize=function(){}},this.term.decorate(document.querySelector(\"#terminal\")),this.term.installKeyboard()}return e.prototype.info=function(){return{columns:this.columns,rows:this.rows}},e.prototype.output=function(e){null!=this.term.io&&this.term.io.writeUTF8(e)},e.prototype.showMessage=function(e,t){this.message=e,0<t?this.term.io.showOverlay(e,t):this.term.io.showOverlay(e,null)},e.prototype.removeMessage=function(){this.term.io.showOverlay(this.message,0)},e.prototype.setWindowTitle=function(e){this.term.setWindowTitle(e)},e.prototype.setPreferences=function(e){var t=this;Object.keys(e).forEach((function(r){t.term.getPrefs().set(r,e[r])}))},e.prototype.onInput=function(e){this.term.io.onVTKeystroke=function(t){e(t)},this.term.io.sendString=function(t){e(t)}},e.prototype.onResize=function(e){var t=this;this.term.io.onTerminalResize=function(r,i){t.columns=r,t.rows=i,e(r,i)}},e.prototype.deactivate=function(){this.term.io.onVTKeystroke=function(){},this.term.io.sendString=function(){},this.term.io.onTerminalResize=function(){},this.term.uninstallKeyboard()},e.prototype.reset=function(){this.removeMessage(),this.term.installKeyboard()},e.prototype.close=function(){this.term.uninstallKeyboard()},e}();t.Hterm=o},function(e,t){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),t.protocols=[\"webtty\"],t.msgInputUnknown=\"0\",t.msgInput=\"1\",t.msgPing=\"2\",t.msgResizeTerminal=\"3\",t.msgClientDead=\"4\",t.msgUnknownOutput=\"0\",t.msgOutput=\"1\",t.msgPong=\"2\",t.msgSlaveDead=\"3\";var r=function(){function e(e,t){this.term=e,this.connectionFactory=t}return e.prototype.open=function(){var e,r=this,i=this.connectionFactory.create();return i.onOpen((function(){var o=r.term.info(),n=function(e,r){i.send(t.msgResizeTerminal+JSON.stringify({Cols:e,Rows:r}))};r.term.onResize(n),n(o.columns,o.rows),r.term.onInput((function(e){i.send(t.msgInput+e)})),e=setInterval((function(){i.send(t.msgPing)}),3e4)})),i.onReceive((function(e){var o=e.slice(1);switch(e[0]){case t.msgOutput:r.term.output(o);break;case t.msgPong:break;case t.msgSlaveDead:i.close()}})),i.onClose((function(){clearInterval(e),r.term.deactivate(),r.term.showMessage(\"Connection Closed\",0)})),i.open(),function(){i.close()}},e}();t.WebTTY=r},function(e,t){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var r=function(){function e(e,t){this.url=e,this.protocols=t}return e.prototype.create=function(){return new i(this.url,this.protocols)},e}();t.ConnectionFactory=r;var i=function(){function e(e,t){this.ws=new WebSocket(e,t),this.ws.binaryType=\"arraybuffer\"}return e.prototype.open=function(){console.log(\"binaryType = \",this.ws.binaryType)},e.prototype.close=function(){this.ws.close()},e.prototype.send=function(e){this.ws.send((new TextEncoder).encode(e)),console.log(\"send\",e)},e.prototype.isOpen=function(){return this.ws.readyState==WebSocket.CONNECTING||this.ws.readyState==WebSocket.OPEN},e.prototype.onOpen=function(e){this.ws.onopen=function(){e()}},e.prototype.onReceive=function(e){this.ws.onmessage=function(t){e(function(e){return String.fromCharCode.apply(null,new Uint8Array(e))}(t.data))}},e.prototype.onClose=function(e){this.ws.onclose=function(){e()}},e}();t.Connection=i}]);\n//# sourceMappingURL=gotty-bundle.js.map",
	}
)
